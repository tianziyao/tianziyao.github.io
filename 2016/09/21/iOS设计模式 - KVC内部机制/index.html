<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="è®¾è®¡æ¨¡å¼,KVC," />





  <link rel="alternate" href="/atom.xml" title="iSTian'notes" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="å‰ä¸¤å¤©é¢è¯•åœ¨KVCçš„é—®é¢˜ä¸Šæœ‰æ‰€æ¬ ç¼ºï¼Œå¯¹äºåº•å±‚äº†è§£ä¸å¤Ÿï¼Œå› æ­¤å†™ä¸‹è¿™ç¯‡æ–‡ç« ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯ä½¿ç”¨KVCå¯¹Keyçš„æœç´¢åŸç†ï¼Œè‡ªå·±å†™ä»£ç æ¥å®ç°KVCã€‚
å…³äºAppleæ˜¯å¦‚ä½•å®ç°KVCè¿™ä¸ªé—®é¢˜ï¼š

ğŸ™ƒ ğŸ™ƒ æˆ‘ä¹Ÿä¸çŸ¥é“â€¦â€¦ 

å› ä¸ºæ²¡æœ‰åŠæ³•æ‰“å°å‡ºè°ƒç”¨è¿‡çš„å‡½æ•°ï¼Œæ‰€ä»¥KVCèƒŒåçš„ä¸€åˆ‡è¿˜æ˜¯å¾ˆç¥ç§˜çš„ï¼Œåªèƒ½é€šè¿‡å‡ ä¸ªæœ‰é™çš„APIæ¥çŒœæƒ³ï¼Œ
å¯¹äºsetValue:forKey: ï¼Œåœ¨setterå­˜åœ¨çš„æƒ…å†µï¼ŒKVC ä¼šç›´æ¥å‘">
<meta property="og:type" content="article">
<meta property="og:title" content="iOSè®¾è®¡æ¨¡å¼ - KVCå†…éƒ¨æœºåˆ¶&ä½¿ç”¨åœºæ™¯">
<meta property="og:url" content="http://yoursite.com/2016/09/21/iOSè®¾è®¡æ¨¡å¼ - KVCå†…éƒ¨æœºåˆ¶/index.html">
<meta property="og:site_name" content="iSTian'notes">
<meta property="og:description" content="å‰ä¸¤å¤©é¢è¯•åœ¨KVCçš„é—®é¢˜ä¸Šæœ‰æ‰€æ¬ ç¼ºï¼Œå¯¹äºåº•å±‚äº†è§£ä¸å¤Ÿï¼Œå› æ­¤å†™ä¸‹è¿™ç¯‡æ–‡ç« ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯ä½¿ç”¨KVCå¯¹Keyçš„æœç´¢åŸç†ï¼Œè‡ªå·±å†™ä»£ç æ¥å®ç°KVCã€‚
å…³äºAppleæ˜¯å¦‚ä½•å®ç°KVCè¿™ä¸ªé—®é¢˜ï¼š

ğŸ™ƒ ğŸ™ƒ æˆ‘ä¹Ÿä¸çŸ¥é“â€¦â€¦ 

å› ä¸ºæ²¡æœ‰åŠæ³•æ‰“å°å‡ºè°ƒç”¨è¿‡çš„å‡½æ•°ï¼Œæ‰€ä»¥KVCèƒŒåçš„ä¸€åˆ‡è¿˜æ˜¯å¾ˆç¥ç§˜çš„ï¼Œåªèƒ½é€šè¿‡å‡ ä¸ªæœ‰é™çš„APIæ¥çŒœæƒ³ï¼Œ
å¯¹äºsetValue:forKey: ï¼Œåœ¨setterå­˜åœ¨çš„æƒ…å†µï¼ŒKVC ä¼šç›´æ¥å‘">
<meta property="og:updated_time" content="2016-09-21T09:27:39.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOSè®¾è®¡æ¨¡å¼ - KVCå†…éƒ¨æœºåˆ¶&ä½¿ç”¨åœºæ™¯">
<meta name="twitter:description" content="å‰ä¸¤å¤©é¢è¯•åœ¨KVCçš„é—®é¢˜ä¸Šæœ‰æ‰€æ¬ ç¼ºï¼Œå¯¹äºåº•å±‚äº†è§£ä¸å¤Ÿï¼Œå› æ­¤å†™ä¸‹è¿™ç¯‡æ–‡ç« ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯ä½¿ç”¨KVCå¯¹Keyçš„æœç´¢åŸç†ï¼Œè‡ªå·±å†™ä»£ç æ¥å®ç°KVCã€‚
å…³äºAppleæ˜¯å¦‚ä½•å®ç°KVCè¿™ä¸ªé—®é¢˜ï¼š

ğŸ™ƒ ğŸ™ƒ æˆ‘ä¹Ÿä¸çŸ¥é“â€¦â€¦ 

å› ä¸ºæ²¡æœ‰åŠæ³•æ‰“å°å‡ºè°ƒç”¨è¿‡çš„å‡½æ•°ï¼Œæ‰€ä»¥KVCèƒŒåçš„ä¸€åˆ‡è¿˜æ˜¯å¾ˆç¥ç§˜çš„ï¼Œåªèƒ½é€šè¿‡å‡ ä¸ªæœ‰é™çš„APIæ¥çŒœæƒ³ï¼Œ
å¯¹äºsetValue:forKey: ï¼Œåœ¨setterå­˜åœ¨çš„æƒ…å†µï¼ŒKVC ä¼šç›´æ¥å‘">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'åšä¸»'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/2016/09/21/iOSè®¾è®¡æ¨¡å¼ - KVCå†…éƒ¨æœºåˆ¶/"/>

  <title> iOSè®¾è®¡æ¨¡å¼ - KVCå†…éƒ¨æœºåˆ¶&ä½¿ç”¨åœºæ™¯ | iSTian'notes </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">iSTian'notes</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Quick notes</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                iOSè®¾è®¡æ¨¡å¼ - KVCå†…éƒ¨æœºåˆ¶&ä½¿ç”¨åœºæ™¯
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-09-21T02:24:00+08:00" content="2016-09-21">
              2016-09-21
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/21/iOSè®¾è®¡æ¨¡å¼ - KVCå†…éƒ¨æœºåˆ¶/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/21/iOSè®¾è®¡æ¨¡å¼ - KVCå†…éƒ¨æœºåˆ¶/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>å‰ä¸¤å¤©é¢è¯•åœ¨KVCçš„é—®é¢˜ä¸Šæœ‰æ‰€æ¬ ç¼ºï¼Œå¯¹äºåº•å±‚äº†è§£ä¸å¤Ÿï¼Œå› æ­¤å†™ä¸‹è¿™ç¯‡æ–‡ç« ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯ä½¿ç”¨KVCå¯¹Keyçš„æœç´¢åŸç†ï¼Œè‡ªå·±å†™ä»£ç æ¥å®ç°KVCã€‚</p>
<p>å…³äºAppleæ˜¯å¦‚ä½•å®ç°KVCè¿™ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p>ğŸ™ƒ ğŸ™ƒ æˆ‘ä¹Ÿä¸çŸ¥é“â€¦â€¦ </p>
</blockquote>
<p>å› ä¸ºæ²¡æœ‰åŠæ³•æ‰“å°å‡ºè°ƒç”¨è¿‡çš„å‡½æ•°ï¼Œæ‰€ä»¥KVCèƒŒåçš„ä¸€åˆ‡è¿˜æ˜¯å¾ˆç¥ç§˜çš„ï¼Œåªèƒ½é€šè¿‡å‡ ä¸ªæœ‰é™çš„APIæ¥çŒœæƒ³ï¼Œ</p>
<p>å¯¹äº<code>setValue:forKey:</code> ï¼Œåœ¨setterå­˜åœ¨çš„æƒ…å†µï¼ŒKVC ä¼šç›´æ¥å‘é€<code>set&lt;Key&gt;:</code> æ¶ˆæ¯èµ‹å€¼ï¼›</p>
<p>åœ¨setterä¸åœ¨çš„æƒ…å†µä¸‹ï¼Œä¸”<code>accessInstanceVariablesDirectly</code>æ–¹æ³•æ˜¯trueçš„æƒ…å†µä¸‹ï¼Œä¼šæŒ‰<code>ï¼ˆ_&lt;key&gt;, _&lt;isKey&gt;, &lt;key&gt;, is&lt;Key&gt;ï¼‰</code>çš„é¡ºåºå»æŸ¥æ‰¾å®ä¾‹å˜é‡ï¼Œæ£€æŸ¥å…¶æ˜¯å¦å­˜åœ¨ä¹‹åé€šè¿‡<code>object_setIvar</code>ç»™å®ƒèµ‹å€¼ã€‚</p>
<p>å¦‚æœéƒ½æ²¡æœ‰å°±è°ƒç”¨<code>setValue:forUNdefinedKey:</code>æŠ›å‡ºé”™è¯¯ã€‚</p>
<p>å¯¹äº<code>setValue:forKeyPath:</code>ï¼Œé€’å½’åœ°æ£€æŸ¥keyPathä¸­çš„å±æ€§æ˜¯å¦å­˜åœ¨ï¼Œåˆ°è¾¾ç›®æ ‡è·¯å¾„æ—¶å†è°ƒç”¨<code>setValue:forKey:</code> å®Œæˆèµ‹å€¼ã€‚</p>
<p>å¤§è‡´ä¸Šæˆ‘å‡†å¤‡æŒ‰ä¸Šé¢çš„æ‰§è¡Œé¡ºåºè¿›è¡Œå®ç°ï¼Œç”±äºé›†åˆã€å­—å…¸å’Œæ¨¡å‹ã€KeyPathçš„æƒ…å†µæ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æˆ‘åªå®ç°äº†æœ€æ™®é€šçš„å­˜å€¼å’Œå–å€¼ï¼Œä¸‹é¢è¿›å…¥æ­£é¢˜ï¼š</p>
   <a id="more"></a>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">MyError</span>: <span class="title">ErrorType</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> <span class="type">NotExist</span></div><div class="line">    <span class="keyword">case</span> <span class="type">NotNSObjectType</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">NSObject</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">setMyValue</span><span class="params">(value value: AnyObject?, forKey key: String?)</span></span> <span class="keyword">throws</span> &#123;</div><div class="line">        </div><div class="line">        <span class="comment">/**åˆ¤æ–­Keyæ˜¯å¦æ˜¯ç©ºå€¼*/</span></div><div class="line">        <span class="keyword">if</span> key!.isEmpty &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="type">MyError</span>.<span class="type">NotExist</span></div><div class="line">        &#125;</div><div class="line">        <span class="comment">/**åˆ¤æ–­Valueæ˜¯å¦æ˜¯ç©ºå€¼*/</span></div><div class="line">        <span class="keyword">if</span> value == <span class="literal">nil</span>  &#123;</div><div class="line">            <span class="keyword">self</span>.setMyNilValue(key!)</div><div class="line">            <span class="keyword">return</span></div><div class="line">        &#125;</div><div class="line">        <span class="comment">/**åˆ¤æ–­Valueæ˜¯å¦æ˜¯NSObjectç±»å‹*/</span></div><div class="line">        <span class="keyword">if</span> !(value <span class="keyword">is</span> <span class="type">NSObject</span>) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="type">MyError</span>.<span class="type">NotNSObjectType</span></div><div class="line">        &#125;</div><div class="line">        <span class="comment">/**åˆ¤æ–­æ˜¯å¦å­˜åœ¨setKeyæ–¹æ³•ï¼Œå¦‚æœæœ‰æ‰§è¡Œè¿™ä¸ªæ–¹æ³•*/</span></div><div class="line">        <span class="keyword">let</span> funcName = <span class="string">"set"</span> + (key?.capitalizedString)! + <span class="string">":"</span></div><div class="line">        </div><div class="line">        <span class="keyword">let</span> selector = <span class="type">NSSelectorFromString</span>(funcName)</div><div class="line">        <span class="comment">//let selector = Selector.init(funcName)</span></div><div class="line">        <span class="comment">//let selector = #selector(Address.setCity(_:))</span></div><div class="line">        <span class="comment">//print(self.respondsToSelector(selector))</span></div><div class="line">        </div><div class="line">        <span class="keyword">if</span> <span class="keyword">self</span>.respondsToSelector(selector)&#123;</div><div class="line">            <span class="keyword">self</span>.performSelector((selector), withObject: value)</div><div class="line">            <span class="comment">//print("æ‰§è¡ŒsetKeyæ–¹æ³•")</span></div><div class="line">            <span class="keyword">return</span></div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">/**åˆ¤æ–­è¯¥ç±»ä¸­æ˜¯å¦å­˜åœ¨ keyã€_keyã€iskeyæˆå‘˜ï¼Œå¦‚æœæœ‰ç»™è¿™ä¸ªæˆå‘˜èµ‹å€¼*/</span></div><div class="line">        <span class="keyword">var</span> <span class="built_in">count</span>: <span class="type">UInt32</span> = <span class="number">0</span></div><div class="line">        <span class="keyword">var</span> flag: <span class="type">Bool</span> = <span class="literal">false</span></div><div class="line">        <span class="keyword">let</span> iVars = class_copyIvarList(<span class="keyword">self</span>.<span class="keyword">dynamicType</span>, &amp;<span class="built_in">count</span>)</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="built_in">count</span> &#123;</div><div class="line">            <span class="keyword">let</span> iVar = iVars[<span class="type">Int</span>(i)]</div><div class="line">            <span class="keyword">let</span> keyName = <span class="type">NSString</span>(<span class="type">CString</span>: ivar_getName(iVar), encoding: <span class="type">NSUTF8StringEncoding</span>)</div><div class="line">            <span class="keyword">if</span> keyName == key! || keyName == <span class="string">"_"</span> + key! || keyName == <span class="string">"is"</span> + key!&#123;</div><div class="line">                flag = <span class="literal">true</span></div><div class="line">                </div><div class="line">                object_setIvar(<span class="keyword">self</span>, iVar, value)</div><div class="line">                <span class="comment">//print("\(self) \(iVar) \(value)")</span></div><div class="line">                <span class="comment">//print("ç»™\(keyName)èµ‹å€¼")</span></div><div class="line">                <span class="keyword">break</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">/**å¦‚æœä»¥ä¸Šçš„æˆå‘˜å’Œæ–¹æ³•éƒ½ä¸å­˜åœ¨ï¼Œè°ƒç”¨æœªæ‰¾åˆ°keyçš„æ–¹æ³•*/</span></div><div class="line">        <span class="keyword">if</span> !flag &#123;</div><div class="line">            <span class="keyword">self</span>.setMyValue(value!, forUndefinedKey: key!)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">setMyNilValue</span><span class="params">(key: String?)</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"æ— æ³•ä¿®æ”¹<span class="subst">\(key)</span>çš„å€¼ï¼Œå› ä¸ºä¼ å…¥çš„æ˜¯ç©ºå€¼"</span>)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">setMyValue</span><span class="params">(value: AnyObject, forUndefinedKey key: String)</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"æ— æ³•å°†<span class="subst">\(key)</span>çš„å€¼ä¿®æ”¹ä¸ºï¼Œå› ä¸ºä¼ å…¥çš„æ˜¯ç©ºå€¼"</span>)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">myValueForKey</span><span class="params">(key: String?)</span></span> <span class="keyword">throws</span> -&gt; <span class="type">AnyObject</span>? &#123;</div><div class="line">        </div><div class="line">        <span class="comment">/**åˆ¤æ–­Keyæ˜¯å¦æ˜¯ç©ºå€¼*/</span></div><div class="line">        <span class="keyword">if</span> key!.isEmpty &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="type">MyError</span>.<span class="type">NotExist</span></div><div class="line">        &#125;</div><div class="line">        <span class="comment">/**åˆ¤æ–­æ˜¯å¦å­˜åœ¨getKeyæ–¹æ³•ï¼Œå¦‚æœæœ‰æ‰§è¡Œè¿™ä¸ªæ–¹æ³•*/</span></div><div class="line">        <span class="keyword">let</span> funcName = <span class="string">"get"</span> + (key?.capitalizedString)! + <span class="string">":"</span></div><div class="line">        <span class="keyword">let</span> selector = <span class="type">NSSelectorFromString</span>(funcName)</div><div class="line">        <span class="comment">//let selector = Selector.init(funcName)</span></div><div class="line">        <span class="comment">//let selector = #selector(Address.setCity(_:))</span></div><div class="line">        <span class="comment">//print(self.respondsToSelector(selector))</span></div><div class="line">        </div><div class="line">        <span class="keyword">if</span> <span class="keyword">self</span>.respondsToSelector(selector)&#123;</div><div class="line">            <span class="keyword">let</span> result =  <span class="keyword">self</span>.performSelector(selector)</div><div class="line">            <span class="comment">//print("æ‰§è¡ŒgetKeyæ–¹æ³•")</span></div><div class="line">            <span class="keyword">return</span> result <span class="keyword">as</span>? <span class="type">AnyObject</span></div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">/**åˆ¤æ–­è¯¥ç±»ä¸­æ˜¯å¦å­˜åœ¨ keyã€_keyã€iskeyæˆå‘˜ï¼Œå¦‚æœæœ‰ç»™è¿™ä¸ªæˆå‘˜èµ‹å€¼*/</span></div><div class="line">        <span class="keyword">var</span> <span class="built_in">count</span>: <span class="type">UInt32</span> = <span class="number">0</span></div><div class="line">        <span class="keyword">var</span> flag: <span class="type">Bool</span> = <span class="literal">false</span></div><div class="line">        <span class="keyword">let</span> iVars = class_copyIvarList(<span class="keyword">self</span>.<span class="keyword">dynamicType</span>, &amp;<span class="built_in">count</span>)</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="built_in">count</span> &#123;</div><div class="line">            <span class="keyword">let</span> iVar = iVars[<span class="type">Int</span>(i)]</div><div class="line">            <span class="keyword">let</span> keyName = <span class="type">NSString</span>(<span class="type">CString</span>: ivar_getName(iVar), encoding: <span class="type">NSUTF8StringEncoding</span>)</div><div class="line">            <span class="keyword">if</span> keyName == key! || keyName == <span class="string">"_"</span> + key! || keyName == <span class="string">"is"</span> + key!&#123;</div><div class="line">                flag = <span class="literal">true</span></div><div class="line">                <span class="built_in">print</span>(<span class="string">"å–å‡º<span class="subst">\(keyName)</span>çš„å€¼"</span>)</div><div class="line">                <span class="comment">//print("\(self) \(iVar) \(value)")</span></div><div class="line">                <span class="keyword">return</span> object_getIvar(<span class="keyword">self</span>, iVar)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">/**å¦‚æœä»¥ä¸Šçš„æˆå‘˜å’Œæ–¹æ³•éƒ½ä¸å­˜åœ¨ï¼Œè°ƒç”¨æœªæ‰¾åˆ°keyçš„æ–¹æ³•*/</span></div><div class="line">        <span class="keyword">if</span> !flag &#123;</div><div class="line">            <span class="keyword">self</span>.myValueForUndefinedKey(key!)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">nil</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">myValueForUndefinedKey</span><span class="params">(key: String)</span></span> -&gt; <span class="type">AnyObject</span>?&#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"æ— æ³•å–å‡º<span class="subst">\(key)</span>çš„å€¼ï¼Œå› ä¸ºå±æ€§ä¸å­˜åœ¨"</span>)</div><div class="line">        <span class="keyword">return</span> <span class="literal">nil</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**æ‰§è¡Œ*/</span></div><div class="line"><span class="keyword">let</span> add = <span class="type">Address</span>()</div><div class="line"></div><div class="line">add._country = <span class="string">"China"</span></div><div class="line">add._province = <span class="string">"HeBei"</span></div><div class="line">add._city = <span class="string">"ShiJiaZhuang"</span></div><div class="line">add._province = <span class="string">"ChangAnQu"</span></div><div class="line"></div><div class="line"><span class="keyword">do</span> &#123;</div><div class="line">    <span class="keyword">try</span> add.setMyValue(value: <span class="string">"BeiJing"</span>, forKey: <span class="string">"city"</span>)</div><div class="line">    <span class="keyword">try</span> add.setMyValue(value: <span class="string">"USA"</span>, forKey: <span class="string">"country"</span>)</div><div class="line">    <span class="keyword">try</span> add.setMyValue(value: <span class="string">"South"</span>, forKey: <span class="string">""</span>)</div><div class="line">    <span class="keyword">try</span> add.setMyValue(value: <span class="string">"300169"</span>, forKey: <span class="string">"postCode"</span>)</div><div class="line">    <span class="built_in">print</span>(<span class="string">"country:<span class="subst">\(add._country)</span> city:<span class="subst">\(add._city)</span> province:<span class="subst">\(add._province)</span> district<span class="subst">\(add._district)</span>"</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> <span class="type">MyError</span>.<span class="type">NotExist</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"keyæ˜¯ç©ºçš„"</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> <span class="type">MyError</span>.<span class="type">NotNSObjectType</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"valueä¸æ˜¯NSObjectç±»å‹"</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"ä¼ å€¼å‡ºé”™"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">do</span> &#123;</div><div class="line">    <span class="keyword">let</span> country = <span class="keyword">try</span> add.myValueForKey(<span class="string">"country"</span>)</div><div class="line">    <span class="keyword">let</span> city = <span class="keyword">try</span> add.myValueForKey(<span class="string">"city"</span>)</div><div class="line">    <span class="built_in">print</span>(<span class="string">"----------------/n <span class="subst">\(country)</span> <span class="subst">\(city)</span>"</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> <span class="type">MyError</span>.<span class="type">NotExist</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"keyæ˜¯ç©ºçš„"</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"å–å€¼å‡ºé”™"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä»¥ä¸Šæ˜¯æ ¹æ®KVCæ‰§è¡Œé¡ºåºè‡ªå®šä¹‰çš„ä¸€æ®µä»£ç ï¼Œå½“ç„¶ä¹Ÿçœç•¥äº†ä¸€äº›åŠŸèƒ½ï¼Œæ€»ä½“ä¸Šçš„é€»è¾‘è¿˜æ˜¯æ¯”è¾ƒæ¸…æ¥šçš„ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹é—®é¢˜ï¼Œåœ¨ä½¿ç”¨<code>object_setIvar</code>å’Œ<code>object_getIvar</code>è¿™ä¸¤ä¸ªruntimeå‡½æ•°æ—¶ï¼Œç¨‹åºä¼šé¢‘ç¹å´©æºƒï¼Œè€Œè‡ªå·±å¯¹runtimeè®¤è¯†ä¸è¶³ï¼Œä»¥åå†å®Œæ•´è¿™æ®µä»£ç å§ã€‚</p>
<p>å…³äºKVCï¼Œé™¤å»å­˜å–æ–¹æ³•ï¼Œåº•å±‚æ‰§è¡Œé¡ºåºï¼Œé”™è¯¯å¤„ç†ä»¥å¤–ï¼Œè¿˜æœ‰å‡ ç‚¹éœ€è¦äº†è§£ï¼š</p>
<h2 id="Valueåˆæ³•æ€§æ ¡éªŒ"><a href="#Valueåˆæ³•æ€§æ ¡éªŒ" class="headerlink" title="Valueåˆæ³•æ€§æ ¡éªŒ"></a>Valueåˆæ³•æ€§æ ¡éªŒ</h2><p>KVCæä¾›äº†æ ¡éªŒkeyå¯¹åº”çš„valueæ˜¯å¦åˆæ³•çš„æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">validateValue</span><span class="params">(ioValue: AutoreleasingUnsafeMutablePointer&lt;AnyObject?&gt;, forKey inKey: String)</span></span> <span class="keyword">throws</span></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">validateValue</span><span class="params">(ioValue: AutoreleasingUnsafeMutablePointer&lt;AnyObject?&gt;, forKeyPath inKeyPath: String)</span></span> <span class="keyword">throws</span></div></pre></td></tr></table></figure>
<p>å¦‚æœä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œéœ€è¦è¿›è¡Œé‡å†™ï¼Œå®ƒçš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Address</span>: <span class="title">NSObject</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> _country: <span class="type">String</span>?</div><div class="line"></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">validateValue</span><span class="params">(ioValue: AutoreleasingUnsafeMutablePointer&lt;AnyObject?&gt;, forKey inKey: String)</span></span> <span class="keyword">throws</span> &#123;</div><div class="line">        </div><div class="line">        <span class="keyword">let</span> country = ioValue.memory <span class="keyword">as</span>! <span class="type">String</span></div><div class="line">        <span class="keyword">if</span> country == <span class="string">"Janpan"</span> &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="type">MyError</span>.<span class="type">NotExist</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">throw</span> <span class="type">MyError</span>.<span class="type">Nothing</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**æ‰§è¡Œ*/</span></div><div class="line"><span class="keyword">let</span> add = <span class="type">Address</span>()</div><div class="line"><span class="keyword">var</span> value: <span class="type">AnyObject</span>? = <span class="string">"Janpan"</span></div><div class="line"></div><div class="line"><span class="keyword">do</span> &#123;</div><div class="line">    <span class="keyword">try</span> add.validateValue(&amp;value, forKey: <span class="string">"_country"</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> <span class="type">MyError</span>.<span class="type">NotExist</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"è¾“å…¥æœ‰è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥"</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> <span class="type">MyError</span>.<span class="type">Nothing</span> &#123;</div><div class="line">    add.setValue(value, forKey: <span class="string">"_country"</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> &#123;&#125;</div><div class="line"><span class="built_in">print</span>(add._country)</div><div class="line"></div><div class="line"><span class="comment">/**å½“ var value: AnyObject? = "Janpan" æ—¶è¾“å‡º*/</span></div><div class="line">è¾“å…¥æœ‰è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥</div><div class="line"><span class="literal">nil</span></div><div class="line"><span class="comment">/**å½“ var value: AnyObject? = "Chain" æ—¶è¾“å‡º*/</span></div><div class="line"><span class="type">Optional</span>(<span class="string">"China"</span>)</div></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å®ç°äº†å…ˆå¯¹ä¼ å…¥å€¼çš„åˆæ³•æ€§è¿›è¡Œæ ¡éªŒï¼Œæ— è¯¯åå†è¿›è¡Œèµ‹å€¼ï¼Œå¦‚ä¸Šé¢çš„ä»£ç ï¼Œå½“æˆ‘ä»¬éœ€è¦éªŒè¯èƒ½ä¸èƒ½ç”¨KVCè®¾å®šæŸä¸ªå€¼æ—¶ï¼Œå¯ä»¥å°†å…¶é‡å†™åè°ƒç”¨</p>
<blockquote>
<p><code>validateValue: forKey:</code></p>
</blockquote>
<p>è¿™ä¸ªæ–¹æ³•æ¥éªŒè¯ï¼Œé‚£ä¹ˆKVCå°±ä¼šç›´æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥è¿”å›ã€‚<strong>éœ€è¦æ³¨æ„çš„æ˜¯å³ä½¿é‡å†™äº†è¯¥æ–¹æ³•ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰ä¸»åŠ¨è¿›è¡Œè°ƒç”¨ï¼ŒKVCä¹Ÿä¸ä¼šä¸»åŠ¨å»åšéªŒè¯ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•éœ€è¦æ‰‹åŠ¨è°ƒç”¨ã€‚</strong></p>
<h2 id="KVCçš„åº”ç”¨åœºæ™¯"><a href="#KVCçš„åº”ç”¨åœºæ™¯" class="headerlink" title="KVCçš„åº”ç”¨åœºæ™¯"></a>KVCçš„åº”ç”¨åœºæ™¯</h2><p>ä½œä¸ºiOSå¹³å°çš„çŸ¥åé»‘é­”æ³•ï¼ŒKVCæœ‰å¾ˆå¤šå¥‡ç‰¹çš„ä½œç”¨ï¼ŒKVCåœ¨iOSå¼€å‘ä¸­æ˜¯ç»ä¸å¯å°‘çš„åˆ©å™¨ï¼Œè¿™ç§åŸºäºè¿è¡Œæ—¶çš„ç¼–ç¨‹æ–¹å¼æå¤§åœ°æé«˜äº†çµæ´»æ€§ï¼Œç®€åŒ–äº†ä»£ç ï¼Œå®ƒçš„å¸¸è§ä½œç”¨æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<h2 id="åŠ¨æ€çš„å­˜å€¼å’Œå–å€¼"><a href="#åŠ¨æ€çš„å­˜å€¼å’Œå–å€¼" class="headerlink" title="åŠ¨æ€çš„å­˜å€¼å’Œå–å€¼"></a>åŠ¨æ€çš„å­˜å€¼å’Œå–å€¼</h2><p>ğŸ™ƒ ğŸ™ƒ ğŸ™ƒ ğŸ™ƒ ğŸ™ƒ ğŸ™ƒ ğŸ™ƒ ğŸ™ƒ ğŸ™ƒ ğŸ™ƒ ğŸ™ƒ ğŸ™ƒ ğŸ™ƒ ğŸ™ƒ ğŸ™ƒ ğŸ™ƒ ğŸ™ƒ ğŸ™ƒ ğŸ™ƒ ğŸ™ƒ ğŸ™ƒ </p>
<h2 id="è®¿é—®å’Œä¿®æ”¹ç§æœ‰çš„æˆå‘˜"><a href="#è®¿é—®å’Œä¿®æ”¹ç§æœ‰çš„æˆå‘˜" class="headerlink" title="è®¿é—®å’Œä¿®æ”¹ç§æœ‰çš„æˆå‘˜"></a>è®¿é—®å’Œä¿®æ”¹ç§æœ‰çš„æˆå‘˜</h2><p>å¯¹äºç±»é‡Œçš„ç§æœ‰å±æ€§ï¼Œæ— è®ºSwiftè¿˜æ˜¯Objective-Céƒ½æ˜¯æ— æ³•ç›´æ¥è®¿é—®çš„ï¼Œä½†æ˜¯KVCæ˜¯å¯ä»¥çš„ã€‚</p>
<h2 id="Modelå’Œå­—å…¸çš„äº’ç›¸è½¬æ¢"><a href="#Modelå’Œå­—å…¸çš„äº’ç›¸è½¬æ¢" class="headerlink" title="Modelå’Œå­—å…¸çš„äº’ç›¸è½¬æ¢"></a>Modelå’Œå­—å…¸çš„äº’ç›¸è½¬æ¢</h2><p>è¿™æ˜¯KVCåˆä¸€ä¸ªå¼ºå¤§ä¹‹å¤„ï¼Œåªéœ€è¦å¾ˆå°‘çš„ä»£ç é‡å³å¯å®Œæˆå¾ˆå¤šåŠŸèƒ½ã€‚</p>
<h2 id="ä¿®æ”¹æ§ä»¶çš„å†…éƒ¨å±æ€§"><a href="#ä¿®æ”¹æ§ä»¶çš„å†…éƒ¨å±æ€§" class="headerlink" title="ä¿®æ”¹æ§ä»¶çš„å†…éƒ¨å±æ€§"></a>ä¿®æ”¹æ§ä»¶çš„å†…éƒ¨å±æ€§</h2><p>è¿™ä¹Ÿæ˜¯iOSå¼€å‘ä¸­å¿…ä¸å¯å°‘çš„å°æŠ€å·§ã€‚ä¼—æ‰€å‘¨çŸ¥å¾ˆå¤šUIæ§ä»¶éƒ½ç”±å¾ˆå¤šå†…éƒ¨UIæ§ä»¶ç»„åˆè€Œæˆçš„ï¼Œä½†æ˜¯Appleæ²¡æœ‰æä¾›è¿™è®¿é—®è¿™äº›æ§ä»¶çš„APIï¼Œè¿™æ ·æˆ‘ä»¬å°±æ— æ³•æ­£å¸¸åœ°è®¿é—®å’Œä¿®æ”¹è¿™äº›æ§ä»¶çš„æ ·å¼ã€‚</p>
<p>è€ŒKVCåœ¨å¤§å¤šæ•°æƒ…å†µå¯ä¸‹å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ¯”å¦‚ä¸ªæ€§åŒ–UITextFieldä¸­çš„placeHolderTextï¼Œä¸€èˆ¬æƒ…å†µä¸‹å¯ä»¥è¿ç”¨runtimeæ¥è·å–Appleä¸æƒ³å¼€æ”¾çš„å±æ€§åï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**æ‰§è¡Œ*/</span></div><div class="line"><span class="keyword">let</span> <span class="built_in">count</span>:<span class="type">UnsafeMutablePointer</span>&lt;<span class="type">UInt32</span>&gt; =  <span class="literal">nil</span></div><div class="line"><span class="keyword">var</span> properties = class_copyIvarList(<span class="type">UITextField</span>.<span class="keyword">self</span>, <span class="built_in">count</span>)</div><div class="line"></div><div class="line"><span class="keyword">while</span> properties.memory.debugDescription !=  <span class="string">"0x0000000000000000"</span>&#123;</div><div class="line">    <span class="keyword">let</span> t = ivar_getName(properties.memory)</div><div class="line">    <span class="keyword">let</span> n = <span class="type">NSString</span>(<span class="type">CString</span>: t, encoding: <span class="type">NSUTF8StringEncoding</span>)</div><div class="line">    <span class="built_in">print</span>(n)</div><div class="line">    properties = properties.successor()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**è¾“å‡º*/</span></div><div class="line">......</div><div class="line"><span class="type">Optional</span>(_background)</div><div class="line"><span class="type">Optional</span>(_disabledBackground)</div><div class="line"><span class="type">Optional</span>(_clearButtonMode)</div><div class="line"><span class="type">Optional</span>(_leftView)</div><div class="line"><span class="type">Optional</span>(_leftViewMode)</div><div class="line"><span class="type">Optional</span>(_rightView)</div><div class="line"><span class="type">Optional</span>(_rightViewMode)</div><div class="line"><span class="type">Optional</span>(_traits)</div><div class="line"><span class="type">Optional</span>(_nonAtomTraits)</div><div class="line"><span class="type">Optional</span>(_fullFontSize)</div><div class="line"><span class="type">Optional</span>(_padding)</div><div class="line"><span class="type">Optional</span>(_selectionRangeWhenNotEditing)</div><div class="line">......</div></pre></td></tr></table></figure>
<p>å¯ä»¥ä»é‡Œé¢çœ‹åˆ°å…¶ä»–è¿˜æœ‰å¾ˆå¤šä¸œè¥¿å¯ä»¥ä¿®æ”¹ï¼Œè¿ç”¨KVCè®¾å€¼å¯ä»¥è·å¾—è‡ªå·±æƒ³è¦çš„æ•ˆæœã€‚</p>
<h2 id="KVCæ“ä½œé›†åˆ"><a href="#KVCæ“ä½œé›†åˆ" class="headerlink" title="KVCæ“ä½œé›†åˆ"></a>KVCæ“ä½œé›†åˆ</h2><p>Appleå¯¹KVCçš„<code>valueForKey:</code>æ–¹æ³•ä½œäº†ä¸€äº›ç‰¹æ®Šçš„å®ç°ï¼Œæ¯”å¦‚è¯´NSArrayå’ŒNSSetè¿™æ ·çš„å®¹å™¨ç±»å°±å®ç°äº†è¿™äº›æ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥ç”¨KVCå¾ˆæ–¹ä¾¿åœ°æ“ä½œé›†åˆã€‚</p>
<h3 id="é«˜é˜¶ä¿¡æ¯ä¼ é€’"><a href="#é«˜é˜¶ä¿¡æ¯ä¼ é€’" class="headerlink" title="é«˜é˜¶ä¿¡æ¯ä¼ é€’"></a>é«˜é˜¶ä¿¡æ¯ä¼ é€’</h3><p>å½“å¯¹å®¹å™¨ç±»ä½¿ç”¨KVCæ—¶ï¼Œ<code>valueForKey:</code>å°†ä¼šè¢«ä¼ é€’ç»™å®¹å™¨ä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯å®¹å™¨æœ¬èº«è¿›è¡Œæ“ä½œã€‚ç»“æœä¼šè¢«æ·»åŠ è¿›è¿”å›çš„å®¹å™¨ä¸­ï¼Œè¿™æ ·ï¼Œå¼€å‘è€…å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ“ä½œé›†åˆæ¥è¿”å›å¦ä¸€ä¸ªé›†åˆï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**æ‰§è¡Œ*/</span></div><div class="line"><span class="keyword">let</span> arrStr: <span class="type">NSArray</span> = [<span class="string">"english"</span>, <span class="string">"franch"</span>, <span class="string">"chinese"</span>]</div><div class="line"><span class="keyword">let</span> arrCapStr = arrStr.value(forKey: <span class="string">"capitalizedString"</span>)</div><div class="line"><span class="built_in">print</span>(arrCapStr <span class="keyword">as</span>! <span class="type">NSArray</span>)</div><div class="line"></div><div class="line"><span class="keyword">let</span> arrStrLength = arrStr.value(forKeyPath: <span class="string">"capitalizedString.length"</span>)</div><div class="line"><span class="built_in">print</span>(arrStrLength! <span class="keyword">as</span>! <span class="type">NSArray</span>)</div><div class="line"></div><div class="line"><span class="comment">/**è¾“å‡º*/</span></div><div class="line">(</div><div class="line">    <span class="type">English</span>,</div><div class="line">    <span class="type">Franch</span>,</div><div class="line">    <span class="type">Chinese</span></div><div class="line">)</div><div class="line">(</div><div class="line">    <span class="number">7</span>,</div><div class="line">    <span class="number">6</span>,</div><div class="line">    <span class="number">7</span></div><div class="line">)</div></pre></td></tr></table></figure>
<p>æ–¹æ³•<code>capitalizedString</code>è¢«ä¼ é€’åˆ°NSArrayä¸­çš„æ¯ä¸€é¡¹ï¼Œè¿™æ ·ï¼ŒNSArrayçš„æ¯ä¸€å‘˜éƒ½ä¼šæ‰§è¡Œ<code>capitalizedString</code>å¹¶è¿”å›ä¸€ä¸ªåŒ…å«ç»“æœçš„æ–°çš„NSArrayã€‚ä»æ‰“å°ç»“æœå¯ä»¥çœ‹å‡ºï¼Œæ‰€æœ‰Stringéƒ½æˆåŠŸä»¥è½¬æˆäº†å¤§å†™ã€‚<br>åŒæ ·å¦‚æœè¦æ‰§è¡Œå¤šä¸ªæ–¹æ³•ä¹Ÿå¯ä»¥ç”¨<code>valueForKeyPath:</code>æ–¹æ³•ã€‚å®ƒå…ˆä¼šå¯¹æ¯ä¸€ä¸ªæˆå‘˜è°ƒç”¨ <code>capitalizedString</code>æ–¹æ³•ï¼Œç„¶åå†è°ƒç”¨lengthï¼Œå› ä¸ºlenthæ–¹æ³•è¿”å›æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œæ‰€ä»¥è¿”å›ç»“æœä»¥NSNumberçš„å½¢å¼ä¿å­˜åœ¨æ–°æ•°ç»„é‡Œã€‚</p>
<h2 id="KVO"><a href="#KVO" class="headerlink" title="KVO"></a>KVO</h2><p>å½“ç„¶äº†ï¼ŒKVCé™¤äº†ä¼ å€¼å–å€¼ï¼Œè®¿é—®å’Œä¿®æ”¹ç§æœ‰å˜é‡ï¼Œä¿®æ”¹æ§ä»¶å±æ€§ï¼Œæ“ä½œé›†åˆã€å­—å…¸å’Œæ¨¡å‹ï¼Œæ›´é‡è¦çš„å°±æ˜¯KVOäº†ã€‚</p>
<h2 id="Demoä¸‹è½½è¯·ç‚¹å‡»è¿™é‡Œ"><a href="#Demoä¸‹è½½è¯·ç‚¹å‡»è¿™é‡Œ" class="headerlink" title="Demoä¸‹è½½è¯·ç‚¹å‡»è¿™é‡Œ"></a>Demoä¸‹è½½è¯·<a href="https://github.com/tianziyao/MyCustomKVC" target="_blank" rel="external">ç‚¹å‡»è¿™é‡Œ</a></h2>
      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/è®¾è®¡æ¨¡å¼/" rel="tag">#è®¾è®¡æ¨¡å¼</a>
          
            <a href="/tags/KVC/" rel="tag">#KVC</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/09/18/iOSé€šè®¯ - Socket CSå®ä¾‹/" rel="next" title="iOS Socketé€šè®¯ - Socket C/Så®ä¾‹">
                <i class="fa fa-chevron-left"></i> iOS Socketé€šè®¯ - Socket C/Så®ä¾‹
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/09/23/KVO/" rel="prev" title="iOSè®¾è®¡æ¨¡å¼ - KVOåŸç†å’Œä½¿ç”¨">
                iOSè®¾è®¡æ¨¡å¼ - KVOåŸç†å’Œä½¿ç”¨ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <div class="ds-share flat" data-thread-key="2016/09/21/iOSè®¾è®¡æ¨¡å¼ - KVCå†…éƒ¨æœºåˆ¶/"
     data-title="iOSè®¾è®¡æ¨¡å¼ - KVCå†…éƒ¨æœºåˆ¶&ä½¿ç”¨åœºæ™¯"
     data-content=""
     data-url="http://yoursite.com/2016/09/21/iOSè®¾è®¡æ¨¡å¼ - KVCå†…éƒ¨æœºåˆ¶/">
  <div class="ds-share-inline">
    <ul  class="ds-share-icons-16">

      <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">åˆ†äº«åˆ°ï¼š</a></li>
      <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">å¾®åš</a></li>
      <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQç©ºé—´</a></li>
      <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">è…¾è®¯å¾®åš</a></li>
      <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">å¾®ä¿¡</a></li>

    </ul>
    <div class="ds-share-icons-more">
    </div>
  </div>
</div>
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/09/21/iOSè®¾è®¡æ¨¡å¼ - KVCå†…éƒ¨æœºåˆ¶/"
           data-title="iOSè®¾è®¡æ¨¡å¼ - KVCå†…éƒ¨æœºåˆ¶&ä½¿ç”¨åœºæ™¯" data-url="http://yoursite.com/2016/09/21/iOSè®¾è®¡æ¨¡å¼ - KVCå†…éƒ¨æœºåˆ¶/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://ob2q6r0fn.bkt.clouddn.com/touxiang.jpg"
               alt="iSTian" />
          <p class="site-author-name" itemprop="name">iSTian</p>
          <p class="site-description motion-element" itemprop="description">ä¸ç§¯è·¬æ­¥ï¼Œæ— ä»¥è‡³åƒé‡Œã€‚<br>ä¸ç§¯å°æµï¼Œæ— ä»¥æˆæ±Ÿæµ·ã€‚</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">56</span>
              <span class="site-state-item-name">æ—¥å¿—</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">72</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/tianziyao" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/2646913484" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Valueåˆæ³•æ€§æ ¡éªŒ"><span class="nav-number">1.</span> <span class="nav-text">Valueåˆæ³•æ€§æ ¡éªŒ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#KVCçš„åº”ç”¨åœºæ™¯"><span class="nav-number">2.</span> <span class="nav-text">KVCçš„åº”ç”¨åœºæ™¯</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åŠ¨æ€çš„å­˜å€¼å’Œå–å€¼"><span class="nav-number">3.</span> <span class="nav-text">åŠ¨æ€çš„å­˜å€¼å’Œå–å€¼</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#è®¿é—®å’Œä¿®æ”¹ç§æœ‰çš„æˆå‘˜"><span class="nav-number">4.</span> <span class="nav-text">è®¿é—®å’Œä¿®æ”¹ç§æœ‰çš„æˆå‘˜</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Modelå’Œå­—å…¸çš„äº’ç›¸è½¬æ¢"><span class="nav-number">5.</span> <span class="nav-text">Modelå’Œå­—å…¸çš„äº’ç›¸è½¬æ¢</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä¿®æ”¹æ§ä»¶çš„å†…éƒ¨å±æ€§"><span class="nav-number">6.</span> <span class="nav-text">ä¿®æ”¹æ§ä»¶çš„å†…éƒ¨å±æ€§</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#KVCæ“ä½œé›†åˆ"><span class="nav-number">7.</span> <span class="nav-text">KVCæ“ä½œé›†åˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#é«˜é˜¶ä¿¡æ¯ä¼ é€’"><span class="nav-number">7.1.</span> <span class="nav-text">é«˜é˜¶ä¿¡æ¯ä¼ é€’</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#KVO"><span class="nav-number">8.</span> <span class="nav-text">KVO</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Demoä¸‹è½½è¯·ç‚¹å‡»è¿™é‡Œ"><span class="nav-number">9.</span> <span class="nav-text">Demoä¸‹è½½è¯·ç‚¹å‡»è¿™é‡Œ</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">iSTian</span>
</div>

<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"tianziyao"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  

  

  

  

</body>
</html>
