<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>iSTian&#39;notes</title>
  <subtitle>Quick notes</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2016-09-21T09:21:45.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>iSTian</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>iOSè®¾è®¡æ¨¡å¼ - KVCå†…éƒ¨æœºåˆ¶&amp;ä½¿ç”¨åœºæ™¯</title>
    <link href="http://yoursite.com/2016/09/21/iOS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%20-%20KVC%E5%86%85%E9%83%A8%E6%9C%BA%E5%88%B6/"/>
    <id>http://yoursite.com/2016/09/21/iOSè®¾è®¡æ¨¡å¼ - KVCå†…éƒ¨æœºåˆ¶/</id>
    <published>2016-09-20T18:24:00.000Z</published>
    <updated>2016-09-21T09:21:45.000Z</updated>
    
    <content type="html"><![CDATA[<p>å‰ä¸¤å¤©é¢è¯•åœ¨KVCçš„é—®é¢˜ä¸Šæœ‰æ‰€æ¬ ç¼ºï¼Œå¯¹äºåº•å±‚äº†è§£ä¸å¤Ÿï¼Œå› æ­¤å†™ä¸‹è¿™ç¯‡æ–‡ç« ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯ä½¿ç”¨KVCå¯¹Keyçš„æœç´¢åŸç†ï¼Œè‡ªå·±å†™ä»£ç æ¥å®ç°KVCã€‚</p>
<p>å…³äºAppleæ˜¯å¦‚ä½•å®ç°KVCè¿™ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p>ğŸ™ƒ ğŸ™ƒ æˆ‘ä¹Ÿä¸çŸ¥é“â€¦â€¦ </p>
</blockquote>
<p>å› ä¸ºæ²¡æœ‰åŠæ³•æ‰“å°å‡ºè°ƒç”¨è¿‡çš„å‡½æ•°ï¼Œæ‰€ä»¥KVCèƒŒåçš„ä¸€åˆ‡è¿˜æ˜¯å¾ˆç¥ç§˜çš„ï¼Œåªèƒ½é€šè¿‡å‡ ä¸ªæœ‰é™çš„APIæ¥çŒœæƒ³ï¼Œ</p>
<p>å¯¹äº<code>setValue:forKey:</code> ï¼Œåœ¨setterå­˜åœ¨çš„æƒ…å†µï¼ŒKVC ä¼šç›´æ¥å‘é€<code>set&lt;Key&gt;:</code> æ¶ˆæ¯èµ‹å€¼ï¼›</p>
<p>åœ¨setterä¸åœ¨çš„æƒ…å†µä¸‹ï¼Œä¸”<code>accessInstanceVariablesDirectly</code>æ–¹æ³•æ˜¯trueçš„æƒ…å†µä¸‹ï¼Œä¼šæŒ‰<code>ï¼ˆ_&lt;key&gt;, _&lt;isKey&gt;, &lt;key&gt;, is&lt;Key&gt;ï¼‰</code>çš„é¡ºåºå»æŸ¥æ‰¾å®ä¾‹å˜é‡ï¼Œæ£€æŸ¥å…¶æ˜¯å¦å­˜åœ¨ä¹‹åé€šè¿‡<code>object_setIvar</code>ç»™å®ƒèµ‹å€¼ã€‚</p>
<p>å¦‚æœéƒ½æ²¡æœ‰å°±è°ƒç”¨<code>setValue:forUNdefinedKey:</code>æŠ›å‡ºé”™è¯¯ã€‚</p>
<p>å¯¹äº<code>setValue:forKeyPath:</code>ï¼Œé€’å½’åœ°æ£€æŸ¥keyPathä¸­çš„å±æ€§æ˜¯å¦å­˜åœ¨ï¼Œåˆ°è¾¾ç›®æ ‡è·¯å¾„æ—¶å†è°ƒç”¨<code>setValue:forKey:</code> å®Œæˆèµ‹å€¼ã€‚</p>
<p>å¤§è‡´ä¸Šæˆ‘å‡†å¤‡æŒ‰ä¸Šé¢çš„æ‰§è¡Œé¡ºåºè¿›è¡Œå®ç°ï¼Œç”±äºé›†åˆã€å­—å…¸å’Œæ¨¡å‹ã€KeyPathçš„æƒ…å†µæ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æˆ‘åªå®ç°äº†æœ€æ™®é€šçš„å­˜å€¼å’Œå–å€¼ï¼Œä¸‹é¢è¿›å…¥æ­£é¢˜ï¼š</p>
   <a id="more"></a>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">MyError</span>: <span class="title">ErrorType</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> <span class="type">NotExist</span></div><div class="line">    <span class="keyword">case</span> <span class="type">NotNSObjectType</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">NSObject</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">setMyValue</span><span class="params">(value value: AnyObject?, forKey key: String?)</span></span> <span class="keyword">throws</span> &#123;</div><div class="line">        </div><div class="line">        <span class="comment">/**åˆ¤æ–­Keyæ˜¯å¦æ˜¯ç©ºå€¼*/</span></div><div class="line">        <span class="keyword">if</span> key!.isEmpty &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="type">MyError</span>.<span class="type">NotExist</span></div><div class="line">        &#125;</div><div class="line">        <span class="comment">/**åˆ¤æ–­Valueæ˜¯å¦æ˜¯ç©ºå€¼*/</span></div><div class="line">        <span class="keyword">if</span> value == <span class="literal">nil</span>  &#123;</div><div class="line">            <span class="keyword">self</span>.setMyNilValue(key!)</div><div class="line">            <span class="keyword">return</span></div><div class="line">        &#125;</div><div class="line">        <span class="comment">/**åˆ¤æ–­Valueæ˜¯å¦æ˜¯NSObjectç±»å‹*/</span></div><div class="line">        <span class="keyword">if</span> !(value <span class="keyword">is</span> <span class="type">NSObject</span>) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="type">MyError</span>.<span class="type">NotNSObjectType</span></div><div class="line">        &#125;</div><div class="line">        <span class="comment">/**åˆ¤æ–­æ˜¯å¦å­˜åœ¨setKeyæ–¹æ³•ï¼Œå¦‚æœæœ‰æ‰§è¡Œè¿™ä¸ªæ–¹æ³•*/</span></div><div class="line">        <span class="keyword">let</span> funcName = <span class="string">"set"</span> + (key?.capitalizedString)! + <span class="string">":"</span></div><div class="line">        </div><div class="line">        <span class="keyword">let</span> selector = <span class="type">NSSelectorFromString</span>(funcName)</div><div class="line">        <span class="comment">//let selector = Selector.init(funcName)</span></div><div class="line">        <span class="comment">//let selector = #selector(Address.setCity(_:))</span></div><div class="line">        <span class="comment">//print(self.respondsToSelector(selector))</span></div><div class="line">        </div><div class="line">        <span class="keyword">if</span> <span class="keyword">self</span>.respondsToSelector(selector)&#123;</div><div class="line">            <span class="keyword">self</span>.performSelector((selector), withObject: value)</div><div class="line">            <span class="comment">//print("æ‰§è¡ŒsetKeyæ–¹æ³•")</span></div><div class="line">            <span class="keyword">return</span></div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">/**åˆ¤æ–­è¯¥ç±»ä¸­æ˜¯å¦å­˜åœ¨ keyã€_keyã€iskeyæˆå‘˜ï¼Œå¦‚æœæœ‰ç»™è¿™ä¸ªæˆå‘˜èµ‹å€¼*/</span></div><div class="line">        <span class="keyword">var</span> <span class="built_in">count</span>: <span class="type">UInt32</span> = <span class="number">0</span></div><div class="line">        <span class="keyword">var</span> flag: <span class="type">Bool</span> = <span class="literal">false</span></div><div class="line">        <span class="keyword">let</span> iVars = class_copyIvarList(<span class="keyword">self</span>.<span class="keyword">dynamicType</span>, &amp;<span class="built_in">count</span>)</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="built_in">count</span> &#123;</div><div class="line">            <span class="keyword">let</span> iVar = iVars[<span class="type">Int</span>(i)]</div><div class="line">            <span class="keyword">let</span> keyName = <span class="type">NSString</span>(<span class="type">CString</span>: ivar_getName(iVar), encoding: <span class="type">NSUTF8StringEncoding</span>)</div><div class="line">            <span class="keyword">if</span> keyName == key! || keyName == <span class="string">"_"</span> + key! || keyName == <span class="string">"is"</span> + key!&#123;</div><div class="line">                flag = <span class="literal">true</span></div><div class="line">                </div><div class="line">                object_setIvar(<span class="keyword">self</span>, iVar, value)</div><div class="line">                <span class="comment">//print("\(self) \(iVar) \(value)")</span></div><div class="line">                <span class="comment">//print("ç»™\(keyName)èµ‹å€¼")</span></div><div class="line">                <span class="keyword">break</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">/**å¦‚æœä»¥ä¸Šçš„æˆå‘˜å’Œæ–¹æ³•éƒ½ä¸å­˜åœ¨ï¼Œè°ƒç”¨æœªæ‰¾åˆ°keyçš„æ–¹æ³•*/</span></div><div class="line">        <span class="keyword">if</span> !flag &#123;</div><div class="line">            <span class="keyword">self</span>.setMyValue(value!, forUndefinedKey: key!)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">setMyNilValue</span><span class="params">(key: String?)</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"æ— æ³•ä¿®æ”¹<span class="subst">\(key)</span>çš„å€¼ï¼Œå› ä¸ºä¼ å…¥çš„æ˜¯ç©ºå€¼"</span>)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">setMyValue</span><span class="params">(value: AnyObject, forUndefinedKey key: String)</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"æ— æ³•å°†<span class="subst">\(key)</span>çš„å€¼ä¿®æ”¹ä¸ºï¼Œå› ä¸ºä¼ å…¥çš„æ˜¯ç©ºå€¼"</span>)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">myValueForKey</span><span class="params">(key: String?)</span></span> <span class="keyword">throws</span> -&gt; <span class="type">AnyObject</span>? &#123;</div><div class="line">        </div><div class="line">        <span class="comment">/**åˆ¤æ–­Keyæ˜¯å¦æ˜¯ç©ºå€¼*/</span></div><div class="line">        <span class="keyword">if</span> key!.isEmpty &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="type">MyError</span>.<span class="type">NotExist</span></div><div class="line">        &#125;</div><div class="line">        <span class="comment">/**åˆ¤æ–­æ˜¯å¦å­˜åœ¨getKeyæ–¹æ³•ï¼Œå¦‚æœæœ‰æ‰§è¡Œè¿™ä¸ªæ–¹æ³•*/</span></div><div class="line">        <span class="keyword">let</span> funcName = <span class="string">"get"</span> + (key?.capitalizedString)! + <span class="string">":"</span></div><div class="line">        <span class="keyword">let</span> selector = <span class="type">NSSelectorFromString</span>(funcName)</div><div class="line">        <span class="comment">//let selector = Selector.init(funcName)</span></div><div class="line">        <span class="comment">//let selector = #selector(Address.setCity(_:))</span></div><div class="line">        <span class="comment">//print(self.respondsToSelector(selector))</span></div><div class="line">        </div><div class="line">        <span class="keyword">if</span> <span class="keyword">self</span>.respondsToSelector(selector)&#123;</div><div class="line">            <span class="keyword">let</span> result =  <span class="keyword">self</span>.performSelector(selector)</div><div class="line">            <span class="comment">//print("æ‰§è¡ŒgetKeyæ–¹æ³•")</span></div><div class="line">            <span class="keyword">return</span> result <span class="keyword">as</span>? <span class="type">AnyObject</span></div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">/**åˆ¤æ–­è¯¥ç±»ä¸­æ˜¯å¦å­˜åœ¨ keyã€_keyã€iskeyæˆå‘˜ï¼Œå¦‚æœæœ‰ç»™è¿™ä¸ªæˆå‘˜èµ‹å€¼*/</span></div><div class="line">        <span class="keyword">var</span> <span class="built_in">count</span>: <span class="type">UInt32</span> = <span class="number">0</span></div><div class="line">        <span class="keyword">var</span> flag: <span class="type">Bool</span> = <span class="literal">false</span></div><div class="line">        <span class="keyword">let</span> iVars = class_copyIvarList(<span class="keyword">self</span>.<span class="keyword">dynamicType</span>, &amp;<span class="built_in">count</span>)</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="built_in">count</span> &#123;</div><div class="line">            <span class="keyword">let</span> iVar = iVars[<span class="type">Int</span>(i)]</div><div class="line">            <span class="keyword">let</span> keyName = <span class="type">NSString</span>(<span class="type">CString</span>: ivar_getName(iVar), encoding: <span class="type">NSUTF8StringEncoding</span>)</div><div class="line">            <span class="keyword">if</span> keyName == key! || keyName == <span class="string">"_"</span> + key! || keyName == <span class="string">"is"</span> + key!&#123;</div><div class="line">                flag = <span class="literal">true</span></div><div class="line">                <span class="built_in">print</span>(<span class="string">"å–å‡º<span class="subst">\(keyName)</span>çš„å€¼"</span>)</div><div class="line">                <span class="comment">//print("\(self) \(iVar) \(value)")</span></div><div class="line">                <span class="keyword">return</span> object_getIvar(<span class="keyword">self</span>, iVar)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">/**å¦‚æœä»¥ä¸Šçš„æˆå‘˜å’Œæ–¹æ³•éƒ½ä¸å­˜åœ¨ï¼Œè°ƒç”¨æœªæ‰¾åˆ°keyçš„æ–¹æ³•*/</span></div><div class="line">        <span class="keyword">if</span> !flag &#123;</div><div class="line">            <span class="keyword">self</span>.myValueForUndefinedKey(key!)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">nil</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">myValueForUndefinedKey</span><span class="params">(key: String)</span></span> -&gt; <span class="type">AnyObject</span>?&#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"æ— æ³•å–å‡º<span class="subst">\(key)</span>çš„å€¼ï¼Œå› ä¸ºå±æ€§ä¸å­˜åœ¨"</span>)</div><div class="line">        <span class="keyword">return</span> <span class="literal">nil</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**æ‰§è¡Œ*/</span></div><div class="line"><span class="keyword">let</span> add = <span class="type">Address</span>()</div><div class="line"></div><div class="line">add._country = <span class="string">"China"</span></div><div class="line">add._province = <span class="string">"HeBei"</span></div><div class="line">add._city = <span class="string">"ShiJiaZhuang"</span></div><div class="line">add._province = <span class="string">"ChangAnQu"</span></div><div class="line"></div><div class="line"><span class="keyword">do</span> &#123;</div><div class="line">    <span class="keyword">try</span> add.setMyValue(value: <span class="string">"BeiJing"</span>, forKey: <span class="string">"city"</span>)</div><div class="line">    <span class="keyword">try</span> add.setMyValue(value: <span class="string">"USA"</span>, forKey: <span class="string">"country"</span>)</div><div class="line">    <span class="keyword">try</span> add.setMyValue(value: <span class="string">"South"</span>, forKey: <span class="string">""</span>)</div><div class="line">    <span class="keyword">try</span> add.setMyValue(value: <span class="string">"300169"</span>, forKey: <span class="string">"postCode"</span>)</div><div class="line">    <span class="built_in">print</span>(<span class="string">"country:<span class="subst">\(add._country)</span> city:<span class="subst">\(add._city)</span> province:<span class="subst">\(add._province)</span> district<span class="subst">\(add._district)</span>"</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> <span class="type">MyError</span>.<span class="type">NotExist</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"keyæ˜¯ç©ºçš„"</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> <span class="type">MyError</span>.<span class="type">NotNSObjectType</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"valueä¸æ˜¯NSObjectç±»å‹"</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"ä¼ å€¼å‡ºé”™"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">do</span> &#123;</div><div class="line">    <span class="keyword">let</span> country = <span class="keyword">try</span> add.myValueForKey(<span class="string">"country"</span>)</div><div class="line">    <span class="keyword">let</span> city = <span class="keyword">try</span> add.myValueForKey(<span class="string">"city"</span>)</div><div class="line">    <span class="built_in">print</span>(<span class="string">"----------------/n <span class="subst">\(country)</span> <span class="subst">\(city)</span>"</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> <span class="type">MyError</span>.<span class="type">NotExist</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"keyæ˜¯ç©ºçš„"</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"å–å€¼å‡ºé”™"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä»¥ä¸Šæ˜¯æ ¹æ®KVCæ‰§è¡Œé¡ºåºè‡ªå®šä¹‰çš„ä¸€æ®µä»£ç ï¼Œå½“ç„¶ä¹Ÿçœç•¥äº†ä¸€äº›åŠŸèƒ½ï¼Œæ€»ä½“ä¸Šçš„é€»è¾‘è¿˜æ˜¯æ¯”è¾ƒæ¸…æ¥šçš„ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹é—®é¢˜ï¼Œåœ¨ä½¿ç”¨<code>object_setIvar</code>å’Œ<code>object_getIvar</code>è¿™ä¸¤ä¸ªruntimeå‡½æ•°æ—¶ï¼Œç¨‹åºä¼šé¢‘ç¹å´©æºƒï¼Œè€Œè‡ªå·±å¯¹runtimeè®¤è¯†ä¸è¶³ï¼Œä»¥åå†å®Œæ•´è¿™æ®µä»£ç å§ã€‚</p>
<p>å…³äºKVCï¼Œé™¤å»å­˜å–æ–¹æ³•ï¼Œåº•å±‚æ‰§è¡Œé¡ºåºï¼Œé”™è¯¯å¤„ç†ä»¥å¤–ï¼Œè¿˜æœ‰å‡ ç‚¹éœ€è¦äº†è§£ï¼š</p>
<h2 id="Valueåˆæ³•æ€§æ ¡éªŒ"><a href="#Valueåˆæ³•æ€§æ ¡éªŒ" class="headerlink" title="Valueåˆæ³•æ€§æ ¡éªŒ"></a>Valueåˆæ³•æ€§æ ¡éªŒ</h2><p>KVCæä¾›äº†æ ¡éªŒkeyå¯¹åº”çš„valueæ˜¯å¦åˆæ³•çš„æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">validateValue</span><span class="params">(ioValue: AutoreleasingUnsafeMutablePointer&lt;AnyObject?&gt;, forKey inKey: String)</span></span> <span class="keyword">throws</span></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">validateValue</span><span class="params">(ioValue: AutoreleasingUnsafeMutablePointer&lt;AnyObject?&gt;, forKeyPath inKeyPath: String)</span></span> <span class="keyword">throws</span></div></pre></td></tr></table></figure>
<p>å¦‚æœä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œéœ€è¦è¿›è¡Œé‡å†™ï¼Œå®ƒçš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Address</span>: <span class="title">NSObject</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> _country: <span class="type">String</span>?</div><div class="line"></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">validateValue</span><span class="params">(ioValue: AutoreleasingUnsafeMutablePointer&lt;AnyObject?&gt;, forKey inKey: String)</span></span> <span class="keyword">throws</span> &#123;</div><div class="line">        </div><div class="line">        <span class="keyword">let</span> country = ioValue.memory <span class="keyword">as</span>! <span class="type">String</span></div><div class="line">        <span class="keyword">if</span> country == <span class="string">"Janpan"</span> &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="type">MyError</span>.<span class="type">NotExist</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">throw</span> <span class="type">MyError</span>.<span class="type">Nothing</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**æ‰§è¡Œ*/</span></div><div class="line"><span class="keyword">let</span> add = <span class="type">Address</span>()</div><div class="line"><span class="keyword">var</span> value: <span class="type">AnyObject</span>? = <span class="string">"Janpan"</span></div><div class="line"></div><div class="line"><span class="keyword">do</span> &#123;</div><div class="line">    <span class="keyword">try</span> add.validateValue(&amp;value, forKey: <span class="string">"_country"</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> <span class="type">MyError</span>.<span class="type">NotExist</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"è¾“å…¥æœ‰è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥"</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> <span class="type">MyError</span>.<span class="type">Nothing</span> &#123;</div><div class="line">    add.setValue(value, forKey: <span class="string">"_country"</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> &#123;&#125;</div><div class="line"><span class="built_in">print</span>(add._country)</div><div class="line"></div><div class="line"><span class="comment">/**å½“ var value: AnyObject? = "Janpan" æ—¶è¾“å‡º*/</span></div><div class="line">è¾“å…¥æœ‰è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥</div><div class="line"><span class="literal">nil</span></div><div class="line"><span class="comment">/**å½“ var value: AnyObject? = "Chain" æ—¶è¾“å‡º*/</span></div><div class="line"><span class="type">Optional</span>(<span class="string">"China"</span>)</div></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å®ç°äº†å…ˆå¯¹ä¼ å…¥å€¼çš„åˆæ³•æ€§è¿›è¡Œæ ¡éªŒï¼Œæ— è¯¯åå†è¿›è¡Œèµ‹å€¼ï¼Œå¦‚ä¸Šé¢çš„ä»£ç ï¼Œå½“æˆ‘ä»¬éœ€è¦éªŒè¯èƒ½ä¸èƒ½ç”¨KVCè®¾å®šæŸä¸ªå€¼æ—¶ï¼Œå¯ä»¥å°†å…¶é‡å†™åè°ƒç”¨</p>
<blockquote>
<p><code>validateValue: forKey:</code></p>
</blockquote>
<p>è¿™ä¸ªæ–¹æ³•æ¥éªŒè¯ï¼Œé‚£ä¹ˆKVCå°±ä¼šç›´æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥è¿”å›ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å³ä½¿é‡å†™äº†è¯¥æ–¹æ³•ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰ä¸»åŠ¨è¿›è¡Œè°ƒç”¨ï¼ŒKVCä¹Ÿä¸ä¼šä¸»åŠ¨å»åšéªŒè¯ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•éœ€è¦æ‰‹åŠ¨è°ƒç”¨ã€‚</p>
<h2 id="KVCçš„åº”ç”¨åœºæ™¯"><a href="#KVCçš„åº”ç”¨åœºæ™¯" class="headerlink" title="KVCçš„åº”ç”¨åœºæ™¯"></a>KVCçš„åº”ç”¨åœºæ™¯</h2><p>ä½œä¸ºiOSå¹³å°çš„çŸ¥åé»‘é­”æ³•ï¼ŒKVCæœ‰å¾ˆå¤šå¥‡ç‰¹çš„ä½œç”¨ï¼ŒKVCåœ¨iOSå¼€å‘ä¸­æ˜¯ç»ä¸å¯å°‘çš„åˆ©å™¨ï¼Œè¿™ç§åŸºäºè¿è¡Œæ—¶çš„ç¼–ç¨‹æ–¹å¼æå¤§åœ°æé«˜äº†çµæ´»æ€§ï¼Œç®€åŒ–äº†ä»£ç ï¼Œå®ƒçš„å¸¸è§å·¦å³æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<h2 id="åŠ¨æ€çš„å­˜å€¼å’Œå–å€¼"><a href="#åŠ¨æ€çš„å­˜å€¼å’Œå–å€¼" class="headerlink" title="åŠ¨æ€çš„å­˜å€¼å’Œå–å€¼"></a>åŠ¨æ€çš„å­˜å€¼å’Œå–å€¼</h2><p>ğŸ™ƒğŸ™ƒğŸ™ƒğŸ™ƒğŸ™ƒğŸ™ƒğŸ™ƒğŸ™ƒğŸ™ƒğŸ™ƒğŸ™ƒğŸ™ƒğŸ™ƒğŸ™ƒğŸ™ƒğŸ™ƒğŸ™ƒğŸ™ƒğŸ™ƒğŸ™ƒ</p>
<h2 id="è®¿é—®å’Œä¿®æ”¹ç§æœ‰çš„æˆå‘˜"><a href="#è®¿é—®å’Œä¿®æ”¹ç§æœ‰çš„æˆå‘˜" class="headerlink" title="è®¿é—®å’Œä¿®æ”¹ç§æœ‰çš„æˆå‘˜"></a>è®¿é—®å’Œä¿®æ”¹ç§æœ‰çš„æˆå‘˜</h2><p>å¯¹äºç±»é‡Œçš„ç§æœ‰å±æ€§ï¼Œæ— è®ºSwiftè¿˜æ˜¯Objective-Céƒ½æ˜¯æ— æ³•ç›´æ¥è®¿é—®çš„ï¼Œä½†æ˜¯KVCæ˜¯å¯ä»¥çš„ã€‚</p>
<h2 id="Modelå’Œå­—å…¸çš„äº’ç›¸è½¬æ¢"><a href="#Modelå’Œå­—å…¸çš„äº’ç›¸è½¬æ¢" class="headerlink" title="Modelå’Œå­—å…¸çš„äº’ç›¸è½¬æ¢"></a>Modelå’Œå­—å…¸çš„äº’ç›¸è½¬æ¢</h2><p>è¿™æ˜¯KVCåˆä¸€ä¸ªå¼ºå¤§ä¹‹å¤„ï¼Œåªéœ€è¦å¾ˆå°‘çš„ä»£ç é‡å³å¯å®Œæˆå¾ˆå¤šåŠŸèƒ½ã€‚</p>
<h2 id="ä¿®æ”¹æ§ä»¶çš„å†…éƒ¨å±æ€§"><a href="#ä¿®æ”¹æ§ä»¶çš„å†…éƒ¨å±æ€§" class="headerlink" title="ä¿®æ”¹æ§ä»¶çš„å†…éƒ¨å±æ€§"></a>ä¿®æ”¹æ§ä»¶çš„å†…éƒ¨å±æ€§</h2><p>è¿™ä¹Ÿæ˜¯iOSå¼€å‘ä¸­å¿…ä¸å¯å°‘çš„å°æŠ€å·§ã€‚ä¼—æ‰€å‘¨çŸ¥å¾ˆå¤šUIæ§ä»¶éƒ½ç”±å¾ˆå¤šå†…éƒ¨UIæ§ä»¶ç»„åˆè€Œæˆçš„ï¼Œä½†æ˜¯Appleæ²¡æœ‰æä¾›è¿™è®¿é—®è¿™äº›æ§ä»¶çš„APIï¼Œè¿™æ ·æˆ‘ä»¬å°±æ— æ³•æ­£å¸¸åœ°è®¿é—®å’Œä¿®æ”¹è¿™äº›æ§ä»¶çš„æ ·å¼ã€‚</p>
<p>è€ŒKVCåœ¨å¤§å¤šæ•°æƒ…å†µå¯ä¸‹å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ¯”å¦‚ä¸ªæ€§åŒ–UITextFieldä¸­çš„placeHolderTextï¼Œä¸€èˆ¬æƒ…å†µä¸‹å¯ä»¥è¿ç”¨runtimeæ¥è·å–Appleä¸æƒ³å¼€æ”¾çš„å±æ€§åï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**æ‰§è¡Œ*/</span></div><div class="line"><span class="keyword">let</span> <span class="built_in">count</span>:<span class="type">UnsafeMutablePointer</span>&lt;<span class="type">UInt32</span>&gt; =  <span class="literal">nil</span></div><div class="line"><span class="keyword">var</span> properties = class_copyIvarList(<span class="type">UITextField</span>.<span class="keyword">self</span>, <span class="built_in">count</span>)</div><div class="line"></div><div class="line"><span class="keyword">while</span> properties.memory.debugDescription !=  <span class="string">"0x0000000000000000"</span>&#123;</div><div class="line">    <span class="keyword">let</span> t = ivar_getName(properties.memory)</div><div class="line">    <span class="keyword">let</span> n = <span class="type">NSString</span>(<span class="type">CString</span>: t, encoding: <span class="type">NSUTF8StringEncoding</span>)</div><div class="line">    <span class="built_in">print</span>(n)</div><div class="line">    properties = properties.successor()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**è¾“å‡º*/</span></div><div class="line">......</div><div class="line"><span class="type">Optional</span>(_background)</div><div class="line"><span class="type">Optional</span>(_disabledBackground)</div><div class="line"><span class="type">Optional</span>(_clearButtonMode)</div><div class="line"><span class="type">Optional</span>(_leftView)</div><div class="line"><span class="type">Optional</span>(_leftViewMode)</div><div class="line"><span class="type">Optional</span>(_rightView)</div><div class="line"><span class="type">Optional</span>(_rightViewMode)</div><div class="line"><span class="type">Optional</span>(_traits)</div><div class="line"><span class="type">Optional</span>(_nonAtomTraits)</div><div class="line"><span class="type">Optional</span>(_fullFontSize)</div><div class="line"><span class="type">Optional</span>(_padding)</div><div class="line"><span class="type">Optional</span>(_selectionRangeWhenNotEditing)</div><div class="line">......</div></pre></td></tr></table></figure>
<p>å¯ä»¥ä»é‡Œé¢çœ‹åˆ°å…¶ä»–è¿˜æœ‰å¾ˆå¤šä¸œè¥¿å¯ä»¥ä¿®æ”¹ï¼Œè¿ç”¨KVCè®¾å€¼å¯ä»¥è·å¾—è‡ªå·±æƒ³è¦çš„æ•ˆæœã€‚</p>
<h2 id="KVCæ“ä½œé›†åˆ"><a href="#KVCæ“ä½œé›†åˆ" class="headerlink" title="KVCæ“ä½œé›†åˆ"></a>KVCæ“ä½œé›†åˆ</h2><p>Appleå¯¹KVCçš„<code>valueForKey:</code>æ–¹æ³•ä½œäº†ä¸€äº›ç‰¹æ®Šçš„å®ç°ï¼Œæ¯”å¦‚è¯´NSArrayå’ŒNSSetè¿™æ ·çš„å®¹å™¨ç±»å°±å®ç°äº†è¿™äº›æ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥ç”¨KVCå¾ˆæ–¹ä¾¿åœ°æ“ä½œé›†åˆã€‚</p>
<h3 id="é«˜é˜¶ä¿¡æ¯ä¼ é€’"><a href="#é«˜é˜¶ä¿¡æ¯ä¼ é€’" class="headerlink" title="é«˜é˜¶ä¿¡æ¯ä¼ é€’"></a>é«˜é˜¶ä¿¡æ¯ä¼ é€’</h3><p>å½“å¯¹å®¹å™¨ç±»ä½¿ç”¨KVCæ—¶ï¼Œ<code>valueForKey:</code>å°†ä¼šè¢«ä¼ é€’ç»™å®¹å™¨ä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯å®¹å™¨æœ¬èº«è¿›è¡Œæ“ä½œã€‚ç»“æœä¼šè¢«æ·»åŠ è¿›è¿”å›çš„å®¹å™¨ä¸­ï¼Œè¿™æ ·ï¼Œå¼€å‘è€…å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ“ä½œé›†åˆæ¥è¿”å›å¦ä¸€ä¸ªé›†åˆï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**æ‰§è¡Œ*/</span></div><div class="line"><span class="keyword">let</span> arrStr: <span class="type">NSArray</span> = [<span class="string">"english"</span>, <span class="string">"franch"</span>, <span class="string">"chinese"</span>]</div><div class="line"><span class="keyword">let</span> arrCapStr = arrStr.value(forKey: <span class="string">"capitalizedString"</span>)</div><div class="line"><span class="built_in">print</span>(arrCapStr <span class="keyword">as</span>! <span class="type">NSArray</span>)</div><div class="line"></div><div class="line"><span class="keyword">let</span> arrStrLength = arrStr.value(forKeyPath: <span class="string">"capitalizedString.length"</span>)</div><div class="line"><span class="built_in">print</span>(arrStrLength! <span class="keyword">as</span>! <span class="type">NSArray</span>)</div><div class="line"></div><div class="line"><span class="comment">/**è¾“å‡º*/</span></div><div class="line">(</div><div class="line">    <span class="type">English</span>,</div><div class="line">    <span class="type">Franch</span>,</div><div class="line">    <span class="type">Chinese</span></div><div class="line">)</div><div class="line">(</div><div class="line">    <span class="number">7</span>,</div><div class="line">    <span class="number">6</span>,</div><div class="line">    <span class="number">7</span></div><div class="line">)</div></pre></td></tr></table></figure>
<p>æ–¹æ³•<code>capitalizedString</code>è¢«ä¼ é€’åˆ°NSArrayä¸­çš„æ¯ä¸€é¡¹ï¼Œè¿™æ ·ï¼ŒNSArrayçš„æ¯ä¸€å‘˜éƒ½ä¼šæ‰§è¡Œ<code>capitalizedString</code>å¹¶è¿”å›ä¸€ä¸ªåŒ…å«ç»“æœçš„æ–°çš„NSArrayã€‚ä»æ‰“å°ç»“æœå¯ä»¥çœ‹å‡ºï¼Œæ‰€æœ‰Stringéƒ½æˆåŠŸä»¥è½¬æˆäº†å¤§å†™ã€‚<br>åŒæ ·å¦‚æœè¦æ‰§è¡Œå¤šä¸ªæ–¹æ³•ä¹Ÿå¯ä»¥ç”¨<code>valueForKeyPath:</code>æ–¹æ³•ã€‚å®ƒå…ˆä¼šå¯¹æ¯ä¸€ä¸ªæˆå‘˜è°ƒç”¨ <code>capitalizedString</code>æ–¹æ³•ï¼Œç„¶åå†è°ƒç”¨lengthï¼Œå› ä¸ºlenthæ–¹æ³•è¿”å›æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œæ‰€ä»¥è¿”å›ç»“æœä»¥NSNumberçš„å½¢å¼ä¿å­˜åœ¨æ–°æ•°ç»„é‡Œã€‚</p>
<h2 id="KVO"><a href="#KVO" class="headerlink" title="KVO"></a>KVO</h2><p>å½“ç„¶äº†ï¼ŒKVCé™¤äº†ä¼ å€¼å–å€¼ï¼Œè®¿é—®å’Œä¿®æ”¹ç§æœ‰å˜é‡ï¼Œä¿®æ”¹æ§ä»¶å±æ€§ï¼Œæ“ä½œé›†åˆã€å­—å…¸å’Œæ¨¡å‹ï¼Œæ›´é‡è¦çš„å°±æ˜¯KVOäº†ã€‚</p>
<h2 id="Demoä¸‹è½½è¯·ç‚¹å‡»è¿™é‡Œ"><a href="#Demoä¸‹è½½è¯·ç‚¹å‡»è¿™é‡Œ" class="headerlink" title="Demoä¸‹è½½è¯·ç‚¹å‡»è¿™é‡Œ"></a>Demoä¸‹è½½è¯·<a href="https://github.com/tianziyao/MyCustomKVC" target="_blank" rel="external">ç‚¹å‡»è¿™é‡Œ</a></h2>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‰ä¸¤å¤©é¢è¯•åœ¨KVCçš„é—®é¢˜ä¸Šæœ‰æ‰€æ¬ ç¼ºï¼Œå¯¹äºåº•å±‚äº†è§£ä¸å¤Ÿï¼Œå› æ­¤å†™ä¸‹è¿™ç¯‡æ–‡ç« ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯ä½¿ç”¨KVCå¯¹Keyçš„æœç´¢åŸç†ï¼Œè‡ªå·±å†™ä»£ç æ¥å®ç°KVCã€‚&lt;/p&gt;
&lt;p&gt;å…³äºAppleæ˜¯å¦‚ä½•å®ç°KVCè¿™ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸ™ƒ ğŸ™ƒ æˆ‘ä¹Ÿä¸çŸ¥é“â€¦â€¦ &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å› ä¸ºæ²¡æœ‰åŠæ³•æ‰“å°å‡ºè°ƒç”¨è¿‡çš„å‡½æ•°ï¼Œæ‰€ä»¥KVCèƒŒåçš„ä¸€åˆ‡è¿˜æ˜¯å¾ˆç¥ç§˜çš„ï¼Œåªèƒ½é€šè¿‡å‡ ä¸ªæœ‰é™çš„APIæ¥çŒœæƒ³ï¼Œ&lt;/p&gt;
&lt;p&gt;å¯¹äº&lt;code&gt;setValue:forKey:&lt;/code&gt; ï¼Œåœ¨setterå­˜åœ¨çš„æƒ…å†µï¼ŒKVC ä¼šç›´æ¥å‘é€&lt;code&gt;set&amp;lt;Key&amp;gt;:&lt;/code&gt; æ¶ˆæ¯èµ‹å€¼ï¼›&lt;/p&gt;
&lt;p&gt;åœ¨setterä¸åœ¨çš„æƒ…å†µä¸‹ï¼Œä¸”&lt;code&gt;accessInstanceVariablesDirectly&lt;/code&gt;æ–¹æ³•æ˜¯trueçš„æƒ…å†µä¸‹ï¼Œä¼šæŒ‰&lt;code&gt;ï¼ˆ_&amp;lt;key&amp;gt;, _&amp;lt;isKey&amp;gt;, &amp;lt;key&amp;gt;, is&amp;lt;Key&amp;gt;ï¼‰&lt;/code&gt;çš„é¡ºåºå»æŸ¥æ‰¾å®ä¾‹å˜é‡ï¼Œæ£€æŸ¥å…¶æ˜¯å¦å­˜åœ¨ä¹‹åé€šè¿‡&lt;code&gt;object_setIvar&lt;/code&gt;ç»™å®ƒèµ‹å€¼ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœéƒ½æ²¡æœ‰å°±è°ƒç”¨&lt;code&gt;setValue:forUNdefinedKey:&lt;/code&gt;æŠ›å‡ºé”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äº&lt;code&gt;setValue:forKeyPath:&lt;/code&gt;ï¼Œé€’å½’åœ°æ£€æŸ¥keyPathä¸­çš„å±æ€§æ˜¯å¦å­˜åœ¨ï¼Œåˆ°è¾¾ç›®æ ‡è·¯å¾„æ—¶å†è°ƒç”¨&lt;code&gt;setValue:forKey:&lt;/code&gt; å®Œæˆèµ‹å€¼ã€‚&lt;/p&gt;
&lt;p&gt;å¤§è‡´ä¸Šæˆ‘å‡†å¤‡æŒ‰ä¸Šé¢çš„æ‰§è¡Œé¡ºåºè¿›è¡Œå®ç°ï¼Œç”±äºé›†åˆã€å­—å…¸å’Œæ¨¡å‹ã€KeyPathçš„æƒ…å†µæ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æˆ‘åªå®ç°äº†æœ€æ™®é€šçš„å­˜å€¼å’Œå–å€¼ï¼Œä¸‹é¢è¿›å…¥æ­£é¢˜ï¼š&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="http://yoursite.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
      <category term="KVC" scheme="http://yoursite.com/tags/KVC/"/>
    
  </entry>
  
  <entry>
    <title>iOS Socketé€šè®¯ - Socketç¼–ç¨‹å¤´æ–‡ä»¶</title>
    <link href="http://yoursite.com/2016/09/18/iOS%E9%80%9A%E8%AE%AF%20-%20Socket%E9%80%9A%E8%AE%AF%E5%A4%B4%E6%96%87%E4%BB%B6/"/>
    <id>http://yoursite.com/2016/09/18/iOSé€šè®¯ - Socketé€šè®¯å¤´æ–‡ä»¶/</id>
    <published>2016-09-17T18:24:00.000Z</published>
    <updated>2016-09-18T07:39:16.000Z</updated>
    
    <content type="html"><![CDATA[<p>å»ºè®®ï¼šåœ¨ç¼–å†™ç½‘ç»œç¨‹åºæ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸‹é¢è¿™æ®µå¤´æ–‡ä»¶ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">include &lt;unistd.h&gt;</div><div class="line">include &lt;sys/types.h&gt;</div><div class="line">include &lt;sys/socket.h&gt;</div><div class="line">include &lt;netdb.h&gt;</div><div class="line">include &lt;stdio.h&gt;</div><div class="line">include &lt;stdlib.h&gt;</div><div class="line">include &lt;string.h&gt;</div><div class="line">include &lt;ctype.h&gt;</div><div class="line">include &lt;errno.h&gt;</div><div class="line">include &lt;malloc.h&gt;</div><div class="line">include &lt;netinet/in.h&gt;</div><div class="line">include &lt;arpa/inet.h&gt;</div><div class="line">include &lt;sys/ioctl.h&gt;</div><div class="line">include &lt;stdarg.h&gt;</div><div class="line">include &lt;fcntl.h&gt;</div><div class="line">include &lt;fcntl.h&gt;</div></pre></td></tr></table></figure>
   <a id="more"></a>
<p>åœ¨Socketç¼–ç¨‹ä¸­éœ€è¦ç”¨åˆ°çš„å¤´æ–‡ä»¶æ¯”è¾ƒå¤šï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">sys/types.hï¼šæ•°æ®ç±»å‹å®šä¹‰</div><div class="line">sys/socket.hï¼šæä¾›socketå‡½æ•°åŠæ•°æ®ç»“æ„</div><div class="line">netinet/in.hï¼šå®šä¹‰æ•°æ®ç»“æ„sockaddr_in</div><div class="line">arpa/inet.hï¼šæä¾›IPåœ°å€è½¬æ¢å‡½æ•°</div><div class="line">netdb.hï¼šæä¾›è®¾ç½®åŠè·å–åŸŸåçš„å‡½æ•°</div><div class="line">sys/ioctl.hï¼šæä¾›å¯¹I/Oæ§åˆ¶çš„å‡½æ•°</div><div class="line">sys/poll.hï¼šæä¾›socketç­‰å¾…æµ‹è¯•æœºåˆ¶çš„å‡½æ•°</div></pre></td></tr></table></figure>
<p>å…¶ä»–åœ¨ç½‘ç»œç¨‹åºä¸­å¸¸è§çš„å¤´æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">unistd.hï¼šæä¾›é€šç”¨çš„æ–‡ä»¶ã€ç›®å½•ã€ç¨‹åºåŠè¿›ç¨‹æ“ä½œçš„å‡½æ•°</div><div class="line">errno.hï¼šæä¾›é”™è¯¯å·errnoçš„å®šä¹‰ï¼Œç”¨äºé”™è¯¯å¤„ç†</div><div class="line">fcntl.hï¼šæä¾›å¯¹æ–‡ä»¶æ§åˆ¶çš„å‡½æ•°</div><div class="line">time.hï¼šæä¾›æœ‰å…³æ—¶é—´çš„å‡½æ•°</div><div class="line">crypt.hï¼šæä¾›ä½¿ç”¨DESåŠ å¯†ç®—æ³•çš„åŠ å¯†å‡½æ•°</div><div class="line">pwd.hï¼šæä¾›å¯¹/etc/passwdæ–‡ä»¶è®¿é—®çš„å‡½æ•°</div><div class="line">shadow.hï¼šæä¾›å¯¹/etc/shadowæ–‡ä»¶è®¿é—®çš„å‡½æ•°</div><div class="line">pthread.hï¼šæä¾›å¤šçº¿ç¨‹æ“ä½œçš„å‡½æ•°</div><div class="line">signal.hï¼šæä¾›å¯¹ä¿¡å·æ“ä½œçš„å‡½æ•°</div><div class="line">sys/wait.hã€sys/ipc.hã€sys/shm.hï¼šæä¾›è¿›ç¨‹ç­‰å¾…ã€è¿›ç¨‹é—´é€šè®¯ï¼ˆIPCï¼‰åŠå…±äº«å†…å­˜çš„å‡½æ•°</div></pre></td></tr></table></figure>
<p>æ¶‰åŠåˆ°ç”¨æˆ·æƒé™åŠå¯†ç éªŒè¯é—®é¢˜æ—¶åŠ å…¥å¦‚ä¸‹è¯­å¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">include &lt;shadow.h&gt;</div><div class="line">include &lt;crypt.h&gt;</div><div class="line">include &lt;pwd.h&gt;</div></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåº”è¯¥åœ¨ç¼–è¯‘æ—¶é“¾æ¥åŠ å¯†ç®—æ³•åº“ï¼Œå³å¢åŠ ç¼–è¯‘é€‰é¡¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">-lcrypt</div></pre></td></tr></table></figure>
<p>æ¶‰åŠåˆ°æ–‡ä»¶åŠæ—¶é—´æ“ä½œåŠ å…¥å¦‚ä¸‹è¯­å¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">include &lt;sys/time.h&gt;</div><div class="line">include &lt;utime.h&gt;</div><div class="line">include &lt;time.h&gt;</div><div class="line">include &lt;sys/stat.h&gt;</div><div class="line">include &lt;sys/file.h&gt;</div></pre></td></tr></table></figure>
<p>æ¶‰åŠåˆ°å¤šè¿›ç¨‹æ“ä½œæ—¶åŠ å…¥å¦‚ä¸‹è¯­å¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">include &lt;sys/wait.h&gt;</div><div class="line">include &lt;sys/ipc.h&gt;</div><div class="line">include &lt;sys/shm.h&gt;</div><div class="line">include &lt;signal.h&gt;</div><div class="line">include &lt;pthread.h&gt;</div><div class="line">include &lt;sys/poll.h&gt;</div></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåº”è¯¥åœ¨ç¼–è¯‘æ—¶é“¾æ¥çº¿ç¨‹åº“ï¼Œå³å¢åŠ ç¼–è¯‘é€‰é¡¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">-lthread</div></pre></td></tr></table></figure>
<h2 id="å‚è€ƒé“¾æ¥ï¼š"><a href="#å‚è€ƒé“¾æ¥ï¼š" class="headerlink" title="å‚è€ƒé“¾æ¥ï¼š"></a>å‚è€ƒé“¾æ¥ï¼š</h2><p><a href="http://staff.ustc.edu.cn/~mengning/np/linux_socket/new_page_4.htm" target="_blank" rel="external">Socketç¼–ç¨‹ä¸­éœ€è¦ç”¨åˆ°çš„å¤´æ–‡ä»¶</a> - ä¸­å›½ç§‘å¤§æ•™å·¥FTP</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å»ºè®®ï¼šåœ¨ç¼–å†™ç½‘ç»œç¨‹åºæ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸‹é¢è¿™æ®µå¤´æ–‡ä»¶ä»£ç ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;include &amp;lt;unistd.h&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;include &amp;lt;sys/types.h&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;include &amp;lt;sys/socket.h&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;include &amp;lt;netdb.h&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;include &amp;lt;stdio.h&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;include &amp;lt;stdlib.h&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;include &amp;lt;string.h&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;include &amp;lt;ctype.h&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;include &amp;lt;errno.h&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;include &amp;lt;malloc.h&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;include &amp;lt;netinet/in.h&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;include &amp;lt;arpa/inet.h&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;include &amp;lt;sys/ioctl.h&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;include &amp;lt;stdarg.h&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;include &amp;lt;fcntl.h&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;include &amp;lt;fcntl.h&amp;gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="ç½‘ç»œé€šè®¯" scheme="http://yoursite.com/categories/%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF/"/>
    
    
      <category term="ç½‘ç»œé€šè®¯" scheme="http://yoursite.com/tags/%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF/"/>
    
      <category term="Socketé€šè®¯" scheme="http://yoursite.com/tags/Socket%E9%80%9A%E8%AE%AF/"/>
    
  </entry>
  
  <entry>
    <title>iOS Socketé€šè®¯ - Socket C/Så®ä¾‹</title>
    <link href="http://yoursite.com/2016/09/18/iOS%E9%80%9A%E8%AE%AF%20-%20Socket%20CS%E5%AE%9E%E4%BE%8B/"/>
    <id>http://yoursite.com/2016/09/18/iOSé€šè®¯ - Socket CSå®ä¾‹/</id>
    <published>2016-09-17T18:24:00.000Z</published>
    <updated>2016-09-20T05:29:43.000Z</updated>
    
    <content type="html"><![CDATA[<p>iOSæä¾›çš„Socketç½‘ç»œç¼–ç¨‹çš„æ¥å£æœ‰CFSocketï¼ŒBSD Socketï¼Œæ¯”è¾ƒè‘—åçš„ç¬¬ä¸‰æ–¹åº“æ˜¯AsyncSocketã€‚</p>
<ul>
<li><strong>BSD Socket</strong> æ˜¯UNIXç³»ç»Ÿä¸­é€šç”¨çš„ç½‘ç»œæ¥å£ï¼Œå®ƒä¸ä»…æ”¯æŒå„ç§ä¸åŒçš„ç½‘ç»œç±»å‹ï¼Œè€Œä¸”ä¹Ÿæ˜¯ä¸€ç§å†…éƒ¨è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æœºåˆ¶ã€‚è€ŒiOSç³»ç»Ÿå…¶å®æœ¬è´¨å°±æ˜¯UNIXï¼Œæ‰€ä»¥å¯ä»¥ç”¨ï¼Œä½†æ˜¯æ¯”è¾ƒå¤æ‚ã€‚</li>
<li><strong>CFSocket</strong> æ˜¯è‹¹æœæä¾›ç»™æˆ‘ä»¬çš„ä½¿ç”¨Socketçš„æ–¹å¼ã€‚</li>
<li><strong>AsyncSocket</strong> æ˜¯ä¸€ä¸ªåº”ç”¨æ¯”è¾ƒå¹¿æ³›çš„å¼€æºåº“ã€‚</li>
</ul>
<p>ä¸‹é¢æˆ‘ä»¬ç”¨ä»£ç æ¥æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨AsyncSocketæ¥åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ã€‚</p>
<p>AsyncSocketå…¨åæ˜¯<strong>CocoaAsyncSocket</strong>ï¼Œå®ƒçš„GitHubåœ°å€<a href="https://github.com/robbiehanson/CocoaAsyncSocket" target="_blank" rel="external">ç‚¹æ­¤è®¿é—®</a>ã€‚AsyncSocketä½¿ç”¨CocoaPodså®‰è£…å’Œæ‹–æ”¾å®‰è£…æœ‰æ‰€ä¸åŒã€‚CocoaPodsä¸Šçš„ç‰ˆæœ¬åªæœ‰GCDAsyncSocketï¼ŒGItHubä¸Šå¤šäº†RunloopAsyncSocketï¼Œè€Œåè€…ç°åœ¨å·²ç»å¼ƒç”¨ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨CocoaPodså®‰è£…ã€‚</p>
<p><strong>ç¼ºç‚¹æ˜¯<code>onsocketWillDisconnect</code>è¿™ä¸ªä»£ç†æ–¹æ³•åœ¨GCDçš„ç‰ˆæœ¬é‡Œæš‚æ—¶æ²¡æœ‰ï¼Œä¹Ÿæ²¡æœ‰æ‰¾åˆ°æ›¿ä»£æ–¹æ³•ã€‚</strong></p>
<p>ä¸‹é¢å¼€å§‹ä½¿ç”¨AsyncSocketç¼–å†™æœåŠ¡å™¨ç«¯çš„ç¨‹åºï¼Œé¦–å…ˆè¯´ä¸€ä¸‹è¦å®ç°çš„ç›®çš„ï¼š</p>
<ol>
<li>ç”¨æˆ·è¾“å…¥æ˜µç§°ï¼Œå°†æ˜µç§°å‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨è¿”å›åœ¨çº¿åå•ï¼›</li>
<li>å®¢æˆ·ç«¯æ”¶åˆ°åœ¨çº¿åå•ï¼Œåˆ©ç”¨åœ¨çº¿åå•ç”Ÿæˆè”ç³»äººåˆ—è¡¨ï¼›</li>
<li>ç‚¹å‡»è”ç³»äººåˆ—è¡¨ï¼Œç”¨æˆ·å’ŒæœåŠ¡å™¨è¿›è¡Œå¯¹è¯ï¼›</li>
</ol>
<p>ä¸‹é¢å¼€å§‹è¿›å…¥æ­£é¢˜ï¼š</p>
   <a id="more"></a>
<h2 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h2><p>è¿™é‡Œåˆ›å»ºçš„æ˜¯Macçš„Applicationï¼Œé¦–å…ˆåˆ›å»ºï¼š</p>
<h3 id="Socketå•ä¾‹ç±»"><a href="#Socketå•ä¾‹ç±»" class="headerlink" title="Socketå•ä¾‹ç±»"></a>Socketå•ä¾‹ç±»</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySocket</span>: <span class="title">GCDAsyncSocketDelegate</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">var</span> listener: <span class="type">GCDAsyncSocket</span>!</div><div class="line">    <span class="keyword">static</span> <span class="keyword">let</span> sharedSocket = <span class="type">MySocket</span>()</div><div class="line">    <span class="keyword">private</span> <span class="keyword">init</span>() &#123;</div><div class="line">        <span class="keyword">let</span> globalQueue = dispatch_get_global_queue(<span class="type">DISPATCH_QUEUE_PRIORITY_DEFAULT</span>, <span class="number">0</span>)</div><div class="line">        listener = <span class="type">GCDAsyncSocket</span>(delegate: <span class="keyword">self</span>,delegateQueue: globalQueue)</div><div class="line">        listener.delegate = <span class="keyword">self</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ·»åŠ 3ä¸ªå±æ€§ï¼Œåˆ›å»ºç›‘å¬çš„æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> isRuning: <span class="type">Bool</span> = <span class="literal">false</span></div><div class="line"><span class="keyword">var</span> port: <span class="type">UInt16</span>!</div><div class="line"><span class="keyword">var</span> host: <span class="type">String</span>!</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">startListen</span><span class="params">()</span></span> &#123;</div><div class="line"><span class="keyword">if</span> !isRuning &#123;</div><div class="line">    <span class="keyword">do</span> &#123;</div><div class="line">        <span class="keyword">try</span> listener.acceptOnPort(port)</div><div class="line">        <span class="built_in">print</span>(<span class="string">"å¼€å§‹ç›‘å¬ <span class="subst">\(host)</span> <span class="subst">\(port)</span>"</span>)</div><div class="line">        isRuning = <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">catch</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"æœåŠ¡å¼€å¯å¤±è´¥"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"é‡æ–°ç›‘å¬"</span>)</div><div class="line">    listener.disconnect()</div><div class="line">    <span class="keyword">for</span> connectionSocket <span class="keyword">in</span> connectionSockets &#123;</div><div class="line">        connectionSocket.disconnect()</div><div class="line">    &#125;</div><div class="line">    isRuning = <span class="literal">false</span></div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ·»åŠ ä¸€ä¸ªå±æ€§ï¼Œåˆ›å»ºå‘é€æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> currentSocket: <span class="type">GCDAsyncSocket</span>!</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">sendMessage</span><span class="params">(message: NSData)</span></span> &#123;</div><div class="line">    currentSocket.writeData(message, withTimeout: -<span class="number">1</span>, tag: <span class="number">0</span>)</div><div class="line">    <span class="built_in">print</span>(<span class="string">"å‘é€æ¶ˆæ¯"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ·»åŠ å‘é€æ¶ˆæ¯æˆåŠŸå’Œè¿æ¥æˆåŠŸä¸¤ä¸ªä»£ç†æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> connectionSockets: [<span class="type">GCDAsyncSocket</span>] = []</div><div class="line"><span class="meta">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">socket</span><span class="params">(sock: GCDAsyncSocket, didWriteDataWithTag tag: Int)</span></span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"å‘é€æ¶ˆæ¯æˆåŠŸä¹‹åå›è°ƒ"</span>)</div><div class="line">    listener.readDataWithTimeout(-<span class="number">1</span>, tag: tag)</div><div class="line">&#125;</div><div class="line"><span class="meta">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">socket</span><span class="params">(sock: GCDAsyncSocket, didAcceptNewSocket newSocket: GCDAsyncSocket)</span></span> &#123;</div><div class="line">    newSocket.readDataWithTimeout(-<span class="number">1</span>, tag: <span class="number">0</span>)</div><div class="line">    connectionSockets.append(newSocket)</div><div class="line">    <span class="built_in">print</span>(<span class="string">"æ”¶åˆ°æ–°çš„socket"</span>)</div><div class="line">    <span class="built_in">print</span>(sock.userData)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ·»åŠ æ”¶åˆ°æ¶ˆæ¯çš„ä»£ç†äº‹ä»¶æ–¹æ³•ï¼Œå¹¶å¤„ç†æ”¶åˆ°çš„æ¶ˆæ¯ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> currentHost: <span class="type">String</span>!</div><div class="line"><span class="keyword">var</span> recivieMessage: (<span class="type">String</span> -&gt; ())!</div><div class="line"><span class="keyword">var</span> userStates: [[<span class="type">String</span>!]] = []</div><div class="line"></div><div class="line"><span class="meta">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">socket</span><span class="params">(sock: GCDAsyncSocket, didReadData data: NSData, withTag tag: Int)</span></span> &#123;</div><div class="line">    <span class="keyword">let</span> msg = <span class="type">String</span>(data: data, encoding: <span class="type">NSUTF8StringEncoding</span>)</div><div class="line">    recivieMessage(msg!)</div><div class="line">    <span class="keyword">let</span> tmpMsg = msg?.componentsSeparatedByString(<span class="string">":"</span>)</div><div class="line">    <span class="keyword">if</span> tmpMsg?.first == <span class="string">"user"</span> &#123;</div><div class="line">        <span class="keyword">do</span> &#123;</div><div class="line">            currentHost = <span class="string">"<span class="subst">\(sock.connectedHost!)</span>"</span></div><div class="line">            <span class="keyword">let</span> tmpArr = [currentHost, <span class="string">"<span class="subst">\(tmpMsg![<span class="number">1</span>])</span>"</span>, <span class="string">"1"</span>]</div><div class="line">            userStates.append(tmpArr)</div><div class="line">            <span class="keyword">let</span> json = <span class="keyword">try</span> <span class="type">NSJSONSerialization</span>.dataWithJSONObject(userStates, options: .<span class="type">PrettyPrinted</span>)</div><div class="line">            sock.writeData(json, withTimeout: -<span class="number">1</span>, tag: <span class="number">0</span>)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">catch</span> &#123;</div><div class="line">            <span class="built_in">print</span>(<span class="string">"ä¼ è¾“å‡ºé”™"</span>)</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    sock.readDataWithTimeout(-<span class="number">1</span>, tag: <span class="number">0</span>)</div><div class="line">    currentSocket = sock</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ·»åŠ æ–­å¼€è¿æ¥çš„ä»£ç†äº‹ä»¶æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">socketDidDisconnect</span><span class="params">(sock: GCDAsyncSocket, withError err: NSError?)</span></span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"socketè¿æ¥å·²ç»å…³é—­ <span class="subst">\(err)</span>"</span>)</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;userStates.<span class="built_in">count</span> &#123;</div><div class="line">        <span class="keyword">if</span> userStates[i][<span class="number">0</span>] == currentHost &#123;</div><div class="line">            userStates[i][<span class="number">2</span>] = <span class="string">"0"</span></div><div class="line">            <span class="keyword">let</span> msg = <span class="string">"<span class="subst">\(userStates[i][<span class="number">1</span>])</span>å·²ä¸‹çº¿"</span></div><div class="line">            sendMessages(msg, sockets: connectionSockets)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ­¤æ—¶æœåŠ¡å™¨çš„Socketå°è£…å·²ç»åšå¥½äº†ï¼Œä¸‹é¢æ˜¯ï¼š</p>
<h3 id="Server-UI"><a href="#Server-UI" class="headerlink" title="Server UI"></a>Server UI</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">NSViewController</span>, <span class="title">GCDAsyncSocketDelegate</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> messageField: <span class="type">NSTextField</span>!</div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> receiveField: <span class="type">NSTextField</span>!</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> socket: <span class="type">MySocket</span>!</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">        </div><div class="line">        socket = <span class="type">MySocket</span>.sharedSocket</div><div class="line">        socket.port = <span class="number">1234</span></div><div class="line">        socket.host = <span class="string">"127.0.0.1"</span></div><div class="line">        socket.startListen()</div><div class="line">        socket.recivieMessage = &#123; msg <span class="keyword">in</span></div><div class="line">            <span class="keyword">self</span>.receiveField.stringValue = msg</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="keyword">var</span> representedObject: <span class="type">AnyObject</span>? &#123;</div><div class="line">        <span class="keyword">didSet</span> &#123;</div><div class="line">            <span class="comment">// Update the view, if already loaded.</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">sendButtonDidTouch</span><span class="params">(sender: AnyObject)</span></span> &#123;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span> messageField.stringValue.isEmpty &#123;</div><div class="line">            receiveField.stringValue = <span class="string">"è¯·è¾“å…¥æ¶ˆæ¯"</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            socket.sendMessage((<span class="string">"msg:"</span> + messageField.stringValue).dataUsingEncoding(<span class="type">NSUTF8StringEncoding</span>)!)</div><div class="line">            messageField.stringValue = <span class="string">""</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯å®¢æˆ·ç«¯çš„åˆ¶ä½œï¼Œè¿™é‡Œæ˜¯iOSçš„Applicationï¼š</p>
<h2 id="Client"><a href="#Client" class="headerlink" title="Client"></a>Client</h2><p>åŒæ ·é¦–å…ˆå°è£…ä¸€ä¸ªSocketå•ä¾‹ç±»ï¼š</p>
<h3 id="Socketå•ä¾‹ç±»-1"><a href="#Socketå•ä¾‹ç±»-1" class="headerlink" title="Socketå•ä¾‹ç±»"></a>Socketå•ä¾‹ç±»</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySocket</span>: <span class="title">GCDAsyncSocketDelegate</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> port: <span class="type">UInt16</span>!</div><div class="line">    <span class="keyword">var</span> host: <span class="type">String</span>!</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> <span class="keyword">var</span> listener: <span class="type">GCDAsyncSocket</span>!</div><div class="line">    <span class="keyword">static</span> <span class="keyword">let</span> sharedSocket = <span class="type">MySocket</span>()</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> <span class="keyword">init</span>() &#123;</div><div class="line">        <span class="keyword">let</span> globalQueue = dispatch_get_global_queue(<span class="type">DISPATCH_QUEUE_PRIORITY_DEFAULT</span>, <span class="number">0</span>)</div><div class="line">        listener = <span class="type">GCDAsyncSocket</span>(delegate: <span class="keyword">self</span>,delegateQueue: globalQueue)</div><div class="line">    &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„åŒºåˆ«æ˜¯ä¸éœ€è¦ç›‘å¬ï¼Œä½†éœ€è¦è¿æ¥ï¼Œæ‰€ä»¥åˆ›å»ºè¿æ¥æœåŠ¡å™¨çš„æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">connectToServer</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">do</span> &#123;</div><div class="line">        <span class="keyword">try</span> listener.connectToHost(host, onPort: port)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">catch</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"è¿æ¥æœåŠ¡å™¨å‡ºé”™"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åˆ›å»ºæ¶ˆæ¯å‘é€çš„æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">sendMessage</span><span class="params">(message: NSData)</span></span> &#123;</div><div class="line">    listener.writeData(message, withTimeout: -<span class="number">1</span>, tag: <span class="number">0</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ·»åŠ æ¶ˆæ¯å‘é€æˆåŠŸåçš„ä»£ç†æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">socket</span><span class="params">(sock: GCDAsyncSocket, didWriteDataWithTag tag: Int)</span></span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"å‘é€æ¶ˆæ¯æˆåŠŸä¹‹åå›è°ƒ"</span>)</div><div class="line">    listener.readDataWithTimeout(-<span class="number">1</span>, tag: tag)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åˆ›å»ºä¸¤ä¸ªé—­åŒ…ï¼Œæ·»åŠ æ¥æ”¶æ¶ˆæ¯çš„ä»£ç†æ–¹æ³•ï¼Œå¹¶å¤„ç†æ¥æ”¶çš„æ•°æ®ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> receiveMessage: (<span class="type">String</span> -&gt; ())!</div><div class="line">   <span class="keyword">var</span> receuveUserStates: (<span class="type">NSArray</span> -&gt; <span class="type">Void</span>)!</div><div class="line">   </div><div class="line">   <span class="meta">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">socket</span><span class="params">(sock: GCDAsyncSocket, didReadData data: NSData, withTag tag: Int)</span></span> &#123;</div><div class="line">       </div><div class="line">       <span class="keyword">let</span> receive = <span class="type">String</span>(data: data, encoding: <span class="type">NSUTF8StringEncoding</span>)</div><div class="line">       <span class="keyword">let</span> tmpMsg = receive?.componentsSeparatedByString(<span class="string">":"</span>)</div><div class="line">       </div><div class="line">       <span class="keyword">if</span> tmpMsg?.first == <span class="string">"msg"</span> &#123;</div><div class="line">           receiveMessage(receive!)</div><div class="line">       &#125;</div><div class="line">       <span class="keyword">else</span> &#123;</div><div class="line">           <span class="keyword">do</span> &#123;</div><div class="line">               <span class="keyword">let</span> receive = <span class="keyword">try</span> <span class="type">NSJSONSerialization</span>.<span class="type">JSONObjectWithData</span>(data, options: .<span class="type">MutableLeaves</span>) <span class="keyword">as</span>! <span class="type">NSArray</span></div><div class="line">               receuveUserStates(receive)</div><div class="line">           &#125;</div><div class="line">           <span class="keyword">catch</span> &#123;</div><div class="line">               <span class="built_in">print</span>(<span class="string">"è¯»å–Jsonå‡ºé”™"</span>)</div><div class="line">           &#125;</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       sock.readDataWithTimeout(-<span class="number">1</span>, tag: <span class="number">0</span>)</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·å®¢æˆ·ç«¯çš„Socketå°±å°è£…å¥½äº†ï¼Œä¸‹é¢æ˜¯å®¢æˆ·ç«¯çš„UIéƒ¨åˆ†ï¼š</p>
<h3 id="Client-UI"><a href="#Client-UI" class="headerlink" title="Client UI"></a>Client UI</h3><p>å®¢æˆ·ç«¯çš„UIæ¯”è¾ƒå¤æ‚ï¼Œåˆ†ä¸º3å±‚ï¼Œç¬¬ä¸€å±‚æ˜¯ç”¨æˆ·è¾“å…¥è‡ªå·±çš„æ˜µç§°ï¼Œå°†æ˜µç§°å‘é€åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨è¿”å›åœ¨çº¿åå•ï¼Œåˆ©ç”¨åœ¨çº¿åå•è¿›å…¥ä¸‹ä¸€å±‚ã€‚</p>
<h4 id="ç¬¬ä¸€å±‚"><a href="#ç¬¬ä¸€å±‚" class="headerlink" title="ç¬¬ä¸€å±‚"></a>ç¬¬ä¸€å±‚</h4><p>æ­å»ºUIï¼Œç‚¹å‡»å‘é€æ—¶è¿æ¥æœåŠ¡å™¨å¹¶å‘é€æ ¼å¼æ¶ˆæ¯ï¼Œåˆ©ç”¨é—­åŒ…å°†ä¼ å›çš„æ•°æ®å¹¶æ‰“å¼€ç¬¬äºŒå±‚ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainVC</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> nicenameField: <span class="type">UITextField</span>!</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> userStates: <span class="type">NSArray</span>!</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">        </div><div class="line">        <span class="type">MySocket</span>.sharedSocket.receuveUserStates = &#123; arr <span class="keyword">in</span></div><div class="line">            <span class="keyword">self</span>.userStates = arr</div><div class="line">            <span class="keyword">let</span> tableVC = <span class="type">TableVC</span>()</div><div class="line">            <span class="built_in">print</span>(<span class="keyword">self</span>.userStates)</div><div class="line">            tableVC.userStates = <span class="keyword">self</span>.userStates</div><div class="line">            dispatch_async(dispatch_get_main_queue(), &#123; </div><div class="line">                <span class="keyword">self</span>.presentViewController(tableVC, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</div><div class="line">            &#125;)</div><div class="line">            <span class="built_in">print</span>(<span class="string">"é—­åŒ…userStates"</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">didReceiveMemoryWarning</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.didReceiveMemoryWarning()</div><div class="line">        </div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">submitButtonClicked</span><span class="params">(sender: AnyObject)</span></span> &#123;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span> nicenameField.text == <span class="string">""</span> &#123;</div><div class="line">            <span class="keyword">let</span> alert = <span class="type">UIAlertController</span>(title: <span class="string">"æç¤º"</span>, message: <span class="string">"è¯·è¾“å…¥æ˜µç§°"</span>, preferredStyle: .<span class="type">Alert</span>)</div><div class="line">            <span class="keyword">let</span> action = <span class="type">UIAlertAction</span>(title: <span class="string">"å¥½çš„"</span>, style: .<span class="type">Default</span>, handler: &#123; (action) <span class="keyword">in</span></div><div class="line">                <span class="built_in">print</span>(<span class="string">"æç¤ºæ¡†è¢«ç‚¹å‡»"</span>)</div><div class="line">            &#125;)</div><div class="line">            alert.addAction(action)</div><div class="line">            <span class="keyword">self</span>.presentViewController(alert, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">let</span> socket = <span class="type">MySocket</span>.sharedSocket</div><div class="line">            socket.host = <span class="string">"127.0.0.1"</span></div><div class="line">            socket.port = <span class="number">1234</span></div><div class="line">            socket.connectToServer()</div><div class="line">            socket.sendMessage(<span class="string">"user:<span class="subst">\(nicenameField.text!)</span>"</span>.dataUsingEncoding(<span class="type">NSUTF8StringEncoding</span>)!)</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h4 id="ç¬¬äºŒå±‚"><a href="#ç¬¬äºŒå±‚" class="headerlink" title="ç¬¬äºŒå±‚"></a>ç¬¬äºŒå±‚</h4><p>åˆ©ç”¨æ”¶åˆ°çš„åœ¨çº¿åå•ï¼Œåˆ›å»ºTableViewåˆ—è¡¨ï¼Œç‚¹å‡»åˆ—è¡¨é¡¹æ—¶æ‰“å¼€ç¬¬ä¸‰å±‚ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TableVC</span>: <span class="title">UITableViewController</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> nickname: <span class="type">String</span>!</div><div class="line">    <span class="keyword">var</span> myNavigationBar: <span class="type">UINavigationBar</span>!</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> userStates: <span class="type">NSArray</span>!</div><div class="line"></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">        </div><div class="line">        installUI()</div><div class="line">        <span class="built_in">print</span>(userStates)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(tableView: UITableView, heightForRowAtIndexPath indexPath: NSIndexPath)</span></span> -&gt; <span class="type">CGFloat</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">44</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">numberOfSectionsInTableView</span><span class="params">(tableView: UITableView)</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(tableView: UITableView, numberOfRowsInSection section: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> userStates.<span class="built_in">count</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(tableView: UITableView, didSelectRowAtIndexPath indexPath: NSIndexPath)</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(indexPath.row)</div><div class="line">        <span class="keyword">let</span> ioVC = <span class="type">IOVC</span>()</div><div class="line">        <span class="keyword">let</span> tmpArr = userStates[indexPath.row] <span class="keyword">as</span>! <span class="type">NSArray</span></div><div class="line">        ioVC.nickname = tmpArr[<span class="number">1</span>] <span class="keyword">as</span>! <span class="type">String</span></div><div class="line">        <span class="keyword">self</span>.presentViewController(ioVC, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath)</span></span> -&gt; <span class="type">UITableViewCell</span> &#123;</div><div class="line">        </div><div class="line">        <span class="keyword">let</span> cell = tableView.dequeueReusableCellWithIdentifier(<span class="string">"TableCell"</span>, forIndexPath: indexPath) <span class="keyword">as</span>! <span class="type">TableCell</span></div><div class="line">        <span class="keyword">let</span> tmpArr = userStates[indexPath.row] <span class="keyword">as</span>! <span class="type">NSArray</span></div><div class="line">        cell.nicknameLabel.text = (tmpArr[<span class="number">1</span>] <span class="keyword">as</span>? <span class="type">String</span>)!</div><div class="line">        <span class="built_in">print</span>(tmpArr[<span class="number">1</span>] <span class="keyword">as</span>? <span class="type">String</span>)</div><div class="line">        <span class="keyword">if</span> tmpArr[<span class="number">2</span>] <span class="keyword">as</span>! <span class="type">String</span> == <span class="string">"1"</span> &#123;</div><div class="line">            cell.stateView.backgroundColor = <span class="type">UIColor</span>.greenColor()</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> cell</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">installUI</span><span class="params">()</span></span> &#123;</div><div class="line">        </div><div class="line">        <span class="keyword">let</span> nib = <span class="type">UINib</span>(nibName: <span class="string">"TableCell"</span>, bundle: <span class="literal">nil</span>)</div><div class="line">        <span class="keyword">self</span>.tableView.registerNib(nib, forCellReuseIdentifier: <span class="string">"TableCell"</span>)</div><div class="line">        </div><div class="line">        <span class="keyword">let</span> screenRect = <span class="type">UIScreen</span>.mainScreen().bounds</div><div class="line">        myNavigationBar = <span class="type">UINavigationBar</span>(frame: <span class="type">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, screenRect.size.width, <span class="number">64</span>))</div><div class="line">        myNavigationBar.tintColor = <span class="type">UIColor</span>.redColor()</div><div class="line">        <span class="keyword">let</span> navigationTitleItem = <span class="type">UINavigationItem</span>(title: <span class="string">"å½“å‰åœ¨çº¿"</span>)</div><div class="line">        myNavigationBar.pushNavigationItem(navigationTitleItem, animated: <span class="literal">true</span>)</div><div class="line">        myNavigationBar.barStyle = .<span class="type">Black</span></div><div class="line">        <span class="keyword">self</span>.tableView.tableHeaderView = myNavigationBar</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="ç¬¬ä¸‰å±‚"><a href="#ç¬¬ä¸‰å±‚" class="headerlink" title="ç¬¬ä¸‰å±‚"></a>ç¬¬ä¸‰å±‚</h4><p>ç‚¹å‡»å‘é€å¯¹è¯åˆ°æœåŠ¡å™¨ï¼Œåˆ©ç”¨é—­åŒ…å°†æœåŠ¡å™¨è¿”å›çš„æ¶ˆæ¯æ˜¾ç¤ºåœ¨è¿™é‡Œï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">IOVC</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> nickname: <span class="type">String</span>!</div><div class="line">    <span class="keyword">var</span> messageField: <span class="type">UITextField</span>!</div><div class="line">    <span class="keyword">var</span> submitButton: <span class="type">UIButton</span>!</div><div class="line">    <span class="keyword">var</span> receiveView: <span class="type">UITextView</span>!</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line"></div><div class="line">        installUI(nickname)</div><div class="line">        <span class="type">MySocket</span>.sharedSocket.receiveMessage = &#123; receive <span class="keyword">in</span></div><div class="line">            </div><div class="line">            dispatch_async(dispatch_get_main_queue(), &#123; </div><div class="line">                <span class="keyword">self</span>.receiveView.text = receive</div><div class="line">            &#125;)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">submitButtonDidTouch</span><span class="params">()</span></span> &#123;</div><div class="line">        </div><div class="line">        <span class="keyword">if</span> messageField.text == <span class="string">""</span> &#123;</div><div class="line">            <span class="keyword">let</span> alert = <span class="type">UIAlertController</span>(title: <span class="string">"æç¤º"</span>, message: <span class="string">"å‘é€æ¶ˆæ¯ä¸èƒ½ä¸ºç©º"</span>, preferredStyle: .<span class="type">Alert</span>)</div><div class="line">            <span class="keyword">let</span> action = <span class="type">UIAlertAction</span>(title: <span class="string">"å¥½çš„"</span>, style: .<span class="type">Default</span>, handler: &#123; (action) <span class="keyword">in</span></div><div class="line">                <span class="built_in">print</span>(<span class="string">"æç¤ºæ¡†è¢«ç‚¹å‡»"</span>)</div><div class="line">            &#125;)</div><div class="line">            alert.addAction(action)</div><div class="line">            <span class="keyword">self</span>.presentViewController(alert, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">let</span> message = (<span class="string">"<span class="subst">\(nickname)</span>:"</span>+messageField.text!).dataUsingEncoding(<span class="type">NSUTF8StringEncoding</span>)</div><div class="line">            <span class="keyword">let</span> socket = <span class="type">MySocket</span>.sharedSocket</div><div class="line">            socket.sendMessage(message!)</div><div class="line">            messageField.text = <span class="string">""</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">installUI</span><span class="params">(nickname: String)</span></span> &#123;</div><div class="line">        </div><div class="line">        <span class="keyword">self</span>.view.backgroundColor = <span class="type">UIColor</span>(red: <span class="number">0</span>/<span class="number">255</span>, green: <span class="number">204</span>/<span class="number">255</span>, blue: <span class="number">102</span>/<span class="number">255</span>, alpha: <span class="number">1</span>)</div><div class="line">        </div><div class="line">        <span class="keyword">let</span> screenBouns = <span class="type">UIScreen</span>.mainScreen().bounds</div><div class="line">        <span class="keyword">let</span> navigationBar = <span class="type">UINavigationBar</span>(frame: <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: screenBouns.size.width, height: <span class="number">64</span>))</div><div class="line">        <span class="keyword">let</span> navigationTitle = <span class="type">UINavigationItem</span>(title: nickname)</div><div class="line">        navigationBar.pushNavigationItem(navigationTitle, animated: <span class="literal">true</span>)</div><div class="line">        navigationBar.barStyle = .<span class="type">Black</span></div><div class="line">        <span class="keyword">self</span>.view.addSubview(navigationBar)</div><div class="line">        </div><div class="line">        messageField = <span class="type">UITextField</span>(frame: <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: screenBouns.size.width, height: <span class="number">30</span>))</div><div class="line">        messageField.center = <span class="keyword">self</span>.view.center</div><div class="line">        messageField.center.y = messageField.center.y + <span class="number">30</span></div><div class="line">        messageField.borderStyle = .<span class="type">None</span></div><div class="line">        messageField.textAlignment = .<span class="type">Center</span></div><div class="line">        messageField.font = <span class="type">UIFont</span>.systemFontOfSize(<span class="number">14</span>)</div><div class="line">        messageField.textColor = <span class="type">UIColor</span>.whiteColor()</div><div class="line">        <span class="keyword">self</span>.view.addSubview(messageField)</div><div class="line">        </div><div class="line">        <span class="keyword">let</span> topCutLine = <span class="type">UIView</span>(frame: <span class="type">CGRect</span>(x: <span class="number">20</span>, y: <span class="number">0</span>, width: screenBouns.size.width - <span class="number">40</span>, height: <span class="number">1</span>))</div><div class="line">        topCutLine.backgroundColor = <span class="type">UIColor</span>.whiteColor()</div><div class="line">        topCutLine.center = messageField.center</div><div class="line">        topCutLine.center.y = messageField.center.y - <span class="number">20</span></div><div class="line">        <span class="keyword">self</span>.view.addSubview(topCutLine)</div><div class="line">        </div><div class="line">        <span class="keyword">let</span> bottomCutLine = <span class="type">UIView</span>(frame: <span class="type">CGRect</span>(x: <span class="number">20</span>, y: <span class="number">0</span>, width: screenBouns.size.width - <span class="number">40</span>, height: <span class="number">1</span>))</div><div class="line">        bottomCutLine.backgroundColor = <span class="type">UIColor</span>.whiteColor()</div><div class="line">        bottomCutLine.center = messageField.center</div><div class="line">        bottomCutLine.center.y = messageField.center.y + <span class="number">20</span></div><div class="line">        <span class="keyword">self</span>.view.addSubview(bottomCutLine)</div><div class="line">        </div><div class="line">        submitButton = <span class="type">UIButton</span>(frame: <span class="type">CGRect</span>(x: <span class="number">20</span>, y: <span class="number">0</span>, width: screenBouns.size.width - <span class="number">40</span>, height: <span class="number">44</span>))</div><div class="line">        submitButton.backgroundColor = <span class="type">UIColor</span>.darkGrayColor()</div><div class="line">        submitButton.layer.cornerRadius = <span class="number">5</span></div><div class="line">        submitButton.setTitle(<span class="string">"å‘é€åˆ°æœåŠ¡å™¨"</span>, forState: .<span class="type">Normal</span>)</div><div class="line">        submitButton.titleLabel?.font = <span class="type">UIFont</span>.systemFontOfSize(<span class="number">15</span>)</div><div class="line">        submitButton.setTitleColor(<span class="type">UIColor</span>.whiteColor(), forState: .<span class="type">Normal</span>)</div><div class="line">        submitButton.center = <span class="keyword">self</span>.view.center</div><div class="line">        submitButton.center.y = <span class="keyword">self</span>.view.frame.size.height - <span class="number">68</span></div><div class="line">        submitButton.addTarget(<span class="keyword">self</span>, action: #selector(<span class="type">IOVC</span>.submitButtonDidTouch), forControlEvents: .<span class="type">TouchUpInside</span>)</div><div class="line">        <span class="keyword">self</span>.view.addSubview(submitButton)</div><div class="line">        </div><div class="line">        receiveView = <span class="type">UITextView</span>(frame: <span class="type">CGRect</span>(x: <span class="number">20</span>, y: <span class="number">0</span>, width: screenBouns.size.width - <span class="number">40</span>, height: <span class="number">88</span>))</div><div class="line">        receiveView.textAlignment = .<span class="type">Center</span></div><div class="line">        receiveView.backgroundColor = <span class="type">UIColor</span>.clearColor()</div><div class="line">        receiveView.text = <span class="string">"ç­‰å¾…å›å¤"</span></div><div class="line">        receiveView.textColor = <span class="type">UIColor</span>.whiteColor()</div><div class="line">        receiveView.font = <span class="type">UIFont</span>.systemFontOfSize(<span class="number">14</span>)</div><div class="line">        receiveView.center = <span class="keyword">self</span>.view.center</div><div class="line">        receiveView.center.y = <span class="number">120</span></div><div class="line">        <span class="keyword">self</span>.view.addSubview(receiveView)</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Demoä¸‹è½½è¯·ç‚¹å‡»è¿™é‡Œ"><a href="#Demoä¸‹è½½è¯·ç‚¹å‡»è¿™é‡Œ" class="headerlink" title="Demoä¸‹è½½è¯·ç‚¹å‡»è¿™é‡Œ"></a>Demoä¸‹è½½è¯·<a href="https://github.com/tianziyao/Socket-C-S" target="_blank" rel="external">ç‚¹å‡»è¿™é‡Œ</a></h2>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;iOSæä¾›çš„Socketç½‘ç»œç¼–ç¨‹çš„æ¥å£æœ‰CFSocketï¼ŒBSD Socketï¼Œæ¯”è¾ƒè‘—åçš„ç¬¬ä¸‰æ–¹åº“æ˜¯AsyncSocketã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;BSD Socket&lt;/strong&gt; æ˜¯UNIXç³»ç»Ÿä¸­é€šç”¨çš„ç½‘ç»œæ¥å£ï¼Œå®ƒä¸ä»…æ”¯æŒå„ç§ä¸åŒçš„ç½‘ç»œç±»å‹ï¼Œè€Œä¸”ä¹Ÿæ˜¯ä¸€ç§å†…éƒ¨è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æœºåˆ¶ã€‚è€ŒiOSç³»ç»Ÿå…¶å®æœ¬è´¨å°±æ˜¯UNIXï¼Œæ‰€ä»¥å¯ä»¥ç”¨ï¼Œä½†æ˜¯æ¯”è¾ƒå¤æ‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CFSocket&lt;/strong&gt; æ˜¯è‹¹æœæä¾›ç»™æˆ‘ä»¬çš„ä½¿ç”¨Socketçš„æ–¹å¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;AsyncSocket&lt;/strong&gt; æ˜¯ä¸€ä¸ªåº”ç”¨æ¯”è¾ƒå¹¿æ³›çš„å¼€æºåº“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬ç”¨ä»£ç æ¥æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨AsyncSocketæ¥åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ã€‚&lt;/p&gt;
&lt;p&gt;AsyncSocketå…¨åæ˜¯&lt;strong&gt;CocoaAsyncSocket&lt;/strong&gt;ï¼Œå®ƒçš„GitHubåœ°å€&lt;a href=&quot;https://github.com/robbiehanson/CocoaAsyncSocket&quot;&gt;ç‚¹æ­¤è®¿é—®&lt;/a&gt;ã€‚AsyncSocketä½¿ç”¨CocoaPodså®‰è£…å’Œæ‹–æ”¾å®‰è£…æœ‰æ‰€ä¸åŒã€‚CocoaPodsä¸Šçš„ç‰ˆæœ¬åªæœ‰GCDAsyncSocketï¼ŒGItHubä¸Šå¤šäº†RunloopAsyncSocketï¼Œè€Œåè€…ç°åœ¨å·²ç»å¼ƒç”¨ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨CocoaPodså®‰è£…ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºç‚¹æ˜¯&lt;code&gt;onsocketWillDisconnect&lt;/code&gt;è¿™ä¸ªä»£ç†æ–¹æ³•åœ¨GCDçš„ç‰ˆæœ¬é‡Œæš‚æ—¶æ²¡æœ‰ï¼Œä¹Ÿæ²¡æœ‰æ‰¾åˆ°æ›¿ä»£æ–¹æ³•ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢å¼€å§‹ä½¿ç”¨AsyncSocketç¼–å†™æœåŠ¡å™¨ç«¯çš„ç¨‹åºï¼Œé¦–å…ˆè¯´ä¸€ä¸‹è¦å®ç°çš„ç›®çš„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç”¨æˆ·è¾“å…¥æ˜µç§°ï¼Œå°†æ˜µç§°å‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨è¿”å›åœ¨çº¿åå•ï¼›&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯æ”¶åˆ°åœ¨çº¿åå•ï¼Œåˆ©ç”¨åœ¨çº¿åå•ç”Ÿæˆè”ç³»äººåˆ—è¡¨ï¼›&lt;/li&gt;
&lt;li&gt;ç‚¹å‡»è”ç³»äººåˆ—è¡¨ï¼Œç”¨æˆ·å’ŒæœåŠ¡å™¨è¿›è¡Œå¯¹è¯ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸‹é¢å¼€å§‹è¿›å…¥æ­£é¢˜ï¼š&lt;/p&gt;
    
    </summary>
    
      <category term="ç½‘ç»œé€šè®¯" scheme="http://yoursite.com/categories/%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF/"/>
    
    
      <category term="ç½‘ç»œé€šè®¯" scheme="http://yoursite.com/tags/%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF/"/>
    
      <category term="Socketé€šè®¯" scheme="http://yoursite.com/tags/Socket%E9%80%9A%E8%AE%AF/"/>
    
  </entry>
  
  <entry>
    <title>iOS Socketé€šè®¯ - BSD Socket</title>
    <link href="http://yoursite.com/2016/09/15/iOS%20Socket%E9%80%9A%E8%AE%AF%20-%20BSD%20Socket/"/>
    <id>http://yoursite.com/2016/09/15/iOS Socketé€šè®¯ - BSD Socket/</id>
    <published>2016-09-14T18:24:00.000Z</published>
    <updated>2016-09-18T05:15:31.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¥—æ¥å­—ï¼ˆSocketï¼‰æ˜¯é€šä¿¡çš„åŸºçŸ³ï¼Œæ˜¯æ”¯æŒTCP/IPåè®®çš„ç½‘ç»œé€šä¿¡çš„åŸºæœ¬æ“ä½œå•å…ƒï¼ŒåŒ…å«è¿›è¡Œç½‘ç»œé€šä¿¡å¿…é¡»çš„äº”ç§ä¿¡æ¯ï¼šè¿æ¥ä½¿ç”¨çš„åè®®ï¼Œæœ¬åœ°ä¸»æœºçš„IPåœ°å€ï¼Œæœ¬åœ°è¿›ç¨‹çš„åè®®ç«¯å£ï¼Œè¿œåœ°ä¸»æœºçš„IPåœ°å€ï¼Œè¿œåœ°è¿›ç¨‹çš„åè®®ç«¯å£ã€‚</p>
<p>Socketæè¿°äº†ä¸€ä¸ªIPã€ç«¯å£å¯¹ã€‚å®ƒç®€åŒ–äº†ç¨‹åºå‘˜çš„æ“ä½œï¼ŒçŸ¥é“å¯¹æ–¹çš„IPä»¥åŠPORTå°±å¯ä»¥ç»™å¯¹æ–¹å‘é€æ¶ˆæ¯ï¼Œå†ç”±æœåŠ¡å™¨ç«¯æ¥å¤„ç†å‘é€çš„è¿™äº›æ¶ˆæ¯ã€‚æ‰€ä»¥ï¼ŒSocketä¸€å®šåŒ…å«äº†é€šä¿¡çš„åŒå‘ï¼Œå³å®¢æˆ·ç«¯ï¼ˆClientï¼‰ä¸æœåŠ¡ç«¯ï¼ˆserverï¼‰ã€‚</p>
<p>æ¯ä¸€ä¸ªåº”ç”¨æˆ–è€…è¯´æœåŠ¡ï¼Œéƒ½æœ‰ä¸€ä¸ªç«¯å£ã€‚æ¯”å¦‚DNSçš„53ç«¯å£ï¼Œhttpçš„80ç«¯å£ã€‚æˆ‘ä»¬èƒ½ç”±DNSè¯·æ±‚åˆ°æŸ¥è¯¢ä¿¡æ¯ï¼Œæ˜¯å› ä¸ºDNSæœåŠ¡å™¨æ—¶æ—¶åˆ»åˆ»éƒ½åœ¨ç›‘å¬53ç«¯å£ï¼Œå½“æ”¶åˆ°æˆ‘ä»¬çš„æŸ¥è¯¢è¯·æ±‚ä»¥åï¼Œå°±èƒ½å¤Ÿè¿”å›æˆ‘ä»¬æƒ³è¦çš„IPä¿¡æ¯ã€‚æ‰€ä»¥ï¼Œä»ç¨‹åºè®¾è®¡ä¸Šæ¥è®²ï¼Œåº”è¯¥åŒ…å«ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li><p>æœåŠ¡ç«¯åˆ©ç”¨Socketç›‘å¬ç«¯å£ï¼›</p>
<p>æœåŠ¡å™¨ç«¯å¥—æ¥å­—å¹¶ä¸å®šä½å…·ä½“çš„å®¢æˆ·ç«¯å¥—æ¥å­—ï¼Œè€Œæ˜¯å¤„äºç­‰å¾…è¿æ¥çš„çŠ¶æ€ï¼Œå®æ—¶ç›‘æ§ç½‘ç»œçŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ã€‚</p>
</li>
<li><p>å®¢æˆ·ç«¯å‘èµ·è¿æ¥ï¼›</p>
<p>æŒ‡å®¢æˆ·ç«¯çš„å¥—æ¥å­—æå‡ºè¿æ¥è¯·æ±‚ï¼Œè¦è¿æ¥çš„ç›®æ ‡æ˜¯æœåŠ¡å™¨ç«¯çš„å¥—æ¥å­—ã€‚ä¸ºæ­¤ï¼Œå®¢æˆ·ç«¯çš„å¥—æ¥å­—å¿…é¡»é¦–å…ˆæè¿°å®ƒè¦è¿æ¥çš„æœåŠ¡å™¨çš„å¥—æ¥å­—ï¼ŒæŒ‡å‡ºæœåŠ¡å™¨ç«¯å¥—æ¥å­—çš„åœ°å€å’Œç«¯å£å·ï¼Œç„¶åå°±å‘æœåŠ¡å™¨ç«¯å¥—æ¥å­—æå‡ºè¿æ¥è¯·æ±‚ã€‚</p>
</li>
<li><p>æœåŠ¡ç«¯è¿”å›ä¿¡æ¯ï¼Œå»ºç«‹è¿æ¥ï¼Œå¼€å§‹é€šä¿¡ï¼›</p>
<p>å½“æœåŠ¡å™¨ç«¯å¥—æ¥å­—ç›‘å¬åˆ°æˆ–è€…è¯´æ¥æ”¶åˆ°å®¢æˆ·ç«¯å¥—æ¥å­—çš„è¿æ¥è¯·æ±‚æ—¶ï¼Œå°±å“åº”å®¢æˆ·ç«¯å¥—æ¥å­—çš„è¯·æ±‚ï¼Œå»ºç«‹ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼ŒæŠŠæœåŠ¡å™¨ç«¯å¥—æ¥å­—çš„æè¿°å‘ç»™å®¢æˆ·ç«¯ï¼Œä¸€æ—¦å®¢æˆ·ç«¯ç¡®è®¤äº†æ­¤æè¿°ï¼ŒåŒæ–¹å°±æ­£å¼å»ºç«‹è¿æ¥ã€‚è€ŒæœåŠ¡å™¨ç«¯å¥—æ¥å­—ç»§ç»­å¤„äºç›‘å¬çŠ¶æ€ï¼Œç»§ç»­æ¥æ”¶å…¶ä»–å®¢æˆ·ç«¯å¥—æ¥å­—çš„è¿æ¥è¯·æ±‚ã€‚</p>
</li>
</ol>
<p>æ€»ç»“å¦‚ä¸‹ï¼šSocketæ˜¯å¯¹TCP/IPåè®®çš„å°è£…ï¼ŒSocketæœ¬èº«å¹¶ä¸æ˜¯åè®®ï¼Œæ²¡æœ‰è§„å®šè®¡ç®—æœºåº”å½“æ€ä¹ˆæ ·ä¼ é€’æ¶ˆæ¯ï¼Œåªæ˜¯ç»™ç¨‹åºå‘˜æä¾›äº†ä¸€ä¸ªå‘é€æ¶ˆæ¯çš„è°ƒç”¨æ¥å£ï¼ˆAPIï¼‰ï¼Œç¨‹åºå‘˜ä½¿ç”¨è¿™ä¸ªæ¥å£æä¾›çš„æ–¹æ³•ï¼Œå‘é€ä¸æ¥æ”¶æ¶ˆæ¯ã€‚é€šè¿‡Socketæˆ‘ä»¬æ‰èƒ½ä½¿ç”¨TCP/IPåè®®ã€‚</p>
   <a id="more"></a>
<h2 id="iOSç½‘ç»œç¼–ç¨‹å±‚æ¬¡ç»“æ„"><a href="#iOSç½‘ç»œç¼–ç¨‹å±‚æ¬¡ç»“æ„" class="headerlink" title="iOSç½‘ç»œç¼–ç¨‹å±‚æ¬¡ç»“æ„"></a>iOSç½‘ç»œç¼–ç¨‹å±‚æ¬¡ç»“æ„</h2><p>Cocoaå±‚æ˜¯æœ€ä¸Šå±‚çš„åŸºäº Objective-C çš„ APIï¼Œæ¯”å¦‚ URLè®¿é—®ï¼ŒNSStreamï¼ŒBonjourï¼ŒGameKitç­‰ï¼Œè¿™æ˜¯å¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬å¸¸ç”¨çš„ APIã€‚Cocoa å±‚æ˜¯åŸºäº Core Foundation å®ç°çš„ã€‚</p>
<p>Core Foundationå±‚ï¼šå› ä¸ºç›´æ¥ä½¿ç”¨Socketéœ€è¦æ›´å¤šçš„ç¼–ç¨‹å·¥ä½œï¼Œæ‰€ä»¥è‹¹æœå¯¹OSå±‚çš„Socketè¿›è¡Œç®€å•çš„å°è£…ä»¥ç®€åŒ–ç¼–ç¨‹ä»»åŠ¡ã€‚è¯¥å±‚æä¾›äº†CFNetworkå’ŒCFNetServicesä¸¤ä¸ªç±»ï¼Œå…¶ä¸­CFNetworkåˆæ˜¯åŸºäºCFStreamå’ŒCFSocketã€‚</p>
<p>OSå±‚ï¼šæœ€åº•å±‚çš„BSD Socketæä¾›äº†å¯¹ç½‘ç»œç¼–ç¨‹æœ€å¤§ç¨‹åº¦çš„æ§åˆ¶ï¼Œä½†æ˜¯ç¼–ç¨‹å·¥ä½œä¹Ÿæ˜¯æœ€å¤šçš„ï¼Œä½†æ˜¯ç¼–ç¨‹å·¥ä½œä¹Ÿæ˜¯æœ€å¤šçš„ã€‚å› æ­¤ï¼Œè‹¹æœå»ºè®®æˆ‘ä»¬ä½¿ç”¨ Core Foundation åŠä»¥ä¸Šå±‚çš„ API è¿›è¡Œç¼–ç¨‹ã€‚å…³äºBSD Socketçš„ä»‹ç»è¯·æŸ¥çœ‹å®ƒçš„ç»´åŸºè¯æ¡ï¼Œ<a href="https://zh.wikipedia.org/wiki/Berkeley%E5%A5%97%E6%8E%A5%E5%AD%97" target="_blank" rel="external">ä¼ é€é—¨</a>ã€‚</p>
<ul>
<li>Cocoaå±‚<ul>
<li>NSURL</li>
<li>NSURLRequest</li>
<li>NSURLResponse</li>
<li>NSURLConnection</li>
<li>NSURLSession</li>
<li>GameKit</li>
<li>WebKit</li>
</ul>
</li>
<li>Core Foundationå±‚<ul>
<li>åŸºäºCè¯­è¨€çš„CFNetworkingå’ŒCFNetServices</li>
</ul>
</li>
<li>OSå±‚<ul>
<li>åŸºäºCè¯­è¨€çš„BSD Socket</li>
</ul>
</li>
</ul>
<p>iOSæä¾›çš„Socketç½‘ç»œç¼–ç¨‹çš„æ¥å£æœ‰CFSocketï¼ŒBSD Socketï¼Œæ¯”è¾ƒè‘—åçš„ç¬¬ä¸‰æ–¹åº“æ˜¯AsyncSocketã€‚</p>
<p><strong>BSD Socket</strong> æ˜¯UNIXç³»ç»Ÿä¸­é€šç”¨çš„ç½‘ç»œæ¥å£ï¼Œå®ƒä¸ä»…æ”¯æŒå„ç§ä¸åŒçš„ç½‘ç»œç±»å‹ï¼Œè€Œä¸”ä¹Ÿæ˜¯ä¸€ç§å†…éƒ¨è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æœºåˆ¶ã€‚è€ŒiOSç³»ç»Ÿå…¶å®æœ¬è´¨å°±æ˜¯UNIXï¼Œæ‰€ä»¥å¯ä»¥ç”¨ï¼Œä½†æ˜¯æ¯”è¾ƒå¤æ‚ã€‚</p>
<p><strong>CFSocket</strong> æ˜¯è‹¹æœæä¾›ç»™æˆ‘ä»¬çš„ä½¿ç”¨Socketçš„æ–¹å¼ã€‚</p>
<p><strong>AsyncSocket</strong> æ˜¯ä¸€ä¸ªåº”ç”¨æ¯”è¾ƒå¹¿æ³›çš„å¼€æºåº“ã€‚</p>
<h2 id="Socketå’ŒHTTPçš„åŒºåˆ«"><a href="#Socketå’ŒHTTPçš„åŒºåˆ«" class="headerlink" title="Socketå’ŒHTTPçš„åŒºåˆ«"></a>Socketå’ŒHTTPçš„åŒºåˆ«</h2><p>HTTPæ˜¯åº”ç”¨å±‚çš„åè®®ï¼Œè€ŒSocketæ˜¯ä¼ è¾“å±‚çš„åè®®ã€‚ä¸¤è€…å»ºç«‹åœ¨TCP/IPåè®®ä¹‹ä¸Šï¼Œå…¶ä¸­TCPåè®®æ˜¯ä¼ è¾“å±‚çš„åè®®ï¼ŒIPåè®®æ˜¯ç½‘ç»œå±‚çš„åè®®ã€‚</p>
<p>HTTPè¿æ¥æ˜¯çŸ­è¿æ¥ï¼Œå®¢æˆ·ç«¯å‘é€çš„æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦æœåŠ¡å™¨å›é€å“åº”ï¼Œåœ¨è¯·æ±‚ç»“æŸåï¼Œä¼šä¸»åŠ¨é‡Šæ”¾è¿æ¥ã€‚ä»å»ºç«‹è¿æ¥åˆ°å…³é—­è¿æ¥çš„è¿‡ç¨‹ç§°ä¸ºâ€œä¸€æ¬¡è¿æ¥â€ã€‚</p>
<p>HTTPå¦‚æœè¦ä¿æŒå®¢æˆ·ç«¯ç¨‹åºçš„åœ¨çº¿çŠ¶æ€ï¼Œéœ€è¦ä¸æ–­åœ°å‘æœåŠ¡å™¨å‘èµ·è¿æ¥è¯·æ±‚ã€‚é€šå¸¸çš„åšæ³•æ˜¯å³ä½¿ä¸éœ€è¦è·å¾—ä»»ä½•æ•°æ®ï¼Œå®¢æˆ·ç«¯ä¹Ÿä¿æŒæ¯éš”ä¸€æ®µå›ºå®šçš„æ—¶é—´å‘æœåŠ¡å™¨å‘é€ä¸€æ¬¡â€œä¿æŒè¿æ¥â€çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨åœ¨æ”¶åˆ°è¯¥è¯·æ±‚åå¯¹å®¢æˆ·ç«¯è¿›è¡Œå›å¤ï¼Œè¡¨æ˜çŸ¥é“å®¢æˆ·ç«¯â€œåœ¨çº¿â€ã€‚è‹¥æœåŠ¡å™¨é•¿æ—¶é—´æ— æ³•æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œåˆ™è®¤ä¸ºå®¢æˆ·ç«¯â€œä¸‹çº¿â€ï¼Œè‹¥å®¢æˆ·ç«¯é•¿æ—¶é—´æ— æ³•æ”¶åˆ°æœåŠ¡å™¨çš„å›å¤ï¼Œåˆ™è®¤ä¸ºç½‘ç»œå·²ç»æ–­å¼€ã€‚</p>
<p>Socketè¿æ¥æ—¶ï¼Œå¯ä»¥æŒ‡å®šä½¿ç”¨çš„ä¼ è¾“å±‚åè®®ï¼ŒSocketå¯ä»¥æ”¯æŒä¸åŒçš„ä¼ è¾“å±‚åè®®ï¼ˆTCPæˆ–UDPï¼‰ï¼Œå½“ä½¿ç”¨TCPåè®®è¿›è¡Œè¿æ¥æ—¶ï¼Œè¯¥Socketè¿æ¥å°±æ˜¯ä¸€ä¸ªTCPè¿æ¥ã€‚é€šå¸¸æƒ…å†µä¸‹Socketè¿æ¥å°±æ˜¯TCPè¿æ¥ï¼Œå› æ­¤Socketè¿æ¥ä¸€æ—¦å»ºç«‹ï¼Œé€šä¿¡åŒæ–¹å³å¯å¼€å§‹ç›¸äº’å‘é€æ•°æ®å†…å®¹ï¼Œç›´åˆ°åŒæ–¹è¿æ¥æ–­å¼€ã€‚ä½†åœ¨å®é™…ç½‘ç»œåº”ç”¨ ä¸­ï¼Œå®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡å¾€å¾€éœ€è¦ç©¿è¶Šå¤šä¸ªä¸­é—´èŠ‚ç‚¹ï¼Œä¾‹å¦‚è·¯ç”±å™¨ã€ç½‘å…³ã€é˜²ç«å¢™ç­‰ï¼Œå¤§éƒ¨åˆ†é˜²ç«å¢™é»˜è®¤ä¼šå…³é—­é•¿æ—¶é—´å¤„äºéæ´»è·ƒçŠ¶æ€çš„è¿æ¥è€Œå¯¼è‡´ Socket è¿æ¥æ–­è¿ï¼Œå› æ­¤éœ€è¦é€šè¿‡è½®è¯¢å‘Šè¯‰ç½‘ç»œï¼Œè¯¥è¿æ¥å¤„äºæ´»è·ƒçŠ¶æ€ã€‚</p>
<p>è€ŒHTTPè¿æ¥ä½¿ç”¨çš„æ˜¯â€œè¯·æ±‚â€”å“åº”â€çš„æ–¹å¼ï¼Œä¸ä»…åœ¨è¯·æ±‚æ—¶éœ€è¦å…ˆå»ºç«‹è¿æ¥ï¼Œè€Œä¸”éœ€è¦å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚åï¼ŒæœåŠ¡å™¨ç«¯æ‰èƒ½å›å¤æ•°æ®ã€‚</p>
<p>å¾ˆå¤šæƒ…å†µä¸‹ï¼Œéœ€è¦æœåŠ¡å™¨ç«¯ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®ï¼Œä¿æŒå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨æ•°æ®çš„å®æ—¶ä¸åŒæ­¥ã€‚æ­¤æ—¶è‹¥åŒæ–¹å»ºç«‹çš„æ˜¯Socketè¿æ¥ï¼ŒæœåŠ¡å™¨å°±å¯ä»¥ç›´æ¥å°†æ•°æ®ä¼ é€ç»™ å®¢æˆ·ç«¯ï¼›è‹¥åŒæ–¹å»ºç«‹çš„æ˜¯HTTPè¿æ¥ï¼Œåˆ™æœåŠ¡å™¨éœ€è¦ç­‰åˆ°å®¢æˆ·ç«¯å‘é€ä¸€æ¬¡è¯·æ±‚åæ‰èƒ½å°†æ•°æ®ä¼ å›ç»™å®¢æˆ·ç«¯ï¼Œå› æ­¤ï¼Œå®¢æˆ·ç«¯å®šæ—¶å‘æœåŠ¡å™¨ç«¯å‘é€è¿æ¥è¯·æ±‚ï¼Œä¸ä»…å¯ä»¥ä¿æŒåœ¨çº¿ï¼ŒåŒæ—¶ä¹Ÿæ˜¯åœ¨â€œè¯¢é—®â€æœåŠ¡å™¨æ˜¯å¦æœ‰æ–°çš„æ•°æ®ï¼Œå¦‚æœæœ‰å°±å°†æ•°æ®ä¼ ç»™å®¢æˆ·ç«¯ã€‚</p>
<p>Socketçš„ä½œç”¨æ˜¯æä¾›ç‚¹å¯¹ç‚¹çš„ç½‘ç»œé€šè®¯ï¼Œæ¯”å¦‚æˆ‘ä»¬å¹³æ—¶æµè§ˆç½‘é¡µï¼Œè®¿é—®æœåŠ¡å™¨ï¼Œç”¨åˆ°çš„æ˜¯HTTPé€šè®¯ï¼Œè€ŒQQï¼Œç½‘ç»œç›´æ’­è¿™æ ·çš„ï¼Œéœ€è¦å•ç‚¹å¯¹å•ç‚¹ï¼Œå•ç‚¹å¯¹å¤šç‚¹è¿™ç§æƒ…å†µä¸‹å°±ä¼šä½¿ç”¨åˆ°Socketã€‚</p>
<h2 id="Socketä½ç½®"><a href="#Socketä½ç½®" class="headerlink" title="Socketä½ç½®"></a>Socketä½ç½®</h2><p>Socketæ˜¯åœ¨åº”ç”¨å±‚å’Œä¼ è¾“å±‚ä¹‹é—´çš„ä¸€ä¸ªæŠ½è±¡å±‚ï¼Œå®ƒæŠŠTCP/IPå±‚å¤æ‚çš„æ“ä½œæŠ½è±¡ä¸ºå‡ ä¸ªç®€å•çš„æ¥å£ä¾›åº”ç”¨å±‚è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½ç›´æ¥ä½¿ç”¨è¿è¾“å±‚çš„ä¸œè¥¿ï¼Œè€Œæ˜¯é€šè¿‡ä½¿ç”¨Socketæä¾›çš„APIå»é—´æ¥ä½¿ç”¨ã€‚ä¸‹å›¾æ˜¯Socketæ‰€åœ¨çš„ä½ç½®ï¼š</p>
<p> <img src="http://oboehz2ag.bkt.clouddn.com//Socket.jpg" alt="Socket"></p>
<h2 id="BSD-Socket-API"><a href="#BSD-Socket-API" class="headerlink" title="BSD Socket API"></a>BSD Socket API</h2><p><strong>socket</strong> åˆ›å»ºå¹¶åˆå§‹åŒ–socketï¼Œè¿”å›è¯¥socketçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå¦‚æœæè¿°ç¬¦ä¸º-1è¡¨ç¤ºåˆ›å»ºå¤±è´¥ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> socketFileDescriptor = socket(<span class="keyword">int</span> addressFamily, <span class="keyword">int</span> type, <span class="keyword">int</span> protocol)</div></pre></td></tr></table></figure>
<ul>
<li><p>addressFamily </p>
<p>é€šå¸¸å‚æ•°æ˜¯IPv4(AF_INET) æˆ–IPv6(AF_INET6)ã€‚</p>
</li>
</ul>
<ul>
<li><p>type </p>
<p>è¡¨ç¤ºsocketçš„ç±»å‹ï¼Œé€šå¸¸æ˜¯æµstream(SOCK_STREAM) æˆ–æ•°æ®æŠ¥æ–‡datagram(SOCK_DGRAM)ã€‚</p>
</li>
<li><p>protocol </p>
<p>å‚æ•°é€šå¸¸è®¾ç½®ä¸º0ï¼Œä»¥ä¾¿è®©ç³»ç»Ÿè‡ªåŠ¨ä¸ºé€‰æ‹©æˆ‘ä»¬åˆé€‚çš„åè®®ï¼Œå¯¹äºstream socketæ¥è¯´ä¼šæ˜¯TCPåè®®(IPPROTO_TCP)ï¼Œè€Œå¯¹äºdatagramæ¥è¯´ä¼šæ˜¯UDPåè®®(IPPROTO_UDP)ã€‚</p>
</li>
</ul>
<p><strong>close</strong> å…³é—­socketã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">close</span><span class="params">(<span class="keyword">int</span> socketFileDescriptor)</span></span></div></pre></td></tr></table></figure>
<p><strong>bind åªåœ¨æœåŠ¡å™¨ç«¯ä½¿ç”¨</strong>ï¼Œå®ƒå°†socketä¸ç‰¹å®šä¸»æœºIPåœ°å€ä¸ç«¯å£å·ç»‘å®šï¼ŒæˆåŠŸç»‘å®šè¿”å›0ï¼Œå¤±è´¥è¿”å›-1ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">bind</span><span class="params">(<span class="keyword">int</span> socketFileDescriptor, sockaddr *addressToBind, <span class="keyword">int</span> addressStructLength)</span></span></div></pre></td></tr></table></figure>
<ul>
<li>addressToBind æ˜¯ä¸€ä¸ªæè¿°è¦ç»‘å®šçš„IP+Portçš„ç»“æ„ä½“ã€‚</li>
<li>addressStructLength æè¿°è¿™ä¸ªç»“æ„ä½“çš„é•¿åº¦ã€‚</li>
</ul>
<p>æˆåŠŸç»‘å®šä¹‹åï¼Œæ ¹æ®åè®®ï¼ˆTCP/UDPï¼‰çš„ä¸åŒï¼Œæˆ‘ä»¬å¯ä»¥å¯¹socketè¿›è¡Œä¸åŒçš„æ“ä½œï¼š</p>
<ul>
<li>UDPï¼šå› ä¸ºUDPæ˜¯æ— è¿æ¥çš„ï¼Œç»‘å®šä¹‹åå°±å¯ä»¥åˆ©ç”¨UDP socketä¼ é€æ•°æ®äº†ã€‚</li>
<li>TCPï¼šè€ŒTCPæ˜¯éœ€è¦å»ºç«‹ç«¯åˆ°ç«¯è¿æ¥çš„ï¼Œä¸ºäº†å»ºç«‹TCPè¿æ¥æœåŠ¡å™¨å¿…é¡»è°ƒç”¨listenã€‚</li>
</ul>
<p><strong>listen åªåœ¨æœåŠ¡å™¨ç«¯ä½¿ç”¨</strong>ï¼Œè®¾ç½®æœåŠ¡å™¨çš„ç¼“å†²åŒºé˜Ÿåˆ—ä»¥æ¥æ”¶å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">listen</span><span class="params">(<span class="keyword">int</span> socketFileDescriptor, <span class="keyword">int</span> backlogSize)</span></span></div></pre></td></tr></table></figure>
<ul>
<li>backlogSize è¡¨ç¤ºå®¢æˆ·ç«¯è¿æ¥è¯·æ±‚ç¼“å†²åŒºé˜Ÿåˆ—çš„å¤§å°ã€‚</li>
</ul>
<p>å½“è°ƒç”¨listenè®¾ç½®ä¹‹åï¼ŒæœåŠ¡å™¨ç­‰å¾…å®¢æˆ·ç«¯è¯·æ±‚ï¼Œç„¶åè°ƒç”¨ä¸‹é¢çš„acceptæ¥æ¥å—å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ã€‚</p>
<p><strong>accept åªåœ¨æœåŠ¡å™¨ç«¯ä½¿ç”¨</strong>ï¼Œæ¥å—å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚å¹¶å°†å®¢æˆ·ç«¯çš„ç½‘ç»œåœ°å€ä¿¡æ¯ä¿å­˜åˆ°clientAddressä¸­ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">accept</span><span class="params">(<span class="keyword">int</span> socketFileDescriptor, sockaddr *clientAddress, <span class="keyword">int</span> clientAddressStructLength)</span></span></div></pre></td></tr></table></figure>
<ul>
<li><p><strong>sockaddr ç»“æ„ä½“</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">struct</span> sockaddr &#123;</div><div class="line"><span class="keyword">unsigned</span> <span class="keyword">short</span> sa_family;<span class="comment">/*addressfamily,AF_xxx*/</span></div><div class="line"><span class="keyword">char</span> sa_data[<span class="number">14</span>];<span class="comment">/*14bytesofprotocoladdress*/</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<ul>
<li>sa_familyæ˜¯é€šä¿¡ç±»å‹ï¼Œæœ€å¸¸ç”¨çš„å€¼æ˜¯ â€œAF_INETâ€ï¼›</li>
<li>sa_data14å­—èŠ‚ï¼ŒåŒ…å«å¥—æ¥å­—ä¸­çš„ç›®æ ‡åœ°å€å’Œç«¯å£ä¿¡æ¯ï¼›</li>
<li>sockaddrçš„ç¼ºé™·æ˜¯sa_dataæŠŠç›®æ ‡åœ°å€å’Œç«¯å£ä¿¡æ¯æ··åœ¨ä¸€èµ·äº†ã€‚</li>
</ul>
</li>
<li><p><strong>sockaddr_in ç»“æ„ä½“</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">struct</span> sockaddr_in &#123;</div><div class="line"><span class="keyword">short</span> sin_family;<span class="comment">/*Address */</span></div><div class="line"><span class="keyword">unsigned</span> <span class="keyword">short</span> sin_port;<span class="comment">/*Port number*/</span></div><div class="line"><span class="keyword">struct</span> in_addr sin_addr;<span class="comment">/*IP address*/</span></div><div class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> sin_zero[<span class="number">8</span>];<span class="comment">/*Same size as struct sockaddr*/</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<ul>
<li><p>sin_family æŒ‡ä»£åè®®æ—ï¼Œä¸€èˆ¬æ¥è¯´æ˜¯AF_INETï¼ˆåœ°å€æ—ï¼‰PF_INETï¼ˆåè®®æ—ï¼‰ï¼Œåœ¨socketç¼–ç¨‹ä¸­åªèƒ½æ˜¯AF_INETï¼›</p>
</li>
<li><p>sin_port å­˜å‚¨ç«¯å£å·ï¼Œåœ¨linuxä¸‹ï¼Œç«¯å£å·çš„èŒƒå›´0~65535ï¼ŒåŒæ—¶0~1024èŒƒå›´çš„ç«¯å£å·å·²ç»è¢«ç³»ç»Ÿä½¿ç”¨æˆ–ä¿ç•™ã€‚è¦é‡‡ç”¨ç½‘ç»œæ•°æ®æ ¼å¼ï¼Œæ™®é€šæ•°å­—å¯ä»¥ç”¨<code>htons()</code>å‡½æ•°è½¬æ¢æˆç½‘ç»œæ•°æ®æ ¼å¼çš„æ•°å­—ï¼›</p>
</li>
<li><p>sin_addr æ˜¯ç”¨æ¥è¡¨ç¤ºä¸€ä¸ª32ä½çš„IPv4åœ°å€çš„ç»“æ„ä½“ï¼›</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">struct</span> in_addr &#123;</div><div class="line">    <span class="keyword">in_addr_t</span> s_addr;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<ul>
<li>in_addr_t ä¸€èˆ¬ä¸º 32ä½çš„unsigned intï¼Œå…¶å­—èŠ‚é¡ºåºä¸ºç½‘ç»œé¡ºåºï¼ˆnetwork byte ordered)ï¼Œå…¶ä¸­æ¯8ä½ä»£è¡¨ä¸€ä¸ªIPåœ°å€ä½ä¸­çš„ä¸€ä¸ªæ•°å€¼ã€‚</li>
<li>ä¾‹å¦‚192.168.3.144è®°ä¸º0x9003a8c0ï¼Œå…¶ä¸­ c0=192 ï¼Œa8=168ï¼Œ03=3ï¼Œ90=144ã€‚æ‰“å°çš„æ—¶å€™å¯ä»¥è°ƒç”¨inet_ntoa()å‡½æ•°å°†å…¶è½¬æ¢ä¸ºchar *ç±»å‹ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>sin_zero æ²¡æœ‰å®é™…æ„ä¹‰ï¼Œæ˜¯ä¸ºäº†è®©sockaddrä¸sockaddr_inä¸¤ä¸ªæ•°æ®ç»“æ„åœ¨å†…å­˜ä¸­ä¿æŒå¤§å°ç›¸åŒè€Œä¿ç•™çš„ç©ºå­—èŠ‚ã€‚</p>
</li>
<li><p>sockaddr_inå’Œsockaddræ˜¯å¹¶åˆ—çš„ç»“æ„ï¼ŒæŒ‡å‘sockaddr_inçš„ç»“æ„ä½“çš„æŒ‡é’ˆä¹Ÿå¯ä»¥æŒ‡å‘sockaddrçš„ç»“æ„ä½“ï¼Œå¹¶ä»£æ›¿å®ƒã€‚å½“å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚è¢«æœåŠ¡å™¨æ¥å—ä¹‹åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é“¾è·¯å°±å»ºç«‹å¥½äº†ï¼Œä¸¤è€…å°±å¯ä»¥é€šä¿¡äº†ã€‚</p>
</li>
</ul>
<p><strong>æ³¨æ„ï¼šacceptæ˜¯ä¸€ä¸ªé˜»å¡å‡½æ•°ï¼Œå› æ­¤åœ¨è°ƒç”¨æ—¶éœ€è¦æ”¾åœ¨å­çº¿ç¨‹ä¸­ï¼Œä»¥å…ä¸»çº¿ç¨‹å¡æ­»ã€‚</strong></p>
<p><strong>connect</strong> å®¢æˆ·ç«¯å‘ç‰¹å®šç½‘ç»œåœ°å€çš„æœåŠ¡å™¨å‘é€è¿æ¥è¯·æ±‚ï¼Œè¿æ¥æˆåŠŸè¿”å›0ï¼Œå¤±è´¥è¿”å› -1ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">connect</span><span class="params">(<span class="keyword">int</span> socketFileDescriptor, sockaddr *serverAddress, <span class="keyword">int</span> serverAddressLength)</span></span></div></pre></td></tr></table></figure>
<p>å½“æœåŠ¡å™¨å»ºç«‹å¥½ä¹‹åï¼Œå®¢æˆ·ç«¯é€šè¿‡è°ƒç”¨è¯¥æ¥å£å‘æœåŠ¡å™¨å‘èµ·å»ºç«‹è¿æ¥è¯·æ±‚ã€‚</p>
<ul>
<li>å¯¹äºUDPæ¥è¯´ï¼Œè¯¥æ¥å£æ˜¯å¯é€‰çš„ï¼Œå¦‚æœè°ƒç”¨äº†è¯¥æ¥å£ï¼Œè¡¨æ˜è®¾ç½®äº†è¯¥ UDP socket é»˜è®¤çš„ç½‘ç»œåœ°å€ã€‚</li>
<li>å¯¹TCP socketæ¥è¯´è¿™å°±æ˜¯ä¼ è¯´ä¸­ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥å‘ç”Ÿçš„åœ°æ–¹ã€‚</li>
</ul>
<p><strong>æ³¨æ„ï¼šè¯¥æ¥å£è°ƒç”¨ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°æœåŠ¡å™¨è¿”å›ã€‚</strong></p>
<p><strong>gethostbyname</strong> ä½¿ç”¨ DNS æŸ¥æ‰¾ç‰¹å®šä¸»æœºåå­—å¯¹åº”çš„ IP åœ°å€ã€‚å¦‚æœæ‰¾ä¸åˆ°å¯¹åº”çš„ IP åœ°å€åˆ™è¿”å› NULLã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function">hostent* <span class="title">gethostbyname</span><span class="params">(<span class="keyword">char</span> *hostname)</span></span></div></pre></td></tr></table></figure>
<p><strong>send</strong> é€šè¿‡socketå‘é€æ•°æ®ï¼Œå‘é€æˆåŠŸè¿”å›æˆåŠŸå‘é€çš„å­—èŠ‚æ•°ï¼Œå¦åˆ™è¿”å› -1ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">send</span><span class="params">(<span class="keyword">int</span> socketFileDescriptor, <span class="keyword">char</span> *buffer, <span class="keyword">int</span> bufferLength, <span class="keyword">int</span> flags)</span></span></div></pre></td></tr></table></figure>
<p>ä¸€æ—¦è¿æ¥å»ºç«‹å¥½ä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡send/receiveæ¥å£å‘é€æˆ–æ¥æ”¶æ•°æ®äº†ã€‚UDP socket ä¹Ÿå¯ä»¥è°ƒç”¨è¯¥æ¥å£æ¥æ¥æ”¶æ•°æ®ã€‚</p>
<p><strong>receive</strong> ä»socketä¸­è¯»å–æ•°æ®ï¼Œè¯»å–æˆåŠŸè¿”å›æˆåŠŸè¯»å–çš„å­—èŠ‚æ•°ï¼Œå¦åˆ™è¿”å› -1ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">receive</span><span class="params">(<span class="keyword">int</span> socketFileDescriptor, <span class="keyword">char</span> *buffer, <span class="keyword">int</span> bufferLength, <span class="keyword">int</span> flags)</span></span></div></pre></td></tr></table></figure>
<p><strong>sendto åªåœ¨UDPåè®®ä¸‹ä½¿ç”¨</strong>ï¼Œé€šè¿‡UDP socket å‘é€æ•°æ®åˆ°ç‰¹å®šçš„ç½‘ç»œåœ°å€ï¼Œå‘é€æˆåŠŸè¿”å›æˆåŠŸå‘é€çš„å­—èŠ‚æ•°ï¼Œå¦åˆ™è¿”å› -1ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sendto</span><span class="params">(<span class="keyword">int</span> socketFileDescriptor, <span class="keyword">char</span> *buffer, <span class="keyword">int</span> bufferLength, <span class="keyword">int</span> flags, sockaddr *destinationAddress, <span class="keyword">int</span> destinationAddressLength)</span></span></div></pre></td></tr></table></figure>
<p>ç”±äº UDP å¯ä»¥å‘å¤šä¸ªç½‘ç»œåœ°å€å‘é€æ•°æ®ï¼Œæ‰€ä»¥å¯ä»¥æŒ‡å®šç‰¹å®šç½‘ç»œåœ°å€ï¼Œä»¥å‘å…¶å‘é€æ•°æ®ã€‚</p>
<p><strong>recvfrom åªåœ¨UDPåè®®ä¸‹ä½¿ç”¨</strong>ï¼Œä»UDP socketä¸­è¯»å–æ•°æ®ï¼Œå¹¶ä¿å­˜å‘é€è€…çš„ç½‘ç»œåœ°å€ä¿¡æ¯ï¼Œè¯»å–æˆåŠŸè¿”å›æˆåŠŸè¯»å–çš„å­—èŠ‚æ•°ï¼Œå¦åˆ™è¿”å› -1 ã€‚</p>
<p><strong>æ³¨æ„ï¼šrecvfromæ˜¯ä¸€ä¸ªé˜»å¡å‡½æ•°ï¼Œå› æ­¤åœ¨è°ƒç”¨æ—¶éœ€è¦æ”¾åœ¨å­çº¿ç¨‹ä¸­ï¼Œä»¥å…ä¸»çº¿ç¨‹å¡æ­»ã€‚</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">recvfrom</span><span class="params">(<span class="keyword">int</span> socketFileDescriptor, <span class="keyword">char</span> *buffer, <span class="keyword">int</span> bufferLength, <span class="keyword">int</span> flags, sockaddr *fromAddress, <span class="keyword">int</span> *fromAddressLength)</span></span></div></pre></td></tr></table></figure>
<p>ç”±äºUDPå¯ä»¥æ¥æ”¶æ¥è‡ªå¤šä¸ªç½‘ç»œåœ°å€çš„æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦æä¾›é¢å¤–çš„å‚æ•°ï¼Œä»¥ä¿å­˜è¯¥æ•°æ®çš„å‘é€è€…èº«ä»½ã€‚</p>
<h2 id="Socket-C-S"><a href="#Socket-C-S" class="headerlink" title="Socket C/S"></a>Socket C/S</h2><p>Socketé€šä¿¡å°±æ˜¯ä¸€ç§ç¡®å®šäº†ç«¯å£å·çš„TCP/IPé€šä¿¡ï¼Œæˆ–è€…è¯´Socketé€šä¿¡ä¸IPé€šä¿¡å·®åˆ«å°±æ˜¯ç«¯å£ç¡®å®šï¼Œåè®®ç¡®å®šã€‚</p>
<p>ç«¯å£çš„æ‰“å¼€æ˜¯åŒæ–¹çš„ï¼Œåœ¨C/Sï¼ˆClient&amp;&amp;Serverï¼‰ç»“æ„çš„TCPè¿æ¥ä¸­ä¸ä»…ä»…è¦æ³¨æ„åˆ°Sçš„ç«¯ï¼ˆç›‘å¬çš„ï¼‰ï¼Œå®é™…ä¸ŠCä¹Ÿå¼€äº†ä¸€ä¸ªç«¯å£ï¼Œè€ŒCç«¯çš„ç«¯å£æ˜¯åŠ¨æ€ç«¯å£ï¼ŒTCPè¿æ¥å»ºç«‹çš„æ—¶å€™ï¼ŒCç«¯çš„ç«¯å£ä¼šåœ¨ä¸‰æ¬¡æ¡æ‰‹ç»“æŸåç¡®å®šï¼ŒåŠ¨æ€æ‰“å¼€ä¸€ä¸ª,è¿™ä¸ªç«¯å£ä¸å—ç”¨æˆ·/ç¨‹åºå‘˜çš„æ§åˆ¶ã€‚</p>
<h3 id="Socket-C-ç«¯ä¹¦å†™æ­¥éª¤"><a href="#Socket-C-ç«¯ä¹¦å†™æ­¥éª¤" class="headerlink" title="Socket C ç«¯ä¹¦å†™æ­¥éª¤"></a>Socket C ç«¯ä¹¦å†™æ­¥éª¤</h3><ul>
<li>åˆ›å»ºå®¢æˆ·ç«¯Socketï¼Œä¾‹å¦‚ä½¿ç”¨<code>socket(...)</code>ï¼›</li>
<li>è¿æ¥åˆ°æœåŠ¡å™¨(Socketç¼–ç¨‹)ï¼Œä¾‹å¦‚ä½¿ç”¨<code>connect(...)</code>ï¼›</li>
<li>å‘é€æ•°æ®ç»™æœåŠ¡å™¨ï¼Œä¾‹å¦‚ä½¿ç”¨<code>send(...)</code>ï¼›</li>
<li>æ¥æ”¶æœåŠ¡å™¨è¿”å›çš„æ•°æ®ï¼Œä¾‹å¦‚ä½¿ç”¨<code>receive(...)</code>ï¼›</li>
<li>å…³é—­Socket : ä¾‹å¦‚ä½¿ç”¨<code>close(socketFileDescriptor)</code>ï¼›</li>
</ul>
<h3 id="Socket-C-S-å¸¸è§æ¡†æ¶"><a href="#Socket-C-S-å¸¸è§æ¡†æ¶" class="headerlink" title="Socket C/S å¸¸è§æ¡†æ¶"></a>Socket C/S å¸¸è§æ¡†æ¶</h3><table>
<thead>
<tr>
<th style="text-align:center">TCP CSæ¡†æ¶</th>
<th style="text-align:center">UDP CSæ¡†æ¶</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="http://oboehz2ag.bkt.clouddn.com/%E5%B8%B8%E8%A7%81Socket%20TCP%E6%A1%86%E6%9E%B6.gif" alt="å¸¸è§Socket TCPæ¡†æ¶"></td>
<td style="text-align:center"><img src="http://oboehz2ag.bkt.clouddn.com/%E5%B8%B8%E8%A7%81Socket%20UDP%E6%A1%86%E6%9E%B6.gif" alt="å¸¸è§Socket UDPæ¡†æ¶"></td>
</tr>
</tbody>
</table>
<h2 id="å‚è€ƒé“¾æ¥ï¼š"><a href="#å‚è€ƒé“¾æ¥ï¼š" class="headerlink" title="å‚è€ƒé“¾æ¥ï¼š"></a>å‚è€ƒé“¾æ¥ï¼š</h2><p><a href="http://www.jianshu.com/p/6b64d8ac62e3" target="_blank" rel="external">iOSå¼€å‘ç½‘ç»œç¯‡â€”Socketç¼–ç¨‹</a> - ç‰µå·¦æ‰‹ä¸ç¦»</p>
<p><a href="http://blog.csdn.net/baihuaxiu123/article/details/51560320" target="_blank" rel="external">è°ˆè°ˆiOSç½‘ç»œç¼–ç¨‹ä¹‹socketç¼–ç¨‹æŠ€æœ¯åŠåº”ç”¨</a> - åˆ˜ç‰åˆš</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¥—æ¥å­—ï¼ˆSocketï¼‰æ˜¯é€šä¿¡çš„åŸºçŸ³ï¼Œæ˜¯æ”¯æŒTCP/IPåè®®çš„ç½‘ç»œé€šä¿¡çš„åŸºæœ¬æ“ä½œå•å…ƒï¼ŒåŒ…å«è¿›è¡Œç½‘ç»œé€šä¿¡å¿…é¡»çš„äº”ç§ä¿¡æ¯ï¼šè¿æ¥ä½¿ç”¨çš„åè®®ï¼Œæœ¬åœ°ä¸»æœºçš„IPåœ°å€ï¼Œæœ¬åœ°è¿›ç¨‹çš„åè®®ç«¯å£ï¼Œè¿œåœ°ä¸»æœºçš„IPåœ°å€ï¼Œè¿œåœ°è¿›ç¨‹çš„åè®®ç«¯å£ã€‚&lt;/p&gt;
&lt;p&gt;Socketæè¿°äº†ä¸€ä¸ªIPã€ç«¯å£å¯¹ã€‚å®ƒç®€åŒ–äº†ç¨‹åºå‘˜çš„æ“ä½œï¼ŒçŸ¥é“å¯¹æ–¹çš„IPä»¥åŠPORTå°±å¯ä»¥ç»™å¯¹æ–¹å‘é€æ¶ˆæ¯ï¼Œå†ç”±æœåŠ¡å™¨ç«¯æ¥å¤„ç†å‘é€çš„è¿™äº›æ¶ˆæ¯ã€‚æ‰€ä»¥ï¼ŒSocketä¸€å®šåŒ…å«äº†é€šä¿¡çš„åŒå‘ï¼Œå³å®¢æˆ·ç«¯ï¼ˆClientï¼‰ä¸æœåŠ¡ç«¯ï¼ˆserverï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ¯ä¸€ä¸ªåº”ç”¨æˆ–è€…è¯´æœåŠ¡ï¼Œéƒ½æœ‰ä¸€ä¸ªç«¯å£ã€‚æ¯”å¦‚DNSçš„53ç«¯å£ï¼Œhttpçš„80ç«¯å£ã€‚æˆ‘ä»¬èƒ½ç”±DNSè¯·æ±‚åˆ°æŸ¥è¯¢ä¿¡æ¯ï¼Œæ˜¯å› ä¸ºDNSæœåŠ¡å™¨æ—¶æ—¶åˆ»åˆ»éƒ½åœ¨ç›‘å¬53ç«¯å£ï¼Œå½“æ”¶åˆ°æˆ‘ä»¬çš„æŸ¥è¯¢è¯·æ±‚ä»¥åï¼Œå°±èƒ½å¤Ÿè¿”å›æˆ‘ä»¬æƒ³è¦çš„IPä¿¡æ¯ã€‚æ‰€ä»¥ï¼Œä»ç¨‹åºè®¾è®¡ä¸Šæ¥è®²ï¼Œåº”è¯¥åŒ…å«ä»¥ä¸‹æ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;æœåŠ¡ç«¯åˆ©ç”¨Socketç›‘å¬ç«¯å£ï¼›&lt;/p&gt;
&lt;p&gt;æœåŠ¡å™¨ç«¯å¥—æ¥å­—å¹¶ä¸å®šä½å…·ä½“çš„å®¢æˆ·ç«¯å¥—æ¥å­—ï¼Œè€Œæ˜¯å¤„äºç­‰å¾…è¿æ¥çš„çŠ¶æ€ï¼Œå®æ—¶ç›‘æ§ç½‘ç»œçŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å®¢æˆ·ç«¯å‘èµ·è¿æ¥ï¼›&lt;/p&gt;
&lt;p&gt;æŒ‡å®¢æˆ·ç«¯çš„å¥—æ¥å­—æå‡ºè¿æ¥è¯·æ±‚ï¼Œè¦è¿æ¥çš„ç›®æ ‡æ˜¯æœåŠ¡å™¨ç«¯çš„å¥—æ¥å­—ã€‚ä¸ºæ­¤ï¼Œå®¢æˆ·ç«¯çš„å¥—æ¥å­—å¿…é¡»é¦–å…ˆæè¿°å®ƒè¦è¿æ¥çš„æœåŠ¡å™¨çš„å¥—æ¥å­—ï¼ŒæŒ‡å‡ºæœåŠ¡å™¨ç«¯å¥—æ¥å­—çš„åœ°å€å’Œç«¯å£å·ï¼Œç„¶åå°±å‘æœåŠ¡å™¨ç«¯å¥—æ¥å­—æå‡ºè¿æ¥è¯·æ±‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æœåŠ¡ç«¯è¿”å›ä¿¡æ¯ï¼Œå»ºç«‹è¿æ¥ï¼Œå¼€å§‹é€šä¿¡ï¼›&lt;/p&gt;
&lt;p&gt;å½“æœåŠ¡å™¨ç«¯å¥—æ¥å­—ç›‘å¬åˆ°æˆ–è€…è¯´æ¥æ”¶åˆ°å®¢æˆ·ç«¯å¥—æ¥å­—çš„è¿æ¥è¯·æ±‚æ—¶ï¼Œå°±å“åº”å®¢æˆ·ç«¯å¥—æ¥å­—çš„è¯·æ±‚ï¼Œå»ºç«‹ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼ŒæŠŠæœåŠ¡å™¨ç«¯å¥—æ¥å­—çš„æè¿°å‘ç»™å®¢æˆ·ç«¯ï¼Œä¸€æ—¦å®¢æˆ·ç«¯ç¡®è®¤äº†æ­¤æè¿°ï¼ŒåŒæ–¹å°±æ­£å¼å»ºç«‹è¿æ¥ã€‚è€ŒæœåŠ¡å™¨ç«¯å¥—æ¥å­—ç»§ç»­å¤„äºç›‘å¬çŠ¶æ€ï¼Œç»§ç»­æ¥æ”¶å…¶ä»–å®¢æˆ·ç«¯å¥—æ¥å­—çš„è¿æ¥è¯·æ±‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ€»ç»“å¦‚ä¸‹ï¼šSocketæ˜¯å¯¹TCP/IPåè®®çš„å°è£…ï¼ŒSocketæœ¬èº«å¹¶ä¸æ˜¯åè®®ï¼Œæ²¡æœ‰è§„å®šè®¡ç®—æœºåº”å½“æ€ä¹ˆæ ·ä¼ é€’æ¶ˆæ¯ï¼Œåªæ˜¯ç»™ç¨‹åºå‘˜æä¾›äº†ä¸€ä¸ªå‘é€æ¶ˆæ¯çš„è°ƒç”¨æ¥å£ï¼ˆAPIï¼‰ï¼Œç¨‹åºå‘˜ä½¿ç”¨è¿™ä¸ªæ¥å£æä¾›çš„æ–¹æ³•ï¼Œå‘é€ä¸æ¥æ”¶æ¶ˆæ¯ã€‚é€šè¿‡Socketæˆ‘ä»¬æ‰èƒ½ä½¿ç”¨TCP/IPåè®®ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ç½‘ç»œé€šè®¯" scheme="http://yoursite.com/categories/%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF/"/>
    
    
      <category term="ç½‘ç»œé€šè®¯" scheme="http://yoursite.com/tags/%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF/"/>
    
      <category term="Socketé€šè®¯" scheme="http://yoursite.com/tags/Socket%E9%80%9A%E8%AE%AF/"/>
    
  </entry>
  
  <entry>
    <title>Xcodeé”™è¯¯ - Expected a type</title>
    <link href="http://yoursite.com/2016/09/15/Xcode%E9%94%99%E8%AF%AF%20-%20Expected%20a%20type%20/"/>
    <id>http://yoursite.com/2016/09/15/Xcodeé”™è¯¯ - Expected a type /</id>
    <published>2016-09-14T18:24:00.000Z</published>
    <updated>2016-09-16T06:22:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>éœ€è¦è‡ªå·±æ‰‹åŠ¨å¯¼å…¥åº“ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#import &lt;UIKit/UIKit.h&gt;</div></pre></td></tr></table></figure>
<p>å‚è€ƒé“¾æ¥ï¼š<a href="http://stackoverflow.com/questions/26412635/ios-8-expected-a-type" target="_blank" rel="external">http://stackoverflow.com/questions/26412635/ios-8-expected-a-type</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;éœ€è¦è‡ªå·±æ‰‹åŠ¨å¯¼å…¥åº“ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;p
    
    </summary>
    
      <category term="Xocdeé”™è¯¯" scheme="http://yoursite.com/categories/Xocde%E9%94%99%E8%AF%AF/"/>
    
    
      <category term="Xocdeé”™è¯¯" scheme="http://yoursite.com/tags/Xocde%E9%94%99%E8%AF%AF/"/>
    
  </entry>
  
  <entry>
    <title>ç½‘ç»œé€šè®¯ç»“æ„ - OSI&amp;TCP/IP</title>
    <link href="http://yoursite.com/2016/09/14/%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF%E7%BB%93%E6%9E%84%20-%20OSI&amp;TCP:IP/"/>
    <id>http://yoursite.com/2016/09/14/ç½‘ç»œé€šè®¯ç»“æ„ - OSI&amp;TCP:IP/</id>
    <published>2016-09-13T18:24:00.000Z</published>
    <updated>2016-09-14T03:30:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸¤ä¸ªåº”ç”¨ç¨‹åºä¹‹é—´çš„é€šä¿¡ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œè€Œè¿›ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡çš„å‰ææ˜¯æˆ‘ä»¬èƒ½å¤Ÿæ‰¾åˆ°æŸä¸ªè¿›ç¨‹ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ç»™è¿›ç¨‹æ·»åŠ å”¯ä¸€çš„æ ‡ç¤ºï¼Œåœ¨æœ¬åœ°è¿›ç¨‹é€šä¿¡ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨PIDæ¥æ ‡ç¤ºä¸€ä¸ªè¿›ç¨‹ï¼Œä½†PIDåªåœ¨æœ¬åœ°å”¯ä¸€ï¼Œç½‘ç»œä¸­çš„å¤šä¸ªè®¡ç®—æœºä¹‹é—´çš„è¿›ç¨‹æ ‡ç¤ºå¹¶ä¸èƒ½ä¿è¯å”¯ä¸€æ€§ï¼Œå†²çªçš„å‡ ç‡å¾ˆå¤§ã€‚</p>
<p>è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦å¦è¾Ÿè¹Šå¾„ï¼ŒTCP/IPåè®®æ—å·²ä¸ºæˆ‘ä»¬è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼ŒIPå±‚çš„IPåœ°å€å¯ä»¥æ ‡ç¤ºä¸»æœºï¼Œè€ŒTCPå±‚åè®®å’Œç«¯å£å·å¯ä»¥æ ‡ç¤ºæŸä¸ªä¸»æœºçš„æŸä¸ªè¿›ç¨‹ï¼Œäºæ˜¯æˆ‘ä»¬é‡‡å–<strong>IPåœ°å€ï¼‹åè®®ï¼‹ç«¯å£å·</strong>ä½œä¸ºå”¯ä¸€æ ‡ç¤ºçš„è¿™ç§å½¢å¼ï¼Œæ¥ç¡®å®šç½‘ç»œä¸­çš„ä¸€ä¸ªè¿›ç¨‹ï¼Œä»è€Œè¿›è¡Œè¿›ç¨‹ä¹‹é—´çš„é€šè®¯ï¼Œè¿™ç§æ–¹å¼å°±æ˜¯æˆ‘ä»¬Socketä½¿ç”¨çš„é€šè®¯æ–¹å¼ã€‚</p>
<p>åœ¨å­¦ä¹ Socketé€šè®¯ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦äº†è§£<strong>ç½‘ç»œé€šè®¯ç»“æ„ã€TCPå’ŒUPD</strong>ï¼Œä»¥ä¸‹æ˜¯è¿™è¿™ä¸¤ä¸ªçŸ¥è¯†ç‚¹çš„ç®€è¦ä»‹ç»ã€‚</p>
   <a id="more"></a>
<h2 id="OSIæ¨¡å‹-ä¸ƒå±‚æ¨¡å‹"><a href="#OSIæ¨¡å‹-ä¸ƒå±‚æ¨¡å‹" class="headerlink" title="OSIæ¨¡å‹/ä¸ƒå±‚æ¨¡å‹"></a>OSIæ¨¡å‹/ä¸ƒå±‚æ¨¡å‹</h2><p>ç½‘ç»œé€šä¿¡ç»“æ„æ˜¯æœ‰ä¸€å¥—æ ‡å‡†æ¨¡å‹çš„ï¼Œç”±å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ISOæå‡ºï¼Œè¢«ç§°ä¸ºOSIæ¨¡å‹ï¼Œåˆç§°ä¸ºä¸ƒå±‚æ¨¡å‹ã€‚å®ƒçš„å±‚æ¬¡åˆ’åˆ†å¦‚ä¸‹ï¼š</p>
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:11px 20px;border-style:solid;border-width:0px;overflow:hidden;word-break:normal;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:11px 20px;border-style:solid;border-width:0px;overflow:hidden;word-break:normal;}
.tg .tg-7uzy{vertical-align:top}
.tg .tg-yw4l{vertical-align:top}
th.tg-sort-header::-moz-selection { background:transparent; }th.tg-sort-header::selection      { background:transparent; }th.tg-sort-header { cursor:pointer; }table th.tg-sort-header:after {  content:'';  float:right;  margin-top:7px;  border-width:0 4px 4px;  border-style:solid;  border-color:#404040 transparent;  visibility:hidden;  }table th.tg-sort-header:hover:after {  visibility:visible;  }table th.tg-sort-desc:after,table th.tg-sort-asc:after,table th.tg-sort-asc:hover:after {  visibility:visible;  opacity:0.4;  }table th.tg-sort-desc:after {  border-bottom:none;  border-width:4px 4px 0;  }</style>
<table id="tfhover" class="tftable" border="1">
  <tr>

<th class="tg-031e" style="width:5%"></th>
<th class="tg-yw4l" style="width:12%">æ•°æ®å•å…ƒ</th>
<th class="tg-yw4l" style="width:15%">å±‚</th>
<th class="tg-yw4l">åŠŸèƒ½</th>

  </tr>
  <tr>

<td class="tg-6wtj" rowspan="4">ä¸»æœºå±‚</td>
<td class="tg-7uzy" rowspan="3">Data<br>æ•°æ®</td>
<td class="tg-7uzy">7-åº”ç”¨å±‚</td>
<td class="tg-7uzy">æä¾›ä¸ºåº”ç”¨è½¯ä»¶è€Œè®¾çš„ç•Œé¢ï¼Œä»¥è®¾ç½®ä¸å¦ä¸€åº”ç”¨è½¯ä»¶ä¹‹é—´çš„é€šä¿¡ã€‚ä¾‹å¦‚: HTTPï¼ŒHTTPSï¼ŒFTPï¼ŒTELNETï¼ŒSSHï¼ŒSMTPï¼ŒPOP3ç­‰ã€‚</td>

  </tr>
  <tr>

<td class="tg-yw4l">6-è¡¨ç¤ºå±‚</td>
<td class="tg-yw4l">æŠŠæ•°æ®è½¬æ¢ä¸ºèƒ½ä¸æ¥æ”¶è€…çš„ç³»ç»Ÿæ ¼å¼å…¼å®¹å¹¶é€‚åˆä¼ è¾“çš„æ ¼å¼ã€‚</td>

  </tr>
  <tr>

<td class="tg-7uzy">5-ä¼šè¯å±‚</td>
<td class="tg-7uzy">è´Ÿè´£åœ¨æ•°æ®ä¼ è¾“ä¸­è®¾ç½®å’Œç»´æŠ¤ç”µè„‘ç½‘ç»œä¸­ä¸¤å°ç”µè„‘ä¹‹é—´çš„é€šä¿¡è¿æ¥ã€‚</td>

  </tr>
  <tr>

<td class="tg-yw4l">Segments<br>æ•°æ®æ®µ</td>
<td class="tg-yw4l">4-ä¼ è¾“å±‚</td>
<td class="tg-yw4l">æŠŠä¼ è¾“è¡¨å¤´(TH)åŠ è‡³æ•°æ®ä»¥å½¢æˆæ•°æ®åŒ…ã€‚ä¼ è¾“è¡¨å¤´åŒ…å«äº†æ‰€ä½¿ç”¨çš„åè®®ç­‰å‘é€ä¿¡æ¯ã€‚ä¾‹å¦‚:ä¼ è¾“æ§åˆ¶åè®®ä¹‰(TCP) ç­‰ã€‚</td>

  </tr>
  <tr>

<td class="tg-6wtj" rowspan="3">åª’ä»‹å±‚</td>
<td class="tg-6wtj">ç½‘ç»œåˆ†ç»„<br>æ•°æ®æŠ¥æ–‡</td>
<td class="tg-6wtj">3-ç½‘ç»œå±‚</td>
<td class="tg-6wtj">å†³å®šæ•°æ®çš„è·¯å¾„é€‰æ‹©å’Œè½¬å¯„ï¼Œå°†ç½‘ç»œè¡¨å¤´(NH)åŠ è‡³æ•°æ®åŒ…ï¼Œä»¥å½¢æˆåˆ†ç»„ã€‚ç½‘ç»œè¡¨å¤´åŒ…å«äº†ç½‘ç»œæ•°æ®ã€‚ä¾‹å¦‚:äº’è”ç½‘åè®®(IP) ç­‰ã€‚</td>

  </tr>
  <tr>


<td class="tg-031e">Bit/Frame<br>æ•°æ®å¸§</td>
<td class="tg-031e">2-æ•°æ®é“¾è·¯å±‚</td>
<td class="tg-031e">è´Ÿè´£ç½‘ç»œå¯»å€ã€é”™è¯¯ä¾¦æµ‹å’Œæ”¹é”™ã€‚å½“è¡¨å¤´å’Œè¡¨å°¾è¢«åŠ è‡³æ•°æ®åŒ…æ—¶ï¼Œä¼šå½¢æˆäº†å¸§ã€‚æ•°æ®é“¾è¡¨å¤´(DLH)æ˜¯åŒ…å«äº†ç‰©ç†åœ°å€å’Œé”™è¯¯ä¾¦æµ‹åŠæ”¹é”™çš„æ–¹æ³•ã€‚æ•°æ®é“¾è¡¨å°¾(DLT)æ˜¯ä¸€ä¸²æŒ‡ç¤ºæ•°æ®åŒ…æœ«ç«¯çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ä»¥å¤ªç½‘ã€æ— çº¿å±€åŸŸç½‘(Wi-Fi)å’Œé€šç”¨åˆ†ç»„æ— çº¿æœåŠ¡(GPRS)ç­‰ã€‚</td>


  </tr>
  <tr>


<td class="tg-6wtj">Bit<br>æ¯”ç‰¹</td>
<td class="tg-6wtj">1-ç‰©ç†å±‚</td>
<td class="tg-6wtj">åœ¨å±€éƒ¨å±€åŸŸç½‘ä¸Šä¼ é€å¸§ï¼Œå®ƒè´Ÿè´£ç®¡ç†ç”µè„‘é€šä¿¡è®¾å¤‡å’Œç½‘ç»œåª’ä½“ä¹‹é—´çš„äº’é€šã€‚åŒ…æ‹¬äº†é’ˆè„šã€ç”µå‹ã€çº¿ç¼†è§„èŒƒã€é›†çº¿å™¨ã€ä¸­ç»§å™¨ã€ç½‘å¡ã€ä¸»æœºé€‚é…å™¨ç­‰ã€‚</td>


  </tr>
</table>
<script type="text/javascript" charset="utf-8">var TgTableSort=window.TgTableSort||function(n,t){"use strict";function r(n,t){for(var e=[],o=n.childNodes,i=0;i<o.length;++i){var u=o[i];if("."==t.substring(0,1)){var a=t.substring(1);f(u,a)&&e.push(u)}else u.nodeName.toLowerCase()==t&&e.push(u);var c=r(u,t);e=e.concat(c)}return e}function e(n,t){var e=[],o=r(n,"tr");return o.forEach(function(n){var o=r(n,"td");t>=0&&t<o.length&&e.push(o[t])}),e}function o(n){return n.textContent||n.innerText||""}function i(n){return n.innerHTML||""}function u(n,t){var r=e(n,t);return r.map(o)}function a(n,t){var r=e(n,t);return r.map(i)}function c(n){var t=n.className||"";return t.match(/\S+/g)||[]}function f(n,t){return-1!=c(n).indexOf(t)}function s(n,t){f(n,t)||(n.className+=" "+t)}function d(n,t){if(f(n,t)){var r=c(n),e=r.indexOf(t);r.splice(e,1),n.className=r.join(" ")}}function v(n){d(n,L),d(n,E)}function l(n,t,e){r(n,"."+E).map(v),r(n,"."+L).map(v),e==T?s(t,E):s(t,L)}function g(n){return function(t,r){var e=n*t.str.localeCompare(r.str);return 0==e&&(e=t.index-r.index),e}}function h(n){return function(t,r){var e=+t.str,o=+r.str;return e==o?t.index-r.index:n*(e-o)}}function m(n,t,r){var e=u(n,t),o=e.map(function(n,t){return{str:n,index:t}}),i=e&&-1==e.map(isNaN).indexOf(!0),a=i?h(r):g(r);return o.sort(a),o.map(function(n){return n.index})}function p(n,t,r,o){for(var i=f(o,E)?N:T,u=m(n,r,i),c=0;t>c;++c){var s=e(n,c),d=a(n,c);s.forEach(function(n,t){n.innerHTML=d[u[t]]})}l(n,o,i)}function x(n,t){var r=t.length;t.forEach(function(t,e){t.addEventListener("click",function(){p(n,r,e,t)}),s(t,"tg-sort-header")})}var T=1,N=-1,E="tg-sort-asc",L="tg-sort-desc";return function(t){var e=n.getElementById(t),o=r(e,"tr"),i=o.length>0?r(o[0],"td"):[];0==i.length&&(i=r(o[0],"th"));for(var u=1;u<o.length;++u){var a=r(o[u],"td");if(a.length!=i.length)return}x(e,i)}}(document);document.addEventListener("DOMContentLoaded",function(n){TgTableSort("tg-Qvv0j")});</script>

<style type="text/css">
  table.tftable {font-size:12px;color:#333333;width:100%;border-width: 1px;border-color: #729ea5;border-collapse: collapse;}
  table.tftable th {font-size:12px;background-color:#acc8cc;border-width: 1px;padding: 8px;border-style: solid;border-color: #729ea5;text-align:left;}
  table.tftable tr {background-color:#d4e3e5;}
  table.tftable td {font-size:12px;border-width: 1px;padding: 8px;border-style: solid;border-color: #729ea5;}
  </style>

<p>ä¸ƒå±‚æ¨¡å‹ä¸­æ•°æ®çš„ä¼ è¾“è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:11px 20px;border-style:solid;border-width:0px;overflow:hidden;word-break:normal;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:11px 20px;border-style:solid;border-width:0px;overflow:hidden;word-break:normal;}
.tg .tg-7uzy{vertical-align:top}
.tg .tg-yw4l{vertical-align:top}
th.tg-sort-header::-moz-selection { background:transparent; }th.tg-sort-header::selection      { background:transparent; }th.tg-sort-header { cursor:pointer; }table th.tg-sort-header:after {  content:'';  float:right;  margin-top:7px;  border-width:0 4px 4px;  border-style:solid;  border-color:#404040 transparent;  visibility:hidden;  }table th.tg-sort-header:hover:after {  visibility:visible;  }table th.tg-sort-desc:after,table th.tg-sort-asc:after,table th.tg-sort-asc:hover:after {  visibility:visible;  opacity:0.4;  }table th.tg-sort-desc:after {  border-bottom:none;  border-width:4px 4px 0;  }</style>
<table id="tfhover" class="tftable" border="1">
  <tr>


<th style="width:13%" class="tg-yw4l">å±‚</th>
<th class="tg-yw4l">ä¸»æœºA</th>
<th class="tg-yw4l">ä¸»æœºB</th>


  </tr>
  <tr>


<td class="tg-031e">åº”ç”¨å±‚</td>
<td class="tg-031e">æ ‡è®°1ï¼Œç”¨çš„ä»€ä¹ˆè½¯ä»¶å‘é€</td>
<td class="tg-031e">ç”¨ä»€ä¹ˆè½¯ä»¶æ‰“å¼€</td>


  </tr>
  <tr>


<td class="tg-031e">è¡¨ç¤ºå±‚</td>
<td class="tg-031e">æ ‡è®°2ï¼Œæ˜¯ä»€ä¹ˆç±»å‹æ•°æ®ï¼ˆæ–‡æœ¬ï¼Œå›¾ç‰‡ï¼Œå£°éŸ³ï¼‰</td>
<td class="tg-031e">æ•°æ®çš„ç±»å‹</td>


  </tr>
  <tr>


<td class="tg-031e">ä¼šè¯å±‚</td>
<td class="tg-031e">æ ‡è®°3ï¼Œä¼ è¾“ç»™è°ï¼Ÿ</td>
<td class="tg-031e">å‘ç»™è°</td>


  </tr>
  <tr>


<td class="tg-031e">ä¼ è¾“å±‚</td>
<td class="tg-031e">æ ‡è®°4ï¼ŒåŒè¿‡æ€ä¹ˆæ ·çš„ä¼ è¾“æ–¹å¼ï¼ˆåè®®ï¼Œç«¯å£ï¼‰</td>
<td class="tg-031e">ç”¨çš„ä»€ä¹ˆåè®®å‘é€ç»™å“ªä¸ªç«¯å£</td>


  </tr>
  <tr>


<td class="tg-031e">ç½‘ç»œå±‚</td>
<td class="tg-031e">æ ‡è®°5ï¼Œå‘ç»™å“ªä¸€ä¸ªIPåœ°å€ï¼Ÿ</td>
<td class="tg-031e">æ˜¯å¦æ˜¯å‘é€ç»™æ­¤IPåœ°å€</td>


  </tr>
  <tr>


<td class="tg-031e">æ•°æ®é“¾è·¯å±‚</td>
<td class="tg-031e">æ ‡è®°6ï¼Œæ‰¾åˆ°IPå¯¹åº”çš„MACåœ°å€</td>
<td class="tg-031e">æ˜¯å¦æ˜¯å‘é€ç»™æ­¤MACåœ°å€çš„å¸§</td>


  </tr>
  <tr>


<td class="tg-031e">ç‰©ç†å±‚</td>
<td class="tg-031e">1010101010010101010</td>
<td class="tg-031e">10100101010100101</td>


  </tr>
</table>
<script type="text/javascript" charset="utf-8">var TgTableSort=window.TgTableSort||function(n,t){"use strict";function r(n,t){for(var e=[],o=n.childNodes,i=0;i<o.length;++i){var u=o[i];if("."==t.substring(0,1)){var a=t.substring(1);f(u,a)&&e.push(u)}else u.nodeName.toLowerCase()==t&&e.push(u);var c=r(u,t);e=e.concat(c)}return e}function e(n,t){var e=[],o=r(n,"tr");return o.forEach(function(n){var o=r(n,"td");t>=0&&t<o.length&&e.push(o[t])}),e}function o(n){return n.textContent||n.innerText||""}function i(n){return n.innerHTML||""}function u(n,t){var r=e(n,t);return r.map(o)}function a(n,t){var r=e(n,t);return r.map(i)}function c(n){var t=n.className||"";return t.match(/\S+/g)||[]}function f(n,t){return-1!=c(n).indexOf(t)}function s(n,t){f(n,t)||(n.className+=" "+t)}function d(n,t){if(f(n,t)){var r=c(n),e=r.indexOf(t);r.splice(e,1),n.className=r.join(" ")}}function v(n){d(n,L),d(n,E)}function l(n,t,e){r(n,"."+E).map(v),r(n,"."+L).map(v),e==T?s(t,E):s(t,L)}function g(n){return function(t,r){var e=n*t.str.localeCompare(r.str);return 0==e&&(e=t.index-r.index),e}}function h(n){return function(t,r){var e=+t.str,o=+r.str;return e==o?t.index-r.index:n*(e-o)}}function m(n,t,r){var e=u(n,t),o=e.map(function(n,t){return{str:n,index:t}}),i=e&&-1==e.map(isNaN).indexOf(!0),a=i?h(r):g(r);return o.sort(a),o.map(function(n){return n.index})}function p(n,t,r,o){for(var i=f(o,E)?N:T,u=m(n,r,i),c=0;t>c;++c){var s=e(n,c),d=a(n,c);s.forEach(function(n,t){n.innerHTML=d[u[t]]})}l(n,o,i)}function x(n,t){var r=t.length;t.forEach(function(t,e){t.addEventListener("click",function(){p(n,r,e,t)}),s(t,"tg-sort-header")})}var T=1,N=-1,E="tg-sort-asc",L="tg-sort-desc";return function(t){var e=n.getElementById(t),o=r(e,"tr"),i=o.length>0?r(o[0],"td"):[];0==i.length&&(i=r(o[0],"th"));for(var u=1;u<o.length;++u){var a=r(o[u],"td");if(a.length!=i.length)return}x(e,i)}}(document);document.addEventListener("DOMContentLoaded",function(n){TgTableSort("tg-Qvv0j")});</script>

<style type="text/css">
  table.tftable {font-size:12px;color:#333333;width:100%;border-width: 1px;border-color: #729ea5;border-collapse: collapse;}
  table.tftable th {font-size:12px;background-color:#acc8cc;border-width: 1px;padding: 8px;border-style: solid;border-color: #729ea5;text-align:left;}
  table.tftable tr {background-color:#d4e3e5;}
  table.tftable td {font-size:12px;border-width: 1px;padding: 8px;border-style: solid;border-color: #729ea5;}
  </style>



<p>â€‹                  </p>
<h2 id="TCP-IPæ¨¡å‹-å››å±‚æ¨¡å‹"><a href="#TCP-IPæ¨¡å‹-å››å±‚æ¨¡å‹" class="headerlink" title="TCP/IPæ¨¡å‹/å››å±‚æ¨¡å‹"></a>TCP/IPæ¨¡å‹/å››å±‚æ¨¡å‹</h2><p>è€Œæˆ‘ä»¬åœ¨å¼€å‘ä¸­å¹¿æ³›åº”ç”¨çš„æ˜¯å››å±‚æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯TCP/IPå‚è€ƒæ¨¡å‹ï¼Œè¿™å››å±‚åˆ†åˆ«æ˜¯ç¡¬ä»¶å±‚ã€ç½‘ç»œå±‚ã€ä¼ è¾“å±‚ã€åº”ç”¨å±‚ã€‚ä»¥ä¸‹æ˜¯OSIæ¨¡å‹å’ŒIP/TCPæ¨¡å‹çš„å±‚æ¬¡å¯¹æ¯”ï¼š</p>
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:11px 20px;border-style:solid;border-width:0px;overflow:hidden;word-break:normal;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:11px 20px;border-style:solid;border-width:0px;overflow:hidden;word-break:normal;}
.tg .tg-7uzy{vertical-align:top}
.tg .tg-yw4l{vertical-align:top}
th.tg-sort-header::-moz-selection { background:transparent; }th.tg-sort-header::selection      { background:transparent; }th.tg-sort-header { cursor:pointer; }table th.tg-sort-header:after {  content:'';  float:right;  margin-top:7px;  border-width:0 4px 4px;  border-style:solid;  border-color:#404040 transparent;  visibility:hidden;  }table th.tg-sort-header:hover:after {  visibility:visible;  }table th.tg-sort-desc:after,table th.tg-sort-asc:after,table th.tg-sort-asc:hover:after {  visibility:visible;  opacity:0.4;  }table th.tg-sort-desc:after {  border-bottom:none;  border-width:4px 4px 0;  }</style>
<table id="tfhover" class="tftable" border="1">
<tr>


<th class="tg-031e" style="width:15%">OSIä¸ƒå±‚æ¨¡å‹</th>
<th class="tg-031e" style="width:18%">TCP/IPå››å±‚æ¨¡å‹</th>
<th class="tg-yw4l">å¯¹åº”ç½‘ç»œåè®®</th>
<th class="tg-yw4l" style="width:13%">æ•°æ®å•å…ƒ</th>


  </tr>
  <tr>


<td class="tg-031e">åº”ç”¨å±‚</td>
<td class="tg-031e" rowspan="3">åº”ç”¨å±‚</td>
<td class="tg-yw4l" rowspan="3">FTPï¼ˆæ–‡ä»¶ä¼ è¾“åè®®ï¼‰<br>HTTPï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰<br>DNSï¼ˆåŸŸåæœåŠ¡å™¨åè®®ï¼‰<br>SMTPï¼ˆç®€å•é‚®ä»¶ä¼ è¾“åè®®ï¼‰<br>NFSï¼ˆç½‘ç»œæ–‡ä»¶ç³»ç»Ÿåè®®ï¼‰</td>
<td class="tg-yw4l" rowspan="3">æ•°æ®</td>


  </tr>
  <tr>


<td class="tg-031e">è¡¨ç¤ºå±‚</td>


  </tr>
  <tr>


<td class="tg-031e">ä¼šè¯å±‚</td>


  </tr>
  <tr>


<td class="tg-031e">ä¼ è¾“å±‚</td>
<td class="tg-031e">ä¼ è¾“å±‚</td>
<td class="tg-yw4l">TCPï¼ˆæ§åˆ¶ä¼ è¾“åè®®ï¼‰<br>UDPï¼ˆç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰</td>
<td class="tg-yw4l">æ•°æ®åŒ…</td>


  </tr>
  <tr>


<td class="tg-031e">ç½‘ç»œå±‚</td>
<td class="tg-031e">ç½‘ç»œå±‚</td>
<td class="tg-yw4l">IPï¼ˆç½‘é™…åè®®ï¼‰<br>ICMPï¼ˆç½‘é™…æ§åˆ¶æ¶ˆæ¯åè®®ï¼‰<br>ARPï¼ˆåœ°å€è§£æåè®®ï¼‰<br>RARPï¼ˆåå‘åœ°å€è§£æåè®®ï¼‰</td>
<td class="tg-yw4l">æ•°æ®å¸§</td>


  </tr>
  <tr>


<td class="tg-yw4l">æ•°æ®é“¾è·¯å±‚</td>
<td class="tg-yw4l" rowspan="2">ç¡¬ä»¶å±‚</td>
<td class="tg-yw4l" rowspan="2">HDLCï¼ˆé«˜çº§é“¾è·¯æ§åˆ¶åè®®ï¼‰<br>PPPï¼ˆç‚¹å¯¹ç‚¹åè®®ï¼‰<br>SLIPï¼ˆä¸²è¡Œçº¿è·¯æ¥å£åè®®ï¼‰</td>
<td class="tg-yw4l" rowspan="2">æ¯”ç‰¹</td>


  </tr>
  <tr>


<td class="tg-yw4l">ç‰©ç†å±‚</td>


  </tr>
</table>

<script type="text/javascript" charset="utf-8">var TgTableSort=window.TgTableSort||function(n,t){"use strict";function r(n,t){for(var e=[],o=n.childNodes,i=0;i<o.length;++i){var u=o[i];if("."==t.substring(0,1)){var a=t.substring(1);f(u,a)&&e.push(u)}else u.nodeName.toLowerCase()==t&&e.push(u);var c=r(u,t);e=e.concat(c)}return e}function e(n,t){var e=[],o=r(n,"tr");return o.forEach(function(n){var o=r(n,"td");t>=0&&t<o.length&&e.push(o[t])}),e}function o(n){return n.textContent||n.innerText||""}function i(n){return n.innerHTML||""}function u(n,t){var r=e(n,t);return r.map(o)}function a(n,t){var r=e(n,t);return r.map(i)}function c(n){var t=n.className||"";return t.match(/\S+/g)||[]}function f(n,t){return-1!=c(n).indexOf(t)}function s(n,t){f(n,t)||(n.className+=" "+t)}function d(n,t){if(f(n,t)){var r=c(n),e=r.indexOf(t);r.splice(e,1),n.className=r.join(" ")}}function v(n){d(n,L),d(n,E)}function l(n,t,e){r(n,"."+E).map(v),r(n,"."+L).map(v),e==T?s(t,E):s(t,L)}function g(n){return function(t,r){var e=n*t.str.localeCompare(r.str);return 0==e&&(e=t.index-r.index),e}}function h(n){return function(t,r){var e=+t.str,o=+r.str;return e==o?t.index-r.index:n*(e-o)}}function m(n,t,r){var e=u(n,t),o=e.map(function(n,t){return{str:n,index:t}}),i=e&&-1==e.map(isNaN).indexOf(!0),a=i?h(r):g(r);return o.sort(a),o.map(function(n){return n.index})}function p(n,t,r,o){for(var i=f(o,E)?N:T,u=m(n,r,i),c=0;t>c;++c){var s=e(n,c),d=a(n,c);s.forEach(function(n,t){n.innerHTML=d[u[t]]})}l(n,o,i)}function x(n,t){var r=t.length;t.forEach(function(t,e){t.addEventListener("click",function(){p(n,r,e,t)}),s(t,"tg-sort-header")})}var T=1,N=-1,E="tg-sort-asc",L="tg-sort-desc";return function(t){var e=n.getElementById(t),o=r(e,"tr"),i=o.length>0?r(o[0],"td"):[];0==i.length&&(i=r(o[0],"th"));for(var u=1;u<o.length;++u){var a=r(o[u],"td");if(a.length!=i.length)return}x(e,i)}}(document);document.addEventListener("DOMContentLoaded",function(n){TgTableSort("tg-Qvv0j")});</script>

<style type="text/css">
  table.tftable {font-size:12px;color:#333333;width:100%;border-width: 1px;border-color: #729ea5;border-collapse: collapse;}
  table.tftable th {font-size:12px;background-color:#acc8cc;border-width: 1px;padding: 8px;border-style: solid;border-color: #729ea5;text-align:left;}
  table.tftable tr {background-color:#d4e3e5;}
  table.tftable td {font-size:12px;border-width: 1px;padding: 8px;border-style: solid;border-color: #729ea5;}
  </style>

<p>TCP/IPåè®®è¢«ç»„ç»‡æˆå››ä¸ªæ¦‚å¿µå±‚ï¼Œå…¶ä¸­æœ‰ä¸‰å±‚å¯¹åº”äºISOå‚è€ƒæ¨¡å‹ä¸­çš„ç›¸åº”å±‚ã€‚ICP/IPåè®®æ—å¹¶ä¸åŒ…å«ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚ï¼Œå› æ­¤å®ƒä¸èƒ½ç‹¬ç«‹å®Œæˆæ•´ä¸ªè®¡ç®—æœºç½‘ç»œç³»ç»Ÿçš„åŠŸèƒ½ï¼Œå¿…é¡»ä¸è®¸å¤šå…¶ä»–çš„åè®®ååŒå·¥ä½œã€‚ TCP/IPåˆ†å±‚æ¨¡å‹çš„å››ä¸ªåè®®å±‚åˆ†åˆ«å®Œæˆä»¥ä¸‹çš„åŠŸèƒ½ï¼š </p>
<h3 id="ç¡¬ä»¶å±‚"><a href="#ç¡¬ä»¶å±‚" class="headerlink" title="ç¡¬ä»¶å±‚"></a>ç¡¬ä»¶å±‚</h3><p>ç¡¬ä»¶å±‚ä¸OSIå‚è€ƒæ¨¡å‹ä¸­çš„ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚ç›¸å¯¹åº”ã€‚å®ƒè´Ÿè´£ç›‘è§†æ•°æ®åœ¨ä¸»æœºå’Œç½‘ç»œä¹‹é—´çš„äº¤æ¢ã€‚äº‹å®ä¸Šï¼ŒTCP/IPæœ¬èº«å¹¶æœªå®šä¹‰è¯¥å±‚çš„åè®®ï¼Œè€Œç”±å‚ä¸äº’è¿çš„å„ç½‘ç»œä½¿ç”¨è‡ªå·±çš„ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚åè®®ï¼Œç„¶åä¸TCP/IPçš„ç½‘ç»œæ¥å…¥å±‚è¿›è¡Œè¿æ¥ã€‚</p>
<p><strong>TCP/IPå‚è€ƒæ¨¡å‹åªæ˜¯è¦æ±‚èƒ½å¤Ÿæä¾›ç»™å…¶ä¸Šå±‚-ç½‘ç»œäº’è¿å±‚ä¸€ä¸ªè®¿é—®æ¥å£ï¼Œä»¥ä¾¿åœ¨å…¶ä¸Šä¼ é€’IPåˆ†ç»„ã€‚</strong></p>
<h3 id="ç½‘ç»œå±‚"><a href="#ç½‘ç»œå±‚" class="headerlink" title="ç½‘ç»œå±‚"></a>ç½‘ç»œå±‚</h3><p>ç½‘ç»œå±‚æ˜¯æ•´ä¸ªTCP/IPåè®®æ ˆçš„æ ¸å¿ƒã€‚å¯¹åº”äºOSIä¸ƒå±‚å‚è€ƒæ¨¡å‹çš„ç½‘ç»œå±‚ã€‚æœ¬å±‚åŒ…å«</p>
<ul>
<li>IPåè®®ï¼ˆInternet Protocolï¼Œç½‘é™…åè®®ï¼‰</li>
<li>RIPåè®®ï¼ˆRouting Information Protocolï¼Œè·¯ç”±ä¿¡æ¯åè®®ï¼‰</li>
<li>ARPåè®®ï¼ˆAddress Resolution Protocolï¼Œåœ°å€è§£æåè®®ï¼‰</li>
</ul>
<p><strong>IPåè®®</strong>æ˜¯ç½‘é™…äº’è”å±‚æœ€é‡è¦çš„åè®®ï¼Œå®ƒæä¾›çš„æ˜¯ä¸€ä¸ªå¯é ã€æ— è¿æ¥çš„æ•°æ®æŠ¥ä¼ é€’æœåŠ¡ã€‚IPå±‚æ¥æ”¶ç”±æ›´ä½å±‚ï¼ˆç¡¬ä»¶å±‚ä¾‹å¦‚ä»¥å¤ªç½‘è®¾å¤‡é©±åŠ¨ç¨‹åºï¼‰å‘æ¥çš„æ•°æ®åŒ…ï¼Œå¹¶æŠŠè¯¥æ•°æ®åŒ…å‘é€åˆ°æ›´é«˜å±‚ä¹Ÿå°±æ˜¯ä¼ è¾“å±‚ï¼Œä¾‹å¦‚TCPæˆ–UDPå±‚ï¼›</p>
<p>ç›¸åï¼ŒIPå±‚ä¹ŸæŠŠä»TCPæˆ–UDPå±‚æ¥æ”¶æ¥çš„æ•°æ®åŒ…ä¼ é€åˆ°æ›´ä½å±‚ã€‚</p>
<p>IPæ•°æ®åŒ…æ˜¯ä¸å¯é çš„ï¼Œå› ä¸ºIPå¹¶æ²¡æœ‰åšä»»ä½•äº‹æƒ…æ¥ç¡®è®¤æ•°æ®åŒ…æ˜¯å¦æŒ‰é¡ºåºå‘é€çš„æˆ–è€…æœ‰æ²¡æœ‰è¢«ç ´åï¼ŒIPæ•°æ®åŒ…ä¸­å«æœ‰å‘é€å®ƒçš„ä¸»æœºçš„åœ°å€ï¼ˆæºåœ°å€ï¼‰å’Œæ¥æ”¶å®ƒçš„ä¸»æœºçš„åœ°å€ï¼ˆç›®çš„åœ°å€ï¼‰ã€‚é«˜å±‚çš„TCPå’ŒUDPæœåŠ¡åœ¨æ¥æ”¶æ•°æ®åŒ…æ—¶ï¼Œé€šå¸¸å‡è®¾åŒ…ä¸­çš„æºåœ°å€æ˜¯æœ‰æ•ˆçš„ã€‚</p>
<p><strong>ARPåè®®</strong>å…¶åŸºæœ¬åŠŸèƒ½ä¸ºé€šè¿‡ç›®æ ‡è®¾å¤‡çš„IPåœ°å€ï¼ŒæŸ¥è¯¢ç›®æ ‡è®¾å¤‡çš„MACåœ°å€ï¼Œä»¥ä¿è¯é€šä¿¡çš„é¡ºåˆ©è¿›è¡Œã€‚å®ƒæ˜¯IPv4ä¸­ç½‘ç»œå±‚å¿…ä¸å¯å°‘çš„åè®®ï¼Œä¸è¿‡åœ¨IPv6ä¸­å·²ä¸å†é€‚ç”¨ï¼Œå¹¶è¢«é‚»å±…å‘ç°åè®®ï¼ˆNDPï¼‰æ‰€æ›¿ä»£ã€‚</p>
<p>ç½‘ç»œå±‚è´Ÿè´£æ•°æ®çš„åŒ…è£…ã€å¯»å€å’Œè·¯ç”±ã€‚å®ƒçš„åŠŸèƒ½æ˜¯æŠŠåˆ†ç»„å‘å¾€ç›®æ ‡ç½‘ç»œæˆ–ä¸»æœºã€‚åŒæ—¶ï¼Œä¸ºäº†å°½å¿«åœ°å‘é€åˆ†ç»„ï¼Œå¯èƒ½éœ€è¦æ²¿ä¸åŒçš„è·¯å¾„åŒæ—¶è¿›è¡Œåˆ†ç»„ä¼ é€’ã€‚å› æ­¤ï¼Œåˆ†ç»„åˆ°è¾¾çš„é¡ºåºå’Œå‘é€çš„é¡ºåºå¯èƒ½ä¸åŒï¼Œè¿™å°±éœ€è¦ä¸Šå±‚å¿…é¡»å¯¹åˆ†ç»„è¿›è¡Œæ’åºã€‚</p>
<p>ç½‘ç»œå±‚å®šä¹‰äº†åˆ†ç»„æ ¼å¼å’Œåè®®ï¼Œå³IPåè®®ï¼Œç½‘ç»œäº’è¿å±‚é™¤äº†éœ€è¦å®Œæˆè·¯ç”±çš„åŠŸèƒ½å¤–ï¼Œä¹Ÿå¯ä»¥å®Œæˆå°†ä¸åŒç±»å‹çš„ç½‘ç»œï¼ˆå¼‚æ„ç½‘ï¼‰äº’è¿çš„ä»»åŠ¡ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œç½‘ç»œäº’è¿å±‚è¿˜éœ€è¦å®Œæˆæ‹¥å¡æ§åˆ¶çš„åŠŸèƒ½ã€‚</p>
<p>å®ƒåŒæ—¶è¿˜åŒ…å«</p>
<ul>
<li>Internetæ§åˆ¶æ¶ˆæ¯åè®®ï¼ˆInternet Control Message Protocolï¼ŒICMPï¼‰</li>
</ul>
<p><strong>ICMPåè®®</strong>æ˜¯ç½‘ç»œåè®®æ—çš„æ ¸å¿ƒåè®®ä¹‹ä¸€ã€‚å®ƒç”¨äºTCP/IPç½‘ç»œä¸­å‘é€æ§åˆ¶æ¶ˆæ¯ï¼Œæä¾›å¯èƒ½å‘ç”Ÿåœ¨é€šä¿¡ç¯å¢ƒä¸­çš„å„ç§é—®é¢˜åé¦ˆï¼Œé€šè¿‡è¿™äº›ä¿¡æ¯ï¼Œä»¤ç®¡ç†è€…å¯ä»¥å¯¹æ‰€å‘ç”Ÿçš„é—®é¢˜ä½œå‡ºè¯Šæ–­ï¼Œç„¶åé‡‡å–é€‚å½“çš„æªæ–½è§£å†³ã€‚</p>
<p>ICMPä¾é IPåè®®æ¥å®Œæˆå®ƒçš„ä»»åŠ¡ï¼Œå®ƒæ˜¯IPåè®®çš„ä¸»è¦éƒ¨åˆ†ã€‚å®ƒä¸ä¼ è¾“åè®®å¦‚TCPå’ŒUDPæ˜¾è‘—ä¸åŒï¼šå®ƒä¸€èˆ¬ä¸ç”¨äºåœ¨ä¸¤ç‚¹é—´ä¼ è¾“æ•°æ®ï¼Œé€šå¸¸ä¸ç”±ç½‘ç»œç¨‹åºç›´æ¥ä½¿ç”¨ï¼Œé™¤äº†pingå’Œtracerouteè¿™ä¸¤ä¸ªç‰¹åˆ«çš„ä¾‹å­ã€‚ IPv4ä¸­çš„ICMPè¢«ç§°ä½œICMPv4ï¼ŒIPv6ä¸­çš„ICMPåˆ™è¢«ç§°ä½œICMPv6ã€‚</p>
<p>ç½‘ç»œå±‚åè®®ç®¡ç†ç¦»æ•£çš„è®¡ç®—æœºé—´çš„æ•°æ®ä¼ è¾“ï¼Œå¦‚IPåè®®ä¸ºç”¨æˆ·å’Œè¿œç¨‹è®¡ç®—æœºæä¾›äº†ä¿¡æ¯åŒ…çš„ä¼ è¾“æ–¹æ³•ï¼Œç¡®ä¿ä¿¡æ¯åŒ…èƒ½æ­£ç¡®åœ°åˆ°è¾¾ç›®çš„æœºå™¨ã€‚è¿™ä¸€è¿‡ç¨‹ä¸­ï¼ŒIPå’Œå…¶ä»–ç½‘ç»œå±‚çš„åè®®å…±åŒç”¨äºæ•°æ®ä¼ è¾“ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨ä¸€äº›ç›‘è§†ç³»ç»Ÿè¿›ç¨‹çš„å·¥å…·ï¼Œç”¨æˆ·æ˜¯çœ‹ä¸åˆ°åœ¨ç³»ç»Ÿé‡Œçš„IPçš„ã€‚</p>
<p>ç½‘ç»œå—…æ¢å™¨Sniffersæ˜¯èƒ½çœ‹åˆ°è¿™äº›è¿‡ç¨‹çš„ä¸€ä¸ªè£…ç½®ï¼ˆå®ƒå¯ä»¥æ˜¯è½¯ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ç¡¬ä»¶ï¼‰ï¼Œå®ƒèƒ½è¯»å–é€šè¿‡ç½‘ç»œå‘é€çš„æ¯ä¸€ä¸ªåŒ…ï¼Œå³èƒ½è¯»å–å‘ç”Ÿåœ¨ç½‘ç»œå±‚åè®®çš„ä»»ä½•æ´»åŠ¨ï¼Œå› æ­¤ç½‘ç»œå—…æ¢å™¨Sniffersä¼šå¯¹å®‰å…¨é€ æˆå¨èƒé‡è¦çš„ç½‘ç»œå±‚åè®®åŒ…æ‹¬ARPã€ICMPå’ŒIPåè®®ç­‰ã€‚</p>
<h3 id="ä¼ è¾“å±‚"><a href="#ä¼ è¾“å±‚" class="headerlink" title="ä¼ è¾“å±‚"></a>ä¼ è¾“å±‚</h3><p>åœ¨TCP/IPæ¨¡å‹ä¸­ï¼Œä¼ è¾“å±‚çš„åŠŸèƒ½æ˜¯ä½¿æºç«¯ä¸»æœºå’Œç›®æ ‡ç«¯ä¸»æœºä¸Šçš„å¯¹ç­‰å®ä½“å¯ä»¥è¿›è¡Œä¼šè¯ã€‚åœ¨ä¼ è¾“å±‚å®šä¹‰äº†ä¸¤ç§æœåŠ¡è´¨é‡ä¸åŒçš„åè®®ã€‚</p>
<p>ä¼ è¾“å±‚å¯¹åº”äºOSIå‚è€ƒæ¨¡å‹çš„ä¼ è¾“å±‚ï¼Œä¸ºåº”ç”¨å±‚å®ä½“æä¾›ç«¯åˆ°ç«¯çš„é€šä¿¡åŠŸèƒ½ï¼Œä¿è¯äº†æ•°æ®åŒ…çš„é¡ºåºä¼ é€åŠæ•°æ®çš„å®Œæ•´æ€§ã€‚è¯¥å±‚å®šä¹‰äº†ä¸¤ä¸ªä¸»è¦çš„åè®®ï¼š</p>
<ul>
<li>ä¼ è¾“æ§åˆ¶åè®® TCPï¼ˆtransmission control protocolï¼‰</li>
<li>ç”¨æˆ·æ•°æ®æŠ¥åè®® UDPï¼ˆuser datagram protocolï¼‰</li>
</ul>
<p><strong>ä¼ è¾“å±‚</strong>å¯¹åº”OSIæ¦‚å¿µæ¨¡å‹çš„ä¼ è¾“å±‚ã€‚ä¼ è¾“å±‚æä¾›åº”ç”¨ç¨‹åºé—´çš„é€šä¿¡ã€‚å…¶åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ ¼å¼åŒ–ä¿¡æ¯æµ</li>
<li>æä¾›å¯é ä¼ è¾“ã€‚</li>
</ul>
<p>ä¸ºå®ç°åè€…ï¼Œä¼ è¾“å±‚åè®®è§„å®šæ¥æ”¶ç«¯å¿…é¡»å‘å›ç¡®è®¤ä¿¡æ¯ï¼Œå¦‚æœåˆ†ç»„ä¸¢å¤±ï¼Œå¿…é¡»é‡æ–°å‘é€ã€‚</p>
<h3 id="åº”ç”¨å±‚"><a href="#åº”ç”¨å±‚" class="headerlink" title="åº”ç”¨å±‚"></a>åº”ç”¨å±‚</h3><p>TCP/IPæ¦‚å¿µæ¨¡å‹ä¸­çš„åº”ç”¨å±‚å¯¹åº”OSIçš„åº”ç”¨å±‚ã€è¡¨ç¤ºå±‚å’Œä¼šè¯å±‚ï¼Œåº”ç”¨å±‚åè®®ä¸»è¦åŒ…æ‹¬ï¼š</p>
<ul>
<li>é‚®å±€åè®®ï¼ˆPost Office Protocolï¼Œç¼©å†™ï¼šPOPï¼‰</li>
<li>åŸŸåç³»ç»Ÿï¼ˆDomain Name Systemï¼Œç¼©å†™ï¼šDNSï¼‰</li>
<li>æ–‡ä»¶ä¼ è¾“åè®®ï¼ˆFile Transfer Protocolï¼Œç¼©å†™ï¼šFTPï¼‰</li>
<li>è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHyperText Transfer Protocolï¼Œç¼©å†™ï¼šHTTPï¼‰</li>
<li>ç®€å•é‚®ä»¶ä¼ è¾“åè®® (Simple Mail Transfer Protocolï¼Œç¼©å†™ï¼šSMTP)</li>
<li>å®æ—¶ä¼ è¾“åè®®ï¼ˆReal-time Transport Protocolï¼Œç¼©å†™ï¼šRTPï¼‰</li>
<li>å®‰å…¨å£³åè®®ï¼ˆSecure Shellï¼Œç¼©å†™ï¼šSSHï¼‰</li>
<li>ä¼ è¾“å±‚å®‰å…¨åè®®ï¼ˆTransport Layer Securityï¼Œç¼©å†™ï¼šTLSï¼‰</li>
<li>å®‰å…¨å¥—æ¥å±‚ï¼ˆSecure Sockets Layerï¼Œç¼©å†™ï¼šSSLï¼‰</li>
</ul>
<p>åº”ç”¨å±‚ä½äºåè®®æ ˆçš„é¡¶ç«¯ï¼Œå®ƒçš„ä¸»è¦ä»»åŠ¡æ˜¯åº”ç”¨ã€‚ä¸€èˆ¬æ˜¯å¯è§çš„ï¼Œå¦‚åˆ©ç”¨FTPï¼ˆæ–‡ä»¶ä¼ è¾“åè®®ï¼‰ä¼ è¾“ä¸€ä¸ªæ–‡ä»¶ï¼Œè¯·æ±‚ä¸€ä¸ªå’Œç›®æ ‡è®¡ç®—æœºçš„è¿æ¥ï¼Œåœ¨ä¼ è¾“æ–‡ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·å’Œè¿œç¨‹è®¡ç®—æœºäº¤æ¢çš„ä¸€éƒ¨åˆ†æ˜¯èƒ½çœ‹åˆ°çš„ã€‚</p>
<p>åº”ç”¨å±‚æ˜¯Linuxç½‘ç»œè®¾å®šæœ€å…³é”®çš„ä¸€å±‚ã€‚LinuxæœåŠ¡å™¨çš„é…ç½®æ–‡æ¡£ä¸»è¦é’ˆå¯¹åº”ç”¨å±‚ä¸­çš„åè®®ã€‚</p>
<h2 id="TCPå’ŒUPD"><a href="#TCPå’ŒUPD" class="headerlink" title="TCPå’ŒUPD"></a>TCPå’ŒUPD</h2><p>TCP åè®®æ˜¯é¢å‘è¿æ¥çš„åè®®ï¼Œç±»ä¼¼äºæ‰“ç”µè¯ï¼Œåœ¨å¼€å§‹ä¼ è¾“æ•°æ®ä¹‹å‰ï¼Œå¿…é¡»å…ˆå»ºç«‹æ˜ç¡®çš„è¿æ¥ã€‚</p>
<p>æ¯ä¸€æ¡TCPè¿æ¥åªèƒ½æœ‰ä¸¤ä¸ªç«¯ç‚¹ï¼Œæ¯ä¸€æ¡TCPè¿æ¥åªèƒ½æ˜¯ç‚¹å¯¹ç‚¹çš„ï¼Œ TCPæä¾›å…¨åŒå·¥é€šä¿¡ã€‚æ•°æ®åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šç‹¬ç«‹çš„è¿›è¡Œä¼ è¾“ã€‚å› æ­¤ï¼Œè¿æ¥çš„æ¯ä¸€ç«¯å¿…é¡»ä¿æŒæ¯ä¸ªæ–¹å‘ä¸Šçš„ä¼ è¾“æ•°æ®åºå·ã€‚</p>
<p>å®ƒå°†ä¸€å°ä¸»æœºå‘å‡ºçš„å­—èŠ‚æµæ— å·®é”™åœ°å‘å¾€äº’è”ç½‘ä¸Šçš„å…¶ä»–ä¸»æœºã€‚åœ¨å‘é€ç«¯ï¼Œå®ƒè´Ÿè´£æŠŠä¸Šå±‚ä¼ é€ä¸‹æ¥çš„å­—èŠ‚æµåˆ†æˆæŠ¥æ–‡æ®µå¹¶ä¼ é€’ç»™ä¸‹å±‚ã€‚åœ¨æ¥æ”¶ç«¯ï¼Œå®ƒè´Ÿè´£æŠŠæ”¶åˆ°çš„æŠ¥æ–‡è¿›è¡Œé‡ç»„åé€’äº¤ç»™ä¸Šå±‚ã€‚</p>
<p><strong>é¢å‘å­—èŠ‚æµçš„å«ä¹‰</strong>ï¼šè™½ç„¶åº”ç”¨ç¨‹åºå’ŒTCPäº¤äº’æ˜¯ä¸€æ¬¡ä¸€ä¸ªæ•°æ®å—ï¼Œä½†TCPæŠŠåº”ç”¨ç¨‹åºäº¤ä¸‹æ¥çš„æ•°æ®ä»…ä»…æ˜¯ä¸€è¿ä¸²çš„æ— ç»“æ„çš„å­—èŠ‚æµã€‚</p>
<p><strong>é¢å‘è¿æ¥çš„å«ä¹‰ï¼š</strong>é¢å‘è¿æ¥æ˜¯æŒ‡ä¸¤å°ä¸»æœºåœ¨é€šè®¯çš„è¿‡ç¨‹ä¸­ï¼Œå¿…é¡»è¦å…ˆå»ºç«‹é€šè®¯å…³ç³»ï¼Œç„¶åå†å»å‘é€æ•°æ®ï¼Œä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯é¦–å…ˆå‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼ŒæœåŠ¡å™¨ç»™åˆ°å®¢æˆ·ç«¯å›åº”ï¼Œå…·æœ‰é€šè®¯è¿‡ç¨‹åå†è¿›è¡ŒçœŸæ­£çš„æ•°æ®ä¼ è¾“ã€‚å®ƒæ˜¯æœ‰ä¸¤å°å›ºå®šçš„ä¸»æœºåœ¨é€šè®¯ã€‚</p>
<p><strong>å› æ­¤TCPåè®®æ˜¯ä¸€ä¸ªé¢å‘è¿æ¥çš„ã€å¯é çš„åè®®ã€‚</strong>å®ƒçš„å¯é æ€§è¡¨ç°åœ¨ï¼š</p>
<ul>
<li>ä¿è¯æ•°æ®æ­£ç¡®æ€§</li>
<li>ä¿è¯æ•°æ®é¡ºåº</li>
</ul>
<p>å®ƒçš„ç¼ºç‚¹åœ¨äºï¼š</p>
<ul>
<li>ä¼ è¾“é€Ÿåº¦æ…¢</li>
<li>å»ºç«‹è¿æ¥éœ€è¦æ—¶é—´çš„ç³»ç»Ÿèµ„æºè¾ƒå¤š</li>
</ul>
<p>TCPåè®®è¿˜è¦å¤„ç†ç«¯åˆ°ç«¯çš„æµé‡æ§åˆ¶ï¼Œä»¥é¿å…ç¼“æ…¢æ¥æ”¶çš„æ¥æ”¶æ–¹æ²¡æœ‰è¶³å¤Ÿçš„ç¼“å†²åŒºæ¥æ”¶å‘é€æ–¹å‘é€çš„å¤§é‡æ•°æ®ã€‚</p>
<p>TCPå»ºç«‹åœ¨IPä¹‹ä¸Šï¼Œå®šä¹‰äº†ç½‘ç»œä¸Šç¨‹åºåˆ°ç¨‹åºçš„æ•°æ®ä¼ è¾“æ ¼å¼å’Œè§„åˆ™ï¼Œæä¾›äº†IPæ•°æ®åŒ…çš„ä¼ è¾“ç¡®è®¤ã€ä¸¢å¤±æ•°æ®åŒ…çš„é‡æ–°è¯·æ±‚ã€å°†æ”¶åˆ°çš„æ•°æ®åŒ…æŒ‰ç…§å®ƒä»¬çš„å‘é€æ¬¡åºé‡æ–°è£…é…çš„æœºåˆ¶ã€‚</p>
<p><strong>UDPåè®®</strong>æ˜¯ä¸€ç§é¢å‘éè¿æ¥ã€ä¸ä¿è¯å¯é çš„æ•°æ®ä¼ è¾“æœåŠ¡ï¼Œä¸»è¦é€‚ç”¨äºä¸éœ€è¦å¯¹æŠ¥æ–‡è¿›è¡Œæ’åºå’Œæµé‡æ§åˆ¶çš„åœºåˆã€‚ å®ƒçš„ä¼˜ç‚¹åœ¨äºï¼š</p>
<ul>
<li>ç”¨äºä¼ è¾“å°‘é‡æ•°æ®(æ•°æ®åŒ…æ¨¡å¼)</li>
<li>èµ„æºæ¶ˆè€—å°ï¼Œå¤„ç†é€Ÿåº¦å¿«</li>
</ul>
<p>UDPä¹Ÿå»ºç«‹åœ¨IPä¹‹ä¸Šï¼Œä½†å®ƒæ˜¯ä¸€ç§æ— è¿æ¥åè®®ï¼Œä¸¤å°è®¡ç®—æœºä¹‹é—´çš„ä¼ è¾“ç±»ä¼¼äºä¼ é€’é‚®ä»¶ï¼šæ¶ˆæ¯ä»ä¸€å°è®¡ç®—æœºå‘é€åˆ°å¦ä¸€å°è®¡ç®—æœºï¼Œä¸¤è€…ä¹‹é—´æ²¡æœ‰æ˜ç¡®çš„è¿æ¥ã€‚</p>
<p>UDPä¸ä¿è¯æ•°æ®çš„ä¼ è¾“ï¼Œä¹Ÿä¸æä¾›é‡æ–°æ’åˆ—æ¬¡åºæˆ–é‡æ–°è¯·æ±‚çš„åŠŸèƒ½ï¼Œæ‰€ä»¥è¯´å®ƒæ˜¯ä¸å¯é çš„ã€‚è™½ç„¶UDPçš„ä¸å¯é æ€§é™åˆ¶äº†å®ƒçš„åº”ç”¨åœºåˆï¼Œä½†å®ƒæ¯”TCPå…·æœ‰æ›´å¥½çš„ä¼ è¾“æ•ˆç‡ï¼ŒUDPçš„ç¼ºç‚¹åœ¨äºï¼š</p>
<ul>
<li>ä¸æä¾›æ•°æ®åŒ…åˆ†ç»„ã€ç»„è£…</li>
<li>ä¸èƒ½å¯¹æ•°æ®åŒ…è¿›è¡Œæ’åº</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æŠ¥æ–‡å‘é€ä¹‹åï¼Œæ˜¯æ— æ³•å¾—çŸ¥å…¶æ˜¯å¦å®‰å…¨å®Œæ•´åˆ°è¾¾çš„ã€‚åœ¨ç½‘ç»œè´¨é‡ä»¤äººååˆ†ä¸æ»¡æ„çš„ç¯å¢ƒä¸‹ï¼ŒUDPåè®®æ•°æ®åŒ…ä¸¢å¤±ä¼šæ¯”è¾ƒä¸¥é‡ã€‚ä½†æ˜¯ç”±äºUDPçš„ç‰¹æ€§ï¼šå®ƒä¸å±äºè¿æ¥å‹åè®®ï¼Œå› è€Œå…·æœ‰èµ„æºæ¶ˆè€—å°ï¼Œå¤„ç†é€Ÿåº¦å¿«çš„ä¼˜ç‚¹ï¼Œæ‰€ä»¥é€šå¸¸éŸ³é¢‘ã€è§†é¢‘å’Œæ™®é€šæ•°æ®åœ¨ä¼ é€æ—¶ä½¿ç”¨UDPè¾ƒå¤šï¼Œå› ä¸ºå®ƒä»¬å³ä½¿å¶å°”ä¸¢å¤±ä¸€ä¸¤ä¸ªæ•°æ®åŒ…ï¼Œä¹Ÿä¸ä¼šå¯¹æ¥æ”¶ç»“æœäº§ç”Ÿå¤ªå¤§å½±å“ã€‚æ¯”å¦‚æˆ‘ä»¬èŠå¤©ç”¨çš„ICQå’ŒQQå°±æ˜¯ä½¿ç”¨çš„UDPåè®®ã€‚</p>
<h3 id="TCPå’ŒUDPçš„æ€»ç»“"><a href="#TCPå’ŒUDPçš„æ€»ç»“" class="headerlink" title="TCPå’ŒUDPçš„æ€»ç»“"></a>TCPå’ŒUDPçš„æ€»ç»“</h3><p>TCPæ˜¯ä¸€ç§æµæ¨¡å¼çš„åè®®ï¼ŒUDPæ˜¯ä¸€ç§æ•°æ®åŒ…æ¨¡å¼çš„åè®®ã€‚</p>
<p>TCPæ˜¯é¢å‘è¿æ¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è¿æ¥æŒç»­çš„è¿‡ç¨‹ä¸­ï¼ŒSocketä¸­æ”¶åˆ°çš„æ•°æ®éƒ½æ˜¯ç”±åŒä¸€å°ä¸»æœºå‘å‡ºçš„ï¼Œå› æ­¤åªè¦ä¿è¯æ•°æ®æ˜¯æœ‰åºçš„åˆ°è¾¾å°±å¯ä»¥äº†ï¼Œè‡³äºæ¯æ¬¡è¯»å–å¤šå°‘æ•°æ®å¯ä»¥è‡ªå·±å†³å®šã€‚</p>
<p>UDPæ˜¯æ— è¿æ¥çš„åè®®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦çŸ¥é“æ¥æ”¶ç«¯çš„IPå’Œç«¯å£ï¼Œä¸”ç½‘ç»œæ˜¯å¯è¾¾çš„ï¼Œä»»ä½•ä¸»æœºéƒ½å¯ä»¥å‘æ¥æ”¶ç«¯å‘é€æ•°æ®ã€‚</p>
<p>UDPæ²¡æœ‰å›ºå®šçš„ä¸»æœºï¼Œå®ƒåœ¨é€šè®¯ä¹‹å‰ä¸ä¼šæµ‹è¯•è¿™å°ä¸»æœºæ˜¯å¦å­˜åœ¨ï¼Œè€Œç›´æ¥å‘é€æ•°æ®ã€‚</p>
<h2 id="TCPæŠ¥æ–‡"><a href="#TCPæŠ¥æ–‡" class="headerlink" title="TCPæŠ¥æ–‡"></a>TCPæŠ¥æ–‡</h2><p>TCPæ˜¯ä¸€ç§é¢å‘è¿æ¥è¿æ¥å¯¼å‘çš„ã€å¯é çš„åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚TCPå°†ç”¨æˆ·æ•°æ®æ‰“åŒ…æˆæŠ¥æ–‡æ®µï¼Œå®ƒå‘é€åå¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå¦ä¸€ç«¯æ”¶åˆ°çš„æ•°æ®è¿›è¡Œç¡®è®¤ã€å¯¹å¤±åºçš„æ•°æ®é‡æ–°æ’åºã€ä¸¢å¼ƒé‡å¤æ•°æ®ã€‚</p>
<p>æŠ¥æ–‡æ˜¯ç½‘ç»œä¸­äº¤æ¢ä¸ä¼ è¾“çš„æ•°æ®å•å…ƒï¼Œå³ä¸€æ¬¡æ€§è¦å‘é€çš„æ•°æ®å—ï¼ŒåŒ…å«äº†å°†è¦å‘é€çš„å®Œæ•´çš„æ•°æ®ä¿¡æ¯ï¼Œä¼šä¸æ–­çš„å°è£…æˆåˆ†ç»„ã€åŒ…ã€å¸§æ¥ä¼ è¾“ã€‚TCPæŠ¥æ–‡çš„æ ¼å¼å¦‚ä¸‹ï¼š</p>
<p> <img src="http://oboehz2ag.bkt.clouddn.com/TCPæŠ¥æ–‡EN.jpg" alt="TCPæŠ¥æ–‡EN"></p>
<p>å›ºå®šé¦–éƒ¨é•¿åº¦ä¸º20å­—èŠ‚ï¼Œå¯å˜éƒ¨åˆ†0~40å­—èŠ‚ï¼Œå„å­—æ®µè§£é‡Šï¼š</p>
<ol>
<li>Source Port Numberï¼šæºç«¯å£ï¼ŒèŒƒå›´0~65525ã€‚</li>
<li>Target Port Numberï¼šç›®çš„ç«¯å£ï¼ŒèŒƒå›´åŒä¸Šã€‚</li>
<li>Sequence Numberï¼šé¡ºåºå·ç ï¼Œç”±å‘é€æ–¹ä½¿ç”¨ï¼ŒTCP è¿æ¥ä¸­ä¼ é€çš„æ•°æ®æµä¸­çš„æ¯ä¸€ä¸ªå­—èŠ‚éƒ½ç¼–ä¸Šä¸€ä¸ªåºå·ã€‚åºå·å­—æ®µçš„å€¼åˆ™æŒ‡çš„æ˜¯æœ¬æŠ¥æ–‡æ®µæ‰€å‘é€çš„æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·ã€‚</li>
<li>Acknowledgement Numberï¼šç¡®è®¤åºå·ï¼Œæ˜¯æ¥æ”¶æ•°æ®æ–¹æœŸæœ›æ”¶åˆ°å‘é€æ–¹çš„ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„åºå·ï¼Œå› æ­¤ç¡®è®¤åºå·åº”å½“æ˜¯ä¸Šæ¬¡å·²æˆåŠŸæ”¶åˆ°æ•°æ®å­—èŠ‚åºå·åŠ 1ã€‚</li>
<li>Header Lengthï¼šé¦–éƒ¨é•¿åº¦ï¼Œå®ƒæŒ‡å‡ºæŠ¥æ–‡æ•°æ®è·TCP æŠ¥å¤´çš„èµ·å§‹å¤„æœ‰å¤šè¿œã€‚ä¸€èˆ¬é¦–éƒ¨é•¿åº¦ä¸º20å­—èŠ‚ã€‚</li>
<li>Reservedï¼šä¿ç•™å­—æ®µï¼ˆå›¾ä¸­ï¼ŒåŒ…å«CWRï¼ŒECEï¼‰ä¿ç•™ä»Šåä½¿ç”¨ï¼Œé»˜è®¤æ˜¯0ã€‚</li>
<li>URGï¼šç´§æ€¥æ¯”ç‰¹ï¼Œå½“ URG=1 æ—¶ï¼Œè¡¨æ˜ç´§æ€¥æŒ‡é’ˆå­—æ®µæœ‰æ•ˆã€‚å®ƒå‘Šè¯‰ç³»ç»Ÿæ­¤æŠ¥æ–‡æ®µä¸­æœ‰ç´§æ€¥æ•°æ®ï¼Œåº”å°½å¿«ä¼ é€ï¼Œç›¸å½“äºè¡¨ç¤ºé«˜ä¼˜å…ˆçº§çš„æ•°æ®ã€‚</li>
<li>ACKï¼šç¡®è®¤æ¯”ç‰¹ï¼Œåªæœ‰å½“ ACK=1 æ—¶ç¡®è®¤åºå·å­—æ®µæ‰æœ‰æ•ˆã€‚å½“ ACK=0 æ—¶ï¼Œç¡®è®¤åºå·æ— æ•ˆã€‚</li>
<li>PSHï¼šæ¨é€æ¯”ç‰¹ï¼Œæ¥æ”¶æ–¹ TCP æ”¶åˆ°æ¨é€æ¯”ç‰¹ç½®1çš„æŠ¥æ–‡æ®µï¼Œå°±å°½å¿«åœ°äº¤ä»˜ç»™æ¥æ”¶åº”ç”¨è¿›ç¨‹ï¼Œè€Œä¸å†ç­‰åˆ°æ•´ä¸ªç¼“å­˜éƒ½å¡«æ»¡äº†åå†å‘ä¸Šäº¤ä»˜ã€‚</li>
<li>RSTï¼šå¤ä½æ¯”ç‰¹ï¼Œå½“ RST=1 æ—¶ï¼Œè¡¨æ˜ TCP è¿æ¥ä¸­å‡ºç°ä¸¥é‡å·®é”™ï¼ˆå¦‚ç”±äºä¸»æœºå´©æºƒæˆ–å…¶ä»–åŸå› ï¼‰ï¼Œå¿…é¡»é‡Šæ”¾è¿æ¥ï¼Œç„¶åå†é‡æ–°å»ºç«‹è¿è¾“è¿æ¥ã€‚</li>
<li>SYNï¼šåŒæ­¥æ¯”ç‰¹ï¼Œåœ¨å»ºç«‹è¿æ¥æ—¶ç”¨æ¥åŒæ­¥åºå·ã€‚SYN=1ï¼Œ ACK=0è¡¨ç¤ºä¸€ä¸ªè¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µã€‚SYN=1ï¼ŒACK=1è¡¨ç¤ºåŒæ„å»ºç«‹è¿æ¥ã€‚</li>
<li>FINï¼šç»ˆæ­¢æ¯”ç‰¹ï¼Œç”¨æ¥é‡Šæ”¾ä¸€ä¸ªè¿æ¥ã€‚å½“FIN=1 æ—¶ï¼Œè¡¨æ˜æ­¤æŠ¥æ–‡æ®µçš„å‘é€ç«¯çš„æ•°æ®å·²å‘é€å®Œæ¯•ï¼Œå¹¶è¦æ±‚é‡Šæ”¾è¿è¾“è¿æ¥ã€‚</li>
<li>Window Sizeï¼šçª—å£å¤§å°ï¼Œ16bitsï¼Œçª—å£å­—æ®µç”¨æ¥æ§åˆ¶å¯¹æ–¹å‘é€çš„æ•°æ®é‡ï¼Œå•ä½ä¸ºå­—èŠ‚ã€‚TCP è¿æ¥çš„ä¸€ç«¯æ ¹æ®è®¾ç½®çš„ç¼“å­˜ç©ºé—´å¤§å°ç¡®å®šè‡ªå·±çš„æ¥æ”¶çª—å£å¤§å°ï¼Œç„¶åé€šçŸ¥å¯¹æ–¹ä»¥ç¡®å®šå¯¹æ–¹çš„å‘é€çª—å£çš„ä¸Šé™ã€‚</li>
<li>Checksumï¼šæ£€éªŒå’Œï¼Œ16bitsï¼Œè¯¥å­—æ®µæ£€éªŒçš„èŒƒå›´åŒ…æ‹¬é¦–éƒ¨å’Œæ•°æ®è¿™ä¸¤éƒ¨åˆ†ã€‚åœ¨è®¡ç®—æ£€éªŒå’Œæ—¶ï¼Œè¦åœ¨ TCP æŠ¥æ–‡æ®µçš„å‰é¢åŠ ä¸Š 12 å­—èŠ‚çš„ä¼ªé¦–éƒ¨ã€‚ç”±å‘ç«¯è®¡ç®—å’Œå­˜å‚¨ï¼Œå¹¶ç”±æ”¶ç«¯è¿›è¡ŒéªŒè¯ã€‚</li>
<li>Urgent Pointerï¼šç´§æ€¥æŒ‡é’ˆå­—æ®µï¼Œ16bitsï¼Œç´§æ€¥æŒ‡é’ˆæŒ‡å‡ºåœ¨æœ¬æŠ¥æ–‡æ®µä¸­çš„ç´§æ€¥æ•°æ®çš„æœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·ã€‚</li>
<li>Optionsï¼šé€‰é¡¹å­—æ®µï¼Œé•¿åº¦å¯å˜ã€‚ç”¨äºæŠŠé™„åŠ ä¿¡æ¯ä¼ é€’ç»™ç»ˆç‚¹ï¼Œæˆ–ç”¨æ¥å¯¹é½å…¶å®ƒé€‰é¡¹ã€‚ è¿™éƒ¨åˆ†æœ€å¤šåŒ…å«40å­—èŠ‚ï¼Œå› ä¸ºTCPå¤´éƒ¨æœ€é•¿æ˜¯60å­—èŠ‚ï¼Œå…¶ä¸­è¿˜åŒ…å«ä¸Šé¢çš„20å­—èŠ‚çš„å›ºå®šéƒ¨åˆ†ã€‚</li>
</ol>
<p>Wiresharkæ•è·åˆ°çš„TCPåŒ…æŠ¥æ–‡ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p> <img src="http://oboehz2ag.bkt.clouddn.com/TCPæŠ“åŒ….png" alt="TCPæŠ“åŒ…"></p>
<h2 id="TCPä¸‰æ¬¡æ¡æ‰‹"><a href="#TCPä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="TCPä¸‰æ¬¡æ¡æ‰‹"></a>TCPä¸‰æ¬¡æ¡æ‰‹</h2><p>TCPå»ºç«‹è¿æ¥å’Œæ–­å¼€è¿æ¥çš„è¿‡ç¨‹ç§°ä¸ºä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ï¼Œ æ‰€è°“ä¸‰æ¬¡æ¡æ‰‹ï¼ˆThree-way Handshakeï¼‰ï¼Œæ˜¯æŒ‡å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹è¿æ¥çš„è¿‡ç¨‹ã€‚</p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒWiresharkæˆªè·åˆ°äº†ä¸‰æ¬¡æ¡æ‰‹çš„ä¸‰ä¸ªæ•°æ®åŒ…ã€‚ç¬¬å››ä¸ªåŒ…æ‰æ˜¯HTTPçš„ï¼Œè¯´æ˜HTTPçš„ç¡®æ˜¯ä½¿ç”¨TCPå»ºç«‹è¿æ¥çš„ã€‚</p>
<p><img src="http://oboehz2ag.bkt.clouddn.com/ä¸‰æ¬¡æ¡æ‰‹.png" alt="ä¸‰æ¬¡æ¡æ‰‹"></p>
<p>ä¸‰æ¬¡æ¡æ‰‹çš„æµç¨‹å›¾å¦‚ä¸‹ï¼š</p>
<p> <img src="http://oboehz2ag.bkt.clouddn.com/ä¸‰æ¬¡æ¡æ‰‹æµç¨‹.jpg" alt="ä¸‰æ¬¡æ¡æ‰‹æµç¨‹"></p>
<p>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šClientå‘é€ä½ç ä¸º SYN = 1ï¼Œéšæœºäº§ç”Ÿ seq = x çš„æ•°æ®åŒ…åˆ°æœåŠ¡å™¨ï¼ŒServerç”± SYN = 1 çŸ¥é“Clientè¦æ±‚å»ºç«‹è¿æ¥ï¼›</p>
<p>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šServeræ”¶åˆ°è¯·æ±‚åè¦ç¡®è®¤è¿æ¥ä¿¡æ¯ï¼Œå‘Clientå‘é€ack number = x + 1ï¼ˆPS: Clientçš„seq + 1ï¼‰ï¼ŒSYN = 1ï¼ŒACK=1ï¼Œéšæœºäº§ç”Ÿ seq = y çš„åŒ…ï¼›</p>
<p>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šClientæ”¶åˆ°åæ£€æŸ¥ack numberæ˜¯å¦æ­£ç¡®ï¼Œå³ç¬¬ä¸€æ¬¡å‘é€çš„ seq + 1ï¼Œä»¥åŠä½ç ACKæ˜¯å¦ä¸º1ï¼Œè‹¥æ­£ç¡®ï¼ŒClientä¼šå†å‘é€ ack number = y + 1 ï¼ˆPS: Severçš„seq + 1ï¼‰ï¼ŒACK = 1ï¼ŒServeræ”¶åˆ°åç¡®è®¤seqå€¼ä¸ ACK = 1 åˆ™è¿æ¥å»ºç«‹æˆåŠŸã€‚</p>
<p>å®Œæˆä¸‰æ¬¡æ¡æ‰‹ï¼ŒClientä¸Serverå¼€å§‹ä¼ é€æ•°æ®ã€‚</p>
<p>ä¸‹é¢ä½¿ç”¨Wiresharké€æ­¥åˆ†æä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ï¼š</p>
<p>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¿æ¥è¯·æ±‚åŒ…ï¼Œæ ‡å¿—ä½SYNï¼ˆåŒæ­¥åºå·ï¼‰ä¸º1ï¼Œåºå·ä¸ºX=0</p>
<p> <img src="http://oboehz2ag.bkt.clouddn.com/ç¬¬ä¸€æ¬¡æ¡æ‰‹.png" alt="ç¬¬ä¸€æ¬¡æ¡æ‰‹"></p>
<p>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯å‘è¿‡æ¥æŠ¥æ–‡ï¼Œç”±SYN=1çŸ¥é“å®¢æˆ·ç«¯è¦æ±‚å»ºç«‹è”æœºã€‚å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªSYNå’ŒACKéƒ½ç½®ä¸º1çš„TCPæŠ¥æ–‡ï¼Œè®¾ç½®åˆå§‹åºå·Y=0ï¼Œå°†ç¡®è®¤åºå·(Acknowledgement Number)è®¾ç½®ä¸ºå®¢æˆ·çš„åºåˆ—å·åŠ 1ï¼Œå³X+1 = 0+1=1, å¦‚ä¸‹å›¾ï¼š</p>
<p> <img src="http://oboehz2ag.bkt.clouddn.com/ç¬¬äºŒæ¬¡æ¡æ‰‹.png" alt="ç¬¬äºŒæ¬¡æ¡æ‰‹"></p>
<p>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å‘æ¥çš„åŒ…åæ£€æŸ¥ç¡®è®¤åºå·(Acknowledgement Number)æ˜¯å¦æ­£ç¡®ï¼Œå³ç¬¬ä¸€æ¬¡å‘é€çš„åºå·åŠ 1ï¼ˆX+1=1ï¼‰ã€‚ä»¥åŠæ ‡å¿—ä½ACKæ˜¯å¦ä¸º1ã€‚è‹¥æ­£ç¡®ï¼ŒæœåŠ¡å™¨å†æ¬¡å‘é€ç¡®è®¤åŒ…ï¼ŒACKæ ‡å¿—ä½ä¸º1ï¼ŒSYNæ ‡å¿—ä½ä¸º0ã€‚ç¡®è®¤åºå·ï¼ˆAcknowledgement Numberï¼‰=Y+1=0+1=1ï¼Œå‘é€åºå·ä¸ºX+1=1ã€‚å®¢æˆ·ç«¯æ”¶åˆ°åç¡®è®¤åºå·å€¼ä¸ACK=1åˆ™è¿æ¥å»ºç«‹æˆåŠŸï¼Œå¯ä»¥ä¼ é€æ•°æ®äº†ã€‚</p>
<p> <img src="http://oboehz2ag.bkt.clouddn.com/ç¬¬ä¸‰æ¬¡æ¡æ‰‹.png" alt="ç¬¬ä¸‰æ¬¡æ¡æ‰‹"></p>
<h2 id="å‚è€ƒé“¾æ¥ï¼š"><a href="#å‚è€ƒé“¾æ¥ï¼š" class="headerlink" title="å‚è€ƒé“¾æ¥ï¼š"></a>å‚è€ƒé“¾æ¥ï¼š</h2><p><a href="https://zhangbinalan.gitbooks.io/protocol/content/tcpbao_wen_ge_shi.html" target="_blank" rel="external">TCPä»‹ç»</a> - ZhangBinalan</p>
<p><a href="http://eiwodetianna.com/2015/11/30/iOS%E5%BC%80%E5%8F%91-Socket%E9%80%9A%E4%BF%A1/" target="_blank" rel="external">iOSå¼€å‘-Socketé€šä¿¡</a> - Eiwodetianna.</p>
<p><a href="http://book.51cto.com/art/200906/127291.htm" target="_blank" rel="external">LinuxæœåŠ¡å™¨å®‰å…¨ç­–ç•¥è¯¦è§£ï¼ˆç¬¬äºŒç‰ˆï¼‰</a>- æ›¹æ±Ÿå</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸¤ä¸ªåº”ç”¨ç¨‹åºä¹‹é—´çš„é€šä¿¡ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œè€Œè¿›ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡çš„å‰ææ˜¯æˆ‘ä»¬èƒ½å¤Ÿæ‰¾åˆ°æŸä¸ªè¿›ç¨‹ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ç»™è¿›ç¨‹æ·»åŠ å”¯ä¸€çš„æ ‡ç¤ºï¼Œåœ¨æœ¬åœ°è¿›ç¨‹é€šä¿¡ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨PIDæ¥æ ‡ç¤ºä¸€ä¸ªè¿›ç¨‹ï¼Œä½†PIDåªåœ¨æœ¬åœ°å”¯ä¸€ï¼Œç½‘ç»œä¸­çš„å¤šä¸ªè®¡ç®—æœºä¹‹é—´çš„è¿›ç¨‹æ ‡ç¤ºå¹¶ä¸èƒ½ä¿è¯å”¯ä¸€æ€§ï¼Œå†²çªçš„å‡ ç‡å¾ˆå¤§ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦å¦è¾Ÿè¹Šå¾„ï¼ŒTCP/IPåè®®æ—å·²ä¸ºæˆ‘ä»¬è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼ŒIPå±‚çš„IPåœ°å€å¯ä»¥æ ‡ç¤ºä¸»æœºï¼Œè€ŒTCPå±‚åè®®å’Œç«¯å£å·å¯ä»¥æ ‡ç¤ºæŸä¸ªä¸»æœºçš„æŸä¸ªè¿›ç¨‹ï¼Œäºæ˜¯æˆ‘ä»¬é‡‡å–&lt;strong&gt;IPåœ°å€ï¼‹åè®®ï¼‹ç«¯å£å·&lt;/strong&gt;ä½œä¸ºå”¯ä¸€æ ‡ç¤ºçš„è¿™ç§å½¢å¼ï¼Œæ¥ç¡®å®šç½‘ç»œä¸­çš„ä¸€ä¸ªè¿›ç¨‹ï¼Œä»è€Œè¿›è¡Œè¿›ç¨‹ä¹‹é—´çš„é€šè®¯ï¼Œè¿™ç§æ–¹å¼å°±æ˜¯æˆ‘ä»¬Socketä½¿ç”¨çš„é€šè®¯æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å­¦ä¹ Socketé€šè®¯ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦äº†è§£&lt;strong&gt;ç½‘ç»œé€šè®¯ç»“æ„ã€TCPå’ŒUPD&lt;/strong&gt;ï¼Œä»¥ä¸‹æ˜¯è¿™è¿™ä¸¤ä¸ªçŸ¥è¯†ç‚¹çš„ç®€è¦ä»‹ç»ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ç½‘ç»œé€šè®¯" scheme="http://yoursite.com/categories/%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF/"/>
    
    
      <category term="ç½‘ç»œé€šè®¯" scheme="http://yoursite.com/tags/%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF/"/>
    
      <category term="TCP/IPåè®®" scheme="http://yoursite.com/tags/TCP-IP%E5%8D%8F%E8%AE%AE/"/>
    
  </entry>
  
  <entry>
    <title>å¾®ä¿¡å¼€å‘ - access_token</title>
    <link href="http://yoursite.com/2016/09/05/%E5%BE%AE%E4%BF%A1%E6%8E%A5%E5%8F%A3%20-%20access%20token/"/>
    <id>http://yoursite.com/2016/09/05/å¾®ä¿¡æ¥å£ - access token/</id>
    <published>2016-09-04T18:24:00.000Z</published>
    <updated>2016-09-05T12:08:19.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°æ¥å£å¼€å‘ä¸­ï¼Œaccess_tokenå æ®äº†ä¸€ä¸ªå¾ˆé‡è¦çš„åœ°ä½ï¼Œå®ƒç›¸å½“äºè¿›å…¥å„ç§æ¥å£çš„é’¥åŒ™ï¼Œæ‹¿åˆ°è¿™ä¸ªé’¥åŒ™æ‰æœ‰è°ƒç”¨å…¶ä»–å„ç§ç‰¹æ®Šæ¥å£çš„æƒé™ã€‚</p>
<p>åŒæ ·å¾®ä¿¡æœåŠ¡å™¨ä¹Ÿæ˜¯é€šè¿‡access_tokenè¯†åˆ«æ˜¯å“ªä¸ªå…¬ä¼—å·ï¼Œä»¥åŠè¯¥å…¬ä¼—å·æ˜¯å¦æœ‰æƒé™è°ƒç”¨è¯¥æ¥å£ã€‚</p>
<p>access_tokenæ˜¯å…¬ä¼—å·çš„å…¨å±€å”¯ä¸€æ¥å£è°ƒç”¨å‡­æ®ï¼Œå…¬ä¼—å·è°ƒç”¨å„æ¥å£æ—¶éƒ½éœ€ä½¿ç”¨access_tokenã€‚å¼€å‘è€…éœ€è¦è¿›è¡Œå¦¥å–„ä¿å­˜ã€‚access_tokençš„å­˜å‚¨è‡³å°‘è¦ä¿ç•™512ä¸ªå­—ç¬¦ç©ºé—´ã€‚access_tokençš„æœ‰æ•ˆæœŸç›®å‰ä¸º2ä¸ªå°æ—¶ï¼Œéœ€å®šæ—¶åˆ·æ–°ï¼Œé‡å¤è·å–å°†å¯¼è‡´ä¸Šæ¬¡è·å–çš„access_tokenå¤±æ•ˆã€‚</p>
<p><strong>å…¬ä¼—å·å¯ä»¥ä½¿ç”¨AppIDå’ŒAppSecretè°ƒç”¨æœ¬æ¥å£æ¥è·å–access_tokenã€‚AppIDå’ŒAppSecretå¯åœ¨å¼€å‘æ¨¡å¼ä¸­è·å¾—ï¼Œæ³¨æ„è°ƒç”¨æ‰€æœ‰å¾®ä¿¡æ¥å£æ—¶å‡éœ€ä½¿ç”¨httpsåè®®ã€‚</strong></p>
   <a id="more"></a>
<h2 id="access-tokenå¼€å‘ç­–ç•¥"><a href="#access-tokenå¼€å‘ç­–ç•¥" class="headerlink" title="access_tokenå¼€å‘ç­–ç•¥"></a>access_tokenå¼€å‘ç­–ç•¥</h2><p>å› ä¸ºaccess_tokenå…·æœ‰æ¯å¤©2000æ¬¡çš„è®¿é—®é™åˆ¶ï¼Œè€Œaccess_tokenåˆæ˜¯å¾ˆé‡è¦çš„å±æ€§ï¼Œè°ƒç”¨éå¸¸é¢‘ç¹ï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰çš„æ¥å£éƒ½éœ€è¦ä½¿ç”¨access_tokenæ¥è¿›è¡Œè®¿é—®æƒé™çš„éªŒè¯ï¼Œå½“é¢‘ç¹è°ƒç”¨å¾®ä¿¡APIæ—¶ï¼Œå¾ˆæœ‰å¯èƒ½ä¼šè¶…å‡º2000æ¬¡çš„é™åˆ¶ã€‚å› æ­¤æ™®éçš„è§£å†³æ–¹æ¡ˆæ˜¯å°†ä¸€æ¬¡è·å–çš„access_tokenä¿å­˜åˆ°æ•°æ®åº“ï¼Œåœ¨ä¸¤ä¸ªå°æ—¶åå†æ›´æ–°æ•°æ®åº“ï¼Œåœ¨è¿™ä¸¤ä¸ªå°æ—¶å†…ï¼Œæ‰€æœ‰éœ€è¦access_tokençš„åœ°æ–¹å…¨éƒ¨åˆ°æ•°æ®åº“æ¥å–ã€‚ </p>
<p><img src="http://oboehz2ag.bkt.clouddn.com/access_token%E5%BC%80%E5%8F%91%E7%AD%96%E7%95%A5.gif" alt="access_tokenå¼€å‘ç­–ç•¥"></p>
<h2 id="æ¥å£è°ƒç”¨è¯·æ±‚è¯´æ˜"><a href="#æ¥å£è°ƒç”¨è¯·æ±‚è¯´æ˜" class="headerlink" title="æ¥å£è°ƒç”¨è¯·æ±‚è¯´æ˜"></a>æ¥å£è°ƒç”¨è¯·æ±‚è¯´æ˜</h2><p>ä½¿ç”¨HTTPè¯·æ±‚ï¼Œè¯·æ±‚æ–¹å¼ä¸ºGETï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=APPID&amp;secret=APPSECRET</div></pre></td></tr></table></figure>
<p>è¯·æ±‚ä¸­é™„å¸¦çš„å‚æ•°ä¸ºï¼š</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>æ˜¯å¦å¿…é¡»</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>grant_type</td>
<td>æ˜¯</td>
<td>è·å–access_tokenå¡«å†™client_credential</td>
</tr>
<tr>
<td>appid</td>
<td>æ˜¯</td>
<td>ç¬¬ä¸‰æ–¹ç”¨æˆ·å”¯ä¸€å‡­è¯</td>
</tr>
<tr>
<td>secret</td>
<td>æ˜¯</td>
<td>ç¬¬ä¸‰æ–¹ç”¨æˆ·å”¯ä¸€å‡­è¯å¯†é’¥ï¼Œå³appsecret</td>
</tr>
</tbody>
</table>
<h2 id="è¿”å›è¯´æ˜"><a href="#è¿”å›è¯´æ˜" class="headerlink" title="è¿”å›è¯´æ˜"></a>è¿”å›è¯´æ˜</h2><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¾®ä¿¡ä¼šè¿”å›ä¸‹è¿°JSONæ•°æ®åŒ…ç»™å…¬ä¼—å·ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;<span class="attr">"access_token"</span>:<span class="string">"ACCESS_TOKEN"</span>,<span class="attr">"expires_in"</span>:<span class="number">7200</span>&#125;</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>access_token</td>
<td>è·å–åˆ°çš„å‡­è¯</td>
</tr>
<tr>
<td>expires_in</td>
<td>å‡­è¯æœ‰æ•ˆæ—¶é—´ï¼Œå•ä½ï¼šç§’</td>
</tr>
</tbody>
</table>
<h2 id="è·å–ç²‰ä¸å¤´åƒ"><a href="#è·å–ç²‰ä¸å¤´åƒ" class="headerlink" title="è·å–ç²‰ä¸å¤´åƒ"></a>è·å–ç²‰ä¸å¤´åƒ</h2><p>ä¸‹é¢æˆ‘ä»¬ç”¨è·å–ç²‰ä¸å¤´åƒçš„ä¾‹å­æ¥æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨access_tokenã€‚</p>
<p>é¦–å…ˆå†™ä¸€ä¸ªPHPæ–‡ä»¶ï¼Œæ¥è·å–access_tokenï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">getaccesstoken.php</div><div class="line"></div><div class="line"><span class="meta">&lt;?php</span></div><div class="line">define(<span class="string">'appid'</span>, <span class="string">'wx5d649f3295ce323a'</span>);</div><div class="line">define(<span class="string">'app_secret'</span>, <span class="string">'a17ecddd3fb0699814fce90fa6376b8e'</span>);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_access_token</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    $url = <span class="string">"https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid="</span>.appid.<span class="string">"&amp;secret="</span>.app_secret;</div><div class="line">    <span class="comment">//åˆå§‹åŒ–</span></div><div class="line">    $ch = curl_init();</div><div class="line">    <span class="comment">//è®¾ç½®é€‰é¡¹ï¼ŒåŒ…æ‹¬URL</span></div><div class="line">    curl_setopt($ch, CURLOPT_URL, $url);</div><div class="line">    curl_setopt($ch, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</div><div class="line">    curl_setopt($ch, CURLOPT_HEADER, <span class="number">0</span>);</div><div class="line">    curl_setopt($ch, CURLOPT_USERAGENT, <span class="number">1</span>);</div><div class="line">    curl_setopt($ch, CURLOPT_ENCODING, <span class="string">"gzip"</span>);</div><div class="line">    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, <span class="keyword">false</span>);</div><div class="line"></div><div class="line">    <span class="comment">//æ‰§è¡Œå¹¶è·å–HTMLæ–‡æ¡£å†…å®¹</span></div><div class="line">    $output = curl_exec($ch);</div><div class="line">    <span class="comment">//é‡Šæ”¾curlå¥æŸ„</span></div><div class="line">    curl_close($ch);</div><div class="line">    <span class="comment">//æ‰“å°è·å¾—çš„æ•°æ®</span></div><div class="line">    <span class="comment">//print_r($output);</span></div><div class="line">    $access_taken_arr = json_decode($output, <span class="keyword">true</span>);</div><div class="line">    $access_token = $access_taken_arr[<span class="string">"access_token"</span>];</div><div class="line">    <span class="comment">//print_r($access_taken_arr);</span></div><div class="line">    <span class="keyword">return</span> $access_token;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ–°å»ºå¦ä¸€ä¸ªPHPæ–‡ä»¶ï¼Œé¦–å…ˆè·å–ç²‰ä¸åˆ—è¡¨ï¼Œæå–å‡ºç²‰ä¸çš„openidç»„æˆæ•°ç»„ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_user_list</span><span class="params">($access_token)</span> </span>&#123;</div><div class="line"></div><div class="line">    $url = <span class="string">"https://api.weixin.qq.com/cgi-bin/user/get?access_token="</span>.$access_token;</div><div class="line">    <span class="comment">//echo $access_token;</span></div><div class="line">    <span class="comment">//åˆå§‹åŒ–</span></div><div class="line">    $ch = curl_init();</div><div class="line">    <span class="comment">//è®¾ç½®é€‰é¡¹ï¼ŒåŒ…æ‹¬URL</span></div><div class="line">    curl_setopt($ch, CURLOPT_URL, $url);</div><div class="line">    curl_setopt($ch, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</div><div class="line">    curl_setopt($ch, CURLOPT_HEADER, <span class="number">0</span>);</div><div class="line">    curl_setopt($ch, CURLOPT_USERAGENT, <span class="number">1</span>);</div><div class="line">    curl_setopt($ch, CURLOPT_ENCODING, <span class="string">"gzip"</span>);</div><div class="line">    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, <span class="keyword">false</span>);</div><div class="line"></div><div class="line">    <span class="comment">//æ‰§è¡Œå¹¶è·å–HTMLæ–‡æ¡£å†…å®¹</span></div><div class="line">    $output = curl_exec($ch);</div><div class="line">    <span class="comment">//é‡Šæ”¾curlå¥æŸ„</span></div><div class="line">    curl_close($ch);</div><div class="line">    <span class="comment">//æ‰“å°è·å¾—çš„æ•°æ®</span></div><div class="line">    <span class="comment">//print_r($output);</span></div><div class="line">    $user_list_arr = json_decode($output, <span class="keyword">true</span>);</div><div class="line">    <span class="keyword">return</span> ($user_list_arr[<span class="string">"data"</span>][<span class="string">"openid"</span>]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶ååˆ©ç”¨openidè·å–ç²‰ä¸çš„ç”¨æˆ·ä¿¡æ¯ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_user_info</span><span class="params">($access_token, $openid)</span> </span>&#123;</div><div class="line"></div><div class="line">    $url = <span class="string">"https://api.weixin.qq.com/cgi-bin/user/info?access_token="</span>.$access_token.<span class="string">"&amp;openid="</span>.$openid.<span class="string">"&amp;lang=zh_CN"</span>;</div><div class="line"></div><div class="line">    $ch = curl_init();</div><div class="line">    curl_setopt($ch, CURLOPT_URL, $url);</div><div class="line">    curl_setopt($ch, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</div><div class="line">    curl_setopt($ch, CURLOPT_HEADER, <span class="number">0</span>);</div><div class="line">    curl_setopt($ch, CURLOPT_USERAGENT, <span class="number">1</span>);</div><div class="line">    curl_setopt($ch, CURLOPT_ENCODING, <span class="string">"gzip"</span>);</div><div class="line">    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, <span class="keyword">false</span>);</div><div class="line"></div><div class="line">    $output = curl_exec($ch);</div><div class="line">    curl_close($ch);</div><div class="line"></div><div class="line">    $user_info_arr = json_decode($output, <span class="keyword">true</span>);</div><div class="line">    <span class="keyword">return</span> ($user_info_arr[<span class="string">"headimgurl"</span>]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ€åä»ç”¨æˆ·ä¿¡æ¯ä¸­æå–å‡ºç”¨æˆ·å¤´åƒçš„urlï¼Œå¹¶ä¼ ç»™iOSå®¢æˆ·ç«¯ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> ($i=<span class="number">0</span>; $i&lt;<span class="number">3</span>; $i++) &#123;</div><div class="line">    $openid = $openids[$i];</div><div class="line">    $use_info = get_user_info($access_token, $openid);</div><div class="line">    $user_image = substr($use_info, <span class="number">0</span>, strlen($str)<span class="number">-2</span>).<span class="string">"/132"</span>;</div><div class="line">    <span class="comment">//echo $user_image;</span></div><div class="line">    array_push($user_images, $user_image);</div><div class="line">&#125;</div><div class="line"><span class="keyword">echo</span> json_encode($user_images);</div></pre></td></tr></table></figure>
<p>åœ¨Xcodeä¸­åˆ›å»ºå·¥ç¨‹ï¼Œä½¿ç”¨NSURLSessionè·å–PHPæœåŠ¡å™¨ä¼ æ¥çš„åŒ…å«ç²‰ä¸å¤´åƒurlçš„æ•°ç»„ï¼Œåˆ©ç”¨urlè·å–ç²‰ä¸å¤´åƒï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºå·¥ç¨‹ä¸­ImageViewçš„Imageï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>UIæ“ä½œè¦è½¬åˆ°ä¸»çº¿ç¨‹è¿›è¡Œ</strong>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">getWechatFansHeadImgs</span><span class="params">()</span></span> &#123;</div><div class="line">        </div><div class="line">        <span class="keyword">self</span>.pleaseWait()</div><div class="line">        </div><div class="line">        <span class="comment">//let request = NSURLRequest(URL: NSURL(string: "http://localhost:8888/i/wechat/getuserinfo.php")!)</span></div><div class="line">        <span class="keyword">let</span> request = <span class="type">NSURLRequest</span>(<span class="type">URL</span>: <span class="type">NSURL</span>(string: <span class="string">"http://123.206.27.127/wechat/getuserinfo.php"</span>)!)</div><div class="line"></div><div class="line">        <span class="keyword">let</span> task = <span class="type">NSURLSession</span>.sharedSession().dataTaskWithRequest(request) &#123; (data, resp, error) <span class="keyword">in</span></div><div class="line">            </div><div class="line">            <span class="keyword">if</span> error != <span class="literal">nil</span> &#123;</div><div class="line">                <span class="built_in">print</span>(error?.localizedDescription)</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">var</span> imgLinks: [<span class="type">String</span>] = []</div><div class="line">                <span class="keyword">let</span> readingOprions = <span class="type">NSJSONReadingOptions</span>.<span class="type">MutableContainers</span></div><div class="line">                imgLinks = <span class="keyword">try</span>! <span class="type">NSJSONSerialization</span>.<span class="type">JSONObjectWithData</span>(data!, options: readingOprions) <span class="keyword">as</span>! <span class="type">Array</span><span class="comment">//nil</span></div><div class="line">                <span class="built_in">print</span>(imgLinks)</div><div class="line">                </div><div class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;imgLinks.<span class="built_in">count</span> &#123;</div><div class="line">                    <span class="keyword">if</span> imgLinks[i] != <span class="string">""</span> &#123;</div><div class="line">                        <span class="keyword">let</span> data = <span class="type">NSData</span>(contentsOfURL: <span class="type">NSURL</span>(string: imgLinks[i])!)</div><div class="line">                        dispatch_async(dispatch_get_main_queue(), &#123;</div><div class="line">                            <span class="keyword">self</span>.headImageViews[i].image = data != <span class="literal">nil</span> ? <span class="type">UIImage</span>(data: data!) : <span class="literal">nil</span></div><div class="line">                            <span class="built_in">print</span>(i)</div><div class="line">                        &#125;)</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                </div><div class="line">                <span class="built_in">print</span>(<span class="type">NSThread</span>.currentThread())</div><div class="line">                dispatch_async(dispatch_get_main_queue(), &#123;</div><div class="line">                    <span class="keyword">self</span>.clearAllNotice()</div><div class="line">                    <span class="keyword">self</span>.noticeSuccess(<span class="string">"è·å–æˆåŠŸ"</span>, autoClear: <span class="literal">true</span>, autoClearTime: <span class="number">2</span>)</div><div class="line">                &#125;)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        task.resume()</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>æœ€åä½¿ç”¨ç‚¹å‡»äº‹ä»¶è§¦å‘è¿™ä¸ªæ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@IBAction</span> <span class="function"><span class="keyword">func</span> <span class="title">showHeadImageButtonDidTouch</span><span class="params">(sender: AnyObject)</span></span> &#123;</div><div class="line">    </div><div class="line">    getWechatFansHeadImgs()</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Demoä¸‹è½½è¯·ç‚¹å‡»è¿™é‡Œ"><a href="#Demoä¸‹è½½è¯·ç‚¹å‡»è¿™é‡Œ" class="headerlink" title="Demoä¸‹è½½è¯·ç‚¹å‡»è¿™é‡Œ"></a>Demoä¸‹è½½è¯·<a href="https://github.com/tianziyao/demo" target="_blank" rel="external">ç‚¹å‡»è¿™é‡Œ</a></h2>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°æ¥å£å¼€å‘ä¸­ï¼Œaccess_tokenå æ®äº†ä¸€ä¸ªå¾ˆé‡è¦çš„åœ°ä½ï¼Œå®ƒç›¸å½“äºè¿›å…¥å„ç§æ¥å£çš„é’¥åŒ™ï¼Œæ‹¿åˆ°è¿™ä¸ªé’¥åŒ™æ‰æœ‰è°ƒç”¨å…¶ä»–å„ç§ç‰¹æ®Šæ¥å£çš„æƒé™ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ ·å¾®ä¿¡æœåŠ¡å™¨ä¹Ÿæ˜¯é€šè¿‡access_tokenè¯†åˆ«æ˜¯å“ªä¸ªå…¬ä¼—å·ï¼Œä»¥åŠè¯¥å…¬ä¼—å·æ˜¯å¦æœ‰æƒé™è°ƒç”¨è¯¥æ¥å£ã€‚&lt;/p&gt;
&lt;p&gt;access_tokenæ˜¯å…¬ä¼—å·çš„å…¨å±€å”¯ä¸€æ¥å£è°ƒç”¨å‡­æ®ï¼Œå…¬ä¼—å·è°ƒç”¨å„æ¥å£æ—¶éƒ½éœ€ä½¿ç”¨access_tokenã€‚å¼€å‘è€…éœ€è¦è¿›è¡Œå¦¥å–„ä¿å­˜ã€‚access_tokençš„å­˜å‚¨è‡³å°‘è¦ä¿ç•™512ä¸ªå­—ç¬¦ç©ºé—´ã€‚access_tokençš„æœ‰æ•ˆæœŸç›®å‰ä¸º2ä¸ªå°æ—¶ï¼Œéœ€å®šæ—¶åˆ·æ–°ï¼Œé‡å¤è·å–å°†å¯¼è‡´ä¸Šæ¬¡è·å–çš„access_tokenå¤±æ•ˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…¬ä¼—å·å¯ä»¥ä½¿ç”¨AppIDå’ŒAppSecretè°ƒç”¨æœ¬æ¥å£æ¥è·å–access_tokenã€‚AppIDå’ŒAppSecretå¯åœ¨å¼€å‘æ¨¡å¼ä¸­è·å¾—ï¼Œæ³¨æ„è°ƒç”¨æ‰€æœ‰å¾®ä¿¡æ¥å£æ—¶å‡éœ€ä½¿ç”¨httpsåè®®ã€‚&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="å¾®ä¿¡å¼€å‘" scheme="http://yoursite.com/categories/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="å¾®ä¿¡å¼€å‘" scheme="http://yoursite.com/tags/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>å¾®ä¿¡å¼€å‘ - æ¥å£ç®€ä»‹</title>
    <link href="http://yoursite.com/2016/09/05/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91%20-%20%E6%8E%A5%E5%8F%A3%E7%AE%80%E4%BB%8B/"/>
    <id>http://yoursite.com/2016/09/05/å¾®ä¿¡å¼€å‘ - æ¥å£ç®€ä»‹/</id>
    <published>2016-09-04T18:24:00.000Z</published>
    <updated>2016-09-05T12:05:57.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç”±äºç”¨æˆ·ä½“éªŒå’Œå®‰å…¨æ€§æ–¹é¢çš„è€ƒè™‘ï¼Œå¾®ä¿¡å…¬ä¼—å·çš„æ³¨å†Œæœ‰ä¸€å®šé—¨æ§›ï¼ŒæŸäº›é«˜çº§æ¥å£çš„æƒé™éœ€è¦å¾®ä¿¡è®¤è¯åæ‰å¯ä»¥è·å–ã€‚æ‰€ä»¥ï¼Œä¸ºäº†å¸®åŠ©å¼€å‘è€…å¿«é€Ÿäº†è§£å’Œä¸Šæ‰‹å¾®ä¿¡å…¬ä¼—å·å¼€å‘ï¼Œç†Ÿæ‚‰å„ä¸ªæ¥å£çš„è°ƒç”¨ï¼Œéœ€è¦å¼€é€šæµ‹è¯•è´¦å·ã€‚</p>
<p>å¼€é€šæµ‹è¯•è´¦å·çš„è·¯å¾„ä¸ºï¼š</p>
<blockquote>
<p>å¾®ä¿¡å…¬ä¼—å¹³å° &gt; å¼€å‘è€…å·¥å…· &gt; å…¬ä¼—å¹³å°æµ‹è¯•å¸å· &gt; è¿›å…¥</p>
</blockquote>
<p>æˆ–ç‚¹å‡»<a href="http://mp.weixin.qq.com/debug/cgi-bin/sandboxinfo?action=showinfo&amp;t=sandbox/index" target="_blank" rel="external">ä¼ é€é—¨</a>ï¼Œéœ€è¦å¡«å†™çš„ä¸ºä»¥ä¸‹å‡ é¡¹ï¼š</p>
<blockquote>
<p>URLï¼šæ¥å£æ–‡æ¡£æ‰€åœ¨çš„è·¯å¾„ï¼Œå¦‚ï¼š<code>https://localhost/filepath/wxapifile.php</code></p>
<p>Tokenï¼šæ¥å£æ–‡æ¡£ä¸­è®¾å®šçš„Token</p>
<p>åŸŸåï¼šç½‘å€æˆ–ä¸»æœºåï¼Œå¦‚ï¼š<code>localhost</code></p>
</blockquote>
<p>å¦‚å¯¹ä»¥ä¸Šæ­¥éª¤é™Œç”Ÿçš„åŒå­¦å¯ä»¥å…ˆçœ‹<a href="https://tianziyao.github.io/2016/09/02/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91%20-%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/" target="_blank" rel="external">è¿™ç¯‡æ–‡ç« </a>ã€‚</p>
   <a id="more"></a>
<h2 id="æ¥å£é¢‘ç‡é™åˆ¶"><a href="#æ¥å£é¢‘ç‡é™åˆ¶" class="headerlink" title="æ¥å£é¢‘ç‡é™åˆ¶"></a>æ¥å£é¢‘ç‡é™åˆ¶</h2><p>å…¬ä¼—å·è°ƒç”¨æ¥å£å¹¶ä¸æ˜¯æ— é™åˆ¶çš„ã€‚ä¸ºäº†é˜²æ­¢å…¬ä¼—å·çš„ç¨‹åºé”™è¯¯è€Œå¼•å‘å¾®ä¿¡æœåŠ¡å™¨è´Ÿè½½å¼‚å¸¸ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªå…¬ä¼—å·è°ƒç”¨æ¥å£éƒ½ä¸èƒ½è¶…è¿‡ä¸€å®šé™åˆ¶ï¼Œå½“è¶…è¿‡ä¸€å®šé™åˆ¶æ—¶ï¼Œè°ƒç”¨å¯¹åº”æ¥å£ä¼šæ”¶åˆ°å¦‚ä¸‹é”™è¯¯è¿”å›ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;&quot;errcode&quot;:45009,&quot;errmsg&quot;:&quot;api freq out of limit&quot;&#125;</div></pre></td></tr></table></figure>
<p>æ¥å£é¢‘ç‡é™åˆ¶çš„è¯´æ˜è¯·ç‚¹å‡»<a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1433744592&amp;token=&amp;lang=zh_CN" target="_blank" rel="external">ä¼ é€é—¨</a>ã€‚</p>
<h2 id="å…¨å±€è¿”å›ç "><a href="#å…¨å±€è¿”å›ç " class="headerlink" title="å…¨å±€è¿”å›ç "></a>å…¨å±€è¿”å›ç </h2><p>å…¬ä¼—å·æ¯æ¬¡è°ƒç”¨æ¥å£æ—¶ï¼Œå¯èƒ½è·å¾—æ­£ç¡®æˆ–é”™è¯¯çš„è¿”å›ç ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®è¿”å›ç ä¿¡æ¯è°ƒè¯•æ¥å£ï¼Œæ’æŸ¥é”™è¯¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;&quot;errcode&quot;:45009,&quot;errmsg&quot;:&quot;api freq out of limit&quot;&#125;</div></pre></td></tr></table></figure>
<p>å¦‚ä¸Šçš„è¿”å›ç <code>45009</code>è¡¨è¾¾çš„å°±æ˜¯<code>æ¥å£è°ƒç”¨è¶…è¿‡é™åˆ¶</code>ã€‚æ¥å£é¢‘ç‡é™åˆ¶çš„è¯´æ˜è¯·ç‚¹å‡»<a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1433744592&amp;token=&amp;lang=zh_CN" target="_blank" rel="external">ä¼ é€é—¨</a>ã€‚</p>
<h2 id="æ¥å£ä»‹ç»"><a href="#æ¥å£ä»‹ç»" class="headerlink" title="æ¥å£ä»‹ç»"></a>æ¥å£ä»‹ç»</h2><p>access_tokenæ˜¯å…¬ä¼—å·çš„å…¨å±€å”¯ä¸€æ¥å£è°ƒç”¨å‡­æ®ï¼Œå…¬ä¼—å·è°ƒç”¨å„æ¥å£æ—¶éƒ½éœ€ä½¿ç”¨access_tokenã€‚å¼€å‘è€…éœ€è¦è¿›è¡Œå¦¥å–„ä¿å­˜ã€‚</p>
<p>access_tokençš„å­˜å‚¨è‡³å°‘è¦ä¿ç•™512ä¸ªå­—ç¬¦ç©ºé—´ã€‚access_tokençš„æœ‰æ•ˆæœŸç›®å‰ä¸º2ä¸ªå°æ—¶ï¼Œéœ€å®šæ—¶åˆ·æ–°ï¼Œé‡å¤è·å–å°†å¯¼è‡´ä¸Šæ¬¡è·å–çš„access_tokenå¤±æ•ˆã€‚</p>
<p>access_tokenç›¸å½“äºå¼€å‘è€…çš„æœåŠ¡å™¨è®¿é—®å¾®ä¿¡æœåŠ¡å™¨çš„ä¸€æŠŠé’¥åŒ™ï¼Œè€Œå¾®ä¿¡æœåŠ¡å™¨æä¾›çš„å„ç§APIæ˜¯ä¸€ä¸ªä¸ªé—¨ï¼Œå…·æœ‰æ­£ç¡®çš„access_tokenæ‰å¯ä»¥å¾—åˆ°é—¨åé¢çš„ä¸œè¥¿ã€‚</p>
<h3 id="è·å–å¾®ä¿¡æœåŠ¡å™¨IPæ¥å£"><a href="#è·å–å¾®ä¿¡æœåŠ¡å™¨IPæ¥å£" class="headerlink" title="è·å–å¾®ä¿¡æœåŠ¡å™¨IPæ¥å£"></a>è·å–å¾®ä¿¡æœåŠ¡å™¨IPæ¥å£</h3><p>å¦‚æœå…¬ä¼—å·åŸºäºå®‰å…¨ç­‰è€ƒè™‘ï¼Œéœ€è¦è·çŸ¥å¾®ä¿¡æœåŠ¡å™¨çš„IPåœ°å€åˆ—è¡¨ï¼Œä»¥ä¾¿è¿›è¡Œç›¸å…³é™åˆ¶ï¼Œå®ƒä¸€èˆ¬æ˜¯ä¸ºäº†åˆ¤æ–­è¯·æ±‚æ˜¯å¦æ¥è‡ªäºå¾®ä¿¡ï¼Œå¦‚ä¸æ˜¯å¾®ä¿¡æœåŠ¡å™¨åˆ™å¯ä»¥è¿”å›éæ³•è®¿é—®ç­‰æ“ä½œã€‚</p>
<h3 id="é•¿é“¾æ¥è½¬çŸ­é“¾æ¥æ¥å£"><a href="#é•¿é“¾æ¥è½¬çŸ­é“¾æ¥æ¥å£" class="headerlink" title="é•¿é“¾æ¥è½¬çŸ­é“¾æ¥æ¥å£"></a>é•¿é“¾æ¥è½¬çŸ­é“¾æ¥æ¥å£</h3><p>é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å°†ä¸€æ¡é•¿é“¾æ¥è½¬æˆçŸ­é“¾æ¥ã€‚å®ƒçš„ä¸»è¦ä½¿ç”¨åœºæ™¯æ˜¯ï¼Œå¦‚æœå¼€å‘è€…ç”¨äºç”ŸæˆäºŒç»´ç çš„åŸé“¾æ¥ï¼ˆå•†å“ã€æ”¯ä»˜äºŒç»´ç ç­‰ï¼‰å¤ªé•¿å¯¼è‡´æ‰«ç é€Ÿåº¦å’ŒæˆåŠŸç‡ä¸‹é™ï¼Œå°†åŸé•¿é“¾æ¥é€šè¿‡æ­¤æ¥å£è½¬æˆçŸ­é“¾æ¥å†ç”ŸæˆäºŒç»´ç å°†å¤§å¤§æå‡æ‰«ç é€Ÿåº¦å’ŒæˆåŠŸç‡ã€‚</p>
<h3 id="è·å–ç”¨æˆ·åˆ—è¡¨æ¥å£"><a href="#è·å–ç”¨æˆ·åˆ—è¡¨æ¥å£" class="headerlink" title="è·å–ç”¨æˆ·åˆ—è¡¨æ¥å£"></a>è·å–ç”¨æˆ·åˆ—è¡¨æ¥å£</h3><p>å…¬ä¼—å·å¯é€šè¿‡æœ¬æ¥å£æ¥è·å–å¸å·çš„å…³æ³¨è€…åˆ—è¡¨ï¼Œå…³æ³¨è€…åˆ—è¡¨ç”±ä¸€ä¸²OpenIDï¼ˆåŠ å¯†åçš„å¾®ä¿¡å·ï¼Œæ¯ä¸ªç”¨æˆ·å¯¹æ¯ä¸ªå…¬ä¼—å·çš„OpenIDæ˜¯å”¯ä¸€çš„ï¼‰ç»„æˆã€‚ä¸€æ¬¡æ‹‰å–è°ƒç”¨æœ€å¤šæ‹‰å–10000ä¸ªå…³æ³¨è€…çš„OpenIDï¼Œå¯ä»¥é€šè¿‡å¤šæ¬¡æ‹‰å–çš„æ–¹å¼æ¥æ»¡è¶³éœ€æ±‚ã€‚</p>
<p>å®ƒä¸»è¦ç”¨äºè·å–å’Œä¿å­˜ç”¨æˆ·ä¿¡æ¯ï¼Œåœ¨é«˜çº§ç¾¤å‘æ¥å£ä¸­ä¹Ÿä¼šä½¿ç”¨åˆ°ã€‚</p>
<h3 id="è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯æ¥å£"><a href="#è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯æ¥å£" class="headerlink" title="è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯æ¥å£"></a>è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯æ¥å£</h3><p>åœ¨å…³æ³¨è€…ä¸å…¬ä¼—å·äº§ç”Ÿæ¶ˆæ¯äº¤äº’åï¼Œå…¬ä¼—å·å¯è·å¾—å…³æ³¨è€…çš„OpenIDï¼ˆåŠ å¯†åçš„å¾®ä¿¡å·ï¼Œæ¯ä¸ªç”¨æˆ·å¯¹æ¯ä¸ªå…¬ä¼—å·çš„OpenIDæ˜¯å”¯ä¸€çš„ã€‚å¯¹äºä¸åŒå…¬ä¼—å·ï¼ŒåŒä¸€ç”¨æˆ·çš„openidä¸åŒï¼‰ã€‚</p>
<p>å…¬ä¼—å·å¯é€šè¿‡æœ¬æ¥å£æ¥æ ¹æ®OpenIDè·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬<strong>æ˜µç§°ã€å¤´åƒã€æ€§åˆ«ã€æ‰€åœ¨åŸå¸‚ã€è¯­è¨€å’Œå…³æ³¨æ—¶é—´</strong>ã€‚</p>
<h4 id="UnionIDæœºåˆ¶"><a href="#UnionIDæœºåˆ¶" class="headerlink" title="UnionIDæœºåˆ¶"></a>UnionIDæœºåˆ¶</h4><p>å¼€å‘è€…å¯é€šè¿‡OpenIDæ¥è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€‚ç‰¹åˆ«éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>å¦‚æœå¼€å‘è€…æ‹¥æœ‰å¤šä¸ªç§»åŠ¨åº”ç”¨ã€ç½‘ç«™åº”ç”¨å’Œå…¬ä¼—å¸å·ï¼Œå¯é€šè¿‡è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ä¸­çš„unionidæ¥åŒºåˆ†ç”¨æˆ·çš„å”¯ä¸€æ€§</strong>ã€‚</p>
<p>å› ä¸ºåªè¦æ˜¯åŒä¸€ä¸ªå¾®ä¿¡å¼€æ”¾å¹³å°å¸å·ä¸‹çš„ç§»åŠ¨åº”ç”¨ã€ç½‘ç«™åº”ç”¨å’Œå…¬ä¼—å¸å·ï¼Œç”¨æˆ·çš„unionidæ˜¯å”¯ä¸€çš„ï¼Œæ¢å¥è¯è¯´ï¼ŒåŒä¸€ç”¨æˆ·ï¼Œå¯¹åŒä¸€ä¸ªå¾®ä¿¡å¼€æ”¾å¹³å°ä¸‹çš„ä¸åŒåº”ç”¨ï¼Œunionidæ˜¯ç›¸åŒçš„ã€‚ </p>
<p><strong>è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œopenidæ˜¯å¼€å‘è€…çš„å”¯ä¸€ç”¨æˆ·æ ‡è¯†ï¼Œunionidæ˜¯æ•´ä¸ªå¾®ä¿¡çš„å”¯ä¸€ç”¨æˆ·æ ‡è¯†ï¼Œopenidæ˜¯è·å–unionidçš„å…ˆå†³æ¡ä»¶ï¼Œä¸¤ç§æ ‡è¯†éƒ½éœ€è¦ç”¨æˆ·å…³æ³¨æˆ–ä½¿ç”¨åº”ç”¨åæ‰èƒ½è·å–ã€‚</strong></p>
<h3 id="ç½‘é¡µæˆæƒæ¥å£"><a href="#ç½‘é¡µæˆæƒæ¥å£" class="headerlink" title="ç½‘é¡µæˆæƒæ¥å£"></a>ç½‘é¡µæˆæƒæ¥å£</h3><p>å¦‚æœç”¨æˆ·åœ¨å¾®ä¿¡å®¢æˆ·ç«¯ä¸­è®¿é—®ç¬¬ä¸‰æ–¹ç½‘é¡µï¼Œå…¬ä¼—å·å¯ä»¥é€šè¿‡å¾®ä¿¡ç½‘é¡µæˆæƒæœºåˆ¶ï¼Œæ¥è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€‚</p>
<h4 id="ç½‘é¡µæˆæƒçš„ä¸¤ç§èŒƒå›´"><a href="#ç½‘é¡µæˆæƒçš„ä¸¤ç§èŒƒå›´" class="headerlink" title="ç½‘é¡µæˆæƒçš„ä¸¤ç§èŒƒå›´"></a>ç½‘é¡µæˆæƒçš„ä¸¤ç§èŒƒå›´</h4><ul>
<li>ä»¥snsapi_baseä¸ºscopeå‘èµ·çš„ç½‘é¡µæˆæƒï¼Œæ˜¯ç”¨æ¥<strong>è·å–è¿›å…¥é¡µé¢çš„ç”¨æˆ·çš„openidçš„</strong>ï¼Œå¹¶ä¸”æ˜¯é™é»˜æˆæƒå¹¶è‡ªåŠ¨è·³è½¬åˆ°å›è°ƒé¡µçš„ã€‚ç”¨æˆ·æ„ŸçŸ¥çš„å°±æ˜¯ç›´æ¥è¿›å…¥äº†å›è°ƒé¡µï¼ˆå¾€å¾€æ˜¯ä¸šåŠ¡é¡µé¢ï¼‰ã€‚</li>
<li>ä»¥snsapi_userinfoä¸ºscopeå‘èµ·çš„ç½‘é¡µæˆæƒï¼Œæ˜¯ç”¨æ¥<strong>è·å–ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯çš„</strong>ã€‚ä½†è¿™ç§æˆæƒéœ€è¦ç”¨æˆ·æ‰‹åŠ¨åŒæ„ï¼Œå¹¶ä¸”ç”±äºç”¨æˆ·åŒæ„è¿‡ï¼Œæ‰€ä»¥æ— é¡»å…³æ³¨ï¼Œå°±å¯åœ¨æˆæƒåè·å–è¯¥ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ã€‚ </li>
<li>ç”¨æˆ·ç®¡ç†ç±»æ¥å£ä¸­çš„â€œè·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯æ¥å£â€ï¼Œæ˜¯åœ¨ç”¨æˆ·å’Œå…¬ä¼—å·äº§ç”Ÿæ¶ˆæ¯äº¤äº’æˆ–å…³æ³¨åäº‹ä»¶æ¨é€åï¼Œæ‰èƒ½æ ¹æ®ç”¨æˆ·OpenIDæ¥è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€‚è¿™ä¸ªæ¥å£ï¼ŒåŒ…æ‹¬å…¶ä»–å¾®ä¿¡æ¥å£ï¼Œéƒ½æ˜¯<strong>éœ€è¦è¯¥ç”¨æˆ·ï¼ˆå³openidï¼‰å…³æ³¨äº†å…¬ä¼—å·åï¼Œæ‰èƒ½è°ƒç”¨æˆåŠŸçš„</strong>ã€‚ </li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">snsapi_userinfoæ¼”ç¤º</th>
<th style="text-align:center">å¯èƒ½æ˜¯snsapi_base</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="http://oboehz2ag.bkt.clouddn.com/snsapi_userinfo.jpg" alt="snsapi_userinfo"></td>
<td style="text-align:center"><img src="http://oboehz2ag.bkt.clouddn.com/snsapi_base.jpg" alt="snsapi_base"></td>
</tr>
</tbody>
</table>
<h3 id="é«˜çº§ç¾¤å‘æ¥å£"><a href="#é«˜çº§ç¾¤å‘æ¥å£" class="headerlink" title="é«˜çº§ç¾¤å‘æ¥å£"></a>é«˜çº§ç¾¤å‘æ¥å£</h3><p>åœ¨å…¬ä¼—å¹³å°ç½‘ç«™ä¸Šï¼Œä¸ºè®¢é˜…å·æä¾›äº†æ¯å¤©ä¸€æ¡çš„ç¾¤å‘æƒé™ï¼Œä¸ºæœåŠ¡å·æä¾›æ¯æœˆï¼ˆè‡ªç„¶æœˆï¼‰4æ¡çš„ç¾¤å‘æƒé™ã€‚è€Œå¯¹äºæŸäº›å…·å¤‡å¼€å‘èƒ½åŠ›çš„å…¬ä¼—å·è¿è¥è€…ï¼Œå¯ä»¥é€šè¿‡é«˜çº§ç¾¤å‘æ¥å£ï¼Œå®ç°æ›´çµæ´»çš„ç¾¤å‘èƒ½åŠ›ã€‚</p>
<p>é«˜çº§ç¾¤å‘å…·æœ‰ä¸¤ä¸ªä¼˜ç‚¹ï¼š</p>
<ul>
<li>å¯æ ¹æ®ç”¨æˆ·æ ‡ç­¾æˆ–openidè¿›è¡Œç¾¤å‘ï¼Œæ™®é€šç¾¤å‘åªå¯é’ˆå¯¹æ ‡ç­¾å’Œå…¨éƒ¨è¿›è¡Œç¾¤å‘ï¼Œé«˜çº§ç¾¤å‘çš„é’ˆå¯¹æ€§æ›´å¼ºï¼›</li>
<li>é«˜çº§ç¾¤å‘å›¾æ–‡å†…å®¹æ”¯æŒHTML</li>
</ul>
<h3 id="JS-SDKæ¥å£"><a href="#JS-SDKæ¥å£" class="headerlink" title="JS-SDKæ¥å£"></a>JS-SDKæ¥å£</h3><p>å¾®ä¿¡JS-SDKæ˜¯å¾®ä¿¡å…¬ä¼—å¹³å°é¢å‘ç½‘é¡µå¼€å‘è€…æä¾›çš„åŸºäºå¾®ä¿¡å†…çš„ç½‘é¡µå¼€å‘å·¥å…·åŒ…ã€‚</p>
<p>é€šè¿‡ä½¿ç”¨å¾®ä¿¡JS-SDKï¼Œç½‘é¡µå¼€å‘è€…å¯å€ŸåŠ©å¾®ä¿¡é«˜æ•ˆåœ°ä½¿ç”¨æ‹ç…§ã€é€‰å›¾ã€è¯­éŸ³ã€ä½ç½®ç­‰æ‰‹æœºç³»ç»Ÿçš„èƒ½åŠ›ï¼ŒåŒæ—¶å¯ä»¥ç›´æ¥ä½¿ç”¨å¾®ä¿¡åˆ†äº«ã€æ‰«ä¸€æ‰«ã€å¡åˆ¸ã€æ”¯ä»˜ç­‰å¾®ä¿¡ç‰¹æœ‰çš„èƒ½åŠ›ï¼Œä¸ºå¾®ä¿¡ç”¨æˆ·æä¾›æ›´ä¼˜è´¨çš„ç½‘é¡µä½“éªŒã€‚</p>
<p>ä¾‹å¦‚åˆ†äº«åŠŸèƒ½ï¼ŒJS-SDKå¯ä»¥æä¾›è‡ªå®šä¹‰åˆ†äº«æ ‡é¢˜ï¼Œå†…å®¹å’Œå›¾ç‰‡çš„æ”¯æŒï¼Œè¿˜æœ‰è°ƒç”¨ç›¸æœºï¼Œä½ç½®ç­‰æ¥å£ã€‚</p>
<h3 id="æ¨¡æ¿æ¶ˆæ¯æ¥å£"><a href="#æ¨¡æ¿æ¶ˆæ¯æ¥å£" class="headerlink" title="æ¨¡æ¿æ¶ˆæ¯æ¥å£"></a>æ¨¡æ¿æ¶ˆæ¯æ¥å£</h3><p>å…¬ä¼—å·å¯ä»¥ä¸»åŠ¨å‘ç”¨æˆ·å‘é€æ¶ˆæ¯ï¼Œç”¨æˆ·å¯ä»¥æ”¶åˆ°æœåŠ¡å·æ¯æœˆ4æ¡ï¼Œè®¢é˜…å·æ¯å¤©1æ¡çš„æ¶ˆæ¯ï¼Œè¶…å‡ºåå…¬ä¼—å·å‘é€çš„æ¶ˆæ¯å°†å¯¹æ­¤ç”¨æˆ·å±è”½ï¼Œè¿™æ ·çš„é™åˆ¶æ˜¯ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„å¼€å‘éœ€æ±‚çš„ã€‚</p>
<p>å½“ç”¨æˆ·åœ¨å…¬ä¼—å·è¿›è¡Œç‰¹å®šè¡Œä¸ºæ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡æ¿æ¶ˆæ¯ã€‚æ¨¡æ¿æ¶ˆæ¯ä»…ç”¨äºå…¬ä¼—å·å‘ç”¨æˆ·å‘é€é‡è¦çš„æœåŠ¡é€šçŸ¥ï¼Œåªèƒ½ç”¨äºç¬¦åˆå…¶è¦æ±‚çš„æœåŠ¡åœºæ™¯ä¸­ï¼Œå¦‚ä¿¡ç”¨å¡åˆ·å¡é€šçŸ¥ï¼Œå•†å“è´­ä¹°æˆåŠŸé€šçŸ¥ç­‰ã€‚</p>
<p>ä¸æ”¯æŒå¹¿å‘Šç­‰è¥é”€ç±»æ¶ˆæ¯ä»¥åŠå…¶å®ƒæ‰€æœ‰å¯èƒ½å¯¹ç”¨æˆ·é€ æˆéªšæ‰°çš„æ¶ˆæ¯ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">JS-SDKåˆ†äº«æ¼”ç¤º</th>
<th style="text-align:center">æ¨¡æ¿æ¶ˆæ¯æ¼”ç¤º</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="http://oboehz2ag.bkt.clouddn.com/JSSDK.PNG" alt="JSSDK"></td>
<td style="text-align:center"><img src="http://oboehz2ag.bkt.clouddn.com/%E6%A8%A1%E6%9D%BF%E6%B6%88%E6%81%AF.PNG" alt="æ¨¡æ¿æ¶ˆæ¯"></td>
</tr>
</tbody>
</table>
<h2 id="å¼€å‘å‰ç¡®å®šéœ€è¦çš„æ¥å£"><a href="#å¼€å‘å‰ç¡®å®šéœ€è¦çš„æ¥å£" class="headerlink" title="å¼€å‘å‰ç¡®å®šéœ€è¦çš„æ¥å£"></a>å¼€å‘å‰ç¡®å®šéœ€è¦çš„æ¥å£</h2><p>æ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>
<p>æŸå…¬å¸å¸Œæœ›å°†è‡ªå·±çš„PCå•†åŸå’Œè‡ªå·±çš„å¾®ä¿¡å…¬ä¼—å¹³å°è¿›è¡Œå¯¹æ¥ï¼Œä¹Ÿå°±æ˜¯åœ¨å¾®ä¿¡ä¸Šç»‘å®šPCå•†åŸè´¦å·çš„åŠŸèƒ½ï¼Œä»¥å®ç°åœ¨å¾®ä¿¡ä¸­ç‚¹å‡»èœå•æ— éœ€ç™»å½•å³å¯æŸ¥çœ‹è‡ªå·±è´¦å·çš„è¯¦æƒ…ï¼Œè´­ç‰©è®°å½•ç­‰ã€‚</p>
<p>é‚£ä¹ˆå¦‚ä½•å¾—çŸ¥éœ€è¦çš„æ¥å£æœ‰å“ªäº›å‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬éœ€è¦ï¼š</p>
<h3 id="ç¡®å®šåŠŸèƒ½çš„æµç¨‹"><a href="#ç¡®å®šåŠŸèƒ½çš„æµç¨‹" class="headerlink" title="ç¡®å®šåŠŸèƒ½çš„æµç¨‹"></a>ç¡®å®šåŠŸèƒ½çš„æµç¨‹</h3><p> <img src="http://oboehz2ag.bkt.clouddn.com/%E5%8A%9F%E8%83%BD%E6%B5%81%E7%A8%8B%E7%A4%BA%E4%BE%8B.gif" alt="åŠŸèƒ½æµç¨‹ç¤ºä¾‹"></p>
<p>å°†åŠŸèƒ½çš„æµç¨‹ç½—åˆ—å¥½ä»¥åï¼Œå³å¯æŒ‰ç…§æ¯ä¸ªæµç¨‹çš„éœ€æ±‚æ¥ç¡®å®šéœ€è¦è°ƒç”¨çš„æ¥å£ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç”±äºç”¨æˆ·ä½“éªŒå’Œå®‰å…¨æ€§æ–¹é¢çš„è€ƒè™‘ï¼Œå¾®ä¿¡å…¬ä¼—å·çš„æ³¨å†Œæœ‰ä¸€å®šé—¨æ§›ï¼ŒæŸäº›é«˜çº§æ¥å£çš„æƒé™éœ€è¦å¾®ä¿¡è®¤è¯åæ‰å¯ä»¥è·å–ã€‚æ‰€ä»¥ï¼Œä¸ºäº†å¸®åŠ©å¼€å‘è€…å¿«é€Ÿäº†è§£å’Œä¸Šæ‰‹å¾®ä¿¡å…¬ä¼—å·å¼€å‘ï¼Œç†Ÿæ‚‰å„ä¸ªæ¥å£çš„è°ƒç”¨ï¼Œéœ€è¦å¼€é€šæµ‹è¯•è´¦å·ã€‚&lt;/p&gt;
&lt;p&gt;å¼€é€šæµ‹è¯•è´¦å·çš„è·¯å¾„ä¸ºï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¾®ä¿¡å…¬ä¼—å¹³å° &amp;gt; å¼€å‘è€…å·¥å…· &amp;gt; å…¬ä¼—å¹³å°æµ‹è¯•å¸å· &amp;gt; è¿›å…¥&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æˆ–ç‚¹å‡»&lt;a href=&quot;http://mp.weixin.qq.com/debug/cgi-bin/sandboxinfo?action=showinfo&amp;amp;t=sandbox/index&quot;&gt;ä¼ é€é—¨&lt;/a&gt;ï¼Œéœ€è¦å¡«å†™çš„ä¸ºä»¥ä¸‹å‡ é¡¹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;URLï¼šæ¥å£æ–‡æ¡£æ‰€åœ¨çš„è·¯å¾„ï¼Œå¦‚ï¼š&lt;code&gt;https://localhost/filepath/wxapifile.php&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Tokenï¼šæ¥å£æ–‡æ¡£ä¸­è®¾å®šçš„Token&lt;/p&gt;
&lt;p&gt;åŸŸåï¼šç½‘å€æˆ–ä¸»æœºåï¼Œå¦‚ï¼š&lt;code&gt;localhost&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚å¯¹ä»¥ä¸Šæ­¥éª¤é™Œç”Ÿçš„åŒå­¦å¯ä»¥å…ˆçœ‹&lt;a href=&quot;https://tianziyao.github.io/2016/09/02/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91%20-%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/&quot;&gt;è¿™ç¯‡æ–‡ç« &lt;/a&gt;ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="å¾®ä¿¡å¼€å‘" scheme="http://yoursite.com/categories/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="å¾®ä¿¡å¼€å‘" scheme="http://yoursite.com/tags/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>å¾®ä¿¡å¼€å‘ - å¿«é€Ÿå…¥é—¨</title>
    <link href="http://yoursite.com/2016/09/02/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91%20-%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"/>
    <id>http://yoursite.com/2016/09/02/å¾®ä¿¡å¼€å‘ - å¿«é€Ÿå…¥é—¨/</id>
    <published>2016-09-01T18:24:00.000Z</published>
    <updated>2016-09-02T12:03:15.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>å¾®ä¿¡æ˜¯ä¸€ä¸ªç”Ÿæ´»æ–¹å¼ï¼Œå¼ å°é¾™æå‡ºçš„è¿™ä¸ªæ„¿æ™¯å·²ç»å¾—åˆ°äº†è¶Šæ¥è¶Šæ¸…æ™°çš„ä½“ç°ã€‚</p>
</blockquote>
<p>ç¾¤èŠã€è¯­éŸ³ã€è§†é¢‘ï¼Œç…§ç‰‡/è§†é¢‘/ä½ç½®å…±äº«ï¼Œæ”¯ä»˜å’Œå•†åº—éƒ½æœ‰äº†ï¼Œè¿˜èƒ½é€šè¿‡å…¬ä¼—è´¦å·æ¥è·å–å„ç§èµ„æºâ€¦â€¦</p>
<p>å¦‚ä»Šçš„å¾®ä¿¡å°±æ˜¯åœ¨æ—¥ä¸­å¤©çš„çŠ¶æ€ï¼Œå…¬ä¼—å¹³å°å¸¦æ¥çš„å½±å“æœ‰ç›®å…±ç¹ï¼Œæ‰€ä»¥å¾ˆå¤šå…¬å¸å’Œä¸ªäººéƒ½å¸Œæœ›æœ‰è‡ªå·±çš„å…¬ä¼—å·ï¼Œæƒ³å……åˆ†åˆ©ç”¨å´æ— å¤„ä¸‹æ‰‹ï¼Œä¸‹é¢æˆ‘ä»¬åˆ†ä¸ºå‡ ç¯‡æ–‡ç« ï¼Œç”±æµ…å…¥æ·±çš„äº†è§£å¾®ä¿¡å¼€å‘ã€‚</p>
<p>åœ¨ä¸‹é¢çš„å­¦ä¹ ä¸­ï¼Œéœ€è¦ä½ å…·æœ‰PHPè¯­è¨€çš„åŸºç¡€ï¼Œå¹¶æ‹¥æœ‰ä¸€å°å…·æœ‰PHPè¿è¡Œç¯å¢ƒçš„ä¸»æœºï¼Œå¦‚æœè¿˜æ²¡æœ‰å¯ä»¥é€šè¿‡æ–°æµªSAEï¼Œé˜¿é‡Œäº‘ECSç­‰è¿›è¡Œæ­å»ºã€‚</p>
<p>ä¸‹é¢è¿›å…¥æ­£é¢˜ï¼</p>
   <a id="more"></a>
<h2 id="æ¥å…¥å¼€å‘è€…æ¨¡å¼"><a href="#æ¥å…¥å¼€å‘è€…æ¨¡å¼" class="headerlink" title="æ¥å…¥å¼€å‘è€…æ¨¡å¼"></a>æ¥å…¥å¼€å‘è€…æ¨¡å¼</h2><p>æ¥å…¥å¼€å‘è€…æ¨¡å¼éå¸¸ç®€å•ï¼Œä¸»è¦åˆ†ä¸‹é¢å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>ä¸‹è½½å®˜æ–¹æ¥å£æ–‡ä»¶ï¼›</li>
<li>ç®€å•è°ƒæ•´æ¥å£æ–‡ä»¶çš„ä»£ç ï¼›</li>
<li>å°†è°ƒæ•´å¥½çš„æ¥å£æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼›</li>
<li>åœ¨å¼€å‘è€…åå°è¿›è¡Œæ¥å£çš„éªŒè¯ï¼›</li>
</ol>
<p>é¦–å…ˆä¸‹è½½PHPæ¥å£æ–‡ä»¶ï¼Œä¸‹è½½åœ°å€è¯·ç‚¹å‡»<a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1421135319&amp;token=&amp;lang=zh_CN" target="_blank" rel="external">å¾®ä¿¡å…¬ä¼—å¹³å°å¼€å‘è€…æ–‡æ¡£</a>ã€‚</p>
<p>å°†åŸæœ‰çš„ä»£ç ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">define(<span class="string">"TOKEN"</span>, <span class="string">"weixin"</span>);</div><div class="line">$wechatObj = <span class="keyword">new</span> wechatCallbackapiTest();</div><div class="line">$wechatObj-&gt;valid();</div></pre></td></tr></table></figure>
<p>ä¿®æ”¹ä¸ºï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">define(<span class="string">"TOKEN"</span>, <span class="string">"wechat"</span>);</div><div class="line"></div><div class="line">$wechatObj = <span class="keyword">new</span> wechatCallbackapiTest();</div><div class="line"></div><div class="line"><span class="keyword">if</span> ($_GET[<span class="string">"echostr"</span>]) &#123;</div><div class="line">    $wechatObj-&gt;valid();</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">    $wechatObj-&gt;responseMsg();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶åå°†ä¿®æ”¹åçš„PHPæ–‡ä»¶ä¸Šä¼ è‡³ä½ çš„æœåŠ¡å™¨ï¼Œè¿›å…¥ï¼š</p>
<blockquote>
<p>å¾®ä¿¡å…¬ä¼—å¹³å° &gt; å¼€å‘ &gt; åŸºæœ¬é…ç½® &gt; æœåŠ¡å™¨é…ç½® &gt; ä¿®æ”¹é…ç½®</p>
</blockquote>
<p>åœ¨å¼¹å‡ºçš„<strong>åŸºæœ¬é…ç½®/ å¡«å†™æœåŠ¡å™¨é…ç½®</strong>ä¸­ï¼š</p>
<blockquote>
<p>URLå¡«å†™ä½ çš„PHPæ–‡ä»¶åœ°å€ï¼Œå¦‚ï¼š<code>https://localhost/filepath/wx_sample.php</code> ï¼›</p>
<p>Tokenå¡«å†™ä½ åœ¨PHPæ–‡ä»¶ä¸­è®¾å®šçš„å€¼ï¼Œå¦‚ï¼š<code>define(&quot;TOKEN&quot;, &quot;wechat&quot;);</code>ï¼Œå¡«å†™<code>wechat</code> ï¼›</p>
<p>EncodingAESKeyä½¿ç”¨<code>éšæœºç”Ÿæˆ</code>å³å¯ï¼›</p>
<p>æ¶ˆæ¯åŠ è§£å¯†æ–¹å¼é€‰æ‹©<code>æ˜æ–‡æ¨¡å¼</code>å³å¯ï¼›</p>
</blockquote>
<p>ç‚¹å‡»æäº¤ï¼Œå°±å®Œæˆäº†å¼€å‘è€…æ¨¡å¼çš„æ¥å…¥ã€‚</p>
<h2 id="å¼€å‘è€…æ¨¡å¼ä¸‹æ•°æ®ä¼ è¾“åŠå¤„ç†"><a href="#å¼€å‘è€…æ¨¡å¼ä¸‹æ•°æ®ä¼ è¾“åŠå¤„ç†" class="headerlink" title="å¼€å‘è€…æ¨¡å¼ä¸‹æ•°æ®ä¼ è¾“åŠå¤„ç†"></a>å¼€å‘è€…æ¨¡å¼ä¸‹æ•°æ®ä¼ è¾“åŠå¤„ç†</h2><p> <img src="http://oboehz2ag.bkt.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93.gif" alt="å¾®ä¿¡å¼€å‘æ¨¡å¼æ•°æ®ä¼ è¾“"></p>
<p>äº†è§£å¼€å‘è€…æ¨¡å¼ä¸‹çš„æ•°æ®ä¼ è¾“åï¼Œæˆ‘ä»¬å¼€å§‹ç¼–å†™ç¬¬ä¸€ä¸ªç¨‹åºã€‚</p>
<h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><p>æ²¡é”™ï¼Œå°±æ˜¯ä»å®ƒå¼€å§‹â€¦â€¦</p>
<p>å®ç°Hello Worldéå¸¸ç®€å•ï¼Œé¦–å…ˆç¼–å†™ç¨‹åºä»£ç ï¼Œå°†PHPæ–‡ä»¶ä¸­åŸä»£ç ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(!<span class="keyword">empty</span>( $keyword )) &#123;</div><div class="line">	$msgType = <span class="string">"text"</span>;</div><div class="line">	$contentStr = <span class="string">"Welcome to wechat world!"</span>;</div><div class="line">	$resultStr = sprintf($textTpl, $fromUsername, $toUsername, $time, $msgType, $contentStr);</div><div class="line">	<span class="keyword">echo</span> $resultStr;</div><div class="line">&#125;<span class="keyword">else</span>&#123;</div><div class="line">	<span class="keyword">echo</span> <span class="string">"Input something..."</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¿®æ”¹ä¸ºï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(!<span class="keyword">empty</span>( $keyword )) &#123;</div><div class="line">	$msgType = <span class="string">"text"</span>;</div><div class="line">	$contentStr = $keyword.<span class="string">"World"</span>;</div><div class="line">	$resultStr = sprintf($textTpl, $fromUsername, $toUsername, $time, $msgType, $contentStr);</div><div class="line">	<span class="keyword">echo</span> $resultStr;</div><div class="line">&#125;<span class="keyword">else</span>&#123;</div><div class="line">	<span class="keyword">echo</span> <span class="string">"Input something..."</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ­¤æ—¶ï¼Œå‘ä½ çš„å…¬ä¼—å·å‘é€ä¸€ä¸ª<code>Hello</code>ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ª<code>Hello World</code>ï¼Œç›¸ä¿¡å¤§å®¶éƒ½å·²ç»æ˜ç™½ï¼Œ<strong><code>$keyword</code>è¿™ä¸ªå˜é‡ï¼Œå°±æ˜¯ç”¨æˆ·å‘é€çš„æ–‡æœ¬ä¿¡æ¯</strong>ã€‚</p>
<p>è¿™æ—¶å½“ç”¨æˆ·å‘é€è¯­éŸ³ï¼Œå›¾ç‰‡ï¼Œä½ç½®ç­‰ä¿¡æ¯æ—¶ï¼Œå› ä¸ºPHPæ–‡ä»¶å¯¹æ­¤æ²¡æœ‰è¿›è¡Œå¯¹åº”çš„å¤„ç†ï¼Œæ‰€ä»¥ç”¨æˆ·è®¾å¤‡ä¼šæ”¶åˆ°<strong>è¯¥å…¬ä¼—å·æš‚æ—¶æ— æ³•æä¾›æœåŠ¡ï¼Œè¯·ç¨åå†è¯•</strong>ã€‚</p>
<h2 id="è¢«åŠ¨å›å¤æ¶ˆæ¯"><a href="#è¢«åŠ¨å›å¤æ¶ˆæ¯" class="headerlink" title="è¢«åŠ¨å›å¤æ¶ˆæ¯"></a>è¢«åŠ¨å›å¤æ¶ˆæ¯</h2><p>å½“ç”¨æˆ·å‘é€æ¶ˆæ¯ç»™å…¬ä¼—å·æ—¶ï¼ˆæˆ–æŸäº›ç‰¹å®šçš„ç”¨æˆ·æ“ä½œå¼•å‘çš„äº‹ä»¶æ¨é€æ—¶ï¼‰ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªPOSTè¯·æ±‚ï¼Œå¼€å‘è€…å¯ä»¥åœ¨å“åº”åŒ…ï¼ˆGetï¼‰ä¸­è¿”å›ç‰¹å®šXMLç»“æ„ï¼Œæ¥å¯¹è¯¥æ¶ˆæ¯è¿›è¡Œå“åº”ï¼ˆç°æ”¯æŒå›å¤æ–‡æœ¬ã€å›¾ç‰‡ã€å›¾æ–‡ã€è¯­éŸ³ã€è§†é¢‘ã€éŸ³ä¹ï¼‰ã€‚ä¸¥æ ¼æ¥è¯´ï¼Œå‘é€è¢«åŠ¨å“åº”æ¶ˆæ¯å…¶å®å¹¶ä¸æ˜¯ä¸€ç§æ¥å£ï¼Œè€Œæ˜¯å¯¹å¾®ä¿¡æœåŠ¡å™¨å‘è¿‡æ¥æ¶ˆæ¯çš„ä¸€æ¬¡å›å¤ã€‚</p>
<p><strong>ä¸€æ—¦é‡åˆ°ä»¥ä¸‹æƒ…å†µï¼Œå¾®ä¿¡éƒ½ä¼šåœ¨å…¬ä¼—å·ä¼šè¯ä¸­ï¼Œå‘ç”¨æˆ·ä¸‹å‘ç³»ç»Ÿæç¤ºâ€œè¯¥å…¬ä¼—å·æš‚æ—¶æ— æ³•æä¾›æœåŠ¡ï¼Œè¯·ç¨åå†è¯•â€ï¼š</strong></p>
<blockquote>
<p>1ã€å¼€å‘è€…åœ¨5ç§’å†…æœªå›å¤ä»»ä½•å†…å®¹</p>
<p>2ã€å¼€å‘è€…å›å¤äº†å¼‚å¸¸æ•°æ®ï¼Œæ¯”å¦‚JSONæ•°æ®ç­‰</p>
</blockquote>
<p>å¦å¤–ï¼Œè¯·æ³¨æ„ï¼Œå›å¤å›¾ç‰‡ç­‰å¤šåª’ä½“æ¶ˆæ¯æ—¶éœ€è¦é¢„å…ˆé€šè¿‡ç´ æç®¡ç†æ¥å£ä¸Šä¼ ä¸´æ—¶ç´ æåˆ°å¾®ä¿¡æœåŠ¡å™¨ï¼Œå¯ä»¥ä½¿ç”¨ç´ æç®¡ç†ä¸­çš„ä¸´æ—¶ç´ æï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ°¸ä¹…ç´ æã€‚</p>
<p>è¢«åŠ¨å›å¤æ”¯æŒçš„æ¶ˆæ¯ç±»å‹æœ‰ï¼š</p>
<p><strong>æ–‡æœ¬ã€å›¾ç‰‡ã€è¯­éŸ³ã€è§†é¢‘ã€éŸ³ä¹</strong></p>
<p>å½“ç„¶ï¼Œè¿˜æœ‰å¯ä»¥åŒ…æ‹¬ä»¥ä¸Šæ‰€æœ‰ç±»å‹çš„<strong>å›¾æ–‡æ¶ˆæ¯</strong>ã€‚</p>
<p>å„æ¶ˆæ¯ç±»å‹æ˜¯ç”±XMLæ•°æ®åŒ…æ„æˆï¼Œå…³äºæ•°æ®åŒ…çš„æ ¼å¼è¯·è®¿é—®<a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1421140543&amp;token=&amp;lang=zh_CN" target="_blank" rel="external">å¾®ä¿¡å¼€å‘è€…æ–‡æ¡£</a>ã€‚</p>
<h2 id="å…³æ³¨äº‹ä»¶å¤„ç†"><a href="#å…³æ³¨äº‹ä»¶å¤„ç†" class="headerlink" title="å…³æ³¨äº‹ä»¶å¤„ç†"></a>å…³æ³¨äº‹ä»¶å¤„ç†</h2><p>ç”¨æˆ·åœ¨å…³æ³¨ä¸å–æ¶ˆå…³æ³¨å…¬ä¼—å·æ—¶ï¼Œå¾®ä¿¡ä¼šæŠŠè¿™ä¸ªäº‹ä»¶æ¨é€åˆ°å¼€å‘è€…å¡«å†™çš„URLã€‚æ–¹ä¾¿å¼€å‘è€…ç»™ç”¨æˆ·ä¸‹å‘æ¬¢è¿æ¶ˆæ¯æˆ–è€…åšå¸å·çš„è§£ç»‘ã€‚</p>
<p><strong>å…³æ³¨äº‹ä»¶å®é™…ä¸Šæ˜¯è·å–Eventäº‹ä»¶ç±»å‹ï¼Œå¹¶è®¾ç½®ä¸åŒæ¶ˆæ¯ç±»å‹çš„XMLæ•°æ®åŒ…æ¨é€åˆ°ç”¨æˆ·è®¾å¤‡</strong>ã€‚</p>
<p>æ¨é€XMLæ•°æ®åŒ…ç¤ºä¾‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">xml</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ToUserName</span>&gt;</span>&lt;![CDATA[toUser]]&gt;<span class="tag">&lt;/<span class="name">ToUserName</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">FromUserName</span>&gt;</span>&lt;![CDATA[FromUser]]&gt;<span class="tag">&lt;/<span class="name">FromUserName</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">CreateTime</span>&gt;</span>123456789<span class="tag">&lt;/<span class="name">CreateTime</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">MsgType</span>&gt;</span>&lt;![CDATA[event]]&gt;<span class="tag">&lt;/<span class="name">MsgType</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Event</span>&gt;</span>&lt;![CDATA[subscribe]]&gt;<span class="tag">&lt;/<span class="name">Event</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">xml</span>&gt;</span></div></pre></td></tr></table></figure>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>ToUserName</td>
<td>å¼€å‘è€…å¾®ä¿¡å·</td>
</tr>
<tr>
<td>FromUserName</td>
<td>å‘é€æ–¹å¸å·ï¼ˆä¸€ä¸ªOpenIDï¼‰</td>
</tr>
<tr>
<td>CreateTime</td>
<td>æ¶ˆæ¯åˆ›å»ºæ—¶é—´ ï¼ˆæ•´å‹ï¼‰</td>
</tr>
<tr>
<td>MsgType</td>
<td>æ¶ˆæ¯ç±»å‹ï¼Œevent</td>
</tr>
<tr>
<td>Event</td>
<td>äº‹ä»¶ç±»å‹ï¼Œsubscribe(è®¢é˜…)ã€unsubscribe(å–æ¶ˆè®¢é˜…)</td>
</tr>
</tbody>
</table>
<h3 id="å…³æ³¨äº‹ä»¶æ–‡å­—å›å¤"><a href="#å…³æ³¨äº‹ä»¶æ–‡å­—å›å¤" class="headerlink" title="å…³æ³¨äº‹ä»¶æ–‡å­—å›å¤"></a>å…³æ³¨äº‹ä»¶æ–‡å­—å›å¤</h3><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦è·å–Eventå‚æ•°ï¼Œå¹¶å¯¹Eventè¿›è¡Œç›¸åº”çš„å¤„ç†ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">$postObj = simplexml_load_string($postStr, <span class="string">'SimpleXMLElement'</span>, LIBXML_NOCDATA);</div><div class="line">$fromUsername = $postObj-&gt;FromUserName;</div><div class="line">$toUsername = $postObj-&gt;ToUserName;</div><div class="line">$keyword = trim($postObj-&gt;Content);</div><div class="line">$event = $postObj-&gt;Event;</div><div class="line">$time = time();</div><div class="line">$textTpl = <span class="string">"&lt;xml&gt;</span></div><div class="line">			&lt;ToUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/ToUserName&gt;</div><div class="line">			&lt;FromUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/FromUserName&gt;</div><div class="line">			&lt;CreateTime&gt;%s&lt;/CreateTime&gt;</div><div class="line">			&lt;MsgType&gt;&lt;![CDATA[%s]]&gt;&lt;/MsgType&gt;</div><div class="line">			&lt;Content&gt;&lt;![CDATA[%s]]&gt;&lt;/Content&gt;</div><div class="line">			&lt;FuncFlag&gt;0&lt;/FuncFlag&gt;</div><div class="line">			&lt;/xml&gt;";</div><div class="line"></div><div class="line"><span class="keyword">if</span> ($event == <span class="string">"subscribe"</span>) &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"è®¢é˜…äº‹ä»¶"</span>;</div><div class="line">    $msgType = <span class="string">"text"</span>;</div><div class="line">    $contentStr = <span class="string">"æ¬¢è¿å…³æ³¨superliar"</span>;</div><div class="line">    $resultStr = sprintf($textTpl, $fromUsername, $toUsername, $time, $msgType, $contentStr);</div><div class="line">    <span class="keyword">echo</span> $resultStr;</div><div class="line">&#125;</div><div class="line"><span class="keyword">elseif</span> ($event == <span class="string">"unsubscribe"</span>) &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"å–æ¶ˆè®¢é˜…äº‹ä»¶"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ—¶æˆ‘ä»¬å–æ¶ˆå…³æ³¨çš„å…¬ä¼—å·ï¼Œå†é‡æ–°å…³æ³¨å®ƒï¼Œä¼šæ”¶åˆ°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">æ¬¢è¿å…³æ³¨superliar</div></pre></td></tr></table></figure>
<h3 id="å…³æ³¨äº‹ä»¶å›¾æ–‡å›å¤"><a href="#å…³æ³¨äº‹ä»¶å›¾æ–‡å›å¤" class="headerlink" title="å…³æ³¨äº‹ä»¶å›¾æ–‡å›å¤"></a>å…³æ³¨äº‹ä»¶å›¾æ–‡å›å¤</h3><p>å›¾æ–‡æ¶ˆæ¯çš„XMLåŒ…ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">xml</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ToUserName</span>&gt;</span>&lt;![CDATA[toUser]]&gt;<span class="tag">&lt;/<span class="name">ToUserName</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">FromUserName</span>&gt;</span>&lt;![CDATA[fromUser]]&gt;<span class="tag">&lt;/<span class="name">FromUserName</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">CreateTime</span>&gt;</span>12345678<span class="tag">&lt;/<span class="name">CreateTime</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">MsgType</span>&gt;</span>&lt;![CDATA[news]]&gt;<span class="tag">&lt;/<span class="name">MsgType</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ArticleCount</span>&gt;</span>2<span class="tag">&lt;/<span class="name">ArticleCount</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Articles</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Title</span>&gt;</span>&lt;![CDATA[title1]]&gt;<span class="tag">&lt;/<span class="name">Title</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">Description</span>&gt;</span>&lt;![CDATA[description1]]&gt;<span class="tag">&lt;/<span class="name">Description</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">PicUrl</span>&gt;</span>&lt;![CDATA[picurl]]&gt;<span class="tag">&lt;/<span class="name">PicUrl</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Url</span>&gt;</span>&lt;![CDATA[url]]&gt;<span class="tag">&lt;/<span class="name">Url</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Title</span>&gt;</span>&lt;![CDATA[title]]&gt;<span class="tag">&lt;/<span class="name">Title</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Description</span>&gt;</span>&lt;![CDATA[description]]&gt;<span class="tag">&lt;/<span class="name">Description</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">PicUrl</span>&gt;</span>&lt;![CDATA[picurl]]&gt;<span class="tag">&lt;/<span class="name">PicUrl</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Url</span>&gt;</span>&lt;![CDATA[url]]&gt;<span class="tag">&lt;/<span class="name">Url</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">Articles</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">xml</span>&gt;</span></div></pre></td></tr></table></figure>
<p>å‚æ•°è¯´æ˜å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>æ˜¯å¦å¿…é¡»</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>ToUserName</td>
<td>æ˜¯</td>
<td>æ¥æ”¶æ–¹å¸å·ï¼ˆæ”¶åˆ°çš„OpenIDï¼‰</td>
</tr>
<tr>
<td>FromUserName</td>
<td>æ˜¯</td>
<td>å¼€å‘è€…å¾®ä¿¡å·</td>
</tr>
<tr>
<td>CreateTime</td>
<td>æ˜¯</td>
<td>æ¶ˆæ¯åˆ›å»ºæ—¶é—´ ï¼ˆæ•´å‹ï¼‰</td>
</tr>
<tr>
<td>MsgType</td>
<td>æ˜¯</td>
<td>news</td>
</tr>
<tr>
<td>ArticleCount</td>
<td>æ˜¯</td>
<td>å›¾æ–‡æ¶ˆæ¯ä¸ªæ•°ï¼Œé™åˆ¶ä¸º10æ¡ä»¥å†…</td>
</tr>
<tr>
<td>Articles</td>
<td>æ˜¯</td>
<td>å¤šæ¡å›¾æ–‡æ¶ˆæ¯ä¿¡æ¯ï¼Œé»˜è®¤ç¬¬ä¸€ä¸ªitemä¸ºå¤§å›¾,æ³¨æ„ï¼Œå¦‚æœå›¾æ–‡æ•°è¶…è¿‡10ï¼Œåˆ™å°†ä¼šæ— å“åº”</td>
</tr>
<tr>
<td>Title</td>
<td>å¦</td>
<td>å›¾æ–‡æ¶ˆæ¯æ ‡é¢˜</td>
</tr>
<tr>
<td>Description</td>
<td>å¦</td>
<td>å›¾æ–‡æ¶ˆæ¯æè¿°</td>
</tr>
<tr>
<td>PicUrl</td>
<td>å¦</td>
<td>å›¾ç‰‡é“¾æ¥ï¼Œæ”¯æŒJPGã€PNGæ ¼å¼ï¼Œè¾ƒå¥½çš„æ•ˆæœä¸ºå¤§å›¾360<em>200ï¼Œå°å›¾200</em>200</td>
</tr>
<tr>
<td>Url</td>
<td>å¦</td>
<td>ç‚¹å‡»å›¾æ–‡æ¶ˆæ¯è·³è½¬é“¾æ¥</td>
</tr>
</tbody>
</table>
<p><code>MsgTyp</code>æè¿°çš„æ˜¯æ¨é€æ¶ˆæ¯çš„ç±»å‹ï¼Œå¦‚<code>text\image\voice\video\music\news</code>ç­‰ã€‚</p>
<p>é¦–å…ˆå®šä¹‰ä¸€ä¸ªå›¾æ–‡æ¶ˆæ¯ç±»å‹çš„XMLåŒ…ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">$newsTpl = "<span class="tag">&lt;<span class="name">xml</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">ToUserName</span>&gt;</span>&lt;![CDATA[%s]]&gt;<span class="tag">&lt;/<span class="name">ToUserName</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">FromUserName</span>&gt;</span>&lt;![CDATA[%s]]&gt;<span class="tag">&lt;/<span class="name">FromUserName</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">CreateTime</span>&gt;</span>%s<span class="tag">&lt;/<span class="name">CreateTime</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">MsgType</span>&gt;</span>&lt;![CDATA[%s]]&gt;<span class="tag">&lt;/<span class="name">MsgType</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">ArticleCount</span>&gt;</span>2<span class="tag">&lt;/<span class="name">ArticleCount</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">Articles</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">item</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">Title</span>&gt;</span>&lt;![CDATA[æ¬¢è¿å…³æ³¨superliar]]&gt;<span class="tag">&lt;/<span class="name">Title</span>&gt;</span> </div><div class="line">           <span class="tag">&lt;<span class="name">Description</span>&gt;</span>&lt;![CDATA[superliaræ˜¯ä¸€ä¸ªçœŸäººç§€èŠ‚ç›®,balabalabalabalabalabalabalabala]]&gt;<span class="tag">&lt;/<span class="name">Description</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">PicUrl</span>&gt;</span>&lt;![CDATA[http://i2.hdslb.com/bfs/archive/e4d44a24ef5b838db63ac6c4c5fda0302102fb23.jpg]]&gt;<span class="tag">&lt;/<span class="name">PicUrl</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">Url</span>&gt;</span>&lt;![CDATA[http://www.panda.tv/]]&gt;<span class="tag">&lt;/<span class="name">Url</span>&gt;</span></div><div class="line">           <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">item</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">Title</span>&gt;</span>&lt;![CDATA[ç©ç‹¼äººæ€æœ‰ä»€ä¹ˆç‹¬å®¶æŠ€å·§?]]&gt;<span class="tag">&lt;/<span class="name">Title</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">Description</span>&gt;</span>&lt;![CDATA[ä¸€ä¸ªç©å®¶åšäº†ä»€ä¹ˆä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯è¦çŸ¥é“taä¸ºä»€ä¹ˆè¿™ä¹ˆåšã€‚]]&gt;<span class="tag">&lt;/<span class="name">Description</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">PicUrl</span>&gt;</span>&lt;![CDATA[http://i0.hdslb.com/bfs/archive/b957f527aadaddc3c32287f0ff5c1858df696658.jpg]]&gt;<span class="tag">&lt;/<span class="name">PicUrl</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">Url</span>&gt;</span>&lt;![CDATA[https://www.zhihu.com/question/25833846]]&gt;<span class="tag">&lt;/<span class="name">Url</span>&gt;</span></div><div class="line">           <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">           <span class="tag">&lt;/<span class="name">Articles</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">xml</span>&gt;</span>";</div></pre></td></tr></table></figure>
<p>ç„¶åå°†è®¢é˜…çš„Eventäº‹ä»¶å¤„ç†ä¿®æ”¹ä¸ºï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> ($event == <span class="string">"subscribe"</span>) &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"è®¢é˜…äº‹ä»¶"</span>;</div><div class="line">    $msgType = <span class="string">"news"</span>;</div><div class="line">    $resultStr = sprintf($newsTpl, $fromUsername, $toUsername, $time, $msgType);</div><div class="line">    <span class="keyword">echo</span> $resultStr;</div><div class="line">&#125;</div><div class="line"><span class="keyword">elseif</span> ($event == <span class="string">"unsubscribe"</span>) &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"å–æ¶ˆè®¢é˜…äº‹ä»¶"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ­¤æ—¶å†é‡æ–°å…³æ³¨ï¼Œæ”¶åˆ°çš„å°±æ˜¯ä¸€æ¡å›¾æ–‡æ¶ˆæ¯äº†ï¼Œå…¶ä»–ç±»å‹çš„æ¶ˆæ¯ä¹Ÿæ˜¯åŒæ ·çš„åŸç†ã€‚</p>
<h2 id="å…³é”®å­—è§¦å‘äº‹ä»¶"><a href="#å…³é”®å­—è§¦å‘äº‹ä»¶" class="headerlink" title="å…³é”®å­—è§¦å‘äº‹ä»¶"></a>å…³é”®å­—è§¦å‘äº‹ä»¶</h2><p>å…³é”®å­—è§¦å‘ä¸€èˆ¬ç”¨äºè¿è¥æ´»åŠ¨ä¸­ï¼Œå³ç”¨æˆ·å‘é€ä¸€æ¡ç‰¹å®šçš„æ¶ˆæ¯ï¼ŒæœåŠ¡å™¨è¿”å›ä¸€æ¡ç‰¹å®šçš„æ¶ˆæ¯ã€‚</p>
<h3 id="è¿”å›æ–‡æœ¬æ¶ˆæ¯"><a href="#è¿”å›æ–‡æœ¬æ¶ˆæ¯" class="headerlink" title="è¿”å›æ–‡æœ¬æ¶ˆæ¯"></a>è¿”å›æ–‡æœ¬æ¶ˆæ¯</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(!<span class="keyword">empty</span>( $keyword )) &#123;</div><div class="line">    <span class="keyword">if</span> ($keyword == <span class="string">"text"</span>) &#123;</div><div class="line">        $msgType = <span class="string">"text"</span>;</div><div class="line">        $contentStr = <span class="string">"æ‚¨å‘é€äº†"</span>.$keyword;</div><div class="line">        $resultStr = sprintf($textTpl, $fromUsername, $toUsername, $time, $msgType, $contentStr);</div><div class="line">        <span class="keyword">echo</span> $resultStr;</div><div class="line">    &#125;</div><div class="line">	$msgType = <span class="string">"text"</span>;</div><div class="line">	$contentStr = <span class="string">"Hello World"</span>;</div><div class="line">	$resultStr = sprintf($textTpl, $fromUsername, $toUsername, $time, $msgType, $contentStr);</div><div class="line">	<span class="keyword">echo</span> $resultStr;</div><div class="line">&#125;<span class="keyword">else</span>&#123;</div><div class="line">	<span class="keyword">echo</span> <span class="string">"Input something..."</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ—¶ç”¨æˆ·è¾“å…¥<code>text</code>ï¼Œå°±ä¼šæ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„<code>æ‚¨å‘é€äº†text</code>ã€‚ç”¨æˆ·å‘é€å…¶ä»–ä¿¡æ¯ï¼Œåˆ™è¿”å›<code>Hello World</code>ã€‚</p>
<h3 id="è¿”å›å›¾æ–‡æ¶ˆæ¯"><a href="#è¿”å›å›¾æ–‡æ¶ˆæ¯" class="headerlink" title="è¿”å›å›¾æ–‡æ¶ˆæ¯"></a>è¿”å›å›¾æ–‡æ¶ˆæ¯</h3><p>é‡æ–°å®šä¹‰ä¸€ä¸ªå›¾æ–‡æ¶ˆæ¯XMLæ•°æ®åŒ…ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$newsNoImgTpl = "<span class="tag">&lt;<span class="name">xml</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">ToUserName</span>&gt;</span>&lt;![CDATA[%s]]&gt;<span class="tag">&lt;/<span class="name">ToUserName</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">FromUserName</span>&gt;</span>&lt;![CDATA[%s]]&gt;<span class="tag">&lt;/<span class="name">FromUserName</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">CreateTime</span>&gt;</span>%s<span class="tag">&lt;/<span class="name">CreateTime</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">MsgType</span>&gt;</span>&lt;![CDATA[%s]]&gt;<span class="tag">&lt;/<span class="name">MsgType</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">ArticleCount</span>&gt;</span>1<span class="tag">&lt;/<span class="name">ArticleCount</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Articles</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">item</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Title</span>&gt;</span>&lt;![CDATA[æ¬¢è¿å…³æ³¨superliar]]&gt;<span class="tag">&lt;/<span class="name">Title</span>&gt;</span> </div><div class="line">            <span class="tag">&lt;<span class="name">Description</span>&gt;</span>&lt;![CDATA[superliaræ˜¯ä¸€ä¸ªçœŸäººç§€èŠ‚ç›®,balabalabalabalabalabalabalabala]]&gt;<span class="tag">&lt;/<span class="name">Description</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Url</span>&gt;</span>&lt;![CDATA[http://www.panda.tv/]]&gt;<span class="tag">&lt;/<span class="name">Url</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">Articles</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">xml</span>&gt;</span>";</div></pre></td></tr></table></figure>
<p>è§¦å‘äº‹ä»¶è®¾ç½®ä¸ºï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(!<span class="keyword">empty</span>( $keyword )) &#123;</div><div class="line">    <span class="keyword">if</span> ($keyword == <span class="string">"text"</span>) &#123;</div><div class="line">        $msgType = <span class="string">"text"</span>;</div><div class="line">        $contentStr = <span class="string">"æ‚¨å‘é€äº†"</span>.$keyword;</div><div class="line">        $resultStr = sprintf($textTpl, $fromUsername, $toUsername, $time, $msgType, $contentStr);</div><div class="line">        <span class="keyword">echo</span> $resultStr;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> ($keyword == <span class="string">"news"</span>) &#123;</div><div class="line">        $msgType = <span class="string">"news"</span>;</div><div class="line">        $resultStr = sprintf($newsNoImgTpl, $fromUsername, $toUsername, $time, $msgType);</div><div class="line">        <span class="keyword">echo</span> $resultStr;</div><div class="line">    &#125;</div><div class="line">	$msgType = <span class="string">"text"</span>;</div><div class="line">	$contentStr = <span class="string">"Hello World"</span>;</div><div class="line">	$resultStr = sprintf($textTpl, $fromUsername, $toUsername, $time, $msgType, $contentStr);</div><div class="line">	<span class="keyword">echo</span> $resultStr;</div><div class="line">&#125;<span class="keyword">else</span>&#123;</div><div class="line">	<span class="keyword">echo</span> <span class="string">"Input something..."</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ­¤æ—¶å½“ç”¨æˆ·å‘é€newsæ—¶ï¼Œå°±ä¼šæ”¶åˆ°ä¸€æ¡æ— å›¾çš„å›¾æ–‡æ¶ˆæ¯ã€‚</p>
<h2 id="æ¥æ”¶ä¸åŒç±»å‹æ¶ˆæ¯"><a href="#æ¥æ”¶ä¸åŒç±»å‹æ¶ˆæ¯" class="headerlink" title="æ¥æ”¶ä¸åŒç±»å‹æ¶ˆæ¯"></a>æ¥æ”¶ä¸åŒç±»å‹æ¶ˆæ¯</h2><p>å¦‚æœè¦æ¥æ”¶å¤„ç†ä¸åŒç±»å‹çš„æ¶ˆæ¯ï¼Œé¦–å…ˆè¦è·å–ç”¨æˆ·å‘é€çš„æ¶ˆæ¯ç±»å‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$msgType = $postObj-&gt;MsgType;</div></pre></td></tr></table></figure>
<p>æ­¤æ—¶å¯é’ˆå¯¹ç”¨æˆ·å‘é€çš„ä¸åŒç±»å‹çš„æ¶ˆæ¯ï¼Œè¿›è¡Œå¯¹åº”çš„å¤„ç†ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> ($msgType == <span class="string">"image"</span>) &#123;</div><div class="line">    $msgType = <span class="string">"text"</span>;</div><div class="line">    $contentStr = <span class="string">"æ‚¨å‘é€äº†imageç±»å‹çš„æ¶ˆæ¯,æœåŠ¡å™¨è¿”å›textç±»å‹æ¶ˆæ¯"</span>;</div><div class="line">    $resultStr = sprintf($textTpl, $fromUsername, $toUsername, $time, $msgType, $contentStr);</div><div class="line">    <span class="keyword">echo</span> $resultStr;</div><div class="line">&#125;</div><div class="line"><span class="keyword">elseif</span> ($msgType == <span class="string">"voice"</span>) &#123;</div><div class="line">    $msgType = <span class="string">"text"</span>;</div><div class="line">    $contentStr = <span class="string">"æ‚¨å‘é€äº†voiceç±»å‹çš„æ¶ˆæ¯,æœåŠ¡å™¨è¿”å›textç±»å‹æ¶ˆæ¯"</span>;</div><div class="line">    $resultStr = sprintf($textTpl, $fromUsername, $toUsername, $time, $msgType, $contentStr);</div><div class="line">    <span class="keyword">echo</span> $resultStr;</div><div class="line">&#125;</div><div class="line"><span class="keyword">elseif</span> ($msgType == <span class="string">"video"</span>) &#123;</div><div class="line">    $msgType = <span class="string">"text"</span>;</div><div class="line">    $contentStr = <span class="string">"æ‚¨å‘é€äº†videoç±»å‹çš„æ¶ˆæ¯,æœåŠ¡å™¨è¿”å›textç±»å‹æ¶ˆæ¯"</span>;</div><div class="line">    $resultStr = sprintf($textTpl, $fromUsername, $toUsername, $time, $msgType, $contentStr);</div><div class="line">    <span class="keyword">echo</span> $resultStr;</div><div class="line">&#125;</div><div class="line"><span class="keyword">elseif</span> ($msgType == <span class="string">"music"</span>) &#123;</div><div class="line">    $msgType = <span class="string">"text"</span>;</div><div class="line">    $contentStr = <span class="string">"æ‚¨å‘é€äº†musicç±»å‹çš„æ¶ˆæ¯,æœåŠ¡å™¨è¿”å›textç±»å‹æ¶ˆæ¯"</span>;</div><div class="line">    $resultStr = sprintf($textTpl, $fromUsername, $toUsername, $time, $msgType, $contentStr);</div><div class="line">    <span class="keyword">echo</span> $resultStr;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Demoä¸‹è½½è¯·ç‚¹å‡»è¿™é‡Œ"><a href="#Demoä¸‹è½½è¯·ç‚¹å‡»è¿™é‡Œ" class="headerlink" title="Demoä¸‹è½½è¯·ç‚¹å‡»è¿™é‡Œ"></a>Demoä¸‹è½½è¯·<a href="https://github.com/tianziyao/demo" target="_blank" rel="external">ç‚¹å‡»è¿™é‡Œ</a></h2>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å¾®ä¿¡æ˜¯ä¸€ä¸ªç”Ÿæ´»æ–¹å¼ï¼Œå¼ å°é¾™æå‡ºçš„è¿™ä¸ªæ„¿æ™¯å·²ç»å¾—åˆ°äº†è¶Šæ¥è¶Šæ¸…æ™°çš„ä½“ç°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç¾¤èŠã€è¯­éŸ³ã€è§†é¢‘ï¼Œç…§ç‰‡/è§†é¢‘/ä½ç½®å…±äº«ï¼Œæ”¯ä»˜å’Œå•†åº—éƒ½æœ‰äº†ï¼Œè¿˜èƒ½é€šè¿‡å…¬ä¼—è´¦å·æ¥è·å–å„ç§èµ„æºâ€¦â€¦&lt;/p&gt;
&lt;p&gt;å¦‚ä»Šçš„å¾®ä¿¡å°±æ˜¯åœ¨æ—¥ä¸­å¤©çš„çŠ¶æ€ï¼Œå…¬ä¼—å¹³å°å¸¦æ¥çš„å½±å“æœ‰ç›®å…±ç¹ï¼Œæ‰€ä»¥å¾ˆå¤šå…¬å¸å’Œä¸ªäººéƒ½å¸Œæœ›æœ‰è‡ªå·±çš„å…¬ä¼—å·ï¼Œæƒ³å……åˆ†åˆ©ç”¨å´æ— å¤„ä¸‹æ‰‹ï¼Œä¸‹é¢æˆ‘ä»¬åˆ†ä¸ºå‡ ç¯‡æ–‡ç« ï¼Œç”±æµ…å…¥æ·±çš„äº†è§£å¾®ä¿¡å¼€å‘ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¸‹é¢çš„å­¦ä¹ ä¸­ï¼Œéœ€è¦ä½ å…·æœ‰PHPè¯­è¨€çš„åŸºç¡€ï¼Œå¹¶æ‹¥æœ‰ä¸€å°å…·æœ‰PHPè¿è¡Œç¯å¢ƒçš„ä¸»æœºï¼Œå¦‚æœè¿˜æ²¡æœ‰å¯ä»¥é€šè¿‡æ–°æµªSAEï¼Œé˜¿é‡Œäº‘ECSç­‰è¿›è¡Œæ­å»ºã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿›å…¥æ­£é¢˜ï¼&lt;/p&gt;
    
    </summary>
    
      <category term="å¾®ä¿¡å¼€å‘" scheme="http://yoursite.com/categories/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="PHP" scheme="http://yoursite.com/tags/PHP/"/>
    
      <category term="å¾®ä¿¡å¼€å‘" scheme="http://yoursite.com/tags/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>å¾®ä¿¡å¼€å‘ - å…¬ä¼—å¹³å°ç®€ä»‹</title>
    <link href="http://yoursite.com/2016/09/02/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91%20-%20%E5%85%AC%E4%BC%97%E5%B9%B3%E5%8F%B0%E7%AE%80%E4%BB%8B/"/>
    <id>http://yoursite.com/2016/09/02/å¾®ä¿¡å¼€å‘ - å…¬ä¼—å¹³å°ç®€ä»‹/</id>
    <published>2016-09-01T18:24:00.000Z</published>
    <updated>2016-09-02T11:50:47.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¾®ä¿¡å¼€å‘å³å¾®ä¿¡å…¬ä¼—å¹³å°å¼€å‘ï¼Œå°†ä¼ä¸šä¿¡æ¯ã€æœåŠ¡ã€æ´»åŠ¨ç­‰å†…å®¹é€šè¿‡å¾®ä¿¡ç½‘é¡µçš„æ–¹å¼è¿›è¡Œè¡¨ç°ï¼Œç”¨æˆ·é€šè¿‡ç®€å•çš„è®¾ç½®ï¼Œå°±èƒ½ç”Ÿæˆå¾®ä¿¡3Gç½‘ç«™ã€‚é€šè¿‡å¾®ä¿¡å…¬ä¼—å¹³å°å°†ä¼ä¸šå“ç‰Œå±•ç¤ºç»™å¾®ä¿¡ç”¨æˆ·ï¼Œå‡å°‘å®£ä¼ æˆæœ¬ï¼Œå»ºç«‹ä¼ä¸šä¸æ¶ˆè´¹è€…ã€å®¢æˆ·çš„ä¸€å¯¹ä¸€äº’åŠ¨å’Œæ²Ÿé€šï¼Œå°†æ¶ˆè´¹è€…æ¥å…¥ä¼ä¸šCRMç³»ç»Ÿï¼Œè¿›è¡Œä¿ƒé”€ã€æ¨å¹¿ã€å®£ä¼ ã€å”®åç­‰ã€‚å½¢æˆäº†ä¸€ç§ä¸»æµçš„çº¿ä¸Šçº¿ä¸‹å¾®ä¿¡äº’åŠ¨è¥é”€æ–¹å¼ã€‚</p>
<p>é€šè¿‡äºŒæ¬¡å¼€å‘å¯ä»¥å°†å…¬ä¼—è´¦å·ç”±ä¸€ä¸ªåª’ä½“å‹è¥é”€å·¥å…·è½¬åŒ–æˆæä¾›æœåŠ¡çš„äº§å“ã€‚è€Œä¸€æ—¦æˆä¸ºç”¨æˆ·éœ€è¦çš„äº§å“ï¼Œå…¬ä¼—è´¦å·çš„è¥é”€åŠŸèƒ½ä¾¿ä¼šå¼€å¯ã€‚<br>å¾®ä¿¡çš„æ ¸å¿ƒæ˜¯é€šè®¯å·¥å…·ï¼Œè¿™ä¸€å·¥å…·å±æ€§å°†ç”¨æˆ·ç‰¢ç‰¢åœ°é»åœ¨äº†å¹³å°ä¹‹ä¸Šã€‚ç”¨æˆ·å’Œä¼ä¸šå¯ä»¥éå¸¸æ–¹ä¾¿åœ°åœ¨ä¸Šé¢è¿›è¡Œæ²Ÿé€šï¼Œæ‰€ä»¥å¾®ä¿¡å¾ˆè‡ªç„¶åœ°å°±æˆäº†ä¼ä¸šçš„CRM(å®¢æˆ·ç®¡ç†ç³»ç»Ÿ)å¹³å°æ¥é¢å¯¹å¿ å®ç”¨æˆ·ï¼Œè¿™ä¹Ÿç»™äº†ä¼ä¸šå°†æœåŠ¡å¼•å…¥å¹³å°çš„æœºä¼šã€‚</p>
   <a id="more"></a>
<h2 id="ä¸»è¦æ¨¡æ¿"><a href="#ä¸»è¦æ¨¡æ¿" class="headerlink" title="ä¸»è¦æ¨¡æ¿"></a>ä¸»è¦æ¨¡æ¿</h2><p>å¾®ä¿¡å…¬ä¼—è´¦å·ä¸ä¼šåšå¤ªå¤šæ·±åº¦çš„å¼€æ”¾ï¼Œä¸ºäº†æŠŠå¾®ä¿¡åšå¾—æ›´â€œè½»â€ã€‚åœ¨2013å¹´6æœˆä»½çš„åˆä½œä¼™ä¼´å¤§ä¼šä¸Šï¼Œå¾®ä¿¡äº§å“éƒ¨åŠ©ç†æ›¾é¸£æå‡ºï¼Œå¾®ä¿¡å…¬ä¼—è´¦å·ä¸æ˜¯ä¸€ä¸ªçº¯ç²¹çš„è¥é”€å·¥å…·ï¼Œè®©å…¬ä¼—è´¦å·æä¾›æœ€ä½“ç°ä¼ä¸šä»·å€¼çš„ä¸œè¥¿ã€‚</p>
<ul>
<li>åœ¨çº¿è¥é”€ï¼šå‘ç»ˆç«¯å®¢æˆ·æ¨èæ–°å“ã€ä¿ƒé”€ç­–ç•¥ç­‰ï¼›</li>
<li>å”®åæœåŠ¡ï¼šé€šè¿‡å¾®ä¿¡å¹³å°ï¼Œè‡ªåŠ¨ä¸å®¢æˆ·è¿›è¡Œäº¤äº’ï¼Œå±•ç¤ºä¼ä¸šäº§å“ã€å”®åæ”¯æŒï¼›</li>
<li>ç”µå­å•†åŠ¡ï¼šå°†ä¼ä¸šç½‘ç«™æˆ–è´­ç‰©å¹³å°ä¸å¾®ä¿¡å¯¹æ¥ï¼Œæ¨èåˆ°æœ‹å‹åœˆè·å–å…è´¹å®£ä¼ ï¼›</li>
<li>ä¼šå‘˜ç®¡ç†ï¼šä¼ä¸šä¼šå‘˜å¯é€šè¿‡å¾®ä¿¡å¹³å°è¿›è¡Œçº¿ä¸‹æ´»åŠ¨é¢„çº¦ã€ç§¯åˆ†ç®¡ç†ç­‰æ“ä½œã€‚</li>
</ul>
<h2 id="ä¸»è¦åŠŸèƒ½"><a href="#ä¸»è¦åŠŸèƒ½" class="headerlink" title="ä¸»è¦åŠŸèƒ½"></a>ä¸»è¦åŠŸèƒ½</h2><p>å…¬ä¼—å¹³å°æ˜¯ä¼ä¸šåœ¨OTTäº§å“åŸºç¡€ä¸Šæ–°å¢çš„åŠŸèƒ½æ¨¡å—ï¼ŒåŸºäºâ€œå†å°çš„ä¸ªä½“ä¹Ÿæœ‰è‡ªå·±å“ç‰Œâ€è¿™ä¸€ç†å¿µã€‚é€šè¿‡è¿™ä¸€å¹³å°ï¼Œä¸ªäººå’Œä¼ä¸šéƒ½å¯ä»¥æ‰“é€ ä¸€ä¸ªå…¬ä¼—å·ï¼Œå¹¶å®ç°å’Œç‰¹å®šç¾¤ä½“çš„æ–‡å­—ã€å›¾ç‰‡ã€è¯­éŸ³çš„å…¨æ–¹ä½æ²Ÿé€šã€äº’åŠ¨ã€‚åŒæ—¶ï¼Œä¼ä¸šä¹Ÿå¯ä»¥åˆ©ç”¨å…¬ä¼—å¹³å°è¿›è¡ŒCRMå¼ç®¡ç†ï¼Œä¸ªäººå¯ä»¥è¿›è¡Œè‡ªåª’ä½“åˆ›ä½œã€‚</p>
<h3 id="å¾®ä¿¡å®˜ç½‘"><a href="#å¾®ä¿¡å®˜ç½‘" class="headerlink" title="å¾®ä¿¡å®˜ç½‘"></a>å¾®ä¿¡å®˜ç½‘</h3><ol>
<li>å…¬å¸ä»‹ç»ï¼šæ”¯æŒå¤šçº§åˆ†ç±»ï¼›</li>
<li>äº§å“å±•ç¤ºï¼šäº§å“æ”¯æŒå¤šå›¾æ˜¾ç¤ºï¼Œæ‰‹æŒ‡æ»‘åŠ¨æµè§ˆå›¾ç‰‡ï¼›</li>
<li>æ–°é—»èµ„è®¯ï¼šå¯¹æ¥å¾®ä¿¡å…¬ä¼—å¹³å°æ¶ˆæ¯æ¨é€ï¼›</li>
<li>è”ç³»æ–¹å¼ï¼šLBSåœ°å›¾ä½ç½®æ ‡æ³¨ï¼Œç‚¹å‡»ç”µè¯å·ç ç›´æ¥æ‹¨æ‰“ï¼›</li>
<li>ä¿¡æ¯æ¨é€ï¼šä»¥å¾®ä¿¡å®˜æ–¹è§„å®šçš„æ¶ˆæ¯æ¨é€ä¸ºæ ‡å‡†ã€‚</li>
</ol>
<h3 id="å¾®ä¿¡å®¢æœ"><a href="#å¾®ä¿¡å®¢æœ" class="headerlink" title="å¾®ä¿¡å®¢æœ"></a>å¾®ä¿¡å®¢æœ</h3><ol>
<li>å¤šäººå·¥å®¢æœï¼šå®ç°å¤šä¸ªäººå·¥å®¢æœåœ¨çº¿ä¸å¾®ä¿¡å…¬ä¼—å¹³å°å®¢æˆ·æ²Ÿé€šï¼›</li>
<li>LBSä½ç½®æœåŠ¡ï¼šç”¨æˆ·ç»è¿‡å¾®ä¿¡æä¾›ä½ç½®ï¼Œå…¬ä¼—å¹³å°è‡ªåŠ¨åº”ç­”ç¦»ç”¨æˆ·æœ€è¿‘çš„é—¨åº—ã€ç»é”€å•†ï¼›</li>
<li>å»ºè®®/æŠ•è¯‰/å”®åï¼šå¾®ä¿¡å¹³å°å†…åµŒå”®åæœåŠ¡è¡¨å•ã€‚</li>
</ol>
<h3 id="å¾®ä¿¡å•†åŸ"><a href="#å¾®ä¿¡å•†åŸ" class="headerlink" title="å¾®ä¿¡å•†åŸ"></a>å¾®ä¿¡å•†åŸ</h3><ol>
<li>åœ¨çº¿è®¢è´­ï¼šæ”¯æŒç°æœ‰å•†åŸç³»ç»Ÿè¿›è¡Œå¯¹æ¥ï¼›</li>
<li>ä¼šå‘˜ç³»ç»Ÿï¼šæ”¯æŒç°æœ‰ä¼šå‘˜ç³»ç»Ÿè¿›è¡Œå¯¹æ¥ï¼›</li>
<li>åœ¨çº¿æ”¯ä»˜ï¼šæ”¯æŒåœ¨çº¿æ”¯ä»˜åŠŸèƒ½ï¼Œè‹¥æ— éœ€åœ¨çº¿æ”¯ä»˜ï¼Œåˆ™åªè®°å½•è®¢å•ä¿¡æ¯ä¸æµç¨‹ã€‚</li>
</ol>
<h3 id="æ´»åŠ¨ä¸ä¿ƒé”€"><a href="#æ´»åŠ¨ä¸ä¿ƒé”€" class="headerlink" title="æ´»åŠ¨ä¸ä¿ƒé”€"></a>æ´»åŠ¨ä¸ä¿ƒé”€</h3><ol>
<li>æ´»åŠ¨å‘å¸ƒï¼šè½¯å•†ç³»ç»Ÿç›´æ¥å¯¹æ¥å¾®ä¿¡å¹³å°å‘å¸ƒï¼›</li>
<li>æŠ½å¥–åˆ®åˆ®å¡ï¼šæ”¯æŒç³»ç»Ÿè‡ªå®šä¹‰å¥–å“ã€‚</li>
<li>æŠ½å¥–è½¬ç›˜ï¼šæ”¯æŒç³»ç»Ÿè‡ªå®šä¹‰å¥–å“ã€‚</li>
</ol>
<h2 id="å¼€æ”¾æ¥å£"><a href="#å¼€æ”¾æ¥å£" class="headerlink" title="å¼€æ”¾æ¥å£"></a>å¼€æ”¾æ¥å£</h2><p>å…¬ä¼—å¹³å°æ¨å‡ºæ–°çš„è®¤è¯ä½“ç³»ï¼Œå¾®ä¿¡å°†å…è´¹å¼€æ”¾åœ°ç†ä½ç½®ã€å®¢æœã€è¯­éŸ³ç­‰ä¹å¤§é«˜çº§æŠ€æœ¯æ¥å£ ã€‚é’ˆå¯¹æœåŠ¡å·é¢†åŸŸï¼Œå¾®ä¿¡è¿˜å°†æ¨å‡ºä¸€äº›å‚ç›´é¢†åŸŸå®šåˆ¶ã€‚å¾®ä¿¡äº§å“éƒ¨æ¨¡å¼è¯†åˆ«ä¸­å¿ƒæ€»ç›‘é™ˆæ³¢é€éœ²ï¼Œå›¾åƒè¯†åˆ«è¿˜å°†ä¸å¾®ä¿¡æ”¯ä»˜ç»“åˆï¼Œæä¾›è´­ä¹°æµç¨‹ã€‚è¿™ä¸¤ä¸ªæŠ€æœ¯ä¸»è¦ä¸ºå…¬ä¼—å¹³å°æä¾›æœåŠ¡ï¼Œåç»­å°†å‘Appå¼€æ”¾ã€‚</p>
<ol>
<li>è¯­éŸ³è¯†åˆ«æ¥å£</li>
<li>å®¢æœæ¥å£</li>
<li>OAuth2.0 ç½‘é¡µæˆæƒæ¥å£</li>
<li>ç”Ÿæˆå¸¦å‚æ•°çš„äºŒç»´ç æ¥å£</li>
<li>è·å–ç”¨æˆ·åœ°ç†ä½ç½®æ¥å£</li>
<li>è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯æ¥å£</li>
<li>è·å–å…³æ³¨è€…åˆ—è¡¨æ¥å£</li>
<li>ç”¨æˆ·åˆ†ç»„æ¥å£</li>
<li>ä¸Šä¼ ä¸‹è½½å¤šåª’ä½“æ–‡ä»¶æ¥å£</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¾®ä¿¡å¼€å‘å³å¾®ä¿¡å…¬ä¼—å¹³å°å¼€å‘ï¼Œå°†ä¼ä¸šä¿¡æ¯ã€æœåŠ¡ã€æ´»åŠ¨ç­‰å†…å®¹é€šè¿‡å¾®ä¿¡ç½‘é¡µçš„æ–¹å¼è¿›è¡Œè¡¨ç°ï¼Œç”¨æˆ·é€šè¿‡ç®€å•çš„è®¾ç½®ï¼Œå°±èƒ½ç”Ÿæˆå¾®ä¿¡3Gç½‘ç«™ã€‚é€šè¿‡å¾®ä¿¡å…¬ä¼—å¹³å°å°†ä¼ä¸šå“ç‰Œå±•ç¤ºç»™å¾®ä¿¡ç”¨æˆ·ï¼Œå‡å°‘å®£ä¼ æˆæœ¬ï¼Œå»ºç«‹ä¼ä¸šä¸æ¶ˆè´¹è€…ã€å®¢æˆ·çš„ä¸€å¯¹ä¸€äº’åŠ¨å’Œæ²Ÿé€šï¼Œå°†æ¶ˆè´¹è€…æ¥å…¥ä¼ä¸šCRMç³»ç»Ÿï¼Œè¿›è¡Œä¿ƒé”€ã€æ¨å¹¿ã€å®£ä¼ ã€å”®åç­‰ã€‚å½¢æˆäº†ä¸€ç§ä¸»æµçš„çº¿ä¸Šçº¿ä¸‹å¾®ä¿¡äº’åŠ¨è¥é”€æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡äºŒæ¬¡å¼€å‘å¯ä»¥å°†å…¬ä¼—è´¦å·ç”±ä¸€ä¸ªåª’ä½“å‹è¥é”€å·¥å…·è½¬åŒ–æˆæä¾›æœåŠ¡çš„äº§å“ã€‚è€Œä¸€æ—¦æˆä¸ºç”¨æˆ·éœ€è¦çš„äº§å“ï¼Œå…¬ä¼—è´¦å·çš„è¥é”€åŠŸèƒ½ä¾¿ä¼šå¼€å¯ã€‚&lt;br&gt;å¾®ä¿¡çš„æ ¸å¿ƒæ˜¯é€šè®¯å·¥å…·ï¼Œè¿™ä¸€å·¥å…·å±æ€§å°†ç”¨æˆ·ç‰¢ç‰¢åœ°é»åœ¨äº†å¹³å°ä¹‹ä¸Šã€‚ç”¨æˆ·å’Œä¼ä¸šå¯ä»¥éå¸¸æ–¹ä¾¿åœ°åœ¨ä¸Šé¢è¿›è¡Œæ²Ÿé€šï¼Œæ‰€ä»¥å¾®ä¿¡å¾ˆè‡ªç„¶åœ°å°±æˆäº†ä¼ä¸šçš„CRM(å®¢æˆ·ç®¡ç†ç³»ç»Ÿ)å¹³å°æ¥é¢å¯¹å¿ å®ç”¨æˆ·ï¼Œè¿™ä¹Ÿç»™äº†ä¼ä¸šå°†æœåŠ¡å¼•å…¥å¹³å°çš„æœºä¼šã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="å¾®ä¿¡å¼€å‘" scheme="http://yoursite.com/categories/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="å¾®ä¿¡å¼€å‘" scheme="http://yoursite.com/tags/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>iOSç½‘ç»œç¼–ç¨‹ - NSURLConnection</title>
    <link href="http://yoursite.com/2016/08/25/iOS%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%20-%20NSURLConnection/"/>
    <id>http://yoursite.com/2016/08/25/iOSç½‘ç»œç¼–ç¨‹ - NSURLConnection/</id>
    <published>2016-08-25T10:16:00.000Z</published>
    <updated>2016-08-25T01:54:03.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://pic.58pic.com/58pic/15/60/34/15Q58PICAS4_1024.png" alt=""></p>
<a id="more"></a>
<p>åœ¨iOS7åï¼ŒNSURLSessionåŸºæœ¬ä»£æ›¿äº†NSURLConnectionè¿›è¡Œç½‘ç»œå¼€å‘ï¼Œåœ¨iOS9åï¼ŒNSURLConnectionç›¸å…³æ–¹æ³•è¢«å®Œå…¨çš„å¼ƒç”¨ï¼ŒiOSç³»ç»Ÿæœ‰å‘ä¸‹å…¼å®¹çš„ç‰¹æ€§ï¼Œå°½ç®¡NSURLConnectionå·²ç»è¢«å¼ƒç”¨ï¼Œä½†åœ¨å¼€å‘ä¸­ï¼Œå…¶æ–¹æ³•ä¾ç„¶å¯ä»¥è¢«ä½¿ç”¨ï¼Œå¹¶ä¸”å¦‚æœéœ€è¦å…¼å®¹åˆ°å¾ˆä½ç‰ˆæœ¬çš„iOSç³»ç»Ÿï¼Œæœ‰æ—¶å°±å¿…é¡»ä½¿ç”¨NSURLConnectionç±»äº†ã€‚</p>
<p>ä½¿ç”¨NSURLConnectionç”¨åˆ°çš„å…­ä¸ªå…³äºç½‘ç»œè¿æ¥çš„ç±»åˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li>NSURLConnectionï¼šæä¾›äº†åˆå§‹åŒ–ã€å¼€å§‹å’Œå–æ¶ˆä¸€ä¸ªç½‘ç»œè¿æ¥</li>
<li>NSURLï¼šå°è£…äº†ä¸€ä¸ªç½‘ç»œè·¯å¾„</li>
<li>NSURLRequestï¼šè®¾ç½®ç½‘ç»œçš„è¯·æ±‚ä¿¡æ¯</li>
<li>NSMutableURLRequestï¼šNSURLRequestçš„å­ç±»ï¼Œå¯ä»¥è®¾ç½®è¯·æ±‚å‚æ•°</li>
<li>NSURLResponseï¼šæ¥æ”¶æœåŠ¡å™¨è¿”å›çš„ä¿¡æ¯</li>
<li>NSErrorï¼šåŒ…å«äº†ç½‘ç»œè¯·æ±‚ä¸­é‡åˆ°çš„é”™è¯¯ä¿¡æ¯</li>
</ul>
<p>ä½¿ç”¨NSURLConnectionå‘é€è¯·æ±‚çš„æ­¥éª¤å¾ˆç®€å•ï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªNSURLå¯¹è±¡ï¼Œè®¾ç½®è¯·æ±‚è·¯å¾„ï¼ˆè®¾ç½®è¯·æ±‚è·¯å¾„ï¼‰</li>
<li>ä¼ å…¥NSURLåˆ›å»ºä¸€ä¸ªNSURLRequestå¯¹è±¡ï¼Œè®¾ç½®è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“ï¼ˆåˆ›å»ºè¯·æ±‚å¯¹è±¡ï¼‰</li>
<li>ä½¿ç”¨NSURLConnectionå‘é€NSURLRequestï¼ˆå‘é€è¯·æ±‚ï¼‰</li>
</ol>
<p>ä½¿ç”¨NSURLConnectionå‘é€è¯·æ±‚æœ‰ä¸¤å¼ æƒ…å†µï¼ŒåŒæ­¥è¯·æ±‚å’Œå¼‚æ­¥è¯·æ±‚ã€‚</p>
<h2 id="NSURLConnection-åŒæ­¥è¯·æ±‚"><a href="#NSURLConnection-åŒæ­¥è¯·æ±‚" class="headerlink" title="NSURLConnection åŒæ­¥è¯·æ±‚"></a>NSURLConnection åŒæ­¥è¯·æ±‚</h2><p>å¯¹äºç½‘ç»œè¯·æ±‚åˆ†ä¸ºåŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§ï¼ŒåŒæ­¥æ˜¯æŒ‡åœ¨è¯·æ±‚ç»“æœè¿”å›ä¹‹å‰ï¼Œç¨‹åºä»£ç ä¼šå¡åœ¨è¯·æ±‚å¤„ï¼Œä¹‹åçš„ä»£ç ä¸ä¼šè¢«æ‰§è¡Œï¼Œå¼‚æ­¥æ˜¯æŒ‡åœ¨å‘é€è¯·æ±‚ä¹‹åï¼Œä¸€è¾¹åœ¨å­çº¿ç¨‹ä¸­æ¥æ”¶è¿”å›æ•°æ®ï¼Œä¸€è¾¹æ‰§è¡Œä¹‹åçš„ä»£ç ï¼Œå½“è¿”å›æ•°æ®æ¥æ”¶å®Œæ¯•åï¼Œé‡‡ç”¨å›è°ƒçš„æ–¹å¼é€šçŸ¥ä¸»çº¿ç¨‹åšå¤„ç†ã€‚</p>
<p>å¼‚æ­¥çš„è¿æ¥å°†ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œè¿™ä¸ªçº¿ç¨‹å°†ä¼šæ¥è´Ÿè´£ä¸‹è½½çš„åŠ¨ä½œã€‚è€Œå¯¹äºåŒæ­¥è¿æ¥ï¼Œåœ¨ä¸‹è½½è¿æ¥å’Œå¤„ç†é€šè®¯æ—¶ï¼Œåˆ™ä¼šé˜»å¡å½“å‰è°ƒç”¨çº¿ç¨‹ã€‚è®¸å¤šå¼€å‘è€…éƒ½ä¼šè®¤ä¸ºåŒæ­¥çš„è¿æ¥å°†ä¼šå µå¡ä¸»çº¿ç¨‹ï¼Œå…¶å®è¿™ç§è§‚ç‚¹æ˜¯é”™è¯¯çš„ã€‚</p>
<p>ä¸€ä¸ªåŒæ­¥çš„è¿æ¥æ˜¯ä¼šé˜»å¡è°ƒç”¨å®ƒçš„çº¿ç¨‹ï¼Œå¦‚æœä½ åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºä¸€ä¸ªåŒæ­¥è¿æ¥ï¼Œä¸»çº¿ç¨‹ä¼šé˜»å¡ï¼Œä½†æ˜¯å¦‚æœä½ å¹¶ä¸æ˜¯ä»ä¸»çº¿ç¨‹å¼€å¯çš„ä¸€ä¸ªåŒæ­¥çš„è¿æ¥ï¼Œå®ƒå°†ä¼šç±»ä¼¼å¼‚æ­¥çš„è¿æ¥ä¸€æ ·ï¼Œå› æ­¤è¿™ç§æƒ…å†µå¹¶ä¸ä¼šå µå¡ä½ çš„ä¸»çº¿ç¨‹ã€‚</p>
<p>äº‹å®ä¸Šï¼ŒåŒæ­¥å’Œå¼‚æ­¥çš„ä¸»è¦åŒºåˆ«å°±æ˜¯è¿è¡Œ runtime ä¸ºä¼šå¼‚æ­¥è¿æ¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œè€ŒåŒæ­¥è¿æ¥åˆ™ä¸ä¼šã€‚</p>
<p>ä¸‹é¢æ˜¯åŒæ­¥è¯·æ±‚çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> request = <span class="type">NSMutableURLRequest</span>(<span class="type">URL</span>: <span class="type">NSURL</span>(string: url!)!)</div><div class="line"></div><div class="line"><span class="keyword">do</span> &#123;</div><div class="line">    <span class="keyword">let</span> data = <span class="keyword">try</span> <span class="type">NSURLConnection</span>.sendSynchronousRequest(request, returningResponse: <span class="literal">nil</span>)</div><div class="line">    <span class="built_in">print</span>(data)</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"å‡ºé”™äº†"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="NSURLConnection-å¼‚æ­¥è¯·æ±‚"><a href="#NSURLConnection-å¼‚æ­¥è¯·æ±‚" class="headerlink" title="NSURLConnection å¼‚æ­¥è¯·æ±‚"></a>NSURLConnection å¼‚æ­¥è¯·æ±‚</h2><p>ä½¿ç”¨åŒæ­¥çš„æ–¹å¼è¿›è¡Œè¯·æ±‚æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å¼Šç«¯ï¼Œåœ¨è¿›è¡Œç½‘ç»œè¯·æ±‚æ—¶ï¼Œæ•°æ®çš„è¿”å›å¾€å¾€éœ€è¦ä¸€å®šæ—¶é—´ï¼Œä¸å¯èƒ½ç¬é—´å®Œæˆï¼Œä½¿ç”¨åŒæ­¥çš„æ–¹å¼å°†å¾ˆæœ‰å¯èƒ½ä¼šå¯¼è‡´ç•Œé¢å¡æ­»ï¼Œæ²¡æœ‰æç¤ºä¹Ÿä¸èƒ½äº¤äº’ä»»ä½•ç”¨æˆ·æ“ä½œï¼Œä¼šç»™ç”¨æˆ·ç¨‹åºå¡æ­»çš„å‡è±¡ã€‚</p>
<p>NSURLConnectionç±»æä¾›ä»£ç†å’Œblockä¸¤ç§æ–¹å¼è¿›è¡Œå¼‚æ­¥è¯·æ±‚æ“ä½œã€‚</p>
<h3 id="NSURLConnection-ä»£ç†"><a href="#NSURLConnection-ä»£ç†" class="headerlink" title="NSURLConnection ä»£ç†"></a>NSURLConnection ä»£ç†</h3><p>é¦–å…ˆéµå®ˆNSURLConnectionDataDelegateåè®®ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span>, <span class="title">NSURLConnectionDataDelegate</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> url: <span class="type">String</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è°ƒç”¨å¦‚ä¸‹çš„ä»£ç è¿›è¡Œè¯·æ±‚ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">connectionWithDelegate</span><span class="params">(url: String?)</span></span> -&gt; <span class="type">NSURLConnection</span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="type">NSURLConnection</span>(request:  <span class="type">NSMutableURLRequest</span>(<span class="type">URL</span>: <span class="type">NSURL</span>(string: url!)!), delegate: <span class="keyword">self</span>)!</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¯·æ±‚å‘å‡ºåï¼Œä¼šä¸€æ¬¡è°ƒç”¨å¦‚ä¸‹ä»£ç†æ–¹æ³•è¿›è¡Œè¯·æ±‚è¿‡ç¨‹çš„ç›‘å¬å’Œæ•°æ®çš„è·å–ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">connection</span><span class="params">(connection: NSURLConnection, didFailWithError error: NSError)</span></span> &#123;</div><div class="line">      <span class="built_in">print</span>(<span class="string">"è¿æ¥å¤±è´¥ï¼Œ<span class="subst">\(error)</span>"</span>)</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">connection</span><span class="params">(connection: NSURLConnection, didReceiveResponse response: NSURLResponse)</span></span> &#123;</div><div class="line">      <span class="built_in">print</span>(<span class="string">"æ”¶åˆ°æœåŠ¡å™¨å“åº”ï¼Œ<span class="subst">\(response)</span>"</span>)</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">connection</span><span class="params">(connection: NSURLConnection, didReceiveData data: NSData)</span></span> &#123;</div><div class="line">data.appendData(data)</div><div class="line"><span class="built_in">print</span>(<span class="string">"æ­£åœ¨æ¥æ”¶æ•°æ®"</span>)</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">connectionDidFinishLoading</span><span class="params">(connection: NSURLConnection)</span></span> &#123;</div><div class="line">      <span class="built_in">print</span>(<span class="string">"æ•°æ®ä¼ è¾“å®Œæˆï¼Œ<span class="subst">\(connection)</span>"</span>)</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>å…¶ä¸­didReceiveDataæœ‰å¯èƒ½è¢«å¤šæ¬¡è°ƒç”¨ï¼Œæ¯”å¦‚ä¸‹è½½ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹ä¸­æ¯æœ‰ä¸€ä¸ªæ–‡ä»¶ä¸‹è½½å®Œï¼Œæœ‰å¯èƒ½å°±ä¼šè°ƒç”¨ ä¸€æ¬¡ï¼Œæ‰€ä»¥è¿™ä¸ªå‡½æ•°æœ‰æ—¶ä¼šä½¿ç”¨ç´¯åŠ ä»£ç ï¼Œå°†å¤šæ¬¡ä¸‹è½½çš„æ•°æ®å†™å…¥åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ã€‚</p>
<h3 id="NSURLConnection-Block"><a href="#NSURLConnection-Block" class="headerlink" title="NSURLConnection Block"></a>NSURLConnection Block</h3><p>ä½¿ç”¨å¦‚ä¸‹ä»£ç è¿›è¡Œblockæ–¹å¼çš„å¼‚æ­¥è¯·æ±‚ï¼Œåœ¨blockä¸­ä¼šä¼ å…¥è¯·æ±‚åˆ°çš„è¿”å›æ•°æ®å’Œæ•°æ®ä¿¡æ¯ç­‰å‚æ•°ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">connectionWithThread</span><span class="params">(url: String?)</span></span> &#123;</div><div class="line">    <span class="keyword">let</span> queue = <span class="type">NSOperationQueue</span>()</div><div class="line">    <span class="keyword">let</span> request = <span class="type">NSMutableURLRequest</span>(<span class="type">URL</span>: <span class="type">NSURL</span>(string: url!)!)</div><div class="line">    <span class="type">NSURLConnection</span>.sendAsynchronousRequest(request, queue: queue) &#123;</div><div class="line">        (resp: <span class="type">NSURLResponse</span>?, data: <span class="type">NSData</span>?, error: <span class="type">NSError</span>?) <span class="keyword">in</span></div><div class="line">        <span class="keyword">if</span> error != <span class="literal">nil</span> &#123;</div><div class="line">            <span class="built_in">print</span>(<span class="string">"å‡ºé”™äº†ï¼Œ<span class="subst">\(error)</span>"</span>)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">let</span> readingOprions = <span class="type">NSJSONReadingOptions</span>.<span class="type">MutableContainers</span></div><div class="line">            <span class="keyword">let</span> dict = <span class="keyword">try</span>? <span class="type">NSJSONSerialization</span>.<span class="type">JSONObjectWithData</span>(data!, options: readingOprions)</div><div class="line">            <span class="keyword">self</span>.imageUrl = dict?.objectForKey(<span class="string">"headimgurl"</span>) <span class="keyword">as</span>? <span class="type">String</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="NSURLConnection-ç½‘ç»œè¯·æ±‚è®¾ç½®"><a href="#NSURLConnection-ç½‘ç»œè¯·æ±‚è®¾ç½®" class="headerlink" title="NSURLConnection ç½‘ç»œè¯·æ±‚è®¾ç½®"></a>NSURLConnection ç½‘ç»œè¯·æ±‚è®¾ç½®</h2><p>ç½‘ç»œè¯·æ±‚çš„è®¾ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">setRequestMessage</span><span class="params">(url: String?)</span></span> &#123;</div><div class="line">        </div><div class="line">        <span class="keyword">let</span> user = <span class="string">"username=admin&amp;password=12345&amp;department=125"</span></div><div class="line">        <span class="keyword">let</span> queue = <span class="type">NSOperationQueue</span>()</div><div class="line">        </div><div class="line">        <span class="keyword">let</span> request = <span class="type">NSMutableURLRequest</span>(<span class="type">URL</span>: <span class="type">NSURL</span>(),</div><div class="line">                                          cachePolicy: <span class="type">NSURLRequestCachePolicy</span>.<span class="type">ReloadIgnoringLocalCacheData</span>,</div><div class="line">                                          timeoutInterval: <span class="number">60</span>) <span class="comment">//è¶…å‡º60ç§’åè¯·æ±‚å¤±è´¥</span></div><div class="line">        </div><div class="line">        request.<span class="type">URL</span> = <span class="type">NSURL</span>(string: url!)!</div><div class="line">        request.<span class="type">HTTPMethod</span> = <span class="string">"POST"</span></div><div class="line">        <span class="keyword">let</span> data = user.dataUsingEncoding(<span class="type">NSUTF8StringEncoding</span>)</div><div class="line">        request.<span class="type">HTTPBody</span> = data</div><div class="line">        </div><div class="line">        <span class="type">NSURLConnection</span>.sendAsynchronousRequest(request, queue: queue) &#123;</div><div class="line">            (resp: <span class="type">NSURLResponse</span>?, data: <span class="type">NSData</span>?, error: <span class="type">NSError</span>?) <span class="keyword">in</span></div><div class="line">            <span class="keyword">if</span> error != <span class="literal">nil</span> &#123;</div><div class="line">                <span class="built_in">print</span>(<span class="string">"å‡ºé”™äº†ï¼Œ<span class="subst">\(error)</span>"</span>)</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> &#123;</div><div class="line">                <span class="built_in">print</span>(<span class="string">"æœåŠ¡å™¨è¿”å›äº†å“åº”æ¶ˆæ¯ï¼Œ<span class="subst">\(resp)</span>"</span>)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>å…¶ä¸­çš„æ ¸å¿ƒåœ¨äºï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> request = <span class="type">NSMutableURLRequest</span>(<span class="type">URL</span>: <span class="type">NSURL</span>(),</div><div class="line">                                          cachePolicy: <span class="type">NSURLRequestCachePolicy</span>.<span class="type">ReloadIgnoringLocalCacheData</span>,</div><div class="line">                                          timeoutInterval: <span class="number">60</span>) <span class="comment">//è¶…å‡º60ç§’åè¯·æ±‚å¤±è´¥</span></div></pre></td></tr></table></figure>
<p>NSURLRequestCachePolicyæŒ‡å®šç¼“å­˜é€»è¾‘ã€‚URLåŠ è½½ç³»ç»Ÿæä¾›äº†ä¸€ä¸ªç£ç›˜å’Œå†…å­˜æ··åˆçš„ç¼“å­˜ï¼Œæ¥å“åº”ç½‘ç»œè¯·æ±‚ã€‚è¿™ä¸ªç¼“å­˜å…è®¸ä¸€ä¸ªåº”ç”¨å‡å°‘å¯¹ç½‘ç»œè¿æ¥çš„ä¾èµ–ï¼Œå¹¶ä¸”å¢åŠ æ€§èƒ½ã€‚</p>
<p>ä½¿ç”¨ç¼“å­˜çš„ç›®çš„æ˜¯ä¸ºäº†ä½¿ç”¨çš„åº”ç”¨ç¨‹åºèƒ½æ›´å¿«é€Ÿçš„å“åº”ç”¨æˆ·è¾“å…¥ï¼Œæ˜¯ç¨‹åºé«˜æ•ˆçš„è¿è¡Œã€‚æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å°†è¿œç¨‹webæœåŠ¡å™¨è·å–çš„æ•°æ®ç¼“å­˜èµ·æ¥ï¼Œå‡å°‘å¯¹åŒä¸€ä¸ªurlå¤šæ¬¡è¯·æ±‚ã€‚     </p>
<p><strong>å¯å˜è¯·æ±‚æ‰å…·æœ‰cachePolicyå’ŒtimeoutIntervalå‚æ•°ã€‚</strong></p>
<h3 id="NSURLRequestCachePolicy-å‚æ•°"><a href="#NSURLRequestCachePolicy-å‚æ•°" class="headerlink" title="NSURLRequestCachePolicy å‚æ•°"></a>NSURLRequestCachePolicy å‚æ•°</h3><ul>
<li>NSURLRequestUseProtocolCachePolicy = 0ï¼š</li>
</ul>
<p>é»˜è®¤ç¼“å­˜ç­–ç•¥ã€‚</p>
<p>å¦‚æœä¸€ä¸ªNSCachedURLResponseå¯¹äºè¯·æ±‚å¹¶ä¸å­˜åœ¨ï¼Œæ•°æ®å°†ä¼šä»æºç«¯è·å–ï¼›</p>
<p>å¦‚æœè¯·æ±‚æ‹¥æœ‰ä¸€ä¸ªç¼“å­˜çš„å“åº”ï¼Œé‚£ä¹ˆURLåŠ è½½ç³»ç»Ÿä¼šæ£€æŸ¥è¿™ä¸ªå“åº”æ¥å†³å®šï¼›</p>
<p>å¦‚æœå®ƒæŒ‡å®šå†…å®¹å¿…é¡»é‡æ–°ç”Ÿæ•ˆï¼Œå°†å»ºç«‹ä¸€ä¸ªè¿å‘æºç«¯çš„è¿æ¥æ¥æŸ¥çœ‹å†…å®¹æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼›</p>
<p>å‡å¦‚å†…å®¹æ²¡æœ‰å˜åŒ–ï¼Œé‚£ä¹ˆå“åº”å°±ä»æœ¬åœ°ç¼“å­˜è¿”å›æ•°æ®ï¼›</p>
<p>å¦‚æœå†…å®¹å˜åŒ–äº†ï¼Œé‚£ä¹ˆæ•°æ®å°†ä»æºç«¯è·å–ï¼›</p>
<ul>
<li>NSURLRequestReloadIgnoringLocalCacheData = 1ï¼š</li>
</ul>
<p>URLåº”è¯¥åŠ è½½æºç«¯æ•°æ®ï¼Œä¸ä½¿ç”¨æœ¬åœ°ç¼“å­˜æ•°æ®ï¼›</p>
<ul>
<li>NSURLRequestReturnCacheDataElseLoad = 2ï¼š</li>
</ul>
<p>æŒ‡å®šå·²å­˜çš„ç¼“å­˜æ•°æ®åº”è¯¥ç”¨æ¥å“åº”è¯·æ±‚ï¼Œä¸ç®¡å®ƒçš„ç”Ÿå‘½æ—¶é•¿å’Œè¿‡æœŸæ—¶é—´ï¼›</p>
<p>å¦‚æœåœ¨ç¼“å­˜ä¸­æ²¡æœ‰å·²å­˜æ•°æ®æ¥å“åº”è¯·æ±‚çš„è¯ï¼Œæ•°æ®ä»æºç«¯åŠ è½½ï¼›</p>
<ul>
<li>NSURLRequestReturnCacheDataDontLoad = 3ï¼š</li>
</ul>
<p>æŒ‡å®šå·²å­˜çš„ç¼“å­˜æ•°æ®ç”¨æ¥æ»¡è¶³è¯·æ±‚ï¼Œä¸ç®¡ç”Ÿå‘½æ—¶é•¿å’Œè¿‡æœŸæ—¶é—´ï¼›</p>
<p>å¦‚æœåœ¨ç¼“å­˜ä¸­æ²¡æœ‰å·²å­˜æ•°æ®æ¥å“åº”URLåŠ è½½è¯·æ±‚çš„è¯ï¼Œä¸å»å°è¯•ä»æºæ®µåŠ è½½æ•°æ®ï¼Œ æ­¤æ—¶è®¤ä¸ºåŠ è½½è¯·æ±‚å¤±è´¥ï¼›</p>
<p>è¿™ä¸ªå¸¸é‡æŒ‡å®šäº†ä¸€ä¸ªç±»ä¼¼äºç¦»çº¿æ¨¡å¼çš„è¡Œä¸ºï¼Œå¸¸ç”¨äºç¦»çº¿æ¨¡å¼ï¼›</p>
<ul>
<li>NSURLRequestReloadIgnoringLocalAndRemoteCacheData =4ï¼š</li>
</ul>
<p>æœ¬åœ°ç¼“å­˜æ•°æ®ã€ä»£ç†å’Œå…¶ä»–ä¸­ä»‹éƒ½è¦å¿½è§†ä»–ä»¬çš„ç¼“å­˜ï¼Œç›´æ¥åŠ è½½æºæ•°æ®ï¼› </p>
<p>NSURLRequestReloadIgnoringCacheDataå’ŒNSURLRequestReloadIgnoringLocalCacheDataï¼Œä¸¤ä¸ªçš„è®¾ç½®ç›¸åŒï¼›</p>
<ul>
<li>NSURLRequestReloadRevalidatingCacheData = 5ï¼š</li>
</ul>
<p>æŒ‡å®šå¦‚æœå·²å­˜çš„ç¼“å­˜æ•°æ®è¢«æä¾›å®ƒçš„æºæ®µç¡®è®¤ä¸ºæœ‰æ•ˆåˆ™å…è®¸ä½¿ç”¨ç¼“å­˜æ•°æ®å“åº”è¯·æ±‚ï¼Œå¦åˆ™ä»æºæ®µåŠ è½½æ•°æ®ï¼› </p>
<p>åªæœ‰å“åº”httpå’Œhttpsçš„è¯·æ±‚ä¼šè¢«ç¼“å­˜ï¼Œftpå’Œæ–‡ä»¶åè®®å½“è¢«ç¼“å­˜ç­–ç•¥å…è®¸çš„æ—¶å€™å°è¯•æ¥å…¥æºæ®µï¼›</p>
<p>è‡ªå®šä¹‰çš„NSURLProtocolç±»èƒ½å¤Ÿä¿æŠ¤ç¼“å­˜ï¼Œ å¦‚æœå®ƒä»¬è¢«é€‰æ‹©ä½¿ç”¨çš„è¯ï¼›</p>
<p><code>HTTPMethod</code>å’Œ<code>HTTPBody</code>åˆ†åˆ«å¯¹åº”ç½‘ç»œè¯·æ±‚ä¸­çš„è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">request.<span class="type">HTTPMethod</span> = <span class="string">"POST"</span></div><div class="line"><span class="keyword">let</span> data = user.dataUsingEncoding(<span class="type">NSUTF8StringEncoding</span>)</div><div class="line">request.<span class="type">HTTPBody</span> = data</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://pic.58pic.com/58pic/15/60/34/15Q58PICAS4_1024.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOSç½‘ç»œç¼–ç¨‹" scheme="http://yoursite.com/tags/iOS%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>Macå¼€å‘å·¥å…· -  SHHç™»å½•</title>
    <link href="http://yoursite.com/2016/08/24/Mac%E6%8A%80%E5%B7%A7%20-%20%20SHH%E7%99%BB%E5%BD%95/"/>
    <id>http://yoursite.com/2016/08/24/MacæŠ€å·§ -  SHHç™»å½•/</id>
    <published>2016-08-24T10:16:00.000Z</published>
    <updated>2016-08-24T04:40:09.000Z</updated>
    
    <content type="html"><![CDATA[<p>Mac Terminalæ˜¯è‡ªå¸¦SSHçš„ï¼Œé€šè¿‡ç»ˆç«¯SSHè¿œç¨‹è¿æ¥CentosæœåŠ¡å™¨éå¸¸æ–¹ä¾¿ï¼Œåœ¨ç«¯å£ä¸ºé»˜è®¤çš„22æƒ…å†µä¸‹ï¼Œåªéœ€è¦åœ¨ç»ˆç«¯ä¸‹è¾“å…¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sshÂ -lÂ rootÂ hostNameOrAddress</div></pre></td></tr></table></figure>
<p>å°±å¯ä»¥è¿æ¥äº†ï¼Œå¦‚æœæ”¹å˜äº†ç«¯å£ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å³å¯ç™»å½•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sshÂ -pÂ portNumberÂ -lÂ rootÂ hostNameOrAddress</div></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯Ubuntuä¸»æœºï¼Œä¹Ÿå¯ä»¥è¿™ä¸ªå‘½ä»¤è¿›è¡Œè¿æ¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ssh -X userName@hostNameOrAddress</div><div class="line">sshÂ userName@hostNameOrAddressÂ -pÂ portNumber</div></pre></td></tr></table></figure>
<a id="more"></a>
<p>ä¾‹å¦‚ï¼š<code>ssh ubuntu@192.168.100.100</code>ã€‚</p>
<p>å…¶ä¸­ubuntuæ˜¯è¦ç™»å½•çš„ä¸»æœºçš„ç”¨æˆ·åï¼Œ192.168.100.100æ˜¯è¦ç™»å½•çš„ä¸»æœºçš„IPåœ°å€ã€‚</p>
<h2 id="é”™è¯¯æ’é™¤"><a href="#é”™è¯¯æ’é™¤" class="headerlink" title="é”™è¯¯æ’é™¤"></a>é”™è¯¯æ’é™¤</h2><p>å¦‚æœSSHæ— æ³•è¿æ¥ï¼Œå¯ä»¥å…ˆç”¨whereisæ¥çœ‹çœ‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ whereis ssh</div></pre></td></tr></table></figure>
<p>ä»¥ä¸‹è¡¨ç¤ºç°æœ‰è¿›ç¨‹ä¸­æ‰¾ä¸åˆ°sshå¯¹åº”çš„è¿›ç¨‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ ps aux | grep ssh</div><div class="line">apple           25927   0.0  0.0  2432784    616 s000  R+    3:14ä¸‹åˆ   0:00.00 grep ssh</div></pre></td></tr></table></figure>
<p>ç›´æ¥ç”¨SSHå‘½ä»¤è¿æ¥æœ¬åœ°ä¸»æœºæˆ–è¿œç¨‹ä¸»æœºæ—¶ä¼šé‡åˆ°ä¸‹åˆ—é”™è¯¯æç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh: connect to host localhost port 22: Connection refused</div></pre></td></tr></table></figure>
<p>åœ¨äºç³»ç»Ÿè®¾ç½®ä¸­æ²¡æœ‰æ‰“å¼€è¿œç¨‹ç™»å½•ï¼Œå‚è§<a href="http://stackoverflow.com/questions/6313929/how-do-i-open-port-22-in-osx-10-6-7" target="_blank" rel="external">ä¼ é€é—¨</a>ã€‚</p>
<p>è¾“å…¥<code>ssh localhost</code>æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œå¦‚æœæç¤ºè¾“å…¥å¯†ç æ¥è®¤è¯å°±æ²¡é—®é¢˜äº†ã€‚</p>
<p>æ­¤æ—¶å†grepä¸€ä¸‹è¿›ç¨‹å¯ä»¥çœ‹åˆ°SSHè¿›ç¨‹åœ¨è¿è¡Œäº†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ ps aux | grep ssh</div><div class="line">apple            4656   0.0  0.0  2525056   1540   ??  S    ä¸‰02ä¸‹åˆ   0:00.19 /usr/bin/ssh-agent -l</div><div class="line">apple           26009   0.0  0.0  2432784    612 s000  R+    3:19ä¸‹åˆ   0:00.00 grep ssh</div></pre></td></tr></table></figure>
<p>å¦‚æœæç¤ºä»¥ä¸‹é”™è¯¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">HostÂ keyÂ verificationÂ failed.Â ssh</div><div class="line">HostÂ keyÂ verificationÂ failed.</div></pre></td></tr></table></figure>
<p>å°è¯•ä»¥ä¸‹çš„è§£å†³æ–¹æ³•:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">viÂ ~/.ssh/known_hosts</div></pre></td></tr></table></figure>
<p>åˆ é™¤æ­¤ç›®å½•ä¸‹hostNameOrAddressçš„ç›¸å…³rsaçš„ä¿¡æ¯ï¼Œæˆ–è€…ç›´æ¥åˆ é™¤è¿™ä¸ªæ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cdÂ ~/.ssh/</div><div class="line"></div><div class="line">rmÂ known_hosts</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Mac Terminalæ˜¯è‡ªå¸¦SSHçš„ï¼Œé€šè¿‡ç»ˆç«¯SSHè¿œç¨‹è¿æ¥CentosæœåŠ¡å™¨éå¸¸æ–¹ä¾¿ï¼Œåœ¨ç«¯å£ä¸ºé»˜è®¤çš„22æƒ…å†µä¸‹ï¼Œåªéœ€è¦åœ¨ç»ˆç«¯ä¸‹è¾“å…¥ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;sshÂ -lÂ rootÂ hostNameOrAddress&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å°±å¯ä»¥è¿æ¥äº†ï¼Œå¦‚æœæ”¹å˜äº†ç«¯å£ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å³å¯ç™»å½•ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;sshÂ -pÂ portNumberÂ -lÂ rootÂ hostNameOrAddress&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¦‚æœæ˜¯Ubuntuä¸»æœºï¼Œä¹Ÿå¯ä»¥è¿™ä¸ªå‘½ä»¤è¿›è¡Œè¿æ¥ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ssh -X userName@hostNameOrAddress&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sshÂ userName@hostNameOrAddressÂ -pÂ portNumber&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Other" scheme="http://yoursite.com/categories/Other/"/>
    
    
      <category term="SHH" scheme="http://yoursite.com/tags/SHH/"/>
    
      <category term="å¼€å‘å·¥å…·" scheme="http://yoursite.com/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>iOSç”Ÿå‘½å‘¨æœŸ - Mainå‡½æ•°</title>
    <link href="http://yoursite.com/2016/08/24/iOS%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%20-%20Main%E5%87%BD%E6%95%B0/"/>
    <id>http://yoursite.com/2016/08/24/iOSç”Ÿå‘½å‘¨æœŸ - Mainå‡½æ•°/</id>
    <published>2016-08-24T10:16:00.000Z</published>
    <updated>2016-08-24T05:03:41.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ‰€æœ‰åŸºäºCç¼–å†™çš„appçš„<strong>å…¥å£</strong>éƒ½æ˜¯mainå‡½æ•°ï¼Œä½†iOSåº”ç”¨ç¨‹åºæœ‰ç‚¹ä¸åŒã€‚ä¸åŒå°±æ˜¯ä½ ä¸éœ€è¦ä¸ºiOSåº”ç”¨ç¨‹åºè€Œè‡ªå·±ç¼–å†™mainå‡½æ•°ï¼Œå½“ä½ ä½¿ç”¨Xcodeåˆ›å»ºå·¥ç¨‹çš„æ—¶å€™å°±å·²ç»æä¾›äº†ã€‚é™¤éä¸€äº›ç‰¹æ®Šæƒ…å†µï¼Œå¦åˆ™ä½ <strong>ä¸åº”è¯¥</strong>ä¿®æ”¹Xcodeæä¾›çš„mainå‡½æ•°å®ç°ï¼Œåœ¨ä¸‹å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°Xcodeä¸ºæˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ªmain.mæ–‡ä»¶ï¼š</p>
<p> <img src="http://oboehz2ag.bkt.clouddn.com/ocmain.m.png" alt="ocmain.m"></p>
<a id="more"></a>
<h2 id="UIApplicationMain"><a href="#UIApplicationMain" class="headerlink" title="UIApplicationMain"></a>UIApplicationMain</h2><p>æˆªå›¾ä¸­é»˜è®¤çš„iOSç¨‹åºå°±æ˜¯ä»mainå‡½æ•°å¼€å§‹æ‰§è¡Œçš„ï¼Œä½†æ˜¯åœ¨mainå‡½æ•°ä¸­æˆ‘ä»¬å…¶å®åªèƒ½çœ‹åˆ°ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å†…éƒ¨æ˜¯ä¸€ä¸ªæ¶ˆæ¯å¾ªç¯ï¼ˆç›¸å½“äºä¸€ä¸ªæ­»å¾ª ç¯ï¼‰ï¼Œå› æ­¤è¿è¡Œåˆ°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]))</div></pre></td></tr></table></figure>
<p>UIApplicationMainè¿™ä¸ªæ–¹æ³•ä¹‹åç¨‹åºä¸ä¼šè‡ªåŠ¨é€€å‡ºï¼Œè€Œåªæœ‰å½“ç”¨æˆ·æ‰‹åŠ¨å…³é—­ç¨‹åºè¿™ä¸ªå¾ªç¯æ‰ç»“æŸã€‚è¿™ä¸ªæ–¹æ³•æœ‰å››ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°å’Œç¬¬äºŒä¸ªå‚æ•°å…¶å®å°±æ˜¯mainå‡½æ•°çš„å‚æ•°ï¼Œåˆ†åˆ«ä»£è¡¨ï¼šå‚æ•°ä¸ªæ•°ã€å‚æ•°å†…å®¹ï¼›</li>
<li>ç¬¬ä¸‰ä¸ªå‚æ•°ä»£è¡¨UIApplicationç±»ï¼ˆæˆ–å­ç±»ï¼‰å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå‚æ•°é»˜è®¤ä¸ºnilåˆ™ä»£è¡¨é»˜è®¤ä¸ºUIApplicationç±»ï¼Œç”¨æˆ· å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªç±»ç»§æ‰¿äºè¿™ä¸ªç±»ï¼›å¦‚æœä¸ºnilåˆ™ç­‰ä»·äºNSStringFromClass([UIApplication class])ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±è¯•éªŒï¼Œæ•ˆæœå®Œå…¨ä¸€æ ·ï¼›UIApplicationæ˜¯å•ä¾‹æ¨¡å¼ï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºåªæœ‰ä¸€ä¸ªUIApplicationå¯¹è±¡æˆ–å­å¯¹ è±¡ï¼›</li>
<li>ç¬¬å››ä¸ªå‚æ•°æ˜¯UIApplicationçš„ä»£ç†ç±»å­—ç¬¦ä¸²ï¼Œé»˜è®¤ç”Ÿæˆçš„æ˜¯AppDelegateç±»ï¼Œè¿™ä¸ªç±»ä¸»è¦ç”¨äºç›‘å¬æ•´ä¸ªåº”ç”¨ç¨‹åºç”Ÿå‘½ å‘¨æœŸçš„å„ä¸ªäº‹ä»¶ï¼Œå½“UIApplicationè¿è¡Œè¿‡ç¨‹ä¸­å¼•å‘äº†æŸä¸ªäº‹ä»¶ä¹‹åä¼šè°ƒç”¨ä»£ç†ä¸­å¯¹åº”çš„æ–¹æ³•ï¼›</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">int main(int argc, char *argv[])</div><div class="line">&#123;</div><div class="line">    @autoreleasepool &#123;</div><div class="line">        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>main</code>å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°<code>(int argc, char *argv[])</code>ï¼ŒiOSä¸­æ²¡æœ‰ç”¨åˆ°ï¼ŒåŒ…æ‹¬è¿™ä¸¤ä¸ªå‚æ•°æ˜¯ä¸ºäº†ä¸æ ‡å‡†ANSI Cä¿æŒä¸€è‡´ã€‚</p>
<p><code>UIApplicationMain</code>å‡½æ•°ï¼Œå‰ä¸¤ä¸ªå‚æ•°å’Œ<code>main</code>å‡½æ•°ä¸€æ ·ï¼Œé‡ç‚¹æ˜¯åä¸¤ä¸ªï¼Œå®˜æ–¹è¯´æ˜æ˜¯è¿™æ ·çš„ï¼š</p>
<blockquote>
<p>// If nil is specified for principalClassName, the value for NSPrincipalClass from the Info.plist is used. If there is no<br>// NSPrincipalClass key specified, the UIApplication class is used. The delegate class will be instantiated using init.<br>UIKIT_EXTERN int UIApplicationMain(int argc, char <em>argv[], NSString </em>principalClassName, NSString *delegateClassName);</p>
</blockquote>
<p>åä¸¤ä¸ªå‚æ•°åˆ†åˆ«è¡¨ç¤ºç¨‹åºçš„ä¸»è¦ç±»ï¼ˆprincipal classï¼‰å’Œä»£ç†ç±»ï¼ˆdelegate classï¼‰ã€‚å¦‚æœä¸»è¦ç±»ä¸ºnilï¼Œå°†ä»Info.plistä¸­è·å–ï¼Œå¦‚æœInfo.plistä¸­ä¸å­˜åœ¨å¯¹åº”çš„keyï¼Œåˆ™é»˜è®¤ä¸ºUIApplicationï¼›å¦‚æœä»£ç†ç±»ä¸ºnilï¼Œå°†åœ¨æ–°å»ºå·¥ç¨‹æ—¶åˆ›å»ºã€‚</p>
<p>æ ¹æ®UIApplicationMainå‡½æ•°ï¼Œç¨‹åºå°†è¿›å…¥AppDelegate.mï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯Xcodeæ–°å»ºå·¥ç¨‹æ—¶è‡ªåŠ¨ç”Ÿæˆçš„ã€‚</p>
<p>ä¸Šé¢å®ä¾‹ä»£ç ä¸­æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„å‡½æ•°<a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIKitFunctionReference/index.html#//apple_ref/c/func/UIApplicationMain" target="_blank" rel="external">UIApplicationMain</a>ï¼Œå®ƒä¸»è¦æ˜¯åˆ›å»ºappçš„å‡ ä¸ªæ ¸å¿ƒå¯¹è±¡æ¥å¤„ç†ä»¥ä¸‹è¿‡ç¨‹ï¼š</p>
<ol>
<li>ä»å¯ç”¨<code>Storyboard</code>æ–‡ä»¶åŠ è½½ç”¨æˆ·ç•Œé¢</li>
<li>è°ƒç”¨<code>AppDelegate</code>è‡ªå®šä¹‰ä»£ç æ¥åšä¸€äº›åˆå§‹åŒ–è®¾ç½®</li>
<li>å°†appæ”¾å…¥<code>Main Run Loop</code>ç¯å¢ƒä¸­æ¥å“åº”å’Œå¤„ç†ä¸ç”¨æˆ·äº¤äº’äº§ç”Ÿçš„äº‹ä»¶</li>
</ol>
<h3 id="Swiftä¸­çš„Mainå‡½æ•°"><a href="#Swiftä¸­çš„Mainå‡½æ•°" class="headerlink" title="Swiftä¸­çš„Mainå‡½æ•°"></a>Swiftä¸­çš„Mainå‡½æ•°</h3><p>ç”¨OCè¯­è¨€åˆ›å»ºçš„é¡¹ç›®ï¼Œä¸€å®šä¼šæœ‰ä¸€ä¸ªmain.mæ–‡ä»¶ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªmainå‡½æ•°ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­å”¤é†’appã€‚å¦‚æœåœ¨appå¯åŠ¨æ—¶æ”¾ç½®æ–­ç‚¹ï¼Œå¯ä»¥çœ‹åˆ°åº”ç”¨ç¨‹åºè°ƒç”¨æ ˆï¼Œmainå‡½æ•°ä½œä¸ºç¨‹åºå¯åŠ¨åçš„ç¬¬äºŒä¸ªå‡½æ•°è¢«è°ƒç”¨ï¼Œç„¶ååœ¨mainå‡½æ•°ä¸­å†å¯åŠ¨UIApplicationï¼Œå¹¶ç»‘å®šAppDelegateã€‚å¦‚ä¸‹å›¾ï¼š</p>
<p> <img src="http://oboehz2ag.bkt.clouddn.com/ocmain.png" alt="ocmain"></p>
<p>ä½†æ˜¯Swifté¡¹ç›®ä¸­æ²¡æœ‰ä¸€ä¸ªåä¸ºmain.swiftçš„æ–‡ä»¶ï¼Œä¸ºä»€ä¹ˆappçš„å…¥å£æ²¡æœ‰äº†ï¼Ÿå®˜æ–¹æ–‡æ¡£çš„è¯´æ³•æ˜¯è¿™æ ·çš„ï¼š</p>
<blockquote>
<p>In Xcode, Mac templates default to including a â€œmain.swiftâ€ file, but for iOS apps the default for new iOS project templates is to add @UIApplicationMain to a regular Swift file. This causes the compiler to synthesize a mainentry point for your iOS app, and eliminates the need for a â€œmain.swiftâ€ file.</p>
</blockquote>
<p>è¿™æ®µè¯çš„æ„æ€æ˜¯ï¼ŒSwifté¡¹ç›®ä¸­æ·»åŠ äº†@UIApplicationMain åˆ°swiftæ–‡ä»¶ä¸­ï¼Œä½¿å¾—ç¼–è¯‘å™¨åˆæˆäº†ä¸€ä¸ªappå…¥å£ï¼Œæ‰€ä»¥ä¸éœ€è¦main.swiftæ–‡ä»¶ã€‚</p>
<p> <img src="http://oboehz2ag.bkt.clouddn.com/swiftmain.png" alt="swiftmain"></p>
<p>å¯èƒ½è‹¹æœè®¤ä¸ºæˆ‘ä»¬å¹¶ä¸éœ€è¦è‡ªè¡Œé…ç½®appå…¥å£ï¼Œæ‰€ä»¥å¹²è„†ç®€åŒ–äº†é¡¹ç›®é…ç½®ï¼Œä½¿ç”¨æ›´åŠ ç®€å•çš„æ–¹å¼å¯åŠ¨åº”ç”¨ï¼Œä½†æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½éœ€è¦è‡ªå·±é…ç½®å…¥å£ï¼Œä¾‹å¦‚æˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªUIApplicationçš„å­ç±»æ—¶ã€‚</p>
<h2 id="è‡ªå®šä¹‰UIApplicationMain"><a href="#è‡ªå®šä¹‰UIApplicationMain" class="headerlink" title="è‡ªå®šä¹‰UIApplicationMain"></a>è‡ªå®šä¹‰UIApplicationMain</h2><p>å¦‚æœä½ å¸Œæœ›é€šè¿‡è‡ªè¡Œé…ç½®å…¥å£çš„æ–¹å¼æ¥åˆ›å»ºä¸€ä¸ªUIApplicationå­ç±»ï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ªUIApplicationçš„å­ç±»ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Foundation</div><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApplication</span>: <span class="title">UIApplication</span> </span>&#123;</div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">sendEvent</span><span class="params">(event: UIEvent)</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.sendEvent(event)</div><div class="line">        <span class="built_in">print</span>(<span class="string">"send event"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶åæ–°å»ºmain.swiftæ–‡ä»¶ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Foundation</div><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"></div><div class="line"><span class="type">UIApplicationMain</span>(<span class="type">Process</span>.argc, <span class="type">Process</span>.unsafeArgv, <span class="type">NSStringFromClass</span>(myApplication), <span class="type">NSStringFromClass</span>(<span class="type">AppDelegate</span>))</div></pre></td></tr></table></figure>
<p>åœ¨Appdelegateçš„æœ€é¡¶éƒ¨å£°æ˜@UIApplicationMainï¼Œè¡¨ç¤ºè¯¥ç±»æ˜¯applicationçš„delegateã€‚</p>
<p>å¦‚æœä¸ç”¨è¯¥å±æ€§æ ‡è¯†ï¼Œå¦å¤–ä¸€ç§åšæ³•æ˜¯åœ¨main.swiftä¸­è°ƒç”¨UIApplicationMainå‡½æ•°ï¼Œè®¾ç½®delegateå’Œapplicationã€‚ä»¥ä¸Šæˆ‘ä»¬å°±æ˜¯æ ¹æ®è¿™ç§æ–¹æ³•æ¥è®¾ç½®çš„ã€‚</p>
<p>å»æ‰Appdelegateçš„@UIApplicationMainï¼Œæˆ‘ä»¬å°±å°†main.swiftè®¾ç½®ä¸ºäº†å…¥å£ã€‚</p>
<h2 id="UIApplicationMainçš„å‚æ•°"><a href="#UIApplicationMainçš„å‚æ•°" class="headerlink" title="UIApplicationMainçš„å‚æ•°"></a>UIApplicationMainçš„å‚æ•°</h2><p>ä»¥å‰OCçš„mainå‡½æ•°çš„argvå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æŒ‡é’ˆï¼Œæ‰“å°å‡ºæ¥åæ˜¯åº”ç”¨ç¨‹åºçš„è·¯å¾„ã€‚</p>
<p>Swiftä¸­mainå‡½æ•°çš„ Process.unsafeArgv å‚æ•°å˜æˆäº†ä¸€ä¸²åå…­è¿›åˆ¶æ•°å­—ï¼Œåº”è¯¥ä¹Ÿæ˜¯ä»£è¡¨åº”ç”¨ç¨‹åºåœ°å€ã€‚</p>
<h2 id="Demoä¸‹è½½"><a href="#Demoä¸‹è½½" class="headerlink" title="Demoä¸‹è½½"></a>Demoä¸‹è½½</h2><p><a href="https://github.com/tianziyao/demo/tree/master/CustomApplication" target="_blank" rel="external">GitHubä¼ é€é—¨</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ‰€æœ‰åŸºäºCç¼–å†™çš„appçš„&lt;strong&gt;å…¥å£&lt;/strong&gt;éƒ½æ˜¯mainå‡½æ•°ï¼Œä½†iOSåº”ç”¨ç¨‹åºæœ‰ç‚¹ä¸åŒã€‚ä¸åŒå°±æ˜¯ä½ ä¸éœ€è¦ä¸ºiOSåº”ç”¨ç¨‹åºè€Œè‡ªå·±ç¼–å†™mainå‡½æ•°ï¼Œå½“ä½ ä½¿ç”¨Xcodeåˆ›å»ºå·¥ç¨‹çš„æ—¶å€™å°±å·²ç»æä¾›äº†ã€‚é™¤éä¸€äº›ç‰¹æ®Šæƒ…å†µï¼Œå¦åˆ™ä½ &lt;strong&gt;ä¸åº”è¯¥&lt;/strong&gt;ä¿®æ”¹Xcodeæä¾›çš„mainå‡½æ•°å®ç°ï¼Œåœ¨ä¸‹å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°Xcodeä¸ºæˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ªmain.mæ–‡ä»¶ï¼š&lt;/p&gt;
&lt;p&gt; &lt;img src=&quot;http://oboehz2ag.bkt.clouddn.com/ocmain.m.png&quot; alt=&quot;ocmain.m&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOSç”Ÿå‘½å‘¨æœŸ" scheme="http://yoursite.com/tags/iOS%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"/>
    
  </entry>
  
  <entry>
    <title>MacæŠ“åŒ… - è½¬è½½Â·Charlesä»å…¥é—¨åˆ°ç²¾é€š</title>
    <link href="http://yoursite.com/2016/08/20/Charles%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/"/>
    <id>http://yoursite.com/2016/08/20/Charlesä»å…¥é—¨åˆ°ç²¾é€š/</id>
    <published>2016-08-19T20:44:00.000Z</published>
    <updated>2016-09-14T01:28:18.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.charlesproxy.com/" target="_blank" rel="external">Charles</a> æ˜¯åœ¨ Mac ä¸‹å¸¸ç”¨çš„ç½‘ç»œå°åŒ…æˆªå–å·¥å…·ï¼Œåœ¨åšç§»åŠ¨å¼€å‘æ—¶ï¼Œæˆ‘ä»¬ä¸ºäº†è°ƒè¯•ä¸æœåŠ¡å™¨ç«¯çš„ç½‘ç»œé€šè®¯åè®®ï¼Œå¸¸å¸¸éœ€è¦æˆªå–ç½‘ç»œå°åŒ…æ¥åˆ†æã€‚</p>
<p>Charles é€šè¿‡å°†è‡ªå·±è®¾ç½®æˆç³»ç»Ÿçš„ç½‘ç»œè®¿é—®ä»£ç†æœåŠ¡å™¨ï¼Œä½¿å¾—æ‰€æœ‰çš„ç½‘ç»œè®¿é—®è¯·æ±‚éƒ½é€šè¿‡å®ƒæ¥å®Œæˆï¼Œä»è€Œå®ç°äº†ç½‘ç»œå°åŒ…çš„æˆªå–å’Œåˆ†æã€‚</p>
<p>é™¤äº†åœ¨åšç§»åŠ¨å¼€å‘ä¸­è°ƒè¯•ç«¯å£å¤–ï¼ŒCharles ä¹Ÿå¯ä»¥ç”¨äºåˆ†æç¬¬ä¸‰æ–¹åº”ç”¨çš„é€šè®¯åè®®ã€‚é…åˆ Charles çš„ SSL åŠŸèƒ½ï¼ŒCharles è¿˜å¯ä»¥åˆ†æ Https åè®®ã€‚</p>
<p>Charles æ˜¯æ”¶è´¹è½¯ä»¶ï¼Œå¯ä»¥å…è´¹è¯•ç”¨ 30 å¤©ã€‚è¯•ç”¨æœŸè¿‡åï¼Œæœªä»˜è´¹çš„ç”¨æˆ·ä»ç„¶å¯ä»¥ç»§ç»­ä½¿ç”¨ï¼Œä½†æ˜¯æ¯æ¬¡ä½¿ç”¨æ—¶é—´ä¸èƒ½è¶…è¿‡ 30 åˆ†é’Ÿï¼Œå¹¶ä¸”å¯åŠ¨æ—¶å°†ä¼šæœ‰ 10 ç§’ç§çš„å»¶æ—¶ã€‚å› æ­¤ï¼Œè¯¥ä»˜è´¹æ–¹æ¡ˆå¯¹å¹¿å¤§ç”¨æˆ·è¿˜æ˜¯ç›¸å½“å‹å¥½çš„ï¼Œå³ä½¿ä½ é•¿æœŸä¸ä»˜è´¹ï¼Œä¹Ÿèƒ½ä½¿ç”¨å®Œæ•´çš„è½¯ä»¶åŠŸèƒ½ã€‚åªæ˜¯å½“ä½ éœ€è¦é•¿æ—¶é—´è¿›è¡Œå°åŒ…è°ƒè¯•æ—¶ï¼Œä¼šå› ä¸º Charles å¼ºåˆ¶å…³é—­è€Œé‡åˆ°å½±å“ã€‚</p>
<a id="more"></a>
<p>Charles ä¸»è¦çš„åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ol>
<li>æˆªå– Http å’Œ Https ç½‘ç»œå°åŒ…ã€‚</li>
<li>æ”¯æŒé‡å‘ç½‘ç»œè¯·æ±‚ï¼Œæ–¹ä¾¿åç«¯è°ƒè¯•ã€‚</li>
<li>æ”¯æŒä¿®æ”¹ç½‘ç»œè¯·æ±‚å‚æ•°ã€‚</li>
<li>æ”¯æŒç½‘ç»œè¯·æ±‚çš„æˆªè·å¹¶åŠ¨æ€ä¿®æ”¹ã€‚</li>
<li>æ”¯æŒæ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œã€‚</li>
</ol>
<p>Charles 4 æ–°å¢çš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ol>
<li>æ”¯æŒ Http 2ã€‚</li>
<li>æ”¯æŒ IPv6ã€‚</li>
</ol>
<h2 id="å®‰è£…-Charles"><a href="#å®‰è£…-Charles" class="headerlink" title="å®‰è£… Charles"></a>å®‰è£… Charles</h2><p>å» Charles çš„å®˜æ–¹ç½‘ç«™ï¼ˆ<a href="http://www.charlesproxy.com/" target="_blank" rel="external">http://www.charlesproxy.com</a>ï¼‰ä¸‹è½½æœ€æ–°ç‰ˆçš„ Charles å®‰è£…åŒ…ï¼Œæ˜¯ä¸€ä¸ª dmg åç¼€çš„æ–‡ä»¶ã€‚æ‰“å¼€åå°† Charles æ‹–åˆ° Application ç›®å½•ä¸‹å³å®Œæˆå®‰è£…ã€‚</p>
<h2 id="å°†-Charles-è®¾ç½®æˆç³»ç»Ÿä»£ç†"><a href="#å°†-Charles-è®¾ç½®æˆç³»ç»Ÿä»£ç†" class="headerlink" title="å°† Charles è®¾ç½®æˆç³»ç»Ÿä»£ç†"></a>å°† Charles è®¾ç½®æˆç³»ç»Ÿä»£ç†</h2><p>ä¹‹å‰æåˆ°ï¼ŒCharles æ˜¯é€šè¿‡å°†è‡ªå·±è®¾ç½®æˆä»£ç†æœåŠ¡å™¨æ¥å®Œæˆå°åŒ…æˆªå–çš„ï¼Œæ‰€ä»¥ä½¿ç”¨ Charles çš„ç¬¬ä¸€æ­¥æ˜¯å°†å…¶è®¾ç½®æˆç³»ç»Ÿçš„ä»£ç†æœåŠ¡å™¨ã€‚</p>
<p>å¯åŠ¨ Charles åï¼Œç¬¬ä¸€æ¬¡ Charles ä¼šè¯·æ±‚ä½ ç»™å®ƒè®¾ç½®ç³»ç»Ÿä»£ç†çš„æƒé™ã€‚ä½ å¯ä»¥è¾“å…¥ç™»å½•å¯†ç æˆäºˆ Charles è¯¥æƒé™ã€‚ä½ ä¹Ÿå¯ä»¥å¿½ç•¥è¯¥è¯·æ±‚ï¼Œç„¶ååœ¨éœ€è¦å°† Charles è®¾ç½®æˆç³»ç»Ÿä»£ç†æ—¶ï¼Œé€‰æ‹©èœå•ä¸­çš„ â€œProxyâ€ -&gt; â€œMac OS X Proxyâ€ æ¥å°† Charles è®¾ç½®æˆç³»ç»Ÿä»£ç†ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="http://oboehz2ag.bkt.clouddn.com/proxy.png" alt="proxy"></p>
<p>ä¹‹åï¼Œä½ å°±å¯ä»¥çœ‹åˆ°æºæºä¸æ–­çš„ç½‘ç»œè¯·æ±‚å‡ºç°åœ¨ Charles çš„ç•Œé¢ä¸­ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒChrome å’Œ Firefox æµè§ˆå™¨é»˜è®¤å¹¶ä¸ä½¿ç”¨ç³»ç»Ÿçš„ä»£ç†æœåŠ¡å™¨è®¾ç½®ï¼Œè€Œ Charles æ˜¯é€šè¿‡å°†è‡ªå·±è®¾ç½®æˆä»£ç†æœåŠ¡å™¨æ¥å®Œæˆå°åŒ…æˆªå–çš„ï¼Œæ‰€ä»¥åœ¨é»˜è®¤æƒ…å†µä¸‹æ— æ³•æˆªå– Chrome å’Œ Firefox æµè§ˆå™¨çš„ç½‘ç»œé€šè®¯å†…å®¹ã€‚å¦‚æœä½ éœ€è¦æˆªå–çš„è¯ï¼Œåœ¨ Chrome ä¸­è®¾ç½®æˆä½¿ç”¨ç³»ç»Ÿçš„ä»£ç†æœåŠ¡å™¨è®¾ç½®å³å¯ï¼Œæˆ–è€…ç›´æ¥å°†ä»£ç†æœåŠ¡å™¨è®¾ç½®æˆ <code>127.0.0.1:8888</code> ä¹Ÿå¯è¾¾åˆ°ç›¸åŒæ•ˆæœã€‚</p>
<h2 id="Charles-ä¸»ç•Œé¢ä»‹ç»"><a href="#Charles-ä¸»ç•Œé¢ä»‹ç»" class="headerlink" title="Charles ä¸»ç•Œé¢ä»‹ç»"></a>Charles ä¸»ç•Œé¢ä»‹ç»</h2><p>Charles ä¸»è¦æä¾›ä¸¤ç§æŸ¥çœ‹å°åŒ…çš„è§†å›¾ï¼Œåˆ†åˆ«åä¸º â€œStructureâ€ å’Œ â€œSequenceâ€ã€‚</p>
<ol>
<li>Structure è§†å›¾å°†ç½‘ç»œè¯·æ±‚æŒ‰è®¿é—®çš„åŸŸååˆ†ç±»ã€‚</li>
<li>Sequence è§†å›¾å°†ç½‘ç»œè¯·æ±‚æŒ‰è®¿é—®çš„æ—¶é—´æ’åºã€‚</li>
</ol>
<p>å¤§å®¶å¯ä»¥æ ¹æ®å…·ä½“çš„éœ€è¦åœ¨è¿™ä¸¤ç§è§†å›¾ä¹‹å‰æ¥å›åˆ‡æ¢ã€‚è¯·æ±‚å¤šäº†æœ‰äº›æ—¶å€™ä¼šçœ‹ä¸è¿‡æ¥ï¼ŒCharles æä¾›äº†ä¸€ä¸ªç®€å•çš„ Filter åŠŸèƒ½ï¼Œå¯ä»¥è¾“å…¥å…³é”®å­—æ¥å¿«é€Ÿç­›é€‰å‡º URL ä¸­å¸¦æŒ‡å®šå…³é”®å­—çš„ç½‘ç»œè¯·æ±‚ã€‚</p>
<p>å¯¹äºæŸä¸€ä¸ªå…·ä½“çš„ç½‘ç»œè¯·æ±‚ï¼Œä½ å¯ä»¥æŸ¥çœ‹å…¶è¯¦ç»†çš„è¯·æ±‚å†…å®¹å’Œå“åº”å†…å®¹ã€‚å¦‚æœè¯·æ±‚å†…å®¹æ˜¯ POST çš„è¡¨å•ï¼ŒCharles ä¼šè‡ªåŠ¨å¸®ä½ å°†è¡¨å•è¿›è¡Œåˆ†é¡¹æ˜¾ç¤ºã€‚å¦‚æœå“åº”å†…å®¹æ˜¯ JSON æ ¼å¼çš„ï¼Œé‚£ä¹ˆ Charles å¯ä»¥è‡ªåŠ¨å¸®ä½ å°† JSON å†…å®¹æ ¼å¼åŒ–ï¼Œæ–¹ä¾¿ä½ æŸ¥çœ‹ã€‚å¦‚æœå“åº”å†…å®¹æ˜¯å›¾ç‰‡ï¼Œé‚£ä¹ˆ Charles å¯ä»¥æ˜¾ç¤ºå‡ºå›¾ç‰‡çš„é¢„è§ˆã€‚</p>
<h2 id="è¿‡æ»¤ç½‘ç»œè¯·æ±‚"><a href="#è¿‡æ»¤ç½‘ç»œè¯·æ±‚" class="headerlink" title="è¿‡æ»¤ç½‘ç»œè¯·æ±‚"></a>è¿‡æ»¤ç½‘ç»œè¯·æ±‚</h2><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ç½‘ç»œè¯·æ±‚è¿›è¡Œè¿‡æ»¤ï¼Œåªç›‘æ§å‘æŒ‡å®šç›®å½•æœåŠ¡å™¨ä¸Šå‘é€çš„è¯·æ±‚ã€‚å¯¹äºè¿™ç§éœ€æ±‚ï¼Œä»¥ä¸‹å‡ ç§åŠæ³•ï¼š</p>
<p>æ–¹æ³•ä¸€ï¼šåœ¨ä¸»ç•Œé¢çš„ä¸­éƒ¨çš„ Filter æ ä¸­å¡«å…¥éœ€è¦è¿‡æ»¤å‡ºæ¥çš„å…³é”®å­—ã€‚ä¾‹å¦‚æˆ‘ä»¬çš„æœåŠ¡å™¨çš„åœ°å€æ˜¯ï¼š<code>http://yuantiku.com</code> , é‚£ä¹ˆåªéœ€è¦åœ¨ Filter æ ä¸­å¡«å…¥ yuantiku å³å¯ã€‚</p>
<p>æ–¹æ³•äºŒï¼šåœ¨ Charles çš„èœå•æ é€‰æ‹© â€œProxyâ€-&gt;â€Recording Settingsâ€ï¼Œç„¶åé€‰æ‹© Include æ ï¼Œé€‰æ‹©æ·»åŠ ä¸€ä¸ªé¡¹ç›®ï¼Œç„¶åå¡«å…¥éœ€è¦ç›‘æ§çš„åè®®ï¼Œä¸»æœºåœ°å€ï¼Œç«¯å£å·ã€‚è¿™æ ·å°±å¯ä»¥åªæˆªå–ç›®æ ‡ç½‘ç«™çš„å°åŒ…äº†ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://oboehz2ag.bkt.clouddn.com/guolv.png" alt="guolv"></p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨æ–¹æ³•ä¸€åšä¸€äº›ä¸´æ—¶æ€§çš„å°åŒ…è¿‡æ»¤ï¼Œä½¿ç”¨æ–¹æ³•äºŒåšä¸€äº›ç»å¸¸æ€§çš„å°åŒ…è¿‡æ»¤ã€‚</p>
<p>æ–¹æ³•ä¸‰ï¼šåœ¨æƒ³è¿‡æ»¤çš„ç½‘ç»œè¯·æ±‚ä¸Šå³å‡»ï¼Œé€‰æ‹© â€œFocusâ€ï¼Œä¹‹ååœ¨ Filter ä¸€æ å‹¾é€‰ä¸Š Focussed ä¸€é¡¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š <img src="http://oboehz2ag.bkt.clouddn.com/focus.png" alt="focus"></p>
<p>è¿™ç§æ–¹å¼å¯ä»¥ä¸´æ—¶æ€§çš„ï¼Œå¿«é€Ÿåœ°è¿‡æ»¤å‡ºä¸€äº›æ²¡æœ‰é€šè¿‡å…³é”®å­—çš„ä¸€ç±»ç½‘ç»œè¯·æ±‚ã€‚</p>
<h2 id="æˆªå–-iPhone-ä¸Šçš„ç½‘ç»œå°åŒ…"><a href="#æˆªå–-iPhone-ä¸Šçš„ç½‘ç»œå°åŒ…" class="headerlink" title="æˆªå– iPhone ä¸Šçš„ç½‘ç»œå°åŒ…"></a>æˆªå– iPhone ä¸Šçš„ç½‘ç»œå°åŒ…</h2><p>Charles é€šå¸¸ç”¨æ¥æˆªå–æœ¬åœ°ä¸Šçš„ç½‘ç»œå°åŒ…ï¼Œä½†æ˜¯å½“æˆ‘ä»¬éœ€è¦æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨æ¥æˆªå–å…¶å®ƒè®¾å¤‡ä¸Šçš„ç½‘ç»œè¯·æ±‚ã€‚ä¸‹é¢æˆ‘å°±ä»¥ iPhone ä¸ºä¾‹ï¼Œè®²è§£å¦‚ä½•è¿›è¡Œç›¸åº”æ“ä½œã€‚</p>
<h3 id="Charles-ä¸Šçš„è®¾ç½®"><a href="#Charles-ä¸Šçš„è®¾ç½®" class="headerlink" title="Charles ä¸Šçš„è®¾ç½®"></a>Charles ä¸Šçš„è®¾ç½®</h3><p>è¦æˆªå– iPhone ä¸Šçš„ç½‘ç»œè¯·æ±‚ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å°† Charles çš„ä»£ç†åŠŸèƒ½æ‰“å¼€ã€‚åœ¨ Charles çš„èœå•æ ä¸Šé€‰æ‹© â€œProxyâ€-&gt;â€Proxy Settingsâ€ï¼Œå¡«å…¥ä»£ç†ç«¯å£ 8888ï¼Œå¹¶ä¸”å‹¾ä¸Š â€œEnable transparent HTTP proxyingâ€ å°±å®Œæˆäº†åœ¨ Charles ä¸Šçš„è®¾ç½®ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º: <img src="http://oboehz2ag.bkt.clouddn.com/iphone.png" alt="iphone"></p>
<h3 id="iPhone-ä¸Šçš„è®¾ç½®"><a href="#iPhone-ä¸Šçš„è®¾ç½®" class="headerlink" title="iPhone ä¸Šçš„è®¾ç½®"></a>iPhone ä¸Šçš„è®¾ç½®</h3><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦è·å– Charles è¿è¡Œæ‰€åœ¨ç”µè„‘çš„ IP åœ°å€ï¼ŒCharles çš„é¡¶éƒ¨èœå•çš„ â€œHelpâ€-&gt;â€Local IP Addressâ€ï¼Œå³å¯åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­çœ‹åˆ° IP åœ°å€ã€‚</p>
<p>åœ¨ iPhone çš„ â€œ è®¾ç½® â€œ-&gt;â€ æ— çº¿å±€åŸŸç½‘ â€œ ä¸­ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰è¿æ¥çš„ wifi åï¼Œé€šè¿‡ç‚¹å‡»å³è¾¹çš„è¯¦æƒ…é”®ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰è¿æ¥ä¸Šçš„ wifi çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ IP åœ°å€ï¼Œå­ç½‘æ©ç ç­‰ä¿¡æ¯ã€‚åœ¨å…¶æœ€åº•éƒ¨æœ‰ã€ŒHTTP ä»£ç†ã€ä¸€é¡¹ï¼Œæˆ‘ä»¬å°†å…¶åˆ‡æ¢æˆæ‰‹åŠ¨ï¼Œç„¶åå¡«ä¸Š Charles è¿è¡Œæ‰€åœ¨çš„ç”µè„‘çš„ IPï¼Œä»¥åŠç«¯å£å· 8888ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š <img src="http://oboehz2ag.bkt.clouddn.com/IMG_1849.PNG" alt="IMG_1849"></p>
<p>è®¾ç½®å¥½ä¹‹åï¼Œæˆ‘ä»¬æ‰“å¼€ iPhone ä¸Šçš„ä»»æ„éœ€è¦ç½‘ç»œé€šè®¯çš„ç¨‹åºï¼Œå°±å¯ä»¥çœ‹åˆ° Charles å¼¹å‡º iPhone è¯·æ±‚è¿æ¥çš„ç¡®è®¤èœå•ï¼Œç‚¹å‡» â€œAllowâ€ å³å¯å®Œæˆè®¾ç½®ã€‚</p>
<h2 id="æˆªå–-Https-é€šè®¯ä¿¡æ¯"><a href="#æˆªå–-Https-é€šè®¯ä¿¡æ¯" class="headerlink" title="æˆªå– Https é€šè®¯ä¿¡æ¯"></a>æˆªå– Https é€šè®¯ä¿¡æ¯</h2><h3 id="å®‰è£…è¯ä¹¦"><a href="#å®‰è£…è¯ä¹¦" class="headerlink" title="å®‰è£…è¯ä¹¦"></a>å®‰è£…è¯ä¹¦</h3><p>å¦‚æœä½ éœ€è¦æˆªå–åˆ†æ Https åè®®ç›¸å…³çš„å†…å®¹ã€‚é‚£ä¹ˆéœ€è¦å®‰è£… Charles çš„ CA è¯ä¹¦ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨ Mac ç”µè„‘ä¸Šå®‰è£…è¯ä¹¦ã€‚ç‚¹å‡» Charles çš„é¡¶éƒ¨èœå•ï¼Œé€‰æ‹© â€œHelpâ€ -&gt; â€œSSL Proxyingâ€ -&gt; â€œInstall Charles Root Certificateâ€ï¼Œç„¶åè¾“å…¥ç³»ç»Ÿçš„å¸å·å¯†ç ï¼Œå³å¯åœ¨ KeyChain çœ‹åˆ°æ·»åŠ å¥½çš„è¯ä¹¦ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿æ˜¯å®‰è£…å®Œè¯ä¹¦ä¹‹åï¼ŒCharles é»˜è®¤ä¹Ÿå¹¶ä¸æˆªå– Https ç½‘ç»œé€šè®¯çš„ä¿¡æ¯ï¼Œå¦‚æœä½ æƒ³å¯¹æˆªå–æŸä¸ªç½‘ç«™ä¸Šçš„æ‰€æœ‰ Https ç½‘ç»œè¯·æ±‚ï¼Œå¯ä»¥åœ¨è¯¥è¯·æ±‚ä¸Šå³å‡»ï¼Œé€‰æ‹© SSL proxyï¼Œè¿™æ ·ï¼Œå¯¹äºè¯¥ Host çš„æ‰€æœ‰ SSL è¯·æ±‚å¯ä»¥è¢«æˆªå–åˆ°äº†ã€‚</p>
<h3 id="æˆªå–ç§»åŠ¨è®¾å¤‡ä¸­çš„-Https-é€šè®¯ä¿¡æ¯"><a href="#æˆªå–ç§»åŠ¨è®¾å¤‡ä¸­çš„-Https-é€šè®¯ä¿¡æ¯" class="headerlink" title="æˆªå–ç§»åŠ¨è®¾å¤‡ä¸­çš„ Https é€šè®¯ä¿¡æ¯"></a>æˆªå–ç§»åŠ¨è®¾å¤‡ä¸­çš„ Https é€šè®¯ä¿¡æ¯</h3><p>å¦‚æœæˆ‘ä»¬éœ€è¦åœ¨ iOS æˆ– Android æœºå™¨ä¸Šæˆªå– Https åè®®çš„é€šè®¯å†…å®¹ï¼Œè¿˜éœ€è¦åœ¨æ‰‹æœºä¸Šå®‰è£…ç›¸åº”çš„è¯ä¹¦ã€‚ç‚¹å‡» Charles çš„é¡¶éƒ¨èœå•ï¼Œé€‰æ‹© â€œHelpâ€ -&gt; â€œSSL Proxyingâ€ -&gt; â€œInstall Charles Root Certificate on a Mobile Device or Remote Browserâ€ï¼Œç„¶åå°±å¯ä»¥çœ‹åˆ° Charles å¼¹å‡ºçš„ç®€å•çš„å®‰è£…æ•™ç¨‹ã€‚</p>
<p>æŒ‰ç…§æˆ‘ä»¬ä¹‹å‰è¯´çš„æ•™ç¨‹ï¼Œåœ¨è®¾å¤‡ä¸Šè®¾ç½®å¥½ Charles ä¸ºä»£ç†åï¼Œåœ¨æ‰‹æœºæµè§ˆå™¨ä¸­è®¿é—®åœ°å€ï¼š<a href="http://charlesproxy.com/getssl" target="_blank" rel="external">http://charlesproxy.com/getssl</a>ï¼Œå³å¯æ‰“å¼€è¯ä¹¦å®‰è£…çš„ç•Œé¢ï¼Œå®‰è£…å®Œè¯ä¹¦åï¼Œå°±å¯ä»¥æˆªå–æ‰‹æœºä¸Šçš„ Https é€šè®¯å†…å®¹äº†ã€‚ä¸è¿‡åŒæ ·éœ€è¦æ³¨æ„ï¼Œé»˜è®¤æƒ…å†µä¸‹ Charles å¹¶ä¸åšæˆªå–ï¼Œä½ è¿˜éœ€è¦åœ¨è¦æˆªå–çš„ç½‘ç»œè¯·æ±‚ä¸Šå³å‡»ï¼Œé€‰æ‹© SSL proxy èœå•é¡¹ã€‚</p>
<h2 id="æ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œ"><a href="#æ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œ" class="headerlink" title="æ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œ"></a>æ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œ</h2><p>åœ¨åšç§»åŠ¨å¼€å‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦æ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œæˆ–è€…é«˜å»¶è¿Ÿçš„ç½‘ç»œï¼Œä»¥æµ‹è¯•åœ¨ç§»åŠ¨ç½‘ç»œä¸‹ï¼Œåº”ç”¨çš„è¡¨ç°æ˜¯å¦æ­£å¸¸ã€‚Charles å¯¹æ­¤éœ€æ±‚æä¾›äº†å¾ˆå¥½çš„æ”¯æŒã€‚</p>
<p>åœ¨ Charles çš„èœå•ä¸Šï¼Œé€‰æ‹© â€œProxyâ€-&gt;â€Throttle Settingâ€ é¡¹ï¼Œåœ¨ä¹‹åå¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‹¾é€‰ä¸Š â€œEnable Throttlingâ€ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½® Throttle Preset çš„ç±»å‹ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬åªæƒ³æ¨¡æ‹ŸæŒ‡å®šç½‘ç«™çš„æ…¢é€Ÿç½‘ç»œï¼Œå¯ä»¥å†å‹¾é€‰ä¸Šå›¾ä¸­çš„ â€œOnly for selected hostsâ€ é¡¹ï¼Œç„¶ååœ¨å¯¹è¯æ¡†çš„ä¸‹åŠéƒ¨åˆ†è®¾ç½®ä¸­å¢åŠ æŒ‡å®šçš„ hosts é¡¹å³å¯ã€‚</p>
<h2 id="ä¿®æ”¹ç½‘ç»œè¯·æ±‚å†…å®¹"><a href="#ä¿®æ”¹ç½‘ç»œè¯·æ±‚å†…å®¹" class="headerlink" title="ä¿®æ”¹ç½‘ç»œè¯·æ±‚å†…å®¹"></a>ä¿®æ”¹ç½‘ç»œè¯·æ±‚å†…å®¹</h2><p>æœ‰äº›æ—¶å€™ä¸ºäº†è°ƒè¯•æœåŠ¡å™¨çš„æ¥å£ï¼Œæˆ‘ä»¬éœ€è¦åå¤å°è¯•ä¸åŒå‚æ•°çš„ç½‘ç»œè¯·æ±‚ã€‚Charles å¯ä»¥æ–¹ä¾¿åœ°æä¾›ç½‘ç»œè¯·æ±‚çš„ä¿®æ”¹å’Œé‡å‘åŠŸèƒ½ã€‚åªéœ€è¦åœ¨ä»¥å¾€çš„ç½‘ç»œè¯·æ±‚ä¸Šç‚¹å‡»å³é”®ï¼Œé€‰æ‹© â€œEditâ€ï¼Œå³å¯åˆ›å»ºä¸€ä¸ªå¯ç¼–è¾‘çš„ç½‘ç»œè¯·æ±‚ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>æˆ‘ä»¬å¯ä»¥ä¿®æ”¹è¯¥è¯·æ±‚çš„ä»»ä½•ä¿¡æ¯ï¼ŒåŒ…æ‹¬ URL åœ°å€ã€ç«¯å£ã€å‚æ•°ç­‰ï¼Œä¹‹åç‚¹å‡» â€œExecuteâ€ å³å¯å‘é€è¯¥ä¿®æ”¹åçš„ç½‘ç»œè¯·æ±‚ã€‚Charles æ”¯æŒæˆ‘ä»¬å¤šæ¬¡ä¿®æ”¹å’Œå‘é€è¯¥è¯·æ±‚ï¼Œè¿™å¯¹äºæˆ‘ä»¬å’ŒæœåŠ¡å™¨ç«¯è°ƒè¯•æ¥å£éå¸¸æ–¹ä¾¿ã€‚</p>
<h2 id="ç»™æœåŠ¡å™¨åšå‹åŠ›æµ‹è¯•"><a href="#ç»™æœåŠ¡å™¨åšå‹åŠ›æµ‹è¯•" class="headerlink" title="ç»™æœåŠ¡å™¨åšå‹åŠ›æµ‹è¯•"></a>ç»™æœåŠ¡å™¨åšå‹åŠ›æµ‹è¯•</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Charles çš„ Repeat åŠŸèƒ½æ¥ç®€å•åœ°æµ‹è¯•æœåŠ¡å™¨çš„å¹¶å‘å¤„ç†èƒ½åŠ›ï¼Œæ–¹æ³•å¦‚ä¸‹ã€‚</p>
<p>æˆ‘ä»¬åœ¨æƒ³æ‰“å‹çš„ç½‘ç»œè¯·æ±‚ä¸Šï¼ˆPOST æˆ– GET è¯·æ±‚å‡å¯ï¼‰å³å‡»ï¼Œç„¶åé€‰æ‹© ã€ŒRepeat Advancedã€èœå•é¡¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>æ¥ç€æˆ‘ä»¬å°±å¯ä»¥åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­ï¼Œé€‰æ‹©æ‰“å‹çš„å¹¶å‘çº¿ç¨‹æ•°ä»¥åŠæ‰“å‹æ¬¡æ•°ï¼Œç¡®å®šä¹‹åï¼Œå³å¯å¼€å§‹æ‰“å‹ã€‚</p>
<p>æ‚„æ‚„è¯´ä¸€å¥ï¼Œä¸€äº›å†™å¾—å¾ˆå¼±çš„æŠ•ç¥¨ç½‘ç«™ï¼Œä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªåŠæ³•æ¥å¿«é€ŸæŠ•ç¥¨ã€‚å½“ç„¶ï¼Œæˆ‘ä¹Ÿæ‹¿ Charles çš„ Repeat åŠŸèƒ½ç»™ä¸€äº›è¯ˆéª—çš„é’“é±¼ç½‘ç«™å–‚äº†ä¸å°‘åƒåœ¾æ•°æ®ï¼Œä¸Šæ¬¡ä¸å°å¿ƒè¿˜æŠŠä¸€ä¸ªé’“é±¼ç½‘ç«™çš„æ•°æ®åº“æ‰“æŒ‚äº†ï¼Œå—¯ï¼Œè¯·å«æˆ‘é›·é”‹ã€‚</p>
<h2 id="ä¿®æ”¹æœåŠ¡å™¨è¿”å›å†…å®¹"><a href="#ä¿®æ”¹æœåŠ¡å™¨è¿”å›å†…å®¹" class="headerlink" title="ä¿®æ”¹æœåŠ¡å™¨è¿”å›å†…å®¹"></a>ä¿®æ”¹æœåŠ¡å™¨è¿”å›å†…å®¹</h2><p>æœ‰äº›æ—¶å€™æˆ‘ä»¬æƒ³è®©æœåŠ¡å™¨è¿”å›ä¸€äº›æŒ‡å®šçš„å†…å®¹ï¼Œæ–¹ä¾¿æˆ‘ä»¬è°ƒè¯•ä¸€äº›ç‰¹æ®Šæƒ…å†µã€‚ä¾‹å¦‚åˆ—è¡¨é¡µé¢ä¸ºç©ºçš„æƒ…å†µï¼Œæ•°æ®å¼‚å¸¸çš„æƒ…å†µï¼Œéƒ¨åˆ†è€—æ—¶çš„ç½‘ç»œè¯·æ±‚è¶…æ—¶çš„æƒ…å†µç­‰ã€‚å¦‚æœæ²¡æœ‰ Charlesï¼Œè¦æœåŠ¡å™¨é…åˆæ„é€ ç›¸åº”çš„æ•°æ®æ˜¾å¾—ä¼šæ¯”è¾ƒéº»çƒ¦ã€‚è¿™ä¸ªæ—¶å€™ï¼Œä½¿ç”¨ Charles ç›¸å…³çš„åŠŸèƒ½å°±å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚</p>
<p>æ ¹æ®å…·ä½“çš„éœ€æ±‚ï¼ŒCharles æä¾›äº† Map åŠŸèƒ½ã€ Rewrite åŠŸèƒ½ä»¥åŠ Breakpoints åŠŸèƒ½ï¼Œéƒ½å¯ä»¥è¾¾åˆ°ä¿®æ”¹æœåŠ¡å™¨è¿”å›å†…å®¹çš„ç›®çš„ã€‚è¿™ä¸‰è€…åœ¨åŠŸèƒ½ä¸Šçš„å·®å¼‚æ˜¯ï¼š</p>
<ol>
<li>Map åŠŸèƒ½é€‚åˆé•¿æœŸåœ°å°†æŸä¸€äº›è¯·æ±‚é‡å®šå‘åˆ°å¦ä¸€ä¸ªç½‘ç»œåœ°å€æˆ–æœ¬åœ°æ–‡ä»¶ã€‚</li>
<li>Rewrite åŠŸèƒ½é€‚åˆå¯¹ç½‘ç»œè¯·æ±‚è¿›è¡Œä¸€äº›æ­£åˆ™æ›¿æ¢ã€‚</li>
<li>Breakpoints åŠŸèƒ½é€‚åˆåšä¸€äº›ä¸´æ—¶æ€§çš„ä¿®æ”¹ã€‚</li>
</ol>
<h3 id="Map-åŠŸèƒ½"><a href="#Map-åŠŸèƒ½" class="headerlink" title="Map åŠŸèƒ½"></a>Map åŠŸèƒ½</h3><p>Charles çš„ Map åŠŸèƒ½åˆ† Map Remote å’Œ Map Local ä¸¤ç§ï¼Œé¡¾åæ€ä¹‰ï¼ŒMap Remote æ˜¯å°†æŒ‡å®šçš„ç½‘ç»œè¯·æ±‚é‡å®šå‘åˆ°å¦ä¸€ä¸ªç½‘å€è¯·æ±‚åœ°å€ï¼ŒMap Local æ˜¯å°†æŒ‡å®šçš„ç½‘ç»œè¯·æ±‚é‡å®šå‘åˆ°æœ¬åœ°æ–‡ä»¶ã€‚</p>
<p>åœ¨ Charles çš„èœå•ä¸­ï¼Œé€‰æ‹© â€œToolsâ€-&gt;â€Map Remoteâ€ æˆ– â€œMap Localâ€ å³å¯è¿›å…¥åˆ°ç›¸åº”åŠŸèƒ½çš„è®¾ç½®é¡µé¢ã€‚</p>
<p>å¯¹äº Map Remote åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦åˆ†åˆ«å¡«å†™ç½‘ç»œé‡å®šå‘çš„æºåœ°å€å’Œç›®çš„åœ°å€ï¼Œå¯¹äºä¸éœ€è¦é™åˆ¶çš„æ¡ä»¶ï¼Œå¯ä»¥ç•™ç©ºã€‚ä¸‹å›¾æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œæˆ‘å°†æ‰€æœ‰ <code>ytk1.yuanku.ws</code>ï¼ˆæµ‹è¯•æœåŠ¡å™¨ï¼‰çš„è¯·æ±‚é‡å®šå‘åˆ°äº† <code>www.yuantiku.com</code>ï¼ˆçº¿ä¸ŠæœåŠ¡å™¨ï¼‰ã€‚</p>
<p>å¯¹äº Map Local åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦å¡«å†™çš„é‡å®šå‘çš„æºåœ°å€å’Œæœ¬åœ°çš„ç›®æ ‡æ–‡ä»¶ã€‚å¯¹äºæœ‰ä¸€äº›å¤æ‚çš„ç½‘ç»œè¯·æ±‚ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥å…ˆä½¿ç”¨ Charles æä¾›çš„ â€œSave Responseâ€¦â€ åŠŸèƒ½ï¼Œå°†è¯·æ±‚ç»“æœä¿å­˜åˆ°æœ¬åœ°ï¼Œç„¶åç¨åŠ ä¿®æ”¹ï¼Œæˆä¸ºæˆ‘ä»¬çš„ç›®æ ‡æ˜ å°„æ–‡ä»¶ã€‚</p>
<p>ä¸‹å›¾æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œæˆ‘å°†ä¸€ä¸ªæŒ‡å®šçš„ç½‘ç»œè¯·æ±‚é€šè¿‡ Map Local åŠŸèƒ½æ˜ å°„åˆ°äº†æœ¬åœ°çš„ä¸€ä¸ªç»è¿‡ä¿®æ”¹çš„æ–‡ä»¶ä¸­ã€‚</p>
<p>Map Local åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæœ‰ä¸€ä¸ªæ½œåœ¨çš„é—®é¢˜ï¼Œå°±æ˜¯å…¶è¿”å›çš„ Http Response Header ä¸æ­£å¸¸çš„è¯·æ±‚å¹¶ä¸ä¸€æ ·ã€‚è¿™ä¸ªæ—¶å€™å¦‚æœå®¢æˆ·ç«¯æ ¡éªŒäº† Http Response Header ä¸­çš„éƒ¨åˆ†å†…å®¹ï¼Œå°±ä¼šä½¿å¾—è¯¥åŠŸèƒ½å¤±æ•ˆã€‚è§£å†³åŠæ³•æ˜¯åŒæ—¶ä½¿ç”¨ Map Local ä»¥ä¸‹é¢æåˆ°çš„ Rewrite åŠŸèƒ½ï¼Œå°†ç›¸å…³çš„ Http å¤´ Rewrite æˆæˆ‘ä»¬å¸Œæœ›çš„å†…å®¹ã€‚</p>
<h3 id="Rewrite-åŠŸèƒ½"><a href="#Rewrite-åŠŸèƒ½" class="headerlink" title="Rewrite åŠŸèƒ½"></a>Rewrite åŠŸèƒ½</h3><p>Rewrite åŠŸèƒ½åŠŸèƒ½é€‚åˆå¯¹æŸä¸€ç±»ç½‘ç»œè¯·æ±‚è¿›è¡Œä¸€äº›æ­£åˆ™æ›¿æ¢ï¼Œä»¥è¾¾åˆ°ä¿®æ”¹ç»“æœçš„ç›®çš„ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬çš„å®¢æˆ·ç«¯æœ‰ä¸€ä¸ª API è¯·æ±‚æ˜¯è·å¾—ç”¨æˆ·æ˜µç§°ï¼Œè€Œæˆ‘å½“å‰çš„æ˜µç§°æ˜¯ â€œtangqiaoboyâ€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>æˆ‘ä»¬æƒ³è¯•ç€ç›´æ¥ä¿®æ”¹ç½‘ç»œè¿”å›å€¼ï¼Œå°† tangqiaoboy æ¢æˆæˆ iosboyã€‚äºæ˜¯æˆ‘ä»¬å¯ç”¨ Rewrite åŠŸèƒ½ï¼Œç„¶åè®¾ç½®å¦‚ä¸‹çš„è§„åˆ™ï¼š</p>
<p>å®Œæˆè®¾ç½®ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä» Charles ä¸­çœ‹åˆ°ï¼Œä¹‹åçš„ API è·å¾—çš„æ˜µç§°è¢«è‡ªåŠ¨ Rewrite æˆäº† iosboyã€‚</p>
<h3 id="Breakpoints-åŠŸèƒ½"><a href="#Breakpoints-åŠŸèƒ½" class="headerlink" title="Breakpoints åŠŸèƒ½"></a>Breakpoints åŠŸèƒ½</h3><p>ä¸Šé¢æä¾›çš„ Rewrite åŠŸèƒ½æœ€é€‚åˆåšæ‰¹é‡å’Œé•¿æœŸçš„æ›¿æ¢ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬åªæ˜¯æƒ³ä¸´æ—¶ä¿®æ”¹ä¸€æ¬¡ç½‘ç»œè¯·æ±‚ç»“æœï¼Œè¿™ä¸ªæ—¶å€™ï¼Œä½¿ç”¨ Rewrite åŠŸèƒ½è™½ç„¶ä¹Ÿå¯ä»¥è¾¾åˆ°ç›®çš„ï¼Œä½†æ˜¯è¿‡äºéº»çƒ¦ï¼Œå¯¹äºä¸´æ—¶æ€§çš„ä¿®æ”¹ï¼Œæˆ‘ä»¬æœ€å¥½ä½¿ç”¨ Breakpoints åŠŸèƒ½ã€‚</p>
<p>Breakpoints åŠŸèƒ½ç±»ä¼¼æˆ‘ä»¬åœ¨ Xcode ä¸­è®¾ç½®çš„æ–­ç‚¹ä¸€æ ·ï¼Œå½“æŒ‡å®šçš„ç½‘ç»œè¯·æ±‚å‘ç”Ÿæ—¶ï¼ŒCharles ä¼šæˆªè·è¯¥è¯·æ±‚ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Charles ä¸­ä¸´æ—¶ä¿®æ”¹ç½‘ç»œè¯·æ±‚çš„è¿”å›å†…å®¹ã€‚</p>
<p>ä¸‹å›¾æ˜¯æˆ‘ä»¬ä¸´æ—¶ä¿®æ”¹è·å–ç”¨æˆ·ä¿¡æ¯çš„ APIï¼Œå°†ç”¨æˆ·çš„æ˜µç§°è¿›è¡Œäº†æ›´æ”¹ï¼Œä¿®æ”¹å®Œæˆåç‚¹å‡» â€œExecuteâ€ åˆ™å¯ä»¥è®©ç½‘ç»œè¯·æ±‚ç»§ç»­è¿›è¡Œã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ Breakpoints åŠŸèƒ½å°†ç½‘ç»œè¯·æ±‚æˆªè·å¹¶ä¿®æ”¹è¿‡ç¨‹ä¸­ï¼Œæ•´ä¸ªç½‘ç»œè¯·æ±‚çš„è®¡æ—¶å¹¶ä¸ä¼šæš‚åœï¼Œæ‰€ä»¥é•¿æ—¶é—´çš„æš‚åœå¯èƒ½å¯¼è‡´å®¢æˆ·ç«¯çš„è¯·æ±‚è¶…æ—¶ã€‚</p>
<h2 id="åå‘ä»£ç†"><a href="#åå‘ä»£ç†" class="headerlink" title="åå‘ä»£ç†"></a>åå‘ä»£ç†</h2><p>Charles çš„åå‘ä»£ç†åŠŸèƒ½å…è®¸æˆ‘ä»¬å°†æœ¬åœ°çš„ç«¯å£æ˜ å°„åˆ°è¿œç¨‹çš„å¦ä¸€ä¸ªç«¯å£ä¸Šã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹å›¾ä¸­ï¼Œæˆ‘å°†æœ¬æœºçš„ 61234 ç«¯å£æ˜ å°„åˆ°äº†è¿œç¨‹ï¼ˆwww.yuantiku.comï¼‰çš„80ç«¯å£ä¸Šäº†ã€‚è¿™æ ·ï¼Œå½“æˆ‘è®¿é—®æœ¬åœ°çš„ 61234 ç«¯å£æ—¶ï¼Œå®é™…è¿”å›çš„å†…å®¹ä¼šç”± www.yuantiku.com çš„ 80 ç«¯å£æä¾›ã€‚</p>
<h2 id="è®¾ç½®å¤–éƒ¨ä»£ç†ï¼Œè§£å†³ä¸ç¿»å¢™è½¯ä»¶çš„å†²çª"><a href="#è®¾ç½®å¤–éƒ¨ä»£ç†ï¼Œè§£å†³ä¸ç¿»å¢™è½¯ä»¶çš„å†²çª" class="headerlink" title="è®¾ç½®å¤–éƒ¨ä»£ç†ï¼Œè§£å†³ä¸ç¿»å¢™è½¯ä»¶çš„å†²çª"></a>è®¾ç½®å¤–éƒ¨ä»£ç†ï¼Œè§£å†³ä¸ç¿»å¢™è½¯ä»¶çš„å†²çª</h2><p>Charles çš„åŸç†æ˜¯æŠŠè‡ªå·±è®¾ç½®æˆç³»ç»Ÿçš„ä»£ç†æœåŠ¡å™¨ï¼Œä½†æ˜¯åœ¨ä¸­å›½ï¼Œç”±äºå·¥ä½œéœ€è¦ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦ä½¿ç”¨ Google æœç´¢ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†ç¨‹åºå‘˜éƒ½æœ‰è‡ªå·±çš„ç¿»å¢™è½¯ä»¶ï¼Œè€Œè¿™äº›è½¯ä»¶çš„åŸºæœ¬åŸç†ï¼Œä¹Ÿæ˜¯æŠŠè‡ªå·±è®¾ç½®æˆç³»ç»Ÿçš„ä»£ç†æœåŠ¡å™¨ï¼Œæ¥åšåˆ°é€æ˜çš„ç¿»å¢™ã€‚</p>
<p>ä¸ºäº†ä½¿å¾—ä¸¤è€…èƒ½å¤Ÿå’Œå¹³å…±å¤„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Charles çš„ <code>External Proxy Settings</code> ä¸­ï¼Œè®¾ç½®ç¿»å¢™çš„ä»£ç†ç«¯å£ä»¥åŠç›¸å…³ä¿¡æ¯ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿè¦å…³é—­ç›¸å…³ç¿»å¢™è½¯ä»¶çš„è‡ªåŠ¨è®¾ç½®ï¼Œä½¿å…¶ä¸ä¸»åŠ¨ä¿®æ”¹ç³»ç»Ÿä»£ç†ï¼Œé¿å… Charles å¤±æ•ˆã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡ Charles è½¯ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆªå–å’Œè°ƒè¯•ç½‘ç»œè¯·æ±‚å†…å®¹ï¼Œåˆ†æå°åŒ…åè®®ä»¥åŠæ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œã€‚ç”¨å¥½ Charles å¯ä»¥æå¤§çš„æ–¹ä¾¿æˆ‘ä»¬å¯¹äºå¸¦æœ‰ç½‘ç»œè¯·æ±‚çš„ App çš„å¼€å‘å’Œè°ƒè¯•ã€‚</p>
<p>æ„¿æœ¬æ–‡å¸®åŠ©å¤§å®¶æˆä¸º Charles çš„ä¸“å®¶ï¼Œç¥å¤§å®¶ç©å¾—å¼€å¿ƒï½</p>
<p>è½¬è½½è‡ªï¼š<a href="http://blog.devtang.com/2015/11/14/charles-introduction/" target="_blank" rel="external">http://blog.devtang.com/2015/11/14/charles-introduction/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;http://www.charlesproxy.com/&quot;&gt;Charles&lt;/a&gt; æ˜¯åœ¨ Mac ä¸‹å¸¸ç”¨çš„ç½‘ç»œå°åŒ…æˆªå–å·¥å…·ï¼Œåœ¨åšç§»åŠ¨å¼€å‘æ—¶ï¼Œæˆ‘ä»¬ä¸ºäº†è°ƒè¯•ä¸æœåŠ¡å™¨ç«¯çš„ç½‘ç»œé€šè®¯åè®®ï¼Œå¸¸å¸¸éœ€è¦æˆªå–ç½‘ç»œå°åŒ…æ¥åˆ†æã€‚&lt;/p&gt;
&lt;p&gt;Charles é€šè¿‡å°†è‡ªå·±è®¾ç½®æˆç³»ç»Ÿçš„ç½‘ç»œè®¿é—®ä»£ç†æœåŠ¡å™¨ï¼Œä½¿å¾—æ‰€æœ‰çš„ç½‘ç»œè®¿é—®è¯·æ±‚éƒ½é€šè¿‡å®ƒæ¥å®Œæˆï¼Œä»è€Œå®ç°äº†ç½‘ç»œå°åŒ…çš„æˆªå–å’Œåˆ†æã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº†åœ¨åšç§»åŠ¨å¼€å‘ä¸­è°ƒè¯•ç«¯å£å¤–ï¼ŒCharles ä¹Ÿå¯ä»¥ç”¨äºåˆ†æç¬¬ä¸‰æ–¹åº”ç”¨çš„é€šè®¯åè®®ã€‚é…åˆ Charles çš„ SSL åŠŸèƒ½ï¼ŒCharles è¿˜å¯ä»¥åˆ†æ Https åè®®ã€‚&lt;/p&gt;
&lt;p&gt;Charles æ˜¯æ”¶è´¹è½¯ä»¶ï¼Œå¯ä»¥å…è´¹è¯•ç”¨ 30 å¤©ã€‚è¯•ç”¨æœŸè¿‡åï¼Œæœªä»˜è´¹çš„ç”¨æˆ·ä»ç„¶å¯ä»¥ç»§ç»­ä½¿ç”¨ï¼Œä½†æ˜¯æ¯æ¬¡ä½¿ç”¨æ—¶é—´ä¸èƒ½è¶…è¿‡ 30 åˆ†é’Ÿï¼Œå¹¶ä¸”å¯åŠ¨æ—¶å°†ä¼šæœ‰ 10 ç§’ç§çš„å»¶æ—¶ã€‚å› æ­¤ï¼Œè¯¥ä»˜è´¹æ–¹æ¡ˆå¯¹å¹¿å¤§ç”¨æˆ·è¿˜æ˜¯ç›¸å½“å‹å¥½çš„ï¼Œå³ä½¿ä½ é•¿æœŸä¸ä»˜è´¹ï¼Œä¹Ÿèƒ½ä½¿ç”¨å®Œæ•´çš„è½¯ä»¶åŠŸèƒ½ã€‚åªæ˜¯å½“ä½ éœ€è¦é•¿æ—¶é—´è¿›è¡Œå°åŒ…è°ƒè¯•æ—¶ï¼Œä¼šå› ä¸º Charles å¼ºåˆ¶å…³é—­è€Œé‡åˆ°å½±å“ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ç½‘ç»œé€šè®¯" scheme="http://yoursite.com/categories/%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF/"/>
    
    
      <category term="HTTP" scheme="http://yoursite.com/tags/HTTP/"/>
    
      <category term="æˆªå–å°åŒ…" scheme="http://yoursite.com/tags/%E6%88%AA%E5%8F%96%E5%B0%81%E5%8C%85/"/>
    
      <category term="HTTPè¯·æ±‚" scheme="http://yoursite.com/tags/HTTP%E8%AF%B7%E6%B1%82/"/>
    
      <category term="HTTPå“åº”" scheme="http://yoursite.com/tags/HTTP%E5%93%8D%E5%BA%94/"/>
    
      <category term="ç½‘ç»œé€šè®¯" scheme="http://yoursite.com/tags/%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF/"/>
    
  </entry>
  
  <entry>
    <title>HTTPåè®® - DNSè§£æ</title>
    <link href="http://yoursite.com/2016/08/19/DNS%E8%A7%A3%E6%9E%90/"/>
    <id>http://yoursite.com/2016/08/19/DNSè§£æ/</id>
    <published>2016-08-18T20:44:00.000Z</published>
    <updated>2016-09-14T01:29:29.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="DNSåŸŸåç³»ç»Ÿ"><a href="#DNSåŸŸåç³»ç»Ÿ" class="headerlink" title="DNSåŸŸåç³»ç»Ÿ"></a>DNSåŸŸåç³»ç»Ÿ</h3><p>åŸŸåç³»ç»Ÿï¼ˆè‹±æ–‡ï¼šDomain Name Systemï¼Œç¼©å†™ï¼šDNSï¼‰æ˜¯å› ç‰¹ç½‘çš„ä¸€é¡¹æœåŠ¡ã€‚å®ƒä½œä¸ºå°†åŸŸåå’ŒIPåœ°å€ç›¸äº’æ˜ å°„çš„ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œèƒ½å¤Ÿä½¿äººæ›´æ–¹ä¾¿åœ°è®¿é—®äº’è”ç½‘ã€‚DNSä½¿ç”¨TCPå’ŒUDPç«¯å£53ã€‚å½“å‰ï¼Œå¯¹äºæ¯ä¸€çº§åŸŸåé•¿åº¦çš„é™åˆ¶æ˜¯63ä¸ªå­—ç¬¦ï¼ŒåŸŸåæ€»é•¿åº¦åˆ™ä¸èƒ½è¶…è¿‡253ä¸ªå­—ç¬¦ã€‚å¦‚æœè¦äº†è§£DNSï¼Œé¦–å…ˆè¦äº†è§£ä¸€ä¸‹å‡ ä¸ªæ¦‚å¿µï¼š</p>
<h4 id="æ ¹åŸŸ"><a href="#æ ¹åŸŸ" class="headerlink" title="æ ¹åŸŸ"></a>æ ¹åŸŸ</h4><p>æ ¹åŸŸåæœåŠ¡å™¨ï¼ˆè‹±è¯­ï¼šroot name serverï¼‰æ˜¯äº’è”ç½‘åŸŸåè§£æç³»ç»Ÿï¼ˆDNSï¼‰ä¸­æœ€é«˜çº§åˆ«çš„åŸŸåæœåŠ¡å™¨ï¼Œè´Ÿè´£è¿”å›é¡¶çº§åŸŸåçš„æƒå¨åŸŸåæœåŠ¡å™¨çš„åœ°å€ã€‚æˆªè‡³2014å¹´10æœˆï¼Œå…¨çƒæœ‰504å°æ ¹æœåŠ¡å™¨ï¼Œè¢«ç¼–å·ä¸ºAåˆ°Må…±13ä¸ªæ ‡å·ã€‚ç¼–å·ç›¸åŒçš„æ ¹æœåŠ¡å™¨ä½¿ç”¨åŒä¸€ä¸ªIPï¼Œ504å°æ ¹æœåŠ¡å™¨æ€»å…±åªä½¿ç”¨13ä¸ªIPã€‚</p>
<a id="more"></a>
<p>ä¸­å›½å¤§é™†åœ¨åŒ—äº¬æœ‰ä¸‰å°ç¼–å·ä¸ºLçš„é•œåƒï¼Œç¼–å·ä¸ºFã€Iã€Jçš„é•œåƒå„ä¸€å°ï¼Œå…±6å°ï¼›é¦™æ¸¯æœ‰ç¼–å·ä¸ºDã€Jçš„é•œåƒå„2å°ï¼Œç¼–å·ä¸ºAã€Fã€Iã€Lçš„é•œåƒå„ä¸€å°ï¼Œå…±8å°ï¼›å°æ¹¾åˆ™æœ‰ç¼–å·ä¸ºFã€Iã€Jå„ä¸€å°ï¼Œå…±3å°ã€‚</p>
<p>å…¨çƒ13ç»„æ ¹åŸŸåæœåŠ¡å™¨ä»¥è‹±æ–‡å­—æ¯Aåˆ°Mä¾åºå‘½åï¼ŒåŸŸåæ ¼å¼ä¸ºâ€œå­—æ¯.root-servers.orgâ€ã€‚å…¶ä¸­æœ‰11ä¸ªæ˜¯ä»¥<strong>ä»»æ’­</strong>æŠ€æœ¯åœ¨å…¨çƒå¤šä¸ªåœ°ç‚¹è®¾ç«‹é•œåƒç«™ã€‚</p>
<h4 id="é¡¶çº§åŸŸ"><a href="#é¡¶çº§åŸŸ" class="headerlink" title="é¡¶çº§åŸŸ"></a>é¡¶çº§åŸŸ</h4><p>æ ¹åŸŸä¸‹æ¥å°±æ˜¯é¡¶çº§åŸŸæˆ–è€…å«ä¸€çº§åŸŸï¼Œä¸€ç§äº’è”ç½‘åˆšå…´èµ·æ—¶çš„æŒ‰ç…§è¡Œä¸šæ€§è´¨åˆ’åˆ†çš„ <code>.com</code> <code>.net</code> ç­‰é€šç”¨é¡¶çº§åŸŸï¼Œä¸€ç§æ˜¯æŒ‰å›½å®¶åˆ’åˆ†çš„å¦‚ <code>.cn</code> <code>.jp</code> ç­‰å›½å®¶å’Œåœ°åŒºé¡¶çº§åŸŸï¼Œæ¯ä¸ªåŸŸéƒ½ä¼šæœ‰åŸŸåæœåŠ¡å™¨ï¼Œä¹Ÿå«æƒå¨åŸŸåæœåŠ¡å™¨ã€‚</p>
<p>ç›®å‰æ­£åœ¨ä½¿ç”¨çš„é€šç”¨é¡¶çº§åŸŸæœ‰ï¼š</p>
<blockquote>
<p>.com - ä¾›å•†ä¸šæœºæ„ä½¿ç”¨ï¼Œä½†æ— é™åˆ¶<br>.info - ä¾›èµ„è®¯æ€§ç½‘ç«™ä½¿ç”¨ï¼Œä½†æ— é™åˆ¶<br>.net - åŸä¾›ç½‘ç»œæœåŠ¡ä¾›åº”å•†ä½¿ç”¨ï¼Œç°æ— é™åˆ¶<br>.org - åŸä¾›ä¸å±äºå…¶ä»–é€šç”¨é¡¶çº§åŸŸç±»åˆ«çš„ç»„ç»‡ä½¿ç”¨ï¼Œç°æ— é™åˆ¶<br>.biz - ä¾›å•†ä¸šä½¿ç”¨<br>.name - ä¾›å®¶åº­åŠä¸ªäººä½¿ç”¨<br>.pro - ä¾›éƒ¨åˆ†ä¸“ä¸šä½¿ç”¨<br>.aero - ä¾›èˆªç©ºè¿è¾“ä¸šä½¿ç”¨<br>.asia - ä¾›äºšå¤ªåœ°åŒºçš„å…¬å¸ã€ç»„ç»‡åŠä¸ªäººä½¿ç”¨<br>.cat - ä¾›åŠ æ³°ç½—å°¼äºšè¯­/æ–‡åŒ–ä½¿ç”¨<br>.coop - ä¾›è”åˆä¼š (cooperatives)ä½¿ç”¨<br>.edu - ä¾›æ•™è‚²æœºæ„ä½¿ç”¨<br>.gov - ä¾›ç¾å›½æ”¿åºœåŠå…¶å±ä¸‹æœºæ„ä½¿ç”¨<br>.int - ä¾›ç”±æ¡çº¦è€Œæˆç«‹çš„å›½é™…æ€§æœºæ„ä½¿ç”¨<br>.jobs - ä¾›æ±‚èŒç›¸å…³ç½‘ç«™ä½¿ç”¨<br>.mil - ä¾›ç¾å›½å†›äº‹æœºæ„ä½¿ç”¨<br>.mobi - ä¾›æ‰‹æç”µè¯ç­‰è£…ç½®ç½‘ç«™ä½¿ç”¨<br>.museum - ä¾›åšç‰©é¦†ä½¿ç”¨<br>.post - ä¾›é‚®æ”¿æœåŠ¡ä½¿ç”¨<br>.tel - ä¾›è¿æ¥ç”µè¯ç½‘ç»œä¸äº’è”ç½‘çš„æœåŠ¡ä½¿ç”¨<br>.travel - ä¾›æ—…è¡Œç¤¾ã€èˆªç©ºå…¬å¸ã€é…’åº—åŠæ—…æ¸¸åä¼šç­‰æœºæ„ä½¿ç”¨<br>.xxx - ä¾›è‰²æƒ…ç½‘ç«™ä½¿ç”¨</p>
</blockquote>
<p>ä¸¾ä¾‹æ¥è¯´ï¼Œ<code>baidu.com</code> å°±æ˜¯ä¸€ä¸ªé¡¶çº§åŸŸåï¼Œä½† <code>www.baidu.com</code> å´ä¸æ˜¯é¡¶çº§åŸŸåï¼Œå®ƒæ˜¯åœ¨ <code>baidu.com</code> è¿™ä¸ªé¡¶çº§åŸŸé‡Œçš„ä¸€å°å«åš <code>www</code> çš„ä¸»æœºã€‚</p>
<h4 id="åŸŸåæœåŠ¡å™¨"><a href="#åŸŸåæœåŠ¡å™¨" class="headerlink" title="åŸŸåæœåŠ¡å™¨"></a>åŸŸåæœåŠ¡å™¨</h4><p>èƒ½æä¾›åŸŸåè§£æçš„æœåŠ¡å™¨ï¼Œä¸Šé¢çš„è®°å½•ç±»å‹å¯ä»¥æ˜¯Aï¼ˆaddressï¼‰è®°å½•ï¼ŒNSè®°å½•ï¼ˆname serverï¼‰ï¼ŒMXï¼ˆmailï¼‰ï¼ŒCNAMEç­‰ã€‚</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>ä¸»æœºï¼ˆAï¼‰è®°å½•æ˜¯åç§°è§£æçš„é‡è¦è®°å½•ï¼Œå®ƒç”¨äºå°†ç‰¹å®šçš„ä¸»æœºåæ˜ å°„åˆ°å¯¹åº”ä¸»æœºçš„IPåœ°å€ä¸Šã€‚ä½ å¯ä»¥åœ¨DNSæœåŠ¡å™¨ä¸­æ‰‹åŠ¨åˆ›å»ºæˆ–é€šè¿‡DNSå®¢æˆ·ç«¯åŠ¨æ€æ›´æ–°æ¥åˆ›å»ºã€‚</td>
</tr>
<tr>
<td>CNAME</td>
<td>æ­¤è®°å½•ç”¨äºå°†æŸä¸ªåˆ«åæŒ‡å‘åˆ°æŸä¸ªä¸»æœºï¼ˆAï¼‰è®°å½•ä¸Šï¼Œä»è€Œæ— éœ€ä¸ºæŸä¸ªéœ€è¦æ–°åå­—è§£æçš„ä¸»æœºé¢å¤–åˆ›å»ºAè®°å½•ã€‚</td>
</tr>
<tr>
<td>MX</td>
<td>æ­¤è®°å½•åˆ—å‡ºäº†è´Ÿè´£æ¥æ”¶å‘åˆ°åŸŸä¸­çš„ç”µå­é‚®ä»¶çš„ä¸»æœº ï¼Œé€šå¸¸ç”¨äºé‚®ä»¶çš„æ”¶å‘ã€‚</td>
</tr>
<tr>
<td>NS</td>
<td>æ­¤è®°å½•æŒ‡å®šè´Ÿè´£æ­¤DNSåŒºåŸŸçš„æƒå¨åç§°æœåŠ¡å™¨ã€‚</td>
</tr>
</tbody>
</table>
<p>Aè®°å½•åˆç§°IPæŒ‡å‘ï¼Œç”¨æˆ·å¯ä»¥åœ¨æ­¤è®¾ç½®å­åŸŸåå¹¶æŒ‡å‘åˆ°è‡ªå·±çš„ç›®æ ‡ä¸»æœºåœ°å€ä¸Šï¼Œä»è€Œå®ç°é€šè¿‡åŸŸåæ‰¾åˆ°æœåŠ¡å™¨ã€‚æŒ‡å‘çš„ç›®æ ‡ä¸»æœºåœ°å€ç±»å‹åªèƒ½ä½¿ç”¨IPåœ°å€ï¼› </p>
<p>CNAME é€šå¸¸ç§°åˆ«åæŒ‡å‘ã€‚æ‚¨å¯ä»¥ä¸ºä¸€ä¸ªä¸»æœºè®¾ç½®åˆ«åã€‚æ¯”å¦‚è®¾ç½® <code>cname.parser.com</code>ï¼Œç”¨æ¥æŒ‡å‘ä¸€ä¸ªä¸»æœº <code>www.server.com</code> é‚£ä¹ˆä»¥åå°±å¯ä»¥ç”¨ <code>cname.parser.com</code> æ¥ä»£æ›¿è®¿é—® <code>www.server.com</code> äº†ã€‚</p>
<p><strong>CNAMEçš„ç›®æ ‡ä¸»æœºåœ°å€åªèƒ½ä½¿ç”¨ä¸»æœºåï¼Œä¸èƒ½ä½¿ç”¨IPåœ°å€ï¼›ä¸»æœºåå‰ä¸èƒ½æœ‰ä»»ä½•å…¶ä»–å‰ç¼€ï¼Œå¦‚ï¼š<code>http://</code> ç­‰æ˜¯ä¸è¢«å…è®¸çš„ï¼›Aè®°å½•ä¼˜å…ˆäºCNAMEè®°å½•ã€‚å³å¦‚æœä¸€ä¸ªä¸»æœºåœ°å€åŒæ—¶å­˜åœ¨Aè®°å½•å’ŒCNAMEè®°å½•ï¼Œåˆ™CNAMEè®°å½•ä¸ç”Ÿæ•ˆã€‚  </strong></p>
<p>MXè®°å½•æ˜¯æŒ‡é‚®ä»¶äº¤æ¢è®°å½•ã€‚ç”¨äºå°†ä»¥è¯¥åŸŸåä¸ºç»“å°¾çš„ç”µå­é‚®ä»¶æŒ‡å‘å¯¹åº”çš„é‚®ä»¶æœåŠ¡å™¨ä»¥è¿›è¡Œå¤„ç†ã€‚å¦‚ç”¨æˆ·æ‰€ç”¨çš„é‚®ä»¶æ˜¯ä»¥åŸŸåmail.comä¸ºç»“å°¾çš„ï¼Œåˆ™éœ€è¦åœ¨ç®¡ç†ç•Œé¢ä¸­æ·»åŠ è¯¥åŸŸåçš„MXè®°å½•æ¥å¤„ç†æ‰€æœ‰ä»¥@mail.comç»“å°¾çš„é‚®ä»¶ã€‚MXè®°å½•å¯ä»¥ä½¿ç”¨ä¸»æœºåæˆ–IPåœ°å€ã€‚</p>
<p>NSè®°å½•æ˜¯æŒ‡è§£ææœåŠ¡å™¨è®°å½•ã€‚ç”¨æ¥è¡¨æ˜ç”±å“ªå°æœåŠ¡å™¨å¯¹è¯¥åŸŸåè¿›è¡Œè§£æã€‚è¿™é‡Œçš„NSè®°å½•åªå¯¹å­åŸŸåç”Ÿæ•ˆã€‚</p>
<p>ä¾‹å¦‚ç”¨æˆ·å¸Œæœ›ç”± <code>12.34.56.78</code> è¿™å°æœåŠ¡å™¨è§£æ <code>news.mydomain.com</code> ï¼Œåˆ™éœ€è¦è®¾ç½® <code>news.mydomain.com</code> çš„NSè®°å½•ã€‚</p>
<h4 id="DNSè§£æè¿‡ç¨‹"><a href="#DNSè§£æè¿‡ç¨‹" class="headerlink" title="DNSè§£æè¿‡ç¨‹"></a>DNSè§£æè¿‡ç¨‹</h4><p>ä¸Šé¢è®²åˆ°äº’è”ç½‘éƒ½æ˜¯é€šè¿‡URLæ¥å‘å¸ƒå’Œè¯·æ±‚èµ„æºçš„ï¼Œè€ŒURLä¸­çš„åŸŸåéœ€è¦è§£ææˆIPåœ°å€æ‰èƒ½ä¸è¿œç¨‹ä¸»æœºå»ºç«‹è¿æ¥ï¼Œå¦‚ä½•å°†åŸŸåè§£ææˆIPåœ°å€å°±å±äºDNSè§£æçš„å·¥ä½œèŒƒç•´ï¼Œè¿™ä¸ªè¿‡ç¨‹å¤§ä½“å¤§ä½“ç”±ä¸€å¼ å›¾å¯ä»¥è¡¨ç¤ºï¼š</p>
<p><img src="http://ob2q6r0fn.bkt.clouddn.com/dnsjiexie.png" alt=""></p>
<p>ä»¥ <code>www.baidu.com</code> ä¸ºä¾‹ï¼Œç°åœ¨æˆ‘çš„è®¡ç®—æœºè¦å‘æœ¬åœ°DNSå‘èµ·è¯·æ±‚æŸ¥è¯¢ <code>www.baidu.com</code> è¿™ä¸ªåŸŸåäº†ï¼Œæœ¬åœ°DNSå¯èƒ½æ˜¯ISPæä¾›çš„ï¼Œä¹Ÿå¯èƒ½æ˜¯æˆ‘è‡ªå·±è®¾ç½®çš„ã€‚</p>
<p>å½“æœ¬åœ°DNSæ‹¿åˆ°è¯·æ±‚åï¼Œå…ˆæ£€æŸ¥ä¸€ä¸‹è‡ªå·±çš„ç¼“å­˜ä¸­æœ‰æ²¡æœ‰è¿™ä¸ªåœ°å€ï¼Œæœ‰çš„è¯å°±ç›´æ¥è¿”å›ã€‚è¿™ä¸ªæ—¶å€™æ‹¿åˆ°çš„ipåœ°å€ï¼Œä¼šè¢«æ ‡è®°ä¸º<strong>éæƒå¨æœåŠ¡å™¨çš„åº”ç­”</strong>ã€‚</p>
<p>å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰çš„è¯ï¼Œæœ¬åœ°DNSä¼šä»<strong>é…ç½®æ–‡ä»¶</strong>é‡Œé¢è¯»å–13ä¸ªæ ¹åŸŸåæœåŠ¡å™¨çš„åœ°å€ï¼Œç„¶åå‘å…¶ä¸­ä¸€å°å‘èµ·è¯·æ±‚ã€‚</p>
<p>æ ¹åŸŸåæœåŠ¡å™¨æ‹¿åˆ°è¿™ä¸ªè¯·æ±‚åï¼ŒçŸ¥é“ä»–æ˜¯com.è¿™ä¸ªé¡¶çº§åŸŸåä¸‹çš„ï¼Œæ‰€ä»¥å°±ä¼šè¿”å›comåŸŸä¸­çš„NSè®°å½•ï¼Œä¸€èˆ¬æ¥è¯´æ˜¯13å°ä¸»æœºåå’ŒIPã€‚</p>
<p>ç„¶åæœ¬åœ°DNSå‘å…¶ä¸­ä¸€å°å†æ¬¡å‘èµ·è¯·æ±‚ï¼Œcomé¡¶çº§åŸŸçš„æœåŠ¡å™¨å‘ç°è¿™ä¸ªè¯·æ±‚æ˜¯baidu.comè¿™ä¸ªåŸŸçš„ï¼Œæˆ‘ä¸€æŸ¥å‘ç°äº†è¿™ä¸ªåŸŸçš„NSï¼Œé‚£æˆ‘å°±è¿”å›ç»™ä½ ï¼Œä½ å†å»æŸ¥ã€‚</p>
<p>æœ¬åœ°DNSå†æ¬¡å‘baidu.comè¿™ä¸ªåŸŸçš„æƒå¨æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œbaidu.comæ”¶åˆ°ä¹‹åï¼ŒæŸ¥äº†ä¸‹æœ‰wwwçš„è¿™å°ä¸»æœºï¼Œå°±æŠŠè¿™ä¸ªIPè¿”å›ç»™æˆ‘äº†ï¼Œ</p>
<p>æœ€åæœ¬åœ°DNSæ‹¿åˆ°äº†ä¹‹åï¼Œå°†å…¶è¿”å›ç»™äº†å®¢æˆ·ç«¯ï¼Œå¹¶ä¸”æŠŠè¿™ä¸ªä¿å­˜åœ¨é«˜é€Ÿç¼“å­˜ä¸­ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬ç”¨Dinå·¥å…·æ¥çœ‹ä¸€äº›è¿™ä¸ªè¿‡ç¨‹ï¼š</p>
<p>åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ï¼š<code>dig +trace www.baidu.com</code> ã€‚</p>
<p>é¦–å…ˆæˆ‘çš„è®¡ç®—æœºæœ¬åœ°DNSè¯»å–äº†13ä¸ªæ ¹åŸŸï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">.			447119	IN	NS	m.root-servers.net.</div><div class="line">.			447119	IN	NS	d.root-servers.net.</div><div class="line">.			447119	IN	NS	b.root-servers.net.</div><div class="line">.			447119	IN	NS	e.root-servers.net.</div><div class="line">.			447119	IN	NS	c.root-servers.net.</div><div class="line">.			447119	IN	NS	k.root-servers.net.</div><div class="line">.			447119	IN	NS	g.root-servers.net.</div><div class="line">.			447119	IN	NS	h.root-servers.net.</div><div class="line">.			447119	IN	NS	j.root-servers.net.</div><div class="line">.			447119	IN	NS	a.root-servers.net.</div><div class="line">.			447119	IN	NS	f.root-servers.net.</div><div class="line">.			447119	IN	NS	i.root-servers.net.</div><div class="line">.			447119	IN	NS	l.root-servers.net.</div><div class="line">;; Received 228 bytes from 192.168.199.1#53(192.168.199.1) in 402 ms</div></pre></td></tr></table></figure>
<p>ç„¶åå‘å…¶ä¸­ä¸€ä¸ªæ ¹åŸŸå‘é€äº†è§£æè¯·æ±‚ï¼Œæ ¹åŸŸè¿”å›com.é¡¶çº§åŸŸçš„æœåŠ¡å™¨IPï¼ˆæœªæ˜¾ç¤ºï¼‰å’Œåç§°ï¼Œcom.åŸŸçš„ä¸€å°æœåŠ¡å™¨è¿”å›äº†baidu.comåŸŸçš„æœåŠ¡å™¨IPï¼ˆæœªæ˜¾ç¤ºï¼‰å’Œåç§°ï¼Œå‘ç™¾åº¦çš„é¡¶çº§åŸŸæœåŠ¡å™¨ <code>199.7.83.42</code> è¯·æ±‚ <code>www.baidu.com</code> ï¼Œå®ƒå‘ç°è¿™ä¸ªwwwçš„åˆ«åæ˜¯ <code>www.a.shifen.com</code>ï¼Œå’Œä¸¤ä¸ªä¸»æœºåœ°å€ <code>61.135.169.121 / 61.135.169.125</code> ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">www.baidu.com.		934	IN	CNAME	www.a.shifen.com.</div><div class="line">www.a.shifen.com.	62	IN	A	61.135.169.121</div><div class="line">www.a.shifen.com.	62	IN	A	61.135.169.125</div><div class="line">;; Received 90 bytes from 199.7.83.42#53(199.7.83.42) in 26 ms</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;DNSåŸŸåç³»ç»Ÿ&quot;&gt;&lt;a href=&quot;#DNSåŸŸåç³»ç»Ÿ&quot; class=&quot;headerlink&quot; title=&quot;DNSåŸŸåç³»ç»Ÿ&quot;&gt;&lt;/a&gt;DNSåŸŸåç³»ç»Ÿ&lt;/h3&gt;&lt;p&gt;åŸŸåç³»ç»Ÿï¼ˆè‹±æ–‡ï¼šDomain Name Systemï¼Œç¼©å†™ï¼šDNSï¼‰æ˜¯å› ç‰¹ç½‘çš„ä¸€é¡¹æœåŠ¡ã€‚å®ƒä½œä¸ºå°†åŸŸåå’ŒIPåœ°å€ç›¸äº’æ˜ å°„çš„ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œèƒ½å¤Ÿä½¿äººæ›´æ–¹ä¾¿åœ°è®¿é—®äº’è”ç½‘ã€‚DNSä½¿ç”¨TCPå’ŒUDPç«¯å£53ã€‚å½“å‰ï¼Œå¯¹äºæ¯ä¸€çº§åŸŸåé•¿åº¦çš„é™åˆ¶æ˜¯63ä¸ªå­—ç¬¦ï¼ŒåŸŸåæ€»é•¿åº¦åˆ™ä¸èƒ½è¶…è¿‡253ä¸ªå­—ç¬¦ã€‚å¦‚æœè¦äº†è§£DNSï¼Œé¦–å…ˆè¦äº†è§£ä¸€ä¸‹å‡ ä¸ªæ¦‚å¿µï¼š&lt;/p&gt;
&lt;h4 id=&quot;æ ¹åŸŸ&quot;&gt;&lt;a href=&quot;#æ ¹åŸŸ&quot; class=&quot;headerlink&quot; title=&quot;æ ¹åŸŸ&quot;&gt;&lt;/a&gt;æ ¹åŸŸ&lt;/h4&gt;&lt;p&gt;æ ¹åŸŸåæœåŠ¡å™¨ï¼ˆè‹±è¯­ï¼šroot name serverï¼‰æ˜¯äº’è”ç½‘åŸŸåè§£æç³»ç»Ÿï¼ˆDNSï¼‰ä¸­æœ€é«˜çº§åˆ«çš„åŸŸåæœåŠ¡å™¨ï¼Œè´Ÿè´£è¿”å›é¡¶çº§åŸŸåçš„æƒå¨åŸŸåæœåŠ¡å™¨çš„åœ°å€ã€‚æˆªè‡³2014å¹´10æœˆï¼Œå…¨çƒæœ‰504å°æ ¹æœåŠ¡å™¨ï¼Œè¢«ç¼–å·ä¸ºAåˆ°Må…±13ä¸ªæ ‡å·ã€‚ç¼–å·ç›¸åŒçš„æ ¹æœåŠ¡å™¨ä½¿ç”¨åŒä¸€ä¸ªIPï¼Œ504å°æ ¹æœåŠ¡å™¨æ€»å…±åªä½¿ç”¨13ä¸ªIPã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ç½‘ç»œé€šè®¯" scheme="http://yoursite.com/categories/%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF/"/>
    
    
      <category term="HTTP" scheme="http://yoursite.com/tags/HTTP/"/>
    
      <category term="DNS" scheme="http://yoursite.com/tags/DNS/"/>
    
      <category term="ç½‘ç»œé€šè®¯" scheme="http://yoursite.com/tags/%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF/"/>
    
  </entry>
  
  <entry>
    <title>HTTPè¯·æ±‚ - è¯·æ±‚æ–¹æ³•</title>
    <link href="http://yoursite.com/2016/08/18/HTTP%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95/"/>
    <id>http://yoursite.com/2016/08/18/HTTPè¯·æ±‚æ–¹æ³•/</id>
    <published>2016-08-17T20:44:00.000Z</published>
    <updated>2016-09-14T01:28:56.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ ¹æ®HTTPæ ‡å‡†ï¼ŒHTTPè¯·æ±‚å¯ä»¥ä½¿ç”¨å¤šç§è¯·æ±‚æ–¹æ³•ã€‚</p>
<p>HTTP1.0å®šä¹‰äº†ä¸‰ç§è¯·æ±‚æ–¹æ³•ï¼š GET, POSTå’ŒHEADæ–¹æ³•ã€‚</p>
<p>HTTP1.1æ–°å¢äº†äº”ç§è¯·æ±‚æ–¹æ³•ï¼šOPTIONS, PUT, DELETE, TRACEå’ŒCONNECTæ–¹æ³•ã€‚</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>è¯·æ±‚æŒ‡å®šçš„é¡µé¢ä¿¡æ¯ï¼Œå¹¶è¿”å›å®ä½“ä¸»ä½“ã€‚</td>
</tr>
<tr>
<td>HEAD</td>
<td>ç±»ä¼¼äºgetè¯·æ±‚ï¼Œåªä¸è¿‡è¿”å›çš„å“åº”ä¸­æ²¡æœ‰å…·ä½“çš„å†…å®¹ï¼Œç”¨äºè·å–æŠ¥å¤´ã€‚</td>
</tr>
<tr>
<td>POST</td>
<td>å‘æŒ‡å®šèµ„æºæäº¤æ•°æ®è¿›è¡Œå¤„ç†è¯·æ±‚ï¼Œå¦‚æäº¤è¡¨å•æˆ–è€…ä¸Šä¼ æ–‡ä»¶ã€‚æ•°æ®è¢«åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­ã€‚POSTè¯·æ±‚å¯èƒ½ä¼šå¯¼è‡´æ–°çš„èµ„æºçš„å»ºç«‹å’Œ/æˆ–å·²æœ‰èµ„æºçš„ä¿®æ”¹ã€‚</td>
</tr>
<tr>
<td>PUT</td>
<td>ä»å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ä¼ é€çš„æ•°æ®å–ä»£æŒ‡å®šçš„æ–‡æ¡£çš„å†…å®¹ã€‚</td>
</tr>
<tr>
<td>DELETE</td>
<td>è¯·æ±‚æœåŠ¡å™¨åˆ é™¤æŒ‡å®šçš„é¡µé¢ã€‚</td>
</tr>
<tr>
<td>CONNECT</td>
<td>HTTP/1.1åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨ã€‚</td>
</tr>
<tr>
<td>OPTIONS</td>
<td>å…è®¸å®¢æˆ·ç«¯æŸ¥çœ‹æœåŠ¡å™¨çš„æ€§èƒ½ã€‚</td>
</tr>
<tr>
<td>TRACE</td>
<td>è¯·æ±‚æœåŠ¡å™¨å›æ˜¾å…¶æ”¶åˆ°çš„è¯·æ±‚ä¿¡æ¯ï¼Œè¯¥æ–¹æ³•ä¸»è¦ç”¨äºHTTPè¯·æ±‚çš„æµ‹è¯•æˆ–è¯Šæ–­ã€‚</td>
</tr>
</tbody>
</table>
<a id="more"></a>
<p>åœ¨å®¢æˆ·æœºå’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œè¯·æ±‚-å“åº”æ—¶ï¼Œä¸¤ç§æœ€å¸¸è¢«ç”¨åˆ°çš„æ–¹æ³•æ˜¯ï¼šGET å’Œ POSTã€‚</p>
<ul>
<li><em>GET</em> - ä»æŒ‡å®šçš„èµ„æºè¯·æ±‚æ•°æ®ï¼›</li>
<li><em>POST</em> - å‘æŒ‡å®šçš„èµ„æºæäº¤è¦è¢«å¤„ç†çš„æ•°æ®ï¼›</li>
</ul>
<h4 id="getè¯·æ±‚æ–¹æ³•"><a href="#getè¯·æ±‚æ–¹æ³•" class="headerlink" title="getè¯·æ±‚æ–¹æ³•"></a>getè¯·æ±‚æ–¹æ³•</h4><p>æŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆåç§°/å€¼å¯¹ï¼‰æ˜¯åœ¨ GET è¯·æ±‚çš„ URL ä¸­å‘é€çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/test/demo_form.asp?name1=value1&amp;name2=value2</div></pre></td></tr></table></figure>
<p>æœ‰å…³ GET è¯·æ±‚çš„å…¶ä»–ä¸€äº›æ³¨é‡Šï¼š</p>
<ul>
<li>GET è¯·æ±‚å¯è¢«ç¼“å­˜</li>
<li>GET è¯·æ±‚ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•ä¸­</li>
<li>GET è¯·æ±‚å¯è¢«æ”¶è—ä¸ºä¹¦ç­¾</li>
<li>GET è¯·æ±‚ä¸åº”åœ¨å¤„ç†æ•æ„Ÿæ•°æ®æ—¶ä½¿ç”¨</li>
<li>GET è¯·æ±‚æœ‰é•¿åº¦é™åˆ¶</li>
<li>GET è¯·æ±‚åªåº”å½“ç”¨äºå–å›æ•°æ®</li>
</ul>
<h4 id="postè¯·æ±‚æ–¹æ³•"><a href="#postè¯·æ±‚æ–¹æ³•" class="headerlink" title="postè¯·æ±‚æ–¹æ³•"></a>postè¯·æ±‚æ–¹æ³•</h4><p>è¯·æ³¨æ„ï¼ŒæŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆåç§°/å€¼å¯¹ï¼‰æ˜¯åœ¨ POST è¯·æ±‚çš„ HTTP æ¶ˆæ¯ä¸»ä½“ä¸­å‘é€çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">POST /test/demo_form.asp HTTP/1.1</div><div class="line">Host: w3schools.com</div><div class="line">name1=value1&amp;name2=value2</div></pre></td></tr></table></figure>
<p>æœ‰å…³ POST è¯·æ±‚çš„å…¶ä»–ä¸€äº›æ³¨é‡Šï¼š</p>
<ul>
<li>POST è¯·æ±‚ä¸ä¼šè¢«ç¼“å­˜</li>
<li>POST è¯·æ±‚ä¸ä¼šä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•ä¸­</li>
<li>POST ä¸èƒ½è¢«æ”¶è—ä¸ºä¹¦ç­¾</li>
<li>POST è¯·æ±‚å¯¹æ•°æ®é•¿åº¦æ²¡æœ‰è¦æ±‚</li>
</ul>
<h4 id="postå’Œgetçš„åŒºåˆ«"><a href="#postå’Œgetçš„åŒºåˆ«" class="headerlink" title="postå’Œgetçš„åŒºåˆ«"></a>postå’Œgetçš„åŒºåˆ«</h4><table>
<thead>
<tr>
<th></th>
<th>GET</th>
<th>POST</th>
</tr>
</thead>
<tbody>
<tr>
<td>åˆ·æ–°</td>
<td>æ— å½±å“ã€‚</td>
<td>æ•°æ®ä¼šè¢«é‡æ–°æäº¤ã€‚</td>
</tr>
<tr>
<td>ä¹¦ç­¾</td>
<td>å¯æ”¶è—ä¸ºä¹¦ç­¾ã€‚</td>
<td>ä¸å¯æ”¶è—ä¸ºä¹¦ç­¾ã€‚</td>
</tr>
<tr>
<td>ç¼“å­˜</td>
<td>èƒ½è¢«ç¼“å­˜ã€‚</td>
<td>ä¸èƒ½ç¼“å­˜ã€‚</td>
</tr>
<tr>
<td>ä¼ è¾“</td>
<td>é€šè¿‡ç½‘å€å­—ç¬¦ä¸²ã€‚</td>
<td>é€šè¿‡äºŒè¿›åˆ¶æ•°æ®ã€‚</td>
</tr>
<tr>
<td>å†å²</td>
<td>å‚æ•°ä¿ç•™åœ¨æµè§ˆå™¨å†å²ä¸­ã€‚</td>
<td>å‚æ•°ä¸ä¼šä¿å­˜åœ¨æµè§ˆå™¨å†å²ä¸­ã€‚</td>
</tr>
<tr>
<td>é•¿åº¦</td>
<td>URL çš„æœ€å¤§é•¿åº¦æ˜¯ 2048 ä¸ªå­—ç¬¦ã€‚</td>
<td>ç†è®ºä¸Šæ— é™åˆ¶ã€‚</td>
</tr>
<tr>
<td>ç±»å‹</td>
<td>åªå…è®¸ ASCII å­—ç¬¦ã€‚</td>
<td>æ²¡æœ‰é™åˆ¶ã€‚ä¹Ÿå…è®¸äºŒè¿›åˆ¶æ•°æ®ã€‚</td>
</tr>
<tr>
<td>å®‰å…¨æ€§</td>
<td>è¾ƒå·®ï¼Œæ˜æ–‡å¯è§ã€‚</td>
<td>è¾ƒå¥½ï¼Œå‚æ•°ä¸ä¼šè¢«ä¿å­˜åœ¨æµè§ˆå™¨å†å²æˆ–webæœåŠ¡å™¨æ—¥å¿—ä¸­ã€‚</td>
</tr>
</tbody>
</table>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ ¹æ®HTTPæ ‡å‡†ï¼ŒHTTPè¯·æ±‚å¯ä»¥ä½¿ç”¨å¤šç§è¯·æ±‚æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;HTTP1.0å®šä¹‰äº†ä¸‰ç§è¯·æ±‚æ–¹æ³•ï¼š GET, POSTå’ŒHEADæ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;HTTP1.1æ–°å¢äº†äº”ç§è¯·æ±‚æ–¹æ³•ï¼šOPTIONS, PUT, DELETE, TRACEå’ŒCONNECTæ–¹æ³•ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–¹æ³•&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;GET&lt;/td&gt;
&lt;td&gt;è¯·æ±‚æŒ‡å®šçš„é¡µé¢ä¿¡æ¯ï¼Œå¹¶è¿”å›å®ä½“ä¸»ä½“ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HEAD&lt;/td&gt;
&lt;td&gt;ç±»ä¼¼äºgetè¯·æ±‚ï¼Œåªä¸è¿‡è¿”å›çš„å“åº”ä¸­æ²¡æœ‰å…·ä½“çš„å†…å®¹ï¼Œç”¨äºè·å–æŠ¥å¤´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;POST&lt;/td&gt;
&lt;td&gt;å‘æŒ‡å®šèµ„æºæäº¤æ•°æ®è¿›è¡Œå¤„ç†è¯·æ±‚ï¼Œå¦‚æäº¤è¡¨å•æˆ–è€…ä¸Šä¼ æ–‡ä»¶ã€‚æ•°æ®è¢«åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­ã€‚POSTè¯·æ±‚å¯èƒ½ä¼šå¯¼è‡´æ–°çš„èµ„æºçš„å»ºç«‹å’Œ/æˆ–å·²æœ‰èµ„æºçš„ä¿®æ”¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PUT&lt;/td&gt;
&lt;td&gt;ä»å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ä¼ é€çš„æ•°æ®å–ä»£æŒ‡å®šçš„æ–‡æ¡£çš„å†…å®¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;DELETE&lt;/td&gt;
&lt;td&gt;è¯·æ±‚æœåŠ¡å™¨åˆ é™¤æŒ‡å®šçš„é¡µé¢ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CONNECT&lt;/td&gt;
&lt;td&gt;HTTP/1.1åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;OPTIONS&lt;/td&gt;
&lt;td&gt;å…è®¸å®¢æˆ·ç«¯æŸ¥çœ‹æœåŠ¡å™¨çš„æ€§èƒ½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TRACE&lt;/td&gt;
&lt;td&gt;è¯·æ±‚æœåŠ¡å™¨å›æ˜¾å…¶æ”¶åˆ°çš„è¯·æ±‚ä¿¡æ¯ï¼Œè¯¥æ–¹æ³•ä¸»è¦ç”¨äºHTTPè¯·æ±‚çš„æµ‹è¯•æˆ–è¯Šæ–­ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
    
    </summary>
    
      <category term="ç½‘ç»œé€šè®¯" scheme="http://yoursite.com/categories/%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF/"/>
    
    
      <category term="HTTPè¯·æ±‚" scheme="http://yoursite.com/tags/HTTP%E8%AF%B7%E6%B1%82/"/>
    
      <category term="ç½‘ç»œé€šè®¯" scheme="http://yoursite.com/tags/%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF/"/>
    
  </entry>
  
  <entry>
    <title>PHPæ•°æ®æ“ä½œ - MYSQL</title>
    <link href="http://yoursite.com/2016/08/17/PHP%E6%93%8D%E4%BD%9CMySQL/"/>
    <id>http://yoursite.com/2016/08/17/PHPæ“ä½œMySQL/</id>
    <published>2016-08-16T20:44:00.000Z</published>
    <updated>2016-08-24T04:42:05.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>MYSQL æ˜¯ä¸€ä¸ªå¼€æºçš„ã€è·¨å¹³å°å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ŒPHP æ˜¯ä¸€ä¸ªå¼€æºçš„ã€è·¨å¹³å°çš„è„šæœ¬è¯­è¨€ï¼ŒPHP æ‰©å±•åŒ…å¯¹MYSQL æ”¯æŒæ¯”è¾ƒå®Œå–„ï¼Œä¹Ÿæœ‰æ¯”è¾ƒå¤šå¼€æºåŒ…ä¾›å‚è€ƒï¼Œ å¾ˆå¤šå¼€æºé¡¹ç›®ä¸ MYSQL æ­é…ä¹Ÿæ¯”è¾ƒå¤šï¼Œå› æ­¤ PHP+MYSQL æ˜¯ä¸€å¥—åº”ç”¨æä¸ºå¹¿æ³›çš„æ–¹æ¡ˆï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡ä»£ç æ¥äº†è§£å¦‚ä½•ä½¿ç”¨ PHP æ“ä½œ MYSQL æ•°æ®åº“ã€‚</p>
</blockquote>
<h3 id="è¿æ¥æ•°æ®åº“æœåŠ¡å™¨"><a href="#è¿æ¥æ•°æ®åº“æœåŠ¡å™¨" class="headerlink" title="è¿æ¥æ•°æ®åº“æœåŠ¡å™¨"></a>è¿æ¥æ•°æ®åº“æœåŠ¡å™¨</h3><p><code>mysqli_connect()</code> å‡½æ•°æ‰“å¼€ä¸€ä¸ªåˆ° MySQL æœåŠ¡å™¨çš„æ–°çš„è¿æ¥ï¼Œå®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysqli_connect(host,username,password,dbname,port,socket);</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>host</em></td>
<td>å¯é€‰ã€‚è§„å®šä¸»æœºåæˆ– IP åœ°å€ã€‚</td>
</tr>
<tr>
<td><em>username</em></td>
<td>å¯é€‰ã€‚è§„å®š MySQL ç”¨æˆ·åã€‚</td>
</tr>
<tr>
<td><em>password</em></td>
<td>å¯é€‰ã€‚è§„å®š MySQL å¯†ç ã€‚</td>
</tr>
<tr>
<td><em>dbname</em></td>
<td>å¯é€‰ã€‚è§„å®šé»˜è®¤ä½¿ç”¨çš„æ•°æ®åº“ã€‚</td>
</tr>
<tr>
<td><em>port</em></td>
<td>å¯é€‰ã€‚è§„å®šå°è¯•è¿æ¥åˆ° MySQL æœåŠ¡å™¨çš„ç«¯å£å·ã€‚</td>
</tr>
<tr>
<td><em>socket</em></td>
<td>å¯é€‰ã€‚è§„å®š socket æˆ–è¦ä½¿ç”¨çš„å·²å‘½å pipeã€‚</td>
</tr>
</tbody>
</table>
<p>å®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªä»£è¡¨ MySQL æœåŠ¡å™¨è¿æ¥çš„å¯¹è±¡ã€‚</p>
<a id="more"></a>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line">$sql = mysqli_connect(<span class="string">'localhost'</span>, <span class="string">'root'</span>, <span class="string">''</span>);</div><div class="line"></div><div class="line"><span class="keyword">if</span> ($sql) &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">'è¿æ¥æˆåŠŸ'</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">"è¿æ¥é”™è¯¯"</span>.mysqli_connect_error());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è¿æ¥SQLæ•°æ®åº“"><a href="#è¿æ¥SQLæ•°æ®åº“" class="headerlink" title="è¿æ¥SQLæ•°æ®åº“"></a>è¿æ¥SQLæ•°æ®åº“</h3><p><code>mysqli_select_db()</code> å‡½æ•°ç”¨äºæŒ‡å®šè¦è·å–çš„æœåŠ¡å™¨ä¸Šçš„æŸä¸€ä¸ªæ•°æ®åº“ã€‚è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysqli_select_db(connection,dbname);</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>connection</em></td>
<td>å¿…éœ€ã€‚è§„å®šè¦ä½¿ç”¨çš„ MySQL è¿æ¥ã€‚</td>
</tr>
<tr>
<td><em>dbname</em></td>
<td>å¿…éœ€ï¼Œè§„å®šè¦ä½¿ç”¨çš„é»˜è®¤æ•°æ®åº“ã€‚</td>
</tr>
</tbody>
</table>
<p>å®ƒçš„è¿”å›å€¼æ˜¯boolç±»å‹ï¼Œå¦‚æœè¿æ¥æ•°æ®åº“æˆåŠŸåˆ™è¿”å› TRUEï¼Œå¦‚æœå¤±è´¥åˆ™è¿”å› FALSEã€‚</p>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line">$sql = mysqli_connect(<span class="string">'localhost'</span>, <span class="string">'root'</span>, <span class="string">'root'</span>);</div><div class="line"></div><div class="line"><span class="keyword">if</span> ($sql) &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">'è¿æ¥æœåŠ¡å™¨æˆåŠŸ'</span>;</div><div class="line">    <span class="keyword">if</span> (mysqli_select_db($sql, <span class="string">'test'</span>);) &#123;</div><div class="line">        <span class="keyword">echo</span> <span class="string">'è¿æ¥æ•°æ®åº“testæˆåŠŸ'</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">"è¿æ¥é”™è¯¯"</span>.mysqli_connect_error());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è¯»å–SQLæ•°æ®åº“"><a href="#è¯»å–SQLæ•°æ®åº“" class="headerlink" title="è¯»å–SQLæ•°æ®åº“"></a>è¯»å–SQLæ•°æ®åº“</h3><p><code>mysqli_query()</code> å‡½æ•°æ‰§è¡ŒæŸä¸ªé’ˆå¯¹æ•°æ®åº“çš„æŸ¥è¯¢ã€‚è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysqli_query(connection,query,resultmode);</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>connection</em></td>
<td>å¿…éœ€ã€‚è§„å®šè¦ä½¿ç”¨çš„ MySQL è¿æ¥ã€‚</td>
</tr>
<tr>
<td><em>query</em></td>
<td>å¿…éœ€ï¼Œè§„å®šæŸ¥è¯¢å­—ç¬¦ä¸²ã€‚</td>
</tr>
<tr>
<td><em>resultmode</em></td>
<td>å¯é€‰ã€‚MYSQLI_USE_RESULTï¼ˆæ•°æ®è¾ƒå¤šï¼‰MYSQLI_STORE_RESULTï¼ˆé»˜è®¤ï¼‰</td>
</tr>
</tbody>
</table>
<p>é’ˆå¯¹æˆåŠŸçš„ SELECTã€SHOWã€DESCRIBE æˆ– EXPLAIN æŸ¥è¯¢ï¼Œå°†è¿”å›ä¸€ä¸ª mysqli_result å¯¹è±¡ã€‚</p>
<p>é’ˆå¯¹å…¶ä»–æˆåŠŸçš„æŸ¥è¯¢ï¼Œå°†è¿”å› TRUEã€‚å¦‚æœå¤±è´¥ï¼Œåˆ™è¿”å› FALSEã€‚</p>
<p>å®ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">$sql = mysqli_connect(<span class="string">'localhost'</span>, <span class="string">'root'</span>, <span class="string">'root'</span>);</div><div class="line"></div><div class="line"><span class="keyword">if</span> ($sql) &#123;</div><div class="line"></div><div class="line">    <span class="keyword">echo</span> <span class="string">'è¿æ¥æœåŠ¡å™¨æˆåŠŸ'</span>;</div><div class="line">    <span class="keyword">if</span> (mysqli_select_db($sql, <span class="string">'test'</span>);) &#123;</div><div class="line">        <span class="keyword">echo</span> <span class="string">'è¿æ¥æ•°æ®åº“testæˆåŠŸ'</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    $result = mysqli_query($sql ,<span class="string">'SELECT * FROM users'</span>);</div><div class="line">    print_r($result);</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">"è¿æ¥é”™è¯¯"</span>.mysqli_connect_error());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è·å–SQLæ¡ç›®æ•°"><a href="#è·å–SQLæ¡ç›®æ•°" class="headerlink" title="è·å–SQLæ¡ç›®æ•°"></a>è·å–SQLæ¡ç›®æ•°</h3><p><code>mysqli_num_rows()</code> å‡½æ•°è¿”å›ç»“æœé›†ä¸­è¡Œçš„æ•°é‡ï¼Œå®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysqli_num_rows(result);</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>result</em></td>
<td>å¿…éœ€ã€‚ç”± mysqli_query()ã€mysqli_store_result() æˆ– mysqli_use_result() è¿”å›çš„ç»“æœé›†æ ‡è¯†ç¬¦ã€‚</td>
</tr>
</tbody>
</table>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$sql = mysqli_connect(<span class="string">'localhost'</span>, <span class="string">'root'</span>, <span class="string">'root'</span>);</div><div class="line"></div><div class="line"><span class="keyword">if</span> ($sql) &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">'è¿æ¥æœåŠ¡å™¨æˆåŠŸ'</span>;</div><div class="line">    </div><div class="line">    $result = mysqli_query($sql ,<span class="string">'SELECT * FROM users'</span>);</div><div class="line">    $rows = mysqli_num_rows($result);</div><div class="line">    <span class="keyword">echo</span> <span class="string">'ç°åœ¨æ•°æ®åº“æ¡æ•°æ˜¯'</span>.$rows;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>MySql è¯­å¥ä¸­ä¹Ÿé›†æˆäº†è·å–æ¡ç›®æ•°çš„å‡½æ•° <code>COUNT()</code> ï¼Œå®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(column_name) <span class="keyword">FROM</span> table_name</div><div class="line"><span class="keyword">COUNT</span>(column_name) å‡½æ•°è¿”å›æŒ‡å®šåˆ—çš„å€¼çš„æ•°ç›®ï¼ˆ<span class="literal">NULL</span> ä¸è®¡å…¥ï¼‰</div><div class="line"></div><div class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) <span class="keyword">FROM</span> table_name</div><div class="line"><span class="keyword">COUNT</span>(*) å‡½æ•°è¿”å›è¡¨ä¸­çš„è®°å½•æ•°</div><div class="line"></div><div class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(<span class="keyword">DISTINCT</span> column_name) <span class="keyword">FROM</span> table_name</div><div class="line"><span class="keyword">COUNT</span>(<span class="keyword">DISTINCT</span> column_name) å‡½æ•°è¿”å›æŒ‡å®šåˆ—çš„ä¸åŒå€¼çš„æ•°ç›®</div></pre></td></tr></table></figure>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$sql = mysqli_connect(<span class="string">'localhost'</span>, <span class="string">'root'</span>, <span class="string">'root'</span>);</div><div class="line"></div><div class="line"><span class="keyword">if</span> ($sql) &#123;</div><div class="line">    mysqli_select_db($sql, <span class="string">'test'</span>);</div><div class="line">    $result = mysqli_query($sql, <span class="string">'SELECT COUNT(*) FROM users'</span>);</div><div class="line">    $rows = mysqli_fetch_array($result);	</div><div class="line">    <span class="keyword">echo</span> <span class="string">'ç°åœ¨æ•°æ®åº“æ¡æ•°æ˜¯'</span>.$rows[<span class="number">0</span>].<span class="string">'&lt;br&gt;'</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p> <code>COUNT()</code> å› ä¸ºæ˜¯ SQL çš„åŸç”Ÿè¯­å¥ï¼Œæ•ˆç‡è¦æ¯” PHP çš„ <code>mysqli_num_rows()</code> é«˜å¾ˆå¤šï¼Œä¹Ÿå¯ä»¥é…åˆ WHERE &amp; AND &amp; OR è¿›è¡ŒæŸ¥è¯¢ã€‚</p>
<h3 id="SQLè½¬æ•°ç»„"><a href="#SQLè½¬æ•°ç»„" class="headerlink" title="SQLè½¬æ•°ç»„"></a>SQLè½¬æ•°ç»„</h3><p><code>mysqli_fetch_array()</code> å‡½æ•°ä»ç»“æœé›†ä¸­å–å¾—ä¸€è¡Œä½œä¸ºå…³è”æ•°ç»„ï¼Œæˆ–æ•°å­—æ•°ç»„ï¼Œæˆ–äºŒè€…å…¼æœ‰ã€‚å®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysqli_fetch_array(result,resulttype);</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>result</em></td>
<td>å¿…éœ€ã€‚ç”± mysqli_query() mysqli_store_result() mysqli_use_result() è¿”å›çš„ç»“æœé›†æ ‡è¯†ç¬¦ã€‚</td>
</tr>
<tr>
<td><em>resulttype</em></td>
<td>å¯é€‰ã€‚è§„å®šäº§ç”Ÿå“ªç§ç±»å‹çš„æ•°ç»„ã€‚MYSQLI_ASSOC MYSQLI_NUM MYSQLI_BOTHã€‚</td>
</tr>
</tbody>
</table>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">$sql = mysqli_connect(<span class="string">'localhost'</span>, <span class="string">'root'</span>, <span class="string">'root'</span>);</div><div class="line"></div><div class="line"><span class="keyword">if</span> ($sql) &#123;</div><div class="line">    $result = mysqli_query($sql ,<span class="string">'SELECT * FROM users'</span>);</div><div class="line">    $result_arr = mysqli_fetch_array($result);</div><div class="line">    print_r($result_arr);</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">"è¿æ¥é”™è¯¯"</span>.mysqli_connect_error());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>mysqli_fetch_assoc()</code> å‡½æ•°ä»ç»“æœé›†ä¸­å–å¾—ä¸€è¡Œä½œä¸ºå…³è”æ•°ç»„ã€‚å®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysqli_fetch_assoc(result);</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>result</em></td>
<td>å¿…éœ€ã€‚è§„å®šç”± mysqli_query() mysqli_store_result() mysqli_use_result() è¿”å›çš„ç»“æœé›†æ ‡è¯†ç¬¦ã€‚</td>
</tr>
</tbody>
</table>
<p>å®ƒçš„è¾“å‡ºç»“æœç­‰åŒäº <code>mysqli_fetch_array($result, MYSQLI_ASSOC);</code></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸¤è€…è¿”å›çš„éƒ½æ˜¯å•æ¡æ•°æ®ï¼Œå¦‚éœ€è·å¾—æ•°æ®åº“å…¨éƒ¨æ•°æ®ï¼Œéœ€è¦å¾ªç¯éå†ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">$sql = mysqli_connect(<span class="string">'localhost'</span>, <span class="string">'root'</span>, <span class="string">'root'</span>);</div><div class="line"></div><div class="line"><span class="keyword">if</span> ($sql) &#123;</div><div class="line"></div><div class="line">    $result = mysqli_query($sql ,<span class="string">'SELECT * FROM users'</span>);</div><div class="line">    $rows = mysqli_num_rows($result);</div><div class="line"></div><div class="line">    $data_all = <span class="keyword">array</span>();</div><div class="line"></div><div class="line">    <span class="keyword">for</span> ($i=<span class="number">0</span>; $i&lt;$rows; $i++) &#123;</div><div class="line">        $data = mysqli_fetch_assoc($result);</div><div class="line">        array_push($data_all, $data);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    print_r($data_all);</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">"è¿æ¥é”™è¯¯"</span>.mysqli_connect_error());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="æŸ¥è¯¢SQLæ•°æ®"><a href="#æŸ¥è¯¢SQLæ•°æ®" class="headerlink" title="æŸ¥è¯¢SQLæ•°æ®"></a>æŸ¥è¯¢SQLæ•°æ®</h3><p>ä»¥ä¸‹ç¤ºä¾‹æ˜¯ä¸€ä¸ªç”¨ PHP å®ç°æŸ¥è¯¢æ•°æ®åº“çš„ç¨‹åºï¼Œé¦–å…ˆè®¾å®šæ•°æ®åº“æœåŠ¡å™¨é“¾æ¥ï¼Œè´¦æˆ·ï¼Œå¯†ç çš„é»˜è®¤å€¼ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">config.php</div><div class="line"></div><div class="line"><span class="meta">&lt;?php</span></div><div class="line">define(<span class="string">'MYSQL_HOST'</span>, <span class="string">'localhost'</span>);</div><div class="line">define(<span class="string">'MYSQL_USER'</span>, <span class="string">'root'</span>);</div><div class="line">define(<span class="string">'MYSQL_PASSWORD'</span>, <span class="string">'root'</span>);</div></pre></td></tr></table></figure>
<p>åˆ›å»ºä¸€ä¸ªæ–¹æ³•ï¼Œè·å¾—å¹¶è¿”å›æ•°æ®åº“çš„å¯¹è±¡ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>.<span class="title">php</span></span></div><div class="line">  </div><div class="line">&lt;?<span class="title">php</span></div><div class="line"><span class="title">require_once</span> '<span class="title">config</span>.<span class="title">php</span>';</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">connectDataBase</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> mysqli_connect(MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, <span class="string">'test'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨ HTML åˆ›å»ºè¡¨æ ¼ï¼Œè·å¾—æ‰€æœ‰ name åˆ—ä¸º ZhangSan çš„è¡Œï¼Œå¹¶æŒ‰ id é€†åºæ’åºï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">select_data.php</div><div class="line">  </div><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="keyword">require_once</span> <span class="string">'function.php'</span>;</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</div><div class="line">    &lt;meta name=<span class="string">"viewport"</span></div><div class="line">          content=<span class="string">"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span>&gt;</div><div class="line">    &lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"ie=edge"</span>&gt;</div><div class="line">    &lt;title&gt;æ‰€æœ‰ç”¨æˆ·&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line"></div><div class="line">&lt;table width=<span class="string">"100%"</span>&gt;&lt;tr&gt;&lt;th&gt;id&lt;/th&gt;&lt;th&gt;name&lt;/th&gt;&lt;th&gt;age&lt;/th&gt;&lt;/tr&gt;</div><div class="line"></div><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line">$coon = connectDataBase();</div><div class="line">$data_count = mysqli_fetch_array(mysqli_query($coon, <span class="string">'SELECT COUNT(*) FROM users'</span>));</div><div class="line">$result = mysqli_query($coon, <span class="string">"SELECT * FROM users WHERE name='ZhangSan' ORDER BY id DESC"</span>);</div><div class="line"></div><div class="line"><span class="keyword">for</span> ($i=<span class="number">0</span>; $i&lt;$data_count[<span class="number">0</span>]; $i++) &#123;</div><div class="line">    $data = mysqli_fetch_assoc($result);</div><div class="line">    $id = $data[<span class="string">'id'</span>];</div><div class="line">    $name = $data[<span class="string">'name'</span>];</div><div class="line">    $age = $data[<span class="string">'age'</span>];</div><div class="line">    <span class="keyword">echo</span> <span class="string">"&lt;tr&gt;&lt;td&gt;$id&lt;/td&gt;&lt;td&gt;$name&lt;/td&gt;&lt;td&gt;$age&lt;/td&gt;&lt;/tr&gt;"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">?&gt;</span></div><div class="line">&lt;/table&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<h3 id="æ·»åŠ SQLæ•°æ®"><a href="#æ·»åŠ SQLæ•°æ®" class="headerlink" title="æ·»åŠ SQLæ•°æ®"></a>æ·»åŠ SQLæ•°æ®</h3><p>å»ºç«‹ä¸€ä¸ªPHPé¡µé¢ï¼Œå±•ç¤ºæ•°æ®åº“é‡Œçš„æ‰€æœ‰æ•°æ®ï¼Œå¹¶æ–°å»ºä¸€ä¸ªé“¾æ¥ï¼ŒæŒ‡å‘æ•°æ®åº“æ·»åŠ é¡µé¢ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">data_all.php</div><div class="line">  </div><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="keyword">require_once</span> <span class="string">'function.php'</span>;</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</div><div class="line">    &lt;meta name=<span class="string">"viewport"</span></div><div class="line">          content=<span class="string">"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span>&gt;</div><div class="line">    &lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"ie=edge"</span>&gt;</div><div class="line">    &lt;title&gt;æ‰€æœ‰ç”¨æˆ·&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line"></div><div class="line">&lt;a href=<span class="string">"adduser.html"</span>&gt;æ·»åŠ ç”¨æˆ·&lt;/a&gt;</div><div class="line"></div><div class="line">&lt;table width=<span class="string">"100%"</span>&gt;&lt;tr&gt;&lt;th&gt;id&lt;/th&gt;&lt;th&gt;name&lt;/th&gt;&lt;th&gt;age&lt;/th&gt;&lt;/tr&gt;</div><div class="line"></div><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line">$coon = connectDataBase();</div><div class="line">$data_count = mysqli_fetch_array(mysqli_query($coon, <span class="string">'SELECT COUNT(*) FROM users'</span>));</div><div class="line">$result = mysqli_query($coon, <span class="string">"SELECT * FROM users ORDER BY id DESC"</span>);</div><div class="line"></div><div class="line"><span class="keyword">for</span> ($i=<span class="number">0</span>; $i&lt;$data_count[<span class="number">0</span>]; $i++) &#123;</div><div class="line">    $data = mysqli_fetch_assoc($result);</div><div class="line">    $id = $data[<span class="string">'id'</span>];</div><div class="line">    $name = $data[<span class="string">'name'</span>];</div><div class="line">    $age = $data[<span class="string">'age'</span>];</div><div class="line">    <span class="keyword">echo</span> <span class="string">"&lt;tr&gt;&lt;td&gt;$id&lt;/td&gt;&lt;td&gt;$name&lt;/td&gt;&lt;td&gt;$age&lt;/td&gt;&lt;/tr&gt;"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">?&gt;</span></div><div class="line">&lt;/table&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>åˆ›å»ºä¸€ä¸ª HTML é¡µé¢ï¼Œå¹¶æ·»åŠ è¾“å…¥æ¡†å’Œæäº¤æŒ‰é’®ï¼Œå°†è¾“å…¥æ¡†çš„æ–‡æœ¬ç”¨ POST æ–¹å¼ä¼ ç»™ <code>user_add.php</code> :</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">user_add.html</div><div class="line"></div><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"user_add.php"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">        å§“å:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">        å¹´é¾„:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"age"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"æäº¤"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>ä½¿ç”¨ SQL è¯­å¥å‘æ•°æ®åº“æ·»åŠ æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰æ·»åŠ é”™è¯¯ï¼Œè½¬è·³åˆ° <code>data_all.php</code> ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">user_add.php</div><div class="line"></div><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="keyword">require_once</span> <span class="string">'function.php'</span>;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (!<span class="keyword">isset</span>($_POST[<span class="string">'name'</span>])) &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">'æ²¡æœ‰æ”¶åˆ°nameçš„å€¼'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (!<span class="keyword">isset</span>($_POST[<span class="string">'age'</span>])) &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">'æ²¡æœ‰æ”¶åˆ°ageçš„å€¼'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">'name'</span>])) &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">'nameçš„å€¼æ˜¯ç©ºçš„'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">'age'</span>])) &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">'ageçš„å€¼æ˜¯ç©ºçš„'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$name = $_POST[<span class="string">'name'</span>];</div><div class="line">$age = $_POST[<span class="string">'age'</span>];</div><div class="line">$coon = connectDataBase();</div><div class="line">$age = intval($age);</div><div class="line"></div><div class="line"><span class="keyword">if</span> ($coon) &#123;</div><div class="line">    mysqli_query($coon, <span class="string">"INSERT INTO users(name,age) VALUES ('$name', $age)"</span>);</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">'æ•°æ®åº“æœªæˆåŠŸè¿æ¥'</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (mysqli_error()) &#123;</div><div class="line">    <span class="keyword">echo</span> mysqli_error();</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">    header(<span class="string">'Location:allusers.php'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="SQLé˜²æ³¨å…¥"><a href="#SQLé˜²æ³¨å…¥" class="headerlink" title="SQLé˜²æ³¨å…¥"></a>SQLé˜²æ³¨å…¥</h4><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå¦‚æœ <code>$name &amp; $age</code> æ²¡æœ‰ä½¿ç”¨ <code>&#39;&#39;</code> å’Œ <code>intval</code> è¿›è¡Œæ ¼å¼è½¬æ¢ï¼Œé‚£ä¹ˆå½“ç”¨æˆ·è¾“å…¥çš„æ˜¯SQLè¯­å¥æ—¶ ï¼Œå®ƒæœ‰å¯èƒ½ä¼šè¢«æ‰§è¡Œï¼Œæ‰€ä»¥å¯¹ç”¨æˆ·ä¼ å…¥çš„å€¼ä¸€å®šè¦è¿›è¡Œç›¸åº”çš„æ ¼å¼å¤„ç†ï¼Œé¿å…è¢«æ¶æ„æ³¨å…¥ SQL è¯­å¥ã€‚</p>
<h3 id="ä¿®æ”¹SQLæ•°æ®"><a href="#ä¿®æ”¹SQLæ•°æ®" class="headerlink" title="ä¿®æ”¹SQLæ•°æ®"></a>ä¿®æ”¹SQLæ•°æ®</h3><p>åœ¨ <code>data_all.php</code> ä¸­æ·»åŠ ä¸€åˆ—ï¼Œå‘½åä¸ºä¿®æ”¹ï¼Œå•å…ƒæ ¼å†…æ·»åŠ é“¾æ¥ï¼ŒæŒ‡å‘ <code>edituser.php</code> ï¼Œå¹¶ä½¿ç”¨ GET æ–¹å¼å°†æ­¤å•å…ƒæ ¼çš„ <code>id</code> è¿›è¡Œä¼ è¾“ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">data_all.php</div><div class="line">  </div><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="keyword">require_once</span> <span class="string">'function.php'</span>;</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</div><div class="line">    &lt;meta name=<span class="string">"viewport"</span></div><div class="line">          content=<span class="string">"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span>&gt;</div><div class="line">    &lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"ie=edge"</span>&gt;</div><div class="line">    &lt;title&gt;æ‰€æœ‰ç”¨æˆ·&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line"></div><div class="line">&lt;a href=<span class="string">"adduser.html"</span>&gt;æ·»åŠ ç”¨æˆ·&lt;/a&gt;</div><div class="line"></div><div class="line">&lt;table width=<span class="string">"100%"</span>&gt;&lt;tr&gt;&lt;th&gt;id&lt;/th&gt;&lt;th&gt;name&lt;/th&gt;&lt;th&gt;age&lt;/th&gt;&lt;th&gt;ä¿®æ”¹&lt;/th&gt;&lt;/tr&gt;</div><div class="line"></div><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line">$coon = connectDataBase();</div><div class="line">$data_count = mysqli_fetch_array(mysqli_query($coon, <span class="string">'SELECT COUNT(*) FROM users'</span>));</div><div class="line">$result = mysqli_query($coon, <span class="string">"SELECT * FROM users ORDER BY id DESC"</span>);</div><div class="line"></div><div class="line"><span class="keyword">for</span> ($i=<span class="number">0</span>; $i&lt;$data_count[<span class="number">0</span>]; $i++) &#123;</div><div class="line">    $data = mysqli_fetch_assoc($result);</div><div class="line">    $id = $data[<span class="string">'id'</span>];</div><div class="line">    $name = $data[<span class="string">'name'</span>];</div><div class="line">    $age = $data[<span class="string">'age'</span>];</div><div class="line">    <span class="keyword">echo</span> <span class="string">"&lt;tr&gt;&lt;td&gt;$id&lt;/td&gt;&lt;td&gt;$name&lt;/td&gt;&lt;td&gt;$age&lt;/td&gt;&lt;td&gt;&lt;a href='edituser.php?id=$id'&gt;ä¿®æ”¹&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">?&gt;</span></div><div class="line">&lt;/table&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>è·å–æ­¤è¡Œçš„æ‰€æœ‰æ•°æ®ï¼Œå¹¶åˆ›å»ºè¾“å…¥æ¡†å’Œæäº¤æŒ‰é’®ï¼Œå°†è·å–çš„è¡Œæ•°æ®å¡«å……ä¸ºè¾“å…¥æ¡†é»˜è®¤æ•°æ®ï¼Œåˆ›å»ºçš„è¡¨å•å°†ä»¥ POST æ–¹å¼å°†æ•°æ®ä¼ è¾“åˆ° <code>edituser_server.php</code> ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">edituser.php</div><div class="line"></div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</div><div class="line">    &lt;meta name=<span class="string">"viewport"</span></div><div class="line">          content=<span class="string">"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span>&gt;</div><div class="line">    &lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"ie=edge"</span>&gt;</div><div class="line">    &lt;title&gt;ç¼–è¾‘ç”¨æˆ·&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="keyword">require_once</span> <span class="string">'function.php'</span>;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (!<span class="keyword">isset</span>($_GET[<span class="string">'id'</span>])) &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">'æ²¡æœ‰è·å–åˆ°id'</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (<span class="keyword">empty</span>($_GET[<span class="string">'id'</span>])) &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">'idçš„å€¼æ˜¯ç©ºçš„'</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">$id = $_GET[<span class="string">'id'</span>];</div><div class="line">$coon = connectDataBase();</div><div class="line">$result = mysqli_query($coon, <span class="string">"SELECT * FROM users WHERE id=$id"</span>);</div><div class="line"></div><div class="line"><span class="keyword">if</span> (mysqli_error()) &#123;</div><div class="line">    <span class="keyword">die</span>(mysqli_error());</div><div class="line">&#125;</div><div class="line"></div><div class="line">$data = mysqli_fetch_assoc($result);</div><div class="line"></div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">&lt;form action=<span class="string">"edituser_server.php"</span> method=<span class="string">"post"</span>&gt;</div><div class="line">    &lt;div&gt;id:</div><div class="line">        &lt;input type=<span class="string">"text"</span> name=<span class="string">"id"</span> value=<span class="string">"&lt;?php echo $data['id']?&gt;"</span>&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">    &lt;div&gt;å§“å:</div><div class="line">        &lt;input type=<span class="string">"text"</span> name=<span class="string">"name"</span> value=<span class="string">"&lt;?php echo $data['name']?&gt;"</span>&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">    &lt;div&gt;å¹´é¾„:</div><div class="line">        &lt;input type=<span class="string">"text"</span> name=<span class="string">"age"</span> value=<span class="string">"&lt;?php echo $data['age']?&gt;"</span>&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"æäº¤ä¿®æ”¹"</span>&gt;</div><div class="line">&lt;/form&gt;</div><div class="line"></div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>è·å– <code>edituser.php</code> ä¸­ä¼ è¾“è¿‡æ¥çš„æ•°æ®ï¼ŒæŒ‰ <code>id</code> å®šä½åˆ°ç›®æ ‡è¡Œå¹¶è¿›è¡Œä¿®æ”¹ï¼Œå¦‚æ²¡æœ‰æŠ¥é”™åˆ™è½¬è·³åˆ° <code>Location:data_all.php</code> ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">require_once</span> <span class="string">'function.php'</span>;</div><div class="line"></div><div class="line">$conn = connectDataBase();</div><div class="line"></div><div class="line"><span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">'id'</span>])) &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">'idæ²¡æœ‰è·å–'</span>);</div><div class="line">&#125;</div><div class="line"><span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">'name'</span>])) &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">'nameæ²¡æœ‰è·å–'</span>);</div><div class="line">&#125;</div><div class="line"><span class="keyword">if</span> (<span class="keyword">empty</span>($_POST[<span class="string">'age'</span>])) &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">'ageæ²¡æœ‰è·å–'</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">$name = $_POST[<span class="string">'name'</span>];</div><div class="line">$age = $_POST[<span class="string">'age'</span>];</div><div class="line">$id = $_POST[<span class="string">'id'</span>];</div><div class="line"></div><div class="line">mysqli_query($conn, <span class="string">"UPDATE users SET name='$name', age=$age WHERE id=$id"</span>);</div><div class="line"></div><div class="line"><span class="keyword">if</span> (mysqli_error()) &#123;</div><div class="line">    <span class="keyword">echo</span> mysqli_error();</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">    header(<span class="string">'Location:data_all.php'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="åˆ é™¤SQLæ•°æ®"><a href="#åˆ é™¤SQLæ•°æ®" class="headerlink" title="åˆ é™¤SQLæ•°æ®"></a>åˆ é™¤SQLæ•°æ®</h3><p>åœ¨ <code>data_all.php</code> ä¸­æ·»åŠ ä¸€åˆ—ï¼Œå‘½åä¸ºåˆ é™¤ï¼Œå•å…ƒæ ¼å†…æ·»åŠ é“¾æ¥ï¼ŒæŒ‡å‘ <code>deleteuser.php</code> ï¼Œå¹¶ä½¿ç”¨ GET æ–¹å¼å°†æ­¤å•å…ƒæ ¼çš„ <code>id</code> è¿›è¡Œä¼ è¾“ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">data_all.php</div><div class="line"></div><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="keyword">require_once</span> <span class="string">'function.php'</span>;</div><div class="line"><span class="meta">?&gt;</span></div><div class="line"></div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</div><div class="line">    &lt;meta name=<span class="string">"viewport"</span></div><div class="line">          content=<span class="string">"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span>&gt;</div><div class="line">    &lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"ie=edge"</span>&gt;</div><div class="line">    &lt;title&gt;æ‰€æœ‰ç”¨æˆ·&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line"></div><div class="line">&lt;a href=<span class="string">"adduser.html"</span>&gt;æ·»åŠ ç”¨æˆ·&lt;/a&gt;</div><div class="line"></div><div class="line">&lt;table width=<span class="string">"100%"</span>&gt;&lt;tr&gt;&lt;th&gt;id&lt;/th&gt;&lt;th&gt;name&lt;/th&gt;&lt;th&gt;age&lt;/th&gt;&lt;th&gt;ä¿®æ”¹&lt;/th&gt;&lt;th&gt;åˆ é™¤&lt;/th&gt;&lt;/tr&gt;</div><div class="line"></div><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line">$coon = connectDataBase();</div><div class="line">$data_count = mysqli_fetch_array(mysqli_query($coon, <span class="string">'SELECT COUNT(*) FROM users'</span>));</div><div class="line">$result = mysqli_query($coon, <span class="string">"SELECT * FROM users ORDER BY id DESC"</span>);</div><div class="line"></div><div class="line"><span class="keyword">for</span> ($i=<span class="number">0</span>; $i&lt;$data_count[<span class="number">0</span>]; $i++) &#123;</div><div class="line">    $data = mysqli_fetch_assoc($result);</div><div class="line">    $id = $data[<span class="string">'id'</span>];</div><div class="line">    $name = $data[<span class="string">'name'</span>];</div><div class="line">    $age = $data[<span class="string">'age'</span>];</div><div class="line">    <span class="keyword">echo</span> <span class="string">"&lt;tr&gt;&lt;td&gt;$id&lt;/td&gt;&lt;td&gt;$name&lt;/td&gt;&lt;td&gt;$age&lt;/td&gt;&lt;td&gt;&lt;a href='edituser.php?id=$id'&gt;ä¿®æ”¹&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='deleteuser.php?id=$id'&gt;åˆ é™¤&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">?&gt;</span></div><div class="line">&lt;/table&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>è·å– <code>data_all.php</code> ä¸­ä¼ è¾“è¿‡æ¥çš„ <code>id</code>ï¼ŒæŒ‰ <code>id</code> å®šä½åˆ°ç›®æ ‡è¡Œå¹¶åˆ é™¤ï¼Œå¦‚æ²¡æœ‰æŠ¥é”™åˆ™è½¬è·³åˆ° <code>Location:data_all.php</code> ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">deleteuser.php</div><div class="line"></div><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="keyword">require_once</span> <span class="string">'function.php'</span>;</div><div class="line"></div><div class="line">$conn = connectDataBase();</div><div class="line"></div><div class="line"><span class="keyword">if</span> (<span class="keyword">empty</span>($_GET[<span class="string">'id'</span>])) &#123;</div><div class="line">    <span class="keyword">die</span>(<span class="string">'idçš„å€¼æ˜¯ç©ºçš„'</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">$id = intval($_GET[<span class="string">'id'</span>]);</div><div class="line"></div><div class="line">mysqli_query($conn, <span class="string">"DELETE FROM users WHERE id=$id"</span>);</div><div class="line"></div><div class="line"><span class="keyword">if</span> (mysqli_error()) &#123;</div><div class="line">    <span class="keyword">die</span>(mysqli_error());</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">    header(<span class="string">'Location:allusers.php'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;MYSQL æ˜¯ä¸€ä¸ªå¼€æºçš„ã€è·¨å¹³å°å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ŒPHP æ˜¯ä¸€ä¸ªå¼€æºçš„ã€è·¨å¹³å°çš„è„šæœ¬è¯­è¨€ï¼ŒPHP æ‰©å±•åŒ…å¯¹MYSQL æ”¯æŒæ¯”è¾ƒå®Œå–„ï¼Œä¹Ÿæœ‰æ¯”è¾ƒå¤šå¼€æºåŒ…ä¾›å‚è€ƒï¼Œ å¾ˆå¤šå¼€æºé¡¹ç›®ä¸ MYSQL æ­é…ä¹Ÿæ¯”è¾ƒå¤šï¼Œå› æ­¤ PHP+MYSQL æ˜¯ä¸€å¥—åº”ç”¨æä¸ºå¹¿æ³›çš„æ–¹æ¡ˆï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡ä»£ç æ¥äº†è§£å¦‚ä½•ä½¿ç”¨ PHP æ“ä½œ MYSQL æ•°æ®åº“ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;è¿æ¥æ•°æ®åº“æœåŠ¡å™¨&quot;&gt;&lt;a href=&quot;#è¿æ¥æ•°æ®åº“æœåŠ¡å™¨&quot; class=&quot;headerlink&quot; title=&quot;è¿æ¥æ•°æ®åº“æœåŠ¡å™¨&quot;&gt;&lt;/a&gt;è¿æ¥æ•°æ®åº“æœåŠ¡å™¨&lt;/h3&gt;&lt;p&gt;&lt;code&gt;mysqli_connect()&lt;/code&gt; å‡½æ•°æ‰“å¼€ä¸€ä¸ªåˆ° MySQL æœåŠ¡å™¨çš„æ–°çš„è¿æ¥ï¼Œå®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;mysqli_connect(host,username,password,dbname,port,socket);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‚æ•°&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;em&gt;host&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;å¯é€‰ã€‚è§„å®šä¸»æœºåæˆ– IP åœ°å€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;em&gt;username&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;å¯é€‰ã€‚è§„å®š MySQL ç”¨æˆ·åã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;em&gt;password&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;å¯é€‰ã€‚è§„å®š MySQL å¯†ç ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;em&gt;dbname&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;å¯é€‰ã€‚è§„å®šé»˜è®¤ä½¿ç”¨çš„æ•°æ®åº“ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;em&gt;port&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;å¯é€‰ã€‚è§„å®šå°è¯•è¿æ¥åˆ° MySQL æœåŠ¡å™¨çš„ç«¯å£å·ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;em&gt;socket&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;å¯é€‰ã€‚è§„å®š socket æˆ–è¦ä½¿ç”¨çš„å·²å‘½å pipeã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªä»£è¡¨ MySQL æœåŠ¡å™¨è¿æ¥çš„å¯¹è±¡ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="PHP" scheme="http://yoursite.com/categories/PHP/"/>
    
    
      <category term="PHP" scheme="http://yoursite.com/tags/PHP/"/>
    
      <category term="SQL" scheme="http://yoursite.com/tags/SQL/"/>
    
  </entry>
  
  <entry>
    <title>HTTPåè®® - HTTPè¯·æ±‚</title>
    <link href="http://yoursite.com/2016/08/17/HTTP%E5%8D%8F%E8%AE%AE/"/>
    <id>http://yoursite.com/2016/08/17/HTTPåè®®/</id>
    <published>2016-08-16T20:44:00.000Z</published>
    <updated>2016-09-14T01:28:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>åè®®æ˜¯æŒ‡è®¡ç®—æœºé€šä¿¡ç½‘ç»œä¸­ä¸¤å°è®¡ç®—æœºä¹‹é—´è¿›è¡Œé€šä¿¡æ‰€å¿…é¡»å…±åŒéµå®ˆçš„è§„å®šæˆ–è§„åˆ™ï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®(HTTP)æ˜¯ä¸€ç§é€šä¿¡åè®®ï¼Œå®ƒå…è®¸å°†è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€(HTML)æ–‡æ¡£ä»WebæœåŠ¡å™¨ä¼ é€åˆ°å®¢æˆ·ç«¯çš„æµè§ˆã€‚</p>
<p>è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆè‹±æ–‡ï¼šHyperText Transfer Protocolï¼Œç¼©å†™ï¼šHTTPï¼‰æ˜¯äº’è”ç½‘ä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§ç½‘ç»œåè®®ã€‚è®¾è®¡HTTPæœ€åˆçš„ç›®çš„æ˜¯ä¸ºäº†æä¾›ä¸€ç§å‘å¸ƒå’Œæ¥æ”¶HTMLé¡µé¢çš„æ–¹æ³•ã€‚</p>
<a id="more"></a>
<p>é€šè¿‡HTTPæˆ–è€…HTTPSåè®®è¯·æ±‚çš„èµ„æºç”±ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼ˆUniform Resource Identifiersï¼ŒURIï¼‰æ¥æ ‡è¯†ã€‚</p>
<p>è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œæ˜¯ä¸€ç§æ— çŠ¶æ€åè®®ï¼Œå°±æ˜¯è¯´å®¢æˆ·ç«¯å‘é€ä¸€æ¬¡è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç«¯æ¥æ”¶è¯·æ±‚ï¼Œç»è¿‡å¤„ç†è¿”å›ç»™å®¢æˆ·ç«¯ä¿¡æ¯ï¼Œç„¶åå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„é“¾æ¥å°±æ–­å¼€äº†ï¼Œä¸ºäº†ç»´æŠ¤ä»–ä»¬ä¹‹é—´çš„é“¾æ¥ï¼Œè®©æœåŠ¡å™¨çŸ¥é“è¿™æ˜¯å‰ä¸€ä¸ªç”¨æˆ·å‘é€çš„è¯·æ±‚ï¼Œå¿…é¡»åœ¨ä¸€ä¸ªåœ°æ–¹ä¿å­˜å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼Œæœ‰2ä¸­è§£å†³æ–¹æ¡ˆï¼Œä¸€æ˜¯åœ¨å®¢æˆ·ç«¯ä¿å­˜ï¼ŒäºŒæ˜¯åœ¨æœåŠ¡å™¨ç«¯ä¿å­˜ã€‚<br>1.åœ¨å®¢æˆ·ç«¯ä¿å­˜:Cookie<br>2.åœ¨æœåŠ¡å™¨ç«¯ä¿å­˜:Session(sessionéœ€è¦ä¾é cookieæ¥å®ç°)<br>3.åœ¨ç”¨æˆ·ç¦ç”¨cookieçš„é™åˆ¶ä¸‹ï¼Œåªèƒ½ä½¿ç”¨URLé‡å†™çš„æ–¹å¼åœ¨æ¯æ¬¡è¯·æ±‚ä¹‹åé™„ä¸Šä¸€ä¸ªé”®å€¼å¯¹æ¥ä¿å­˜å®¢æˆ·ç«¯çš„ä¿¡æ¯ã€‚<br>4.éšè—è¡¨å•ã€‚<code>&lt;input type=&quot;hidden&quot; name=&quot;method&quot; value=&quot;login&quot;&gt;</code></p>
<h3 id="URIç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦"><a href="#URIç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦" class="headerlink" title="URIç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦"></a>URIç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦</h3><p>ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼ˆUniform Resource Identifierï¼Œæˆ–URIï¼‰æ˜¯ä¸€ä¸ªç”¨äºæ ‡è¯†æŸä¸€äº’è”ç½‘èµ„æºåç§°çš„å­—ç¬¦ä¸²ã€‚ è¯¥ç§æ ‡è¯†å…è®¸ç”¨æˆ·å¯¹ç½‘ç»œä¸­ï¼ˆä¸€èˆ¬æŒ‡ä¸‡ç»´ç½‘ï¼‰çš„èµ„æºé€šè¿‡ç‰¹å®šçš„åè®®è¿›è¡Œäº¤äº’æ“ä½œã€‚URIçš„æœ€å¸¸è§çš„å½¢å¼æ˜¯ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼ˆURLï¼‰ï¼Œç»å¸¸æŒ‡å®šä¸ºéæ­£å¼çš„ç½‘å€ã€‚</p>
<p>æ›´ç½•è§çš„ç”¨æ³•æ˜¯ç»Ÿä¸€èµ„æºåç§°ï¼ˆURNï¼‰ï¼Œå…¶ç›®çš„æ˜¯é€šè¿‡æä¾›ä¸€ç§é€”å¾„ã€‚ç”¨äºåœ¨ç‰¹å®šçš„å‘½åç©ºé—´èµ„æºçš„æ ‡è¯†ï¼Œä»¥è¡¥å……ç½‘å€ã€‚</p>
<p>URIå¯è¢«è§†ä¸ºå®šä½ç¬¦ï¼ˆURLï¼‰ï¼Œåç§°ï¼ˆURNï¼‰æˆ–ä¸¤è€…å…¼å¤‡ã€‚ç»Ÿä¸€èµ„æºåï¼ˆURNï¼‰å¦‚åŒä¸€ä¸ªäººçš„åç§°ï¼Œè€Œç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼ˆURLï¼‰ä»£è¡¨ä¸€ä¸ªäººçš„ä½å€ã€‚æ¢è¨€ä¹‹ï¼ŒURNå®šä¹‰æŸäº‹ç‰©çš„èº«ä»½ï¼Œè€ŒURLæä¾›æŸ¥æ‰¾è¯¥äº‹ç‰©çš„æ–¹æ³•ã€‚</p>
<p>ç”¨äºæ ‡è¯†å”¯ä¸€ä¹¦ç›®çš„ISBNç³»ç»Ÿæ˜¯ä¸€ä¸ªå…¸å‹çš„URNä½¿ç”¨èŒƒä¾‹ã€‚ä¾‹å¦‚ï¼ŒISBN 0-486-27557-4( urn:isbn:0-486-27557-4 )æ— äºŒä¹‰æ€§åœ°æ ‡è¯†å‡ºèå£«æ¯”äºšçš„æˆå‰§ã€Šç½—å¯†æ¬§ä¸æœ±ä¸½å¶ã€‹çš„æŸä¸€ç‰¹å®šç‰ˆæœ¬ã€‚ä¸ºè·å¾—è¯¥èµ„æºå¹¶é˜…è¯»è¯¥ä¹¦ï¼Œäººä»¬éœ€è¦å®ƒçš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªURLåœ°å€ã€‚åœ¨ç±»Unixæ“ä½œç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªå…¸å‹çš„URLåœ°å€å¯èƒ½æ˜¯ä¸€ä¸ªæ–‡ä»¶ç›®å½•ï¼Œä¾‹å¦‚file:///home/username/RomeoAndJuliet.pdfã€‚è¯¥URLæ ‡è¯†å‡ºå­˜å‚¨äºæœ¬åœ°ç¡¬ç›˜ä¸­çš„ç”µå­ä¹¦æ–‡ä»¶ã€‚å› æ­¤ï¼ŒURLå’ŒURNæœ‰ç€äº’è¡¥çš„ä½œç”¨ã€‚</p>
<h4 id="URLç»Ÿä¸€èµ„æºå®šä½ç¬¦"><a href="#URLç»Ÿä¸€èµ„æºå®šä½ç¬¦" class="headerlink" title="URLç»Ÿä¸€èµ„æºå®šä½ç¬¦"></a>URLç»Ÿä¸€èµ„æºå®šä½ç¬¦</h4><p>ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼ˆæˆ–ç§°ç»Ÿä¸€èµ„æºå®šä½å™¨/å®šä½åœ°å€ã€URLåœ°å€ç­‰ï¼Œè‹±è¯­ï¼šUniform / Universal Resource Locatorï¼Œå¸¸ç¼©å†™ä¸ºURLï¼‰ï¼Œæœ‰æ—¶ä¹Ÿè¢«ä¿—ç§°ä¸ºç½‘é¡µåœ°å€ï¼ˆç½‘å€ï¼‰ã€‚å¦‚åŒåœ¨ç½‘ç»œä¸Šçš„é—¨ç‰Œï¼Œæ˜¯å› ç‰¹ç½‘ä¸Šæ ‡å‡†çš„èµ„æºçš„åœ°å€ï¼ˆAddressï¼‰ã€‚</p>
<p>åœ¨å› ç‰¹ç½‘çš„å†å²ä¸Šï¼Œç»Ÿä¸€èµ„æºå®šä½ç¬¦çš„å‘æ˜æ˜¯ä¸€ä¸ªéå¸¸åŸºç¡€çš„æ­¥éª¤ã€‚ç»Ÿä¸€èµ„æºå®šä½ç¬¦çš„è¯­æ³•æ˜¯ä¸€èˆ¬çš„ï¼Œå¯æ‰©å±•çš„ï¼Œå®ƒä½¿ç”¨ASCIIä»£ç çš„ä¸€éƒ¨åˆ†æ¥è¡¨ç¤ºå› ç‰¹ç½‘çš„åœ°å€ã€‚ç»Ÿä¸€èµ„æºå®šä½ç¬¦çš„å¼€å§‹ï¼Œä¸€èˆ¬ä¼šæ ‡å¿—ç€ä¸€ä¸ªè®¡ç®—æœºç½‘ç»œæ‰€ä½¿ç”¨çš„ç½‘ç»œåè®®ã€‚</p>
<p>ç»Ÿä¸€èµ„æºå®šä½ç¬¦çš„æ ‡å‡†æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">åè®®ç±»å‹://æœåŠ¡å™¨åœ°å€:ç«¯å£å/è·¯å¾„/æ–‡ä»¶å/?å‚æ•°å=å‚æ•°#é”šç‚¹å</div><div class="line">schema://host[:port#]/path/.../[?query-string][#anchor]</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>scheme</td>
<td>æŒ‡å®šä½å±‚ä½¿ç”¨çš„åè®®ï¼Œå¦‚ http, https, ftpã€‚</td>
</tr>
<tr>
<td>host</td>
<td>HTTPæœåŠ¡å™¨çš„IPåœ°å€æˆ–è€…åŸŸåã€‚</td>
</tr>
<tr>
<td>port</td>
<td>HTTPæœåŠ¡å™¨çš„æ–­å¼€ï¼Œé»˜è®¤æ˜¯80ã€‚å¦‚éé»˜è®¤ç«¯å£å¿…é¡»æ˜¾å¼æŒ‡æ˜ã€‚</td>
</tr>
<tr>
<td>path</td>
<td>è®¿é—®èµ„æºçš„è·¯å¾„ã€‚</td>
</tr>
<tr>
<td>query-string</td>
<td>å‘é€ç»™httpæœåŠ¡å™¨çš„æ•°æ®ã€‚</td>
</tr>
<tr>
<td>anchor</td>
<td>é”šç‚¹ã€‚</td>
</tr>
</tbody>
</table>
<p>ä»¥ <code>http://www.mywebsite.com/sj/test;id=8079?name=sviergn&amp;x=true#stuff</code> ä¸¾ä¾‹ï¼š</p>
<ul>
<li>schema: <code>http</code></li>
<li>host: <code>www.mywebsite.com</code></li>
<li>path: <code>/sj/test</code></li>
<li>query string: <code>name=sviergn&amp;x=true</code></li>
<li>anchor: <code>stuff</code></li>
</ul>
<h3 id="HTTPè¯·æ±‚"><a href="#HTTPè¯·æ±‚" class="headerlink" title="HTTPè¯·æ±‚"></a>HTTPè¯·æ±‚</h3><p>httpè¯·æ±‚ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼šè¯·æ±‚è¡Œï¼Œè¯·æ±‚å¤´ï¼Œè¯·æ±‚æ­£æ–‡ã€‚</p>
<p>è¯·æ±‚è¡Œä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œè¯·æ±‚æ–¹æ³•ã€è¯·æ±‚è·¯å¾„ã€åè®®ç‰ˆæœ¬ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">MethodRequest URI/HTTP-Version CRLF</div><div class="line"></div><div class="line">MethodRequestï¼šHTTPè§„èŒƒå®šä¹‰äº†8ç§å¯èƒ½çš„è¯·æ±‚æ–¹æ³•ï¼Œå¸¸ç”¨çš„æ˜¯GETã€POSTå’ŒHEADæ–¹æ³•ã€‚</div><div class="line">URIï¼šè¯·æ±‚è·¯å¾„å¯ä»¥æ˜¯ç›¸å¯¹æˆ–è€…ç»å¯¹çš„æ–¹å¼ã€‚</div><div class="line">HTTP-Versionï¼šç›®å‰å¸¸ç”¨çš„æ”¯æŒHTTP/1.0å’ŒHTTP/1.1æ–¹å¼ã€‚</div><div class="line">CRLFï¼šå›è½¦å’Œæ¢è¡Œï¼Œé™¤äº†ä½œä¸ºç»“å°¾çš„CRLFï¼Œå…¶ä½™ä½ç½®ä¸å…è®¸å‡ºç°å•ç‹¬çš„CRæˆ–LFã€‚</div></pre></td></tr></table></figure>
<p>getæ–¹æ³•çš„è¯·æ±‚æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œæ‰€æœ‰è¯·æ±‚çš„å‚æ•°éƒ½æ˜¾ç¤ºè¿½åŠ åœ¨è¯·æ±‚çš„urlåé¢ï¼Œè€Œä¸”è¯·æ±‚é•¿åº¦æœ‰é™åˆ¶ã€‚</p>
<p>postæ–¹å¼çš„è¯·æ±‚å‚æ•°éƒ½è¿½åŠ åœ¨è¯·æ±‚ä½“å½“ä¸­ï¼Œæ¶ˆæ¯é•¿åº¦æ²¡æœ‰é™åˆ¶è€Œä¸”ä»¥éšå¼çš„æ–¹å¼è¿›è¡Œå‘é€ï¼Œå®‰å…¨æ€§ç›¸å¯¹è¾ƒé«˜ã€‚</p>
<p>headæ–¹æ³•é€šå¸¸ç”¨äºæµ‹è¯•è¶…é“¾æ¥çš„æœ‰æ•ˆæ€§ï¼Œæ˜¯å¦å¯ä»¥è®¿é—®ï¼Œä»¥åŠæœ€è¿‘æ˜¯å¦æ›´æ–°ã€‚</p>
<p>headæ–¹æ³•ä¸getæ–¹æ³•å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼Œheadè¯·æ±‚çš„å›åº”éƒ¨åˆ†ä¸­HTTPå¤´éƒ¨çš„ä¿¡æ¯ä¸getè¯·æ±‚æ‰€å¾—åˆ°ä¿¡æ¯æ˜¯ç›¸åŒçš„ï¼Œåˆ©ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä¸å¿…ä¼ è¾“æ•´ä¸ªèµ„æºå†…å®¹ï¼Œå°±å¯ä»¥å¾—åˆ°è¿™ä¸ªURIæ‰€æ ‡è¯†çš„èµ„æºå†…å®¹çš„ä¿¡æ¯ï¼Œä¾‹å¦‚åœ¨ä¸‹è½½æ–‡ä»¶å‰ï¼Œéœ€è¦çŸ¥é“æ–‡ä»¶çš„å¤§å°ï¼Œæ ¼å¼ï¼Œæ–‡ä»¶åç­‰ï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•ã€‚</p>
<p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œ<code>GET</code> æ˜¯è¯·æ±‚æ–¹æ³•ï¼Œ<code>http://www.microsoft.com</code> æ˜¯è¯·æ±‚è·¯å¾„ï¼Œ<code>HTTP/1.1</code> æ˜¯åè®®å’Œç‰ˆæœ¬ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">GET http://www.microsoft.com/HTTP/1.1</div></pre></td></tr></table></figure>
<p>åœ¨ä¸‹é¢çš„ä¾‹å­ï¼Œè¯·æ±‚æ–¹æ³•æ˜¯ <code>POST</code> ï¼Œè·å¾—çš„é¢å¤–æ•°æ®æ˜¯ <code>user=jeffrey&amp;pwd=1234</code>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">POST /reg.jsp HTTP/ (CRLF)</div><div class="line"></div><div class="line">Accept:image/gif,image/x-xbit,... (CRLF)</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">HOST:www.guet.edu.cn (CRLF)</div><div class="line">Content-Length:22 (CRLF)</div><div class="line">Connection:Keep-Alive (CRLF)</div><div class="line">Cache-Control:no-cache (CRLF)</div><div class="line">(CRLF)         //è¯¥CRLFè¡¨ç¤ºæ¶ˆæ¯æŠ¥å¤´å·²ç»ç»“æŸï¼Œåœ¨æ­¤ä¹‹å‰ä¸ºè¯·æ±‚å¤´</div><div class="line"></div><div class="line">user=jeffrey&amp;pwd=1234</div></pre></td></tr></table></figure>
<p>è¯·æ±‚å¤´éƒ½æ˜¯ä»¥key:valueå½¢å¼è¿›è¡Œä¿å­˜çš„ï¼Œé‡Œé¢è®°å½•äº†å®¢æˆ·ç«¯çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼Œå¸¸ç”¨çš„è¯·æ±‚å¤´å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<blockquote>
<p>Acceptï¼šæµè§ˆå™¨å¯æ¥å—çš„MIMEç±»å‹ï¼Œä¹Ÿå°±æ˜¯æ–‡ä»¶ç±»å‹ã€‚</p>
<p>Accept-Charsetï¼šæµè§ˆå™¨å¯æ¥å—çš„å­—ç¬¦é›†ï¼Œå¦‚GBKã€‚</p>
<p>Accept-Encodingï¼šæµè§ˆå™¨èƒ½å¤Ÿè¿›è¡Œè§£ç çš„æ•°æ®ç¼–ç æ–¹å¼ï¼Œæ¯”å¦‚gzipã€‚</p>
<p>Accept-Languageï¼šæµè§ˆå™¨æ‰€å¸Œæœ›çš„è¯­è¨€ç§ç±»ï¼Œå½“æœåŠ¡å™¨èƒ½å¤Ÿæä¾›ä¸€ç§ä»¥ä¸Šçš„è¯­è¨€ç‰ˆæœ¬æ—¶è¦ç”¨åˆ°ã€‚</p>
<p>Authorizationï¼šæˆæƒä¿¡æ¯ï¼Œé€šå¸¸å‡ºç°åœ¨å¯¹æœåŠ¡å™¨å‘é€çš„WWW-Authenticateå¤´çš„åº”ç­”ä¸­ã€‚</p>
<p>Connectionï¼šè¡¨ç¤ºæ˜¯å¦éœ€è¦æŒä¹…è¿æ¥ã€‚</p>
<p>Cache-Controlï¼šæŒ‡å®šè¯·æ±‚å’Œå“åº”éµå¾ªçš„ç¼“å­˜æœºåˆ¶ã€‚</p>
<p>Content-Lengthï¼šè¡¨ç¤ºè¯·æ±‚æ¶ˆæ¯æ­£æ–‡çš„é•¿åº¦ã€‚</p>
<p>Cookieï¼šHTTPè¯·æ±‚å‘é€æ—¶ï¼Œä¼šæŠŠä¿å­˜åœ¨è¯¥è¯·æ±‚åŸŸåä¸‹çš„æ‰€æœ‰cookieå€¼ä¸€èµ·å‘é€ç»™webæœåŠ¡å™¨ã€‚</p>
<p>Fromï¼šè¯·æ±‚å‘é€è€…çš„emailåœ°å€ï¼Œç”±ä¸€äº›ç‰¹æ®Šçš„Webå®¢æˆ·ç¨‹åºä½¿ç”¨ï¼Œæµè§ˆå™¨ä¸ä¼šç”¨åˆ°å®ƒã€‚</p>
<p>Hostï¼šæŒ‡å®šè¯·æ±‚çš„æœåŠ¡å™¨çš„åŸŸåå’Œç«¯å£å·ã€‚</p>
<p>UA-Pixelsï¼ŒUA-Colorï¼ŒUA-OSï¼ŒUA-CPUï¼šè¡¨ç¤ºå±å¹•å¤§å°ã€é¢œè‰²æ·±åº¦ã€æ“ä½œç³»ç»Ÿå’ŒCPUç±»å‹ã€‚ </p>
</blockquote>
<p>è¯·æ±‚ä½“ï¼ˆåˆå«è¯·æ±‚æ­£æ–‡ï¼‰æ˜¯postè¯·æ±‚æ–¹å¼å½“ä¸­çš„è¯·æ±‚å‚æ•°ï¼Œä»¥key=valueå½¢å¼è¿›è¡Œå­˜å‚¨ï¼Œå¤šä¸ªè¯·æ±‚å‚æ•°ä¹‹é—´ç”¨&amp;è¿æ¥ï¼Œå¦‚æœè¯·æ±‚å½“ä¸­æœ‰è¯·æ±‚æï¼Œé‚£ä¹ˆåœ¨è¯·æ±‚å¤´å½“ä¸­çš„Content-Lengthå±æ€§ä¸­è®°å½•çš„æ˜¯è¯¥è¯·æ±‚ä½“çš„é•¿åº¦ã€‚</p>
<p>ä¸‹é¢æ¥çœ‹ä¸€ä¸ªè¿˜ç®—å®Œæ•´çš„è¯·æ±‚æ¶ˆæ¯å§ï¼Œè¿™æ ·å¯èƒ½ä¼šç¨å¾®ç›´è§‚ä¸€ç‚¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">POST hysj.jsp HTTP/1.1</div><div class="line">********************************</div><div class="line">Host: search.cnipr.com</div><div class="line">User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; zh-CN; rv:1.9.1.13) Gecko/20100914 Firefox/3.5.13 ( .NET CLR 3.5.30729)</div><div class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</div><div class="line">Accept-Language: zh-cn,zh;q=0.5</div><div class="line">Accept-Encoding: gzip,deflate</div><div class="line">Accept-Charset: GB2312,utf-8;q=0.7,*;q=0.7</div><div class="line">Keep-Alive: 300</div><div class="line">Connection: keep-alive</div><div class="line">Referer: http://search.cnipr.com/cnipr/zljs/hyjs-biaodan-y.jsp</div><div class="line">Content-Length: 405</div><div class="line">********************************</div><div class="line">username=guest&amp;extension=&amp;issearch=on&amp;searchword=pd%3D%2820100901%29&amp;presearchword=&amp;sortfield=RELEVANCE&amp;sRecordNumber=&amp;searchType=0&amp;searchFrom=0&amp;channelid=14%2C15%2C16&amp;searchChannel=14%2C15%2C16&amp;strdb=14&amp;strdb=15&amp;strdb=16&amp;cizi=2&amp;sortcolumn=RELEVANCE&amp;R1=-&amp;txtA=&amp;txtB=&amp;txtC=&amp;txtD=20100901&amp;txtE=&amp;txtF=&amp;txtG=&amp;txtH=&amp;txtI=&amp;txtJ=&amp;txtK=&amp;txtL=&amp;txtM=&amp;txtN=&amp;txtP=&amp;txtQ=&amp;txtR=&amp;txtSearchWord=&amp;Submit=%BC%EC%A1%A1%CB%F7</div></pre></td></tr></table></figure>
<h3 id="HTTPå“åº”"><a href="#HTTPå“åº”" class="headerlink" title="HTTPå“åº”"></a>HTTPå“åº”</h3><p>åœ¨æ¥æ”¶å’Œè§£é‡Šè¯·æ±‚æ¶ˆæ¯åï¼ŒæœåŠ¡å™¨è¿”å›ä¸€ä¸ªHTTPå“åº”æ¶ˆæ¯ã€‚</p>
<p>HTTPå“åº”ä¹Ÿæ˜¯ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼šå“åº”è¡Œã€å“åº”å¤´ã€å“åº”æ­£æ–‡ã€‚</p>
<p>å“åº”è¡Œæ˜¯æ ‡è¯†æœåŠ¡å™¨ç«¯å¯¹å®¢æˆ·ç«¯è¯·æ±‚çš„å¤„ç†ç»“æœï¼Œä¸»è¦ç”±å“åº”çŠ¶æ€ä¿¡æ¯ï¼Œå“åº”çŠ¶æ€ç ï¼ŒæœåŠ¡å™¨åè®®ç»„æˆï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">HTTP-Version Status-Code Reason-Phrase CRLF</div><div class="line"></div><div class="line">HTTP-Versionï¼šè¡¨ç¤ºæœåŠ¡å™¨HTTPåè®®çš„ç‰ˆæœ¬</div><div class="line">Status-Codeï¼šè¡¨ç¤ºæœåŠ¡å™¨å‘å›çš„å“åº”çŠ¶æ€ä»£ç </div><div class="line">Reason-Phraseï¼šè¡¨ç¤ºçŠ¶æ€ä»£ç çš„æ–‡æœ¬æè¿°</div></pre></td></tr></table></figure>
<p>çŠ¶æ€ä»£ç æœ‰ä¸‰ä½æ•°å­—ç»„æˆï¼Œç¬¬ä¸€ä¸ªæ•°å­—å®šä¹‰äº†å“åº”çš„ç±»åˆ«ï¼Œä¸”æœ‰äº”ç§å¯èƒ½å–å€¼ï¼š</p>
<table>
<thead>
<tr>
<th>çŠ¶æ€ç </th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>1xx</td>
<td>æŒ‡ç¤ºä¿¡æ¯â€“è¡¨ç¤ºè¯·æ±‚å·²æ¥æ”¶ï¼Œç»§ç»­å¤„ç†ã€‚</td>
</tr>
<tr>
<td>2xx</td>
<td>æˆåŠŸâ€“è¡¨ç¤ºè¯·æ±‚å·²è¢«æˆåŠŸæ¥æ”¶ã€ç†è§£ã€æ¥å—ã€‚</td>
</tr>
<tr>
<td>3xx</td>
<td>é‡å®šå‘â€“è¦å®Œæˆè¯·æ±‚å¿…é¡»è¿›è¡Œæ›´è¿›ä¸€æ­¥çš„æ“ä½œã€‚</td>
</tr>
<tr>
<td>4xx</td>
<td>å®¢æˆ·ç«¯é”™è¯¯â€“è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯æˆ–è¯·æ±‚æ— æ³•å®ç°ã€‚</td>
</tr>
<tr>
<td>5xx</td>
<td>æœåŠ¡å™¨ç«¯é”™è¯¯â€“æœåŠ¡å™¨æœªèƒ½å®ç°åˆæ³•çš„è¯·æ±‚ã€‚</td>
</tr>
</tbody>
</table>
<p>å¸¸è§çŠ¶æ€ä»£ç ã€çŠ¶æ€æè¿°ã€è¯´æ˜ï¼š</p>
<table>
<thead>
<tr>
<th>çŠ¶æ€ç </th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>200 OK</td>
<td>å®¢æˆ·ç«¯è¯·æ±‚æˆåŠŸã€‚</td>
</tr>
<tr>
<td>400 Bad Request</td>
<td>å®¢æˆ·ç«¯è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯ï¼Œä¸èƒ½è¢«æœåŠ¡å™¨æ‰€ç†è§£ã€‚</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>è¯·æ±‚æœªç»æˆæƒï¼Œè¿™ä¸ªçŠ¶æ€ä»£ç å¿…é¡»å’ŒWWW-AuthenticateæŠ¥å¤´åŸŸä¸€èµ·ä½¿ç”¨ã€‚</td>
</tr>
<tr>
<td>403 Forbidden</td>
<td>æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æä¾›æœåŠ¡ã€‚</td>
</tr>
<tr>
<td>404 Not Found</td>
<td>è¯·æ±‚èµ„æºä¸å­˜åœ¨ï¼Œegï¼šè¾“å…¥äº†é”™è¯¯çš„URLã€‚</td>
</tr>
<tr>
<td>500 Internal Server Error</td>
<td>æœåŠ¡å™¨å‘ç”Ÿä¸å¯é¢„æœŸçš„é”™è¯¯ã€‚</td>
</tr>
<tr>
<td>503 Server Unavailable</td>
<td>æœåŠ¡å™¨å½“å‰ä¸èƒ½å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œä¸€æ®µæ—¶é—´åå¯èƒ½æ¢å¤æ­£å¸¸ã€‚</td>
</tr>
</tbody>
</table>
<p>å“åº”å¤´åŸŸå…è®¸æœåŠ¡å™¨ä¼ é€’ä¸èƒ½æ”¾åœ¨çŠ¶æ€è¡Œçš„é™„åŠ ä¿¡æ¯ï¼Œè¿™äº›åŸŸä¸»è¦æè¿°æœåŠ¡å™¨çš„ä¿¡æ¯å’Œ Request-URIè¿›ä¸€æ­¥çš„ä¿¡æ¯ã€‚å“åº”å¤´åŸŸåŒ…å«Ageã€Locationã€Proxy-Authenticateã€Publicã€Retry- Afterã€Serverã€Varyã€Warningã€WWW-Authenticateã€‚å¯¹å“åº”å¤´åŸŸçš„æ‰©å±•è¦æ±‚é€šè®¯åŒæ–¹éƒ½æ”¯æŒï¼Œå¦‚æœå­˜åœ¨ä¸æ”¯æŒçš„å“åº”å¤´åŸŸï¼Œä¸€èˆ¬å°†ä¼šä½œä¸ºå®ä½“å¤´åŸŸå¤„ç†ã€‚ </p>
<p>å¸¸è§çš„å“åº”å¤´ä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>Allow</p>
<p>æœåŠ¡å™¨æ”¯æŒå“ªäº›è¯·æ±‚æ–¹æ³•ï¼ˆå¦‚GETã€POSTç­‰ï¼‰ã€‚</p>
<p>Content-Encoding</p>
<p>æ–‡æ¡£çš„ç¼–ç ï¼ˆEncodeï¼‰æ–¹æ³•ã€‚åªæœ‰åœ¨è§£ç ä¹‹åæ‰å¯ä»¥å¾—åˆ°Content-Typeå¤´æŒ‡å®šçš„å†…å®¹ç±»å‹ã€‚åˆ©ç”¨gzipå‹ç¼©æ–‡æ¡£èƒ½å¤Ÿæ˜¾è‘—åœ°å‡å°‘HTMLæ–‡æ¡£çš„ä¸‹è½½æ—¶é—´ã€‚Javaçš„GZIPOutputStreamå¯ä»¥å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œgzipå‹ç¼©ï¼Œä½†åªæœ‰Unixä¸Šçš„Netscapeå’ŒWindowsä¸Šçš„IE 4ã€IE 5æ‰æ”¯æŒå®ƒã€‚å› æ­¤ï¼ŒServletåº”è¯¥é€šè¿‡æŸ¥çœ‹Accept-Encodingå¤´ï¼ˆå³request.getHeader(â€œAccept-Encodingâ€)ï¼‰æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒgzipï¼Œä¸ºæ”¯æŒgzipçš„æµè§ˆå™¨è¿”å›ç»gzipå‹ç¼©çš„HTMLé¡µé¢ï¼Œä¸ºå…¶ä»–æµè§ˆå™¨è¿”å›æ™®é€šé¡µé¢ã€‚</p>
<p>Content-Length</p>
<p>è¡¨ç¤ºå†…å®¹é•¿åº¦ã€‚åªæœ‰å½“æµè§ˆå™¨ä½¿ç”¨æŒä¹…HTTPè¿æ¥æ—¶æ‰éœ€è¦è¿™ä¸ªæ•°æ®ã€‚å¦‚æœä½ æƒ³è¦åˆ©ç”¨æŒä¹…è¿æ¥çš„ä¼˜åŠ¿ï¼Œå¯ä»¥æŠŠè¾“å‡ºæ–‡æ¡£å†™å…¥ByteArrayOutputStramï¼Œå®ŒæˆåæŸ¥çœ‹å…¶å¤§å°ï¼Œç„¶åæŠŠè¯¥å€¼æ”¾å…¥Content-Lengthå¤´ï¼Œæœ€åé€šè¿‡byteArrayStream.writeTo(response.getOutputStream()å‘é€å†…å®¹ã€‚</p>
<p>Content-Type</p>
<p>è¡¨ç¤ºåé¢çš„æ–‡æ¡£å±äºä»€ä¹ˆMIMEç±»å‹ã€‚Servleté»˜è®¤ä¸ºtext/plainï¼Œä½†é€šå¸¸éœ€è¦æ˜¾å¼åœ°æŒ‡å®šä¸ºtext/htmlã€‚ç”±äºç»å¸¸è¦è®¾ç½®Content-Typeï¼Œå› æ­¤HttpServletResponseæä¾›äº†ä¸€ä¸ªä¸“ç”¨çš„æ–¹æ³•setContentTypeã€‚ </p>
<p>Date</p>
<p>å½“å‰çš„GMTæ—¶é—´ã€‚ä½ å¯ä»¥ç”¨setDateHeaderæ¥è®¾ç½®è¿™ä¸ªå¤´ä»¥é¿å…è½¬æ¢æ—¶é—´æ ¼å¼çš„éº»çƒ¦ã€‚</p>
<p>Last-Modified</p>
<p>æ–‡æ¡£çš„æœ€åæ”¹åŠ¨æ—¶é—´ã€‚å®¢æˆ·å¯ä»¥é€šè¿‡If-Modified-Sinceè¯·æ±‚å¤´æä¾›ä¸€ä¸ªæ—¥æœŸï¼Œè¯¥è¯·æ±‚å°†è¢«è§†ä¸ºä¸€ä¸ªæ¡ä»¶GETï¼Œåªæœ‰æ”¹åŠ¨æ—¶é—´è¿ŸäºæŒ‡å®šæ—¶é—´çš„æ–‡æ¡£æ‰ä¼šè¿”å›ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ª304ï¼ˆNot Modifiedï¼‰çŠ¶æ€ã€‚Last-Modifiedä¹Ÿå¯ç”¨setDateHeaderæ–¹æ³•æ¥è®¾ç½®ã€‚</p>
<p>Location</p>
<p>è¡¨ç¤ºå®¢æˆ·åº”å½“åˆ°å“ªé‡Œå»æå–æ–‡æ¡£ã€‚Locationé€šå¸¸ä¸æ˜¯ç›´æ¥è®¾ç½®çš„ï¼Œè€Œæ˜¯é€šè¿‡HttpServletResponseçš„sendRedirectæ–¹æ³•ï¼Œè¯¥æ–¹æ³•åŒæ—¶è®¾ç½®çŠ¶æ€ä»£ç ä¸º302</p>
<p>Refresh</p>
<p>è¡¨ç¤ºæµè§ˆå™¨åº”è¯¥åœ¨å¤šå°‘æ—¶é—´ä¹‹ååˆ·æ–°æ–‡æ¡£ï¼Œä»¥ç§’è®¡ã€‚</p>
<p>Server</p>
<p>æœåŠ¡å™¨åå­—ã€‚Servletä¸€èˆ¬ä¸è®¾ç½®è¿™ä¸ªå€¼ï¼Œè€Œæ˜¯ç”±WebæœåŠ¡å™¨è‡ªå·±è®¾ç½®ã€‚</p>
<p>Set-Cookie</p>
<p>è®¾ç½®å’Œé¡µé¢å…³è”çš„Cookieã€‚Servletä¸åº”ä½¿ç”¨response.setHeader(â€œSet-Cookieâ€, â€¦)ï¼Œè€Œæ˜¯åº”ä½¿ç”¨HttpServletResponseæä¾›çš„ä¸“ç”¨æ–¹æ³•addCookieã€‚</p>
<p>WWW-Authenticate</p>
<p>å®¢æˆ·åº”è¯¥åœ¨Authorizationå¤´ä¸­æä¾›ä»€ä¹ˆç±»å‹çš„æˆæƒä¿¡æ¯ï¼Ÿåœ¨åŒ…å«401ï¼ˆUnauthorizedï¼‰çŠ¶æ€è¡Œçš„åº”ç­”ä¸­è¿™ä¸ªå¤´æ˜¯å¿…éœ€çš„ã€‚ä¾‹å¦‚ï¼Œ<code>response.setHeader(&quot;WWW-Authenticate&quot;, &quot;BASIC realm=ï¼¼&quot;executivesï¼¼&quot;&quot;)</code>ã€‚<br>æ³¨æ„Servletä¸€èˆ¬ä¸è¿›è¡Œè¿™æ–¹é¢çš„å¤„ç†ï¼Œè€Œæ˜¯è®©WebæœåŠ¡å™¨çš„ä¸“é—¨æœºåˆ¶æ¥æ§åˆ¶å—å¯†ç ä¿æŠ¤é¡µé¢çš„è®¿é—®ï¼ˆä¾‹å¦‚.htaccessï¼‰ã€‚</p>
</blockquote>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„å“åº”æ¶ˆæ¯ï¼š </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">HTTP/1.0200OK </div><div class="line">Date:Mon,31Dec200104:25:57GMT </div><div class="line">Server:Apache/1.3.14(Unix) </div><div class="line">Content-type:text/html </div><div class="line">Last-modified:Tue,17Apr200106:46:28GMT </div><div class="line">Etag:&quot;a030f020ac7c01:1e9f&quot; </div><div class="line">Content-length:39725426 </div><div class="line">Content-range:bytes554554-40279979/40279980</div></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯ä»¥Charleså·¥å…·æŠ“å–çš„ä¼˜é…·å“åº”æ¶ˆæ¯çš„æˆªå›¾ï¼š</p>
<p><img src="http://oboehz2ag.bkt.clouddn.com/youku.png" alt="youku"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åè®®æ˜¯æŒ‡è®¡ç®—æœºé€šä¿¡ç½‘ç»œä¸­ä¸¤å°è®¡ç®—æœºä¹‹é—´è¿›è¡Œé€šä¿¡æ‰€å¿…é¡»å…±åŒéµå®ˆçš„è§„å®šæˆ–è§„åˆ™ï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®(HTTP)æ˜¯ä¸€ç§é€šä¿¡åè®®ï¼Œå®ƒå…è®¸å°†è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€(HTML)æ–‡æ¡£ä»WebæœåŠ¡å™¨ä¼ é€åˆ°å®¢æˆ·ç«¯çš„æµè§ˆã€‚&lt;/p&gt;
&lt;p&gt;è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆè‹±æ–‡ï¼šHyperText Transfer Protocolï¼Œç¼©å†™ï¼šHTTPï¼‰æ˜¯äº’è”ç½‘ä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§ç½‘ç»œåè®®ã€‚è®¾è®¡HTTPæœ€åˆçš„ç›®çš„æ˜¯ä¸ºäº†æä¾›ä¸€ç§å‘å¸ƒå’Œæ¥æ”¶HTMLé¡µé¢çš„æ–¹æ³•ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ç½‘ç»œé€šè®¯" scheme="http://yoursite.com/categories/%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF/"/>
    
    
      <category term="HTTPè¯·æ±‚" scheme="http://yoursite.com/tags/HTTP%E8%AF%B7%E6%B1%82/"/>
    
      <category term="ç½‘ç»œé€šè®¯" scheme="http://yoursite.com/tags/%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF/"/>
    
  </entry>
  
  <entry>
    <title>MYSQLå…¥é—¨ - åŸºç¡€è¯­æ³•</title>
    <link href="http://yoursite.com/2016/08/17/SQL%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/"/>
    <id>http://yoursite.com/2016/08/17/SQLåŸºç¡€è¯­æ³•/</id>
    <published>2016-08-16T20:44:00.000Z</published>
    <updated>2016-08-24T04:41:19.000Z</updated>
    
    <content type="html"><![CDATA[<p>SQL æ˜¯ç”¨äºè®¿é—®å’Œå¤„ç†æ•°æ®åº“çš„æ ‡å‡†çš„è®¡ç®—æœºè¯­è¨€ã€‚</p>
<p>å¦‚æœéœ€è¦åœ¨ç½‘ç«™æˆ– APP ä¸­åˆ›å»ºæˆ–ä½¿ç”¨æ•°æ®åº“ï¼Œéœ€è¦å…·å¤‡ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li>RDBMS æ•°æ®åº“ç¨‹åºï¼ˆæ¯”å¦‚ MS Access, SQL Server, MySQLï¼‰</li>
<li>æœåŠ¡å™¨ç«¯è„šæœ¬è¯­è¨€ï¼ˆæ¯”å¦‚ PHP æˆ– ASPï¼‰</li>
<li>SQL</li>
<li>HTML / CSS</li>
</ul>
<p>RDBMS æŒ‡çš„æ˜¯å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚</p>
<p>RDBMS æ˜¯ SQL çš„åŸºç¡€ï¼ŒåŒæ ·ä¹Ÿæ˜¯æ‰€æœ‰ç°ä»£æ•°æ®åº“ç³»ç»Ÿçš„åŸºç¡€ï¼Œæ¯”å¦‚ MS SQL Server, IBM DB2, Oracle, MySQL ä»¥åŠ Microsoft Accessã€‚</p>
<p>RDBMS ä¸­çš„æ•°æ®å­˜å‚¨åœ¨è¢«ç§°ä¸ºè¡¨ï¼ˆtablesï¼‰çš„æ•°æ®åº“å¯¹è±¡ä¸­ã€‚</p>
<p>è¡¨æ˜¯ç›¸å…³çš„æ•°æ®é¡¹çš„é›†åˆï¼Œå®ƒç”±åˆ—å’Œè¡Œç»„æˆã€‚</p>
<a id="more"></a>
<h4 id="æ•°æ®åº“è¡¨"><a href="#æ•°æ®åº“è¡¨" class="headerlink" title="æ•°æ®åº“è¡¨"></a>æ•°æ®åº“è¡¨</h4><p>ä¸€ä¸ªæ•°æ®åº“é€šå¸¸åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ã€‚æ¯ä¸ªè¡¨ç”±ä¸€ä¸ªåå­—æ ‡è¯†ï¼ˆä¾‹å¦‚â€œå®¢æˆ·â€æˆ–è€…â€œè®¢å•â€ï¼‰ã€‚è¡¨åŒ…å«å¸¦æœ‰æ•°æ®çš„è®°å½•ï¼ˆè¡Œï¼‰ã€‚</p>
<p>ä¸‹é¢çš„ä¾‹å­æ˜¯ä¸€ä¸ªåä¸º â€œPersonsâ€ çš„è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th>Id</th>
<th>LastName</th>
<th>FirstName</th>
<th>Address</th>
<th>City</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Adams</td>
<td>John</td>
<td>Oxford Street</td>
<td>London</td>
</tr>
<tr>
<td>2</td>
<td>Bush</td>
<td>George</td>
<td>Fifth Avenue</td>
<td>New York</td>
</tr>
<tr>
<td>3</td>
<td>Carter</td>
<td>Thomas</td>
<td>Changan Street</td>
<td>Beijing</td>
</tr>
</tbody>
</table>
<p>ä¸Šé¢çš„è¡¨åŒ…å«ä¸‰æ¡è®°å½•ï¼ˆæ¯ä¸€æ¡å¯¹åº”ä¸€ä¸ªäººï¼‰å’Œäº”ä¸ªåˆ—ï¼ˆIdã€å§“ã€åã€åœ°å€å’ŒåŸå¸‚ï¼‰ã€‚</p>
<h4 id="SQLè¯­æ³•"><a href="#SQLè¯­æ³•" class="headerlink" title="SQLè¯­æ³•"></a>SQLè¯­æ³•</h4><p>æ•°æ®åº“ä¸Šæ‰§è¡Œçš„å¤§éƒ¨åˆ†å·¥ä½œéƒ½ç”± SQL è¯­å¥å®Œæˆã€‚SQL åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼šæ•°æ®æ“ä½œè¯­è¨€ (DML) å’Œ æ•°æ®å®šä¹‰è¯­è¨€ (DDL)ã€‚</p>
<p>SQL (ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€)æ˜¯ç”¨äºæ‰§è¡ŒæŸ¥è¯¢çš„è¯­æ³•ã€‚ä½†æ˜¯ SQL è¯­è¨€ä¹ŸåŒ…å«ç”¨äºæ›´æ–°ã€æ’å…¥å’Œåˆ é™¤è®°å½•çš„è¯­æ³•ã€‚</p>
<p>æŸ¥è¯¢å’Œæ›´æ–°æŒ‡ä»¤æ„æˆäº† SQL çš„ DML éƒ¨åˆ†ï¼š</p>
<ul>
<li><em>SELECT</em> - ä»æ•°æ®åº“è¡¨ä¸­è·å–æ•°æ®</li>
<li><em>UPDATE</em> - æ›´æ–°æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®</li>
<li><em>DELETE</em> - ä»æ•°æ®åº“è¡¨ä¸­åˆ é™¤æ•°æ®</li>
<li><em>INSERT INTO</em> - å‘æ•°æ®åº“è¡¨ä¸­æ’å…¥æ•°æ®</li>
</ul>
<p>SQL çš„æ•°æ®å®šä¹‰è¯­è¨€ (DDL) éƒ¨åˆ†ä½¿æˆ‘ä»¬æœ‰èƒ½åŠ›åˆ›å»ºæˆ–åˆ é™¤è¡¨æ ¼ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰ç´¢å¼•ï¼ˆé”®ï¼‰ï¼Œè§„å®šè¡¨ä¹‹é—´çš„é“¾æ¥ï¼Œä»¥åŠæ–½åŠ è¡¨é—´çš„çº¦æŸã€‚</p>
<p>SQL ä¸­æœ€é‡è¦çš„ DDL è¯­å¥:</p>
<ul>
<li><em>CREATE DATABASE</em> - åˆ›å»ºæ–°æ•°æ®åº“</li>
<li><em>ALTER DATABASE</em> - ä¿®æ”¹æ•°æ®åº“</li>
<li><em>CREATE TABLE</em> - åˆ›å»ºæ–°è¡¨</li>
<li><em>ALTER TABLE</em> - å˜æ›´ï¼ˆæ”¹å˜ï¼‰æ•°æ®åº“è¡¨</li>
<li><em>DROP TABLE</em> - åˆ é™¤è¡¨</li>
<li><em>CREATE INDEX</em> - åˆ›å»ºç´¢å¼•ï¼ˆæœç´¢é”®ï¼‰</li>
<li><em>DROP INDEX</em> - åˆ é™¤ç´¢å¼•</li>
</ul>
<h4 id="SQL-SELECT-è¯­å¥"><a href="#SQL-SELECT-è¯­å¥" class="headerlink" title="SQL SELECT è¯­å¥"></a>SQL SELECT è¯­å¥</h4><p>SELECT è¯­å¥ç”¨äºä»è¡¨ä¸­é€‰å–æ•°æ®ã€‚ç»“æœè¢«å­˜å‚¨åœ¨ä¸€ä¸ªç»“æœè¡¨ä¸­ï¼ˆç§°ä¸ºç»“æœé›†ï¼‰ã€‚å®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> åˆ—åç§° <span class="keyword">FROM</span> è¡¨åç§°</div></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> è¡¨åç§°</div></pre></td></tr></table></figure>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<p>Persons è¡¨:</p>
<table>
<thead>
<tr>
<th>Id</th>
<th>LastName</th>
<th>FirstName</th>
<th>Address</th>
<th>City</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Adams</td>
<td>John</td>
<td>Oxford Street</td>
<td>London</td>
</tr>
<tr>
<td>2</td>
<td>Bush</td>
<td>George</td>
<td>Fifth Avenue</td>
<td>New York</td>
</tr>
<tr>
<td>3</td>
<td>Carter</td>
<td>Thomas</td>
<td>Changan Street</td>
<td>Beijing</td>
</tr>
</tbody>
</table>
<p>è·å–åä¸º â€œLastNameâ€ å’Œ â€œFirstNameâ€ çš„åˆ—çš„å†…å®¹ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> LastName,FirstName <span class="keyword">FROM</span> Persons</div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>LastName</th>
<th>FirstName</th>
</tr>
</thead>
<tbody>
<tr>
<td>Adams</td>
<td>John</td>
</tr>
<tr>
<td>Bush</td>
<td>George</td>
</tr>
<tr>
<td>Carter</td>
<td>Thomas</td>
</tr>
</tbody>
</table>
<p>é€‰å–è¡¨ä¸­æ‰€æœ‰çš„åˆ—ï¼Œå¯ä½¿ç”¨ç¬¦å· <code>*</code> å–ä»£åˆ—çš„åç§°ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> Persons</div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>Id</th>
<th>LastName</th>
<th>FirstName</th>
<th>Address</th>
<th>City</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Adams</td>
<td>John</td>
<td>Oxford Street</td>
<td>London</td>
</tr>
<tr>
<td>2</td>
<td>Bush</td>
<td>George</td>
<td>Fifth Avenue</td>
<td>New York</td>
</tr>
<tr>
<td>3</td>
<td>Carter</td>
<td>Thomas</td>
<td>Changan Street</td>
<td>Beijing</td>
</tr>
</tbody>
</table>
<h4 id="SQL-SELECT-DISTINCT-è¯­å¥"><a href="#SQL-SELECT-DISTINCT-è¯­å¥" class="headerlink" title="SQL SELECT DISTINCT è¯­å¥"></a>SQL SELECT DISTINCT è¯­å¥</h4><p>åœ¨è¡¨ä¸­ï¼Œå¯èƒ½ä¼šåŒ…å«é‡å¤å€¼ã€‚å¦‚æœå¸Œæœ›ä»…ä»…åˆ—å‡ºä¸åŒï¼ˆdistinctï¼‰çš„å€¼ã€‚å¯ä»¥ä½¿ç”¨å…³é”®è¯ DISTINCT ï¼Œå®ƒç”¨äºè¿”å›å”¯ä¸€ä¸åŒçš„å€¼ã€‚å…¶è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> åˆ—åç§° <span class="keyword">FROM</span> è¡¨åç§°</div></pre></td></tr></table></figure>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<p>Orders è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th>Company</th>
<th>OrderNumber</th>
</tr>
</thead>
<tbody>
<tr>
<td>IBM</td>
<td>3532</td>
</tr>
<tr>
<td>W3School</td>
<td>2356</td>
</tr>
<tr>
<td>Apple</td>
<td>4698</td>
</tr>
<tr>
<td>W3School</td>
<td>6953</td>
</tr>
</tbody>
</table>
<p>å¦‚éœ€ä» Companyâ€ åˆ—ä¸­ä»…é€‰å–å”¯ä¸€ä¸åŒçš„å€¼ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> Company <span class="keyword">FROM</span> Orders</div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>Company</th>
</tr>
</thead>
<tbody>
<tr>
<td>IBM</td>
</tr>
<tr>
<td>W3School</td>
</tr>
<tr>
<td>Apple</td>
</tr>
</tbody>
</table>
<p>ç°åœ¨ï¼Œåœ¨ç»“æœé›†ä¸­ï¼Œâ€W3Schoolâ€ ä»…è¢«åˆ—å‡ºäº†ä¸€æ¬¡ã€‚</p>
<h4 id="SQL-WHERE-å­å¥"><a href="#SQL-WHERE-å­å¥" class="headerlink" title="SQL WHERE å­å¥"></a>SQL WHERE å­å¥</h4><p>WHERE å­å¥ç”¨äºè§„å®šé€‰æ‹©çš„æ ‡å‡†ï¼Œå¦‚éœ€æœ‰æ¡ä»¶åœ°ä»è¡¨ä¸­é€‰å–æ•°æ®ï¼Œå¯å°† WHERE å­å¥æ·»åŠ åˆ° SELECT è¯­å¥ã€‚å…¶è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> åˆ—åç§° <span class="keyword">FROM</span> è¡¨åç§° <span class="keyword">WHERE</span> åˆ— è¿ç®—ç¬¦ å€¼</div></pre></td></tr></table></figure>
<p>WHERE å­å¥ä¸­æ”¯æŒçš„è¿ç®—ç¬¦æœ‰ï¼š</p>
<table>
<thead>
<tr>
<th>è¿ç®—ç¬¦</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>ç­‰äº</td>
</tr>
<tr>
<td>&lt;&gt; OR  !=</td>
<td>ä¸ç­‰äº</td>
</tr>
<tr>
<td>&gt;</td>
<td>å¤§äº</td>
</tr>
<tr>
<td>&lt;</td>
<td>å°äº</td>
</tr>
<tr>
<td>&gt;=</td>
<td>å¤§äºç­‰äº</td>
</tr>
<tr>
<td>&lt;=</td>
<td>å°äºç­‰äº</td>
</tr>
<tr>
<td>BETWEEN</td>
<td>åœ¨æŸä¸ªèŒƒå›´å†…</td>
</tr>
<tr>
<td>LIKE</td>
<td>æœç´¢æŸç§æ¨¡å¼</td>
</tr>
</tbody>
</table>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<p>Persons è¡¨</p>
<table>
<thead>
<tr>
<th>LastName</th>
<th>FirstName</th>
<th>Address</th>
<th>City</th>
<th>Year</th>
</tr>
</thead>
<tbody>
<tr>
<td>Adams</td>
<td>John</td>
<td>Oxford Street</td>
<td>London</td>
<td>1970</td>
</tr>
<tr>
<td>Bush</td>
<td>George</td>
<td>Fifth Avenue</td>
<td>New York</td>
<td>1975</td>
</tr>
<tr>
<td>Carter</td>
<td>Thomas</td>
<td>Changan Street</td>
<td>Beijing</td>
<td>1980</td>
</tr>
<tr>
<td>Gates</td>
<td>Bill</td>
<td>Xuanwumen 10</td>
<td>Beijing</td>
<td>1985</td>
</tr>
</tbody>
</table>
<p>å¦‚æœå¸Œæœ›é€‰å–å±…ä½åœ¨åŸå¸‚ â€œBeijingâ€ ä¸­çš„äººï¼Œé‚£ä¹ˆéœ€è¦å‘ SELECT è¯­å¥æ·»åŠ  WHERE å­å¥ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> Persons <span class="keyword">WHERE</span> City=<span class="string">'Beijing'</span></div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>LastName</th>
<th>FirstName</th>
<th>Address</th>
<th>City</th>
<th>Year</th>
</tr>
</thead>
<tbody>
<tr>
<td>Carter</td>
<td>Thomas</td>
<td>Changan Street</td>
<td>Beijing</td>
<td>1980</td>
</tr>
<tr>
<td>Gates</td>
<td>Bill</td>
<td>Xuanwumen 10</td>
<td>Beijing</td>
<td>1985</td>
</tr>
</tbody>
</table>
<h4 id="SQL-AND-amp-OR-è¿ç®—ç¬¦"><a href="#SQL-AND-amp-OR-è¿ç®—ç¬¦" class="headerlink" title="SQL AND &amp; OR è¿ç®—ç¬¦"></a>SQL AND &amp; OR è¿ç®—ç¬¦</h4><p>AND å’Œ OR å¯åœ¨ WHERE å­è¯­å¥ä¸­æŠŠä¸¤ä¸ªæˆ–å¤šä¸ªæ¡ä»¶ç»“åˆèµ·æ¥ã€‚<br>å¦‚æœç¬¬ä¸€ä¸ªæ¡ä»¶å’Œç¬¬äºŒä¸ªæ¡ä»¶éƒ½æˆç«‹ï¼Œåˆ™ AND è¿ç®—ç¬¦æ˜¾ç¤ºä¸€æ¡è®°å½•ã€‚<br>å¦‚æœç¬¬ä¸€ä¸ªæ¡ä»¶å’Œç¬¬äºŒä¸ªæ¡ä»¶ä¸­åªè¦æœ‰ä¸€ä¸ªæˆç«‹ï¼Œåˆ™ OR è¿ç®—ç¬¦æ˜¾ç¤ºä¸€æ¡è®°å½•ã€‚</p>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<p>Persons è¡¨</p>
<table>
<thead>
<tr>
<th>LastName</th>
<th>FirstName</th>
<th>Address</th>
<th>City</th>
</tr>
</thead>
<tbody>
<tr>
<td>Adams</td>
<td>John</td>
<td>Oxford Street</td>
<td>London</td>
</tr>
<tr>
<td>Bush</td>
<td>George</td>
<td>Fifth Avenue</td>
<td>New York</td>
</tr>
<tr>
<td>Carter</td>
<td>Thomas</td>
<td>Changan Street</td>
<td>Beijing</td>
</tr>
<tr>
<td>Carter</td>
<td>William</td>
<td>Xuanwumen 10</td>
<td>Beijing</td>
</tr>
</tbody>
</table>
<p>ä½¿ç”¨ AND æ¥æ˜¾ç¤ºæ‰€æœ‰å§“ä¸º â€œCarterâ€ å¹¶ä¸”åä¸º â€œThomasâ€ çš„äººï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> Persons <span class="keyword">WHERE</span> FirstName=<span class="string">'Thomas'</span> <span class="keyword">AND</span> LastName=<span class="string">'Carter'</span></div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>LastName</th>
<th>FirstName</th>
<th>Address</th>
<th>City</th>
</tr>
</thead>
<tbody>
<tr>
<td>Carter</td>
<td>Thomas</td>
<td>Changan Street</td>
<td>Beijing</td>
</tr>
</tbody>
</table>
<p>ä½¿ç”¨ OR æ¥æ˜¾ç¤ºæ‰€æœ‰å§“ä¸º â€œCarterâ€ æˆ–è€…åä¸º â€œThomasâ€ çš„äººï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> Persons <span class="keyword">WHERE</span> firstname=<span class="string">'Thomas'</span> <span class="keyword">OR</span> lastname=<span class="string">'Carter'</span></div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>LastName</th>
<th>FirstName</th>
<th>Address</th>
<th>City</th>
</tr>
</thead>
<tbody>
<tr>
<td>Carter</td>
<td>Thomas</td>
<td>Changan Street</td>
<td>Beijing</td>
</tr>
<tr>
<td>Carter</td>
<td>William</td>
<td>Xuanwumen 10</td>
<td>Beijing</td>
</tr>
</tbody>
</table>
<p>ç»¼åˆä½¿ç”¨ AND å’Œ ORï¼Œæ˜¾ç¤ºæ‰€æœ‰åä¸º â€œThomasâ€ æˆ–è€…åä¸º â€œWilliamâ€ ï¼Œå¹¶ä¸”çš„å§“ä¸º â€œCarterâ€ çš„äººï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> Persons <span class="keyword">WHERE</span> (FirstName=<span class="string">'Thomas'</span> <span class="keyword">OR</span> FirstName=<span class="string">'William'</span>)</div><div class="line"><span class="keyword">AND</span> LastName=<span class="string">'Carter'</span></div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>LastName</th>
<th>FirstName</th>
<th>Address</th>
<th>City</th>
</tr>
</thead>
<tbody>
<tr>
<td>Carter</td>
<td>Thomas</td>
<td>Changan Street</td>
<td>Beijing</td>
</tr>
<tr>
<td>Carter</td>
<td>William</td>
<td>Xuanwumen 10</td>
<td>Beijing</td>
</tr>
</tbody>
</table>
<h4 id="SQL-ORDER-BY-å­å¥"><a href="#SQL-ORDER-BY-å­å¥" class="headerlink" title="SQL ORDER BY å­å¥"></a>SQL ORDER BY å­å¥</h4><p>ORDER BY è¯­å¥ç”¨äºæ ¹æ®æŒ‡å®šçš„åˆ—å¯¹ç»“æœé›†è¿›è¡Œæ’åºã€‚é»˜è®¤çš„æ’åºæ–¹å¼æ˜¯å‡åºã€‚å¦‚æœå¸Œæœ›æŒ‰ç…§é™åºå¯¹è®°å½•è¿›è¡Œæ’åºï¼Œå¯ä»¥ä½¿ç”¨ DESC å…³é”®å­—ã€‚</p>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<p>Orders è¡¨:</p>
<table>
<thead>
<tr>
<th>Company</th>
<th>OrderNumber</th>
</tr>
</thead>
<tbody>
<tr>
<td>IBM</td>
<td>3532</td>
</tr>
<tr>
<td>W3School</td>
<td>2356</td>
</tr>
<tr>
<td>Apple</td>
<td>4698</td>
</tr>
<tr>
<td>W3School</td>
<td>6953</td>
</tr>
</tbody>
</table>
<p>ä»¥å­—æ¯é¡ºåºæ˜¾ç¤ºå…¬å¸åç§°ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> Company, OrderNumber <span class="keyword">FROM</span> Orders <span class="keyword">ORDER</span> <span class="keyword">BY</span> Company</div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>Company</th>
<th>OrderNumber</th>
</tr>
</thead>
<tbody>
<tr>
<td>Apple</td>
<td>4698</td>
</tr>
<tr>
<td>IBM</td>
<td>3532</td>
</tr>
<tr>
<td>W3School</td>
<td>6953</td>
</tr>
<tr>
<td>W3School</td>
<td>2356</td>
</tr>
</tbody>
</table>
<p>ä»¥å­—æ¯é¡ºåºæ˜¾ç¤ºå…¬å¸åç§°ï¼ˆCompanyï¼‰ï¼Œå¹¶ä»¥æ•°å­—é¡ºåºæ˜¾ç¤ºé¡ºåºå·ï¼ˆOrderNumberï¼‰ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> Company, OrderNumber <span class="keyword">FROM</span> Orders <span class="keyword">ORDER</span> <span class="keyword">BY</span> Company, OrderNumber</div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>Company</th>
<th>OrderNumber</th>
</tr>
</thead>
<tbody>
<tr>
<td>Apple</td>
<td>4698</td>
</tr>
<tr>
<td>IBM</td>
<td>3532</td>
</tr>
<tr>
<td>W3School</td>
<td>2356</td>
</tr>
<tr>
<td>W3School</td>
<td>6953</td>
</tr>
</tbody>
</table>
<p>ä»¥é€†å­—æ¯é¡ºåºæ˜¾ç¤ºå…¬å¸åç§°ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> Company, OrderNumber <span class="keyword">FROM</span> Orders <span class="keyword">ORDER</span> <span class="keyword">BY</span> Company <span class="keyword">DESC</span></div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>Company</th>
<th>OrderNumber</th>
</tr>
</thead>
<tbody>
<tr>
<td>W3School</td>
<td>6953</td>
</tr>
<tr>
<td>W3School</td>
<td>2356</td>
</tr>
<tr>
<td>IBM</td>
<td>3532</td>
</tr>
<tr>
<td>Apple</td>
<td>4698</td>
</tr>
</tbody>
</table>
<p>ä»¥é€†å­—æ¯é¡ºåºæ˜¾ç¤ºå…¬å¸åç§°ï¼ˆCompanyï¼‰ï¼Œå¹¶ä»¥æ•°å­—é¡ºåºæ˜¾ç¤ºé¡ºåºå·ï¼ˆOrderNumberï¼‰ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> Company, OrderNumber <span class="keyword">FROM</span> Orders <span class="keyword">ORDER</span> <span class="keyword">BY</span> Company <span class="keyword">DESC</span>, OrderNumber <span class="keyword">ASC</span></div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>Company</th>
<th>OrderNumber</th>
</tr>
</thead>
<tbody>
<tr>
<td>W3School</td>
<td>2356</td>
</tr>
<tr>
<td>W3School</td>
<td>6953</td>
</tr>
<tr>
<td>IBM</td>
<td>3532</td>
</tr>
<tr>
<td>Apple</td>
<td>4698</td>
</tr>
</tbody>
</table>
<h4 id="SQL-INSERT-INTO-è¯­å¥"><a href="#SQL-INSERT-INTO-è¯­å¥" class="headerlink" title="SQL INSERT INTO è¯­å¥"></a>SQL INSERT INTO è¯­å¥</h4><p>INSERT INTO è¯­å¥ç”¨äºå‘è¡¨æ ¼ä¸­æ’å…¥æ–°çš„è¡Œï¼Œå®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> è¡¨åç§° <span class="keyword">VALUES</span> (å€¼<span class="number">1</span>, å€¼<span class="number">2</span>,....)</div></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name (åˆ—<span class="number">1</span>, åˆ—<span class="number">2</span>,...) <span class="keyword">VALUES</span> (å€¼<span class="number">1</span>, å€¼<span class="number">2</span>,....)</div></pre></td></tr></table></figure>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<p>Persons è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th>LastName</th>
<th>FirstName</th>
<th>Address</th>
<th>City</th>
</tr>
</thead>
<tbody>
<tr>
<td>Carter</td>
<td>Thomas</td>
<td>Changan Street</td>
<td>Beijing</td>
</tr>
</tbody>
</table>
<p>æ’å…¥ä¸€è¡Œæ•°æ®ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Persons <span class="keyword">VALUES</span> (<span class="string">'Gates'</span>, <span class="string">'Bill'</span>, <span class="string">'Xuanwumen'</span>, <span class="string">'Beijing'</span>)</div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>LastName</th>
<th>FirstName</th>
<th>Address</th>
<th>City</th>
</tr>
</thead>
<tbody>
<tr>
<td>Carter</td>
<td>Thomas</td>
<td>Changan Street</td>
<td>Beijing</td>
</tr>
<tr>
<td>Gates</td>
<td>Bill</td>
<td>Xuanwumen</td>
<td>Beijing</td>
</tr>
</tbody>
</table>
<p>åœ¨æŒ‡å®šçš„åˆ—ä¸­æ’å…¥æ•°æ®ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Persons (LastName, Address) <span class="keyword">VALUES</span> (<span class="string">'Wilson'</span>, <span class="string">'Champs-Elysees'</span>)</div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>LastName</th>
<th>FirstName</th>
<th>Address</th>
<th>City</th>
</tr>
</thead>
<tbody>
<tr>
<td>Carter</td>
<td>Thomas</td>
<td>Changan Street</td>
<td>Beijing</td>
</tr>
<tr>
<td>Gates</td>
<td>Bill</td>
<td>Xuanwumen 10</td>
<td>Beijing</td>
</tr>
<tr>
<td>Wilson</td>
<td></td>
<td>Champs-Elysees</td>
</tr>
</tbody>
</table>
<h4 id="UPDATE-è¯­å¥"><a href="#UPDATE-è¯­å¥" class="headerlink" title="UPDATE è¯­å¥"></a>UPDATE è¯­å¥</h4><p>Update è¯­å¥ç”¨äºä¿®æ”¹è¡¨ä¸­çš„æ•°æ®ï¼Œå®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">UPDATE</span> è¡¨åç§° <span class="keyword">SET</span> åˆ—åç§° = æ–°å€¼ <span class="keyword">WHERE</span> åˆ—åç§° = æŸå€¼</div></pre></td></tr></table></figure>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<p>Person è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th>LastName</th>
<th>FirstName</th>
<th>Address</th>
<th>City</th>
</tr>
</thead>
<tbody>
<tr>
<td>Gates</td>
<td>Bill</td>
<td>Xuanwumen 10</td>
<td>Beijing</td>
</tr>
<tr>
<td>Wilson</td>
<td></td>
<td>Champs-Elysees</td>
</tr>
</tbody>
</table>
<p>æ›´æ–°æŸä¸€è¡Œä¸­çš„ä¸€ä¸ªåˆ—ï¼Œä¸º â€œWilsonâ€ è¡Œæ·»åŠ  â€œfirstnameâ€ åˆ—çš„å€¼ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">UPDATE</span> Person <span class="keyword">SET</span> FirstName = <span class="string">'Fred'</span> <span class="keyword">WHERE</span> LastName = <span class="string">'Wilson'</span></div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>LastName</th>
<th>FirstName</th>
<th>Address</th>
<th>City</th>
</tr>
</thead>
<tbody>
<tr>
<td>Gates</td>
<td>Bill</td>
<td>Xuanwumen 10</td>
<td>Beijing</td>
</tr>
<tr>
<td>Wilson</td>
<td>Fred</td>
<td>Champs-Elysees</td>
</tr>
</tbody>
</table>
<p>æ›´æ–°æŸä¸€è¡Œä¸­çš„è‹¥å¹²åˆ—ï¼Œä¸º â€œWilsonâ€ è¡Œæ›´æ–°åœ°å€ï¼ˆaddressï¼‰ï¼Œå¹¶æ·»åŠ åŸå¸‚åç§°ï¼ˆcityï¼‰ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">UPDATE</span> Person <span class="keyword">SET</span> Address = <span class="string">'Zhongshan 23'</span>, City = <span class="string">'Nanjing'</span></div><div class="line"><span class="keyword">WHERE</span> LastName = <span class="string">'Wilson'</span></div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>LastName</th>
<th>FirstName</th>
<th>Address</th>
<th>City</th>
</tr>
</thead>
<tbody>
<tr>
<td>Gates</td>
<td>Bill</td>
<td>Xuanwumen 10</td>
<td>Beijing</td>
</tr>
<tr>
<td>Wilson</td>
<td>Fred</td>
<td>Zhongshan 23</td>
<td>Nanjing</td>
</tr>
</tbody>
</table>
<h4 id="SQL-DELETE-è¯­å¥"><a href="#SQL-DELETE-è¯­å¥" class="headerlink" title="SQL DELETE è¯­å¥"></a>SQL DELETE è¯­å¥</h4><p>DELETE è¯­å¥ç”¨äºåˆ é™¤è¡¨ä¸­çš„è¡Œï¼Œå®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> è¡¨åç§° <span class="keyword">WHERE</span> åˆ—åç§° = å€¼</div></pre></td></tr></table></figure>
<p>Person è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th>LastName</th>
<th>FirstName</th>
<th>Address</th>
<th>City</th>
</tr>
</thead>
<tbody>
<tr>
<td>Gates</td>
<td>Bill</td>
<td>Xuanwumen 10</td>
<td>Beijing</td>
</tr>
<tr>
<td>Wilson</td>
<td>Fred</td>
<td>Zhongshan 23</td>
<td>Nanjing</td>
</tr>
</tbody>
</table>
<p>åˆ é™¤ â€œWilsonâ€ è¡Œï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> Person <span class="keyword">WHERE</span> LastName = <span class="string">'Wilson'</span></div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>LastName</th>
<th>FirstName</th>
<th>Address</th>
<th>City</th>
</tr>
</thead>
<tbody>
<tr>
<td>Gates</td>
<td>Bill</td>
<td>Xuanwumen 10</td>
<td>Beijing</td>
</tr>
</tbody>
</table>
<p>åœ¨ä¸åˆ é™¤è¡¨çš„å‰æä¸‹åˆ é™¤æ‰€æœ‰çš„è¡Œï¼Œè¿™æ—¶è¡¨çš„ç»“æ„ã€å±æ€§å’Œç´¢å¼•éƒ½æ˜¯å®Œæ•´çš„ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> Person</div><div class="line"><span class="keyword">DELETE</span> * <span class="keyword">FROM</span> Person</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;SQL æ˜¯ç”¨äºè®¿é—®å’Œå¤„ç†æ•°æ®åº“çš„æ ‡å‡†çš„è®¡ç®—æœºè¯­è¨€ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœéœ€è¦åœ¨ç½‘ç«™æˆ– APP ä¸­åˆ›å»ºæˆ–ä½¿ç”¨æ•°æ®åº“ï¼Œéœ€è¦å…·å¤‡ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;RDBMS æ•°æ®åº“ç¨‹åºï¼ˆæ¯”å¦‚ MS Access, SQL Server, MySQLï¼‰&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨ç«¯è„šæœ¬è¯­è¨€ï¼ˆæ¯”å¦‚ PHP æˆ– ASPï¼‰&lt;/li&gt;
&lt;li&gt;SQL&lt;/li&gt;
&lt;li&gt;HTML / CSS&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;RDBMS æŒ‡çš„æ˜¯å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;p&gt;RDBMS æ˜¯ SQL çš„åŸºç¡€ï¼ŒåŒæ ·ä¹Ÿæ˜¯æ‰€æœ‰ç°ä»£æ•°æ®åº“ç³»ç»Ÿçš„åŸºç¡€ï¼Œæ¯”å¦‚ MS SQL Server, IBM DB2, Oracle, MySQL ä»¥åŠ Microsoft Accessã€‚&lt;/p&gt;
&lt;p&gt;RDBMS ä¸­çš„æ•°æ®å­˜å‚¨åœ¨è¢«ç§°ä¸ºè¡¨ï¼ˆtablesï¼‰çš„æ•°æ®åº“å¯¹è±¡ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;è¡¨æ˜¯ç›¸å…³çš„æ•°æ®é¡¹çš„é›†åˆï¼Œå®ƒç”±åˆ—å’Œè¡Œç»„æˆã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="SQL" scheme="http://yoursite.com/categories/SQL/"/>
    
    
      <category term="SQL" scheme="http://yoursite.com/tags/SQL/"/>
    
  </entry>
  
  <entry>
    <title>PHPæ•°æ®æ“ä½œ - JSON</title>
    <link href="http://yoursite.com/2016/08/13/PHP-JSON%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%86%99/"/>
    <id>http://yoursite.com/2016/08/13/PHP-JSONæ•°æ®è¯»å†™/</id>
    <published>2016-08-12T20:43:00.000Z</published>
    <updated>2016-08-24T04:42:34.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>JSON</strong>ï¼ˆ<strong>J</strong>ava<strong>S</strong>cript <strong>O</strong>bject <strong>N</strong>otationï¼‰æ˜¯ä¸€ç§æ„æƒ³è®¾è®¡ã€è½»é‡çº§çš„æ•°æ®äº¤æ¢è¯­è¨€ï¼Œä»¥æ–‡å­—ä¸ºåŸºç¡€ï¼Œä¸”æ˜“äºè®©äººé˜…è¯»ã€‚å°½ç®¡JSONæ˜¯Javascriptçš„ä¸€ä¸ªå­é›†ï¼Œä½†JSONæ˜¯ç‹¬ç«‹äºè¯­è¨€çš„æ–‡æœ¬æ ¼å¼ï¼Œå¹¶ä¸”é‡‡ç”¨äº†ç±»ä¼¼äºCè¯­è¨€å®¶æ—çš„ä¸€äº›ä¹ æƒ¯ã€‚</p>
<p>JSONç”¨äºæè¿°æ•°æ®ç»“æ„ï¼Œæœ‰ä»¥ä¸‹å½¢å¼å­˜åœ¨ã€‚</p>
<ul>
<li>å¯¹è±¡ï¼ˆobjectï¼‰ï¼šä¸€ä¸ªå¯¹è±¡ä»¥ <code>{</code> å¼€å§‹ï¼Œå¹¶ä»¥ <code>}</code> ç»“æŸã€‚ä¸€ä¸ªå¯¹è±¡åŒ…å«ä¸€ç³»åˆ—éæ’åºçš„åç§°ï¼å€¼å¯¹ï¼Œæ¯ä¸ªåç§°ï¼å€¼å¯¹ä¹‹é—´ä½¿ç”¨ <code>,</code> åˆ†åŒºã€‚</li>
<li>åç§°ï¼å€¼ï¼ˆcollectionï¼‰ï¼šåç§°å’Œå€¼ä¹‹é—´ä½¿ç”¨ <code>:</code> éš”å¼€ï¼Œä¸€èˆ¬çš„å½¢å¼æ˜¯ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;name:value&#125;</div></pre></td></tr></table></figure>
<p>ä¸€ä¸ªåç§°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼› ä¸€ä¸ªå€¼å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¸€ä¸ªæ•°å€¼ï¼Œä¸€ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªå¸ƒå°”å€¼ï¼Œä¸€ä¸ªæœ‰åºåˆ—è¡¨ï¼Œæˆ–è€…ä¸€ä¸ªnullå€¼ã€‚</p>
<ul>
<li>å€¼çš„æœ‰åºåˆ—è¡¨ï¼ˆArrayï¼‰ï¼šä¸€ä¸ªæˆ–è€…å¤šä¸ªå€¼ç”¨â€œ,â€åˆ†åŒºåï¼Œä½¿ç”¨â€œ[â€ï¼Œâ€œ]â€æ‹¬èµ·æ¥å°±å½¢æˆäº†è¿™æ ·çš„åˆ—è¡¨ï¼Œå½¢å¦‚ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[collection, collection]</div></pre></td></tr></table></figure>
<ul>
<li>å­—ç¬¦ä¸²ï¼šä»¥â€â€æ‹¬èµ·æ¥çš„ä¸€ä¸²å­—ç¬¦ã€‚</li>
<li>æ•°å€¼ï¼šä¸€ç³»åˆ—0-9çš„æ•°å­—ç»„åˆï¼Œå¯ä»¥ä¸ºè´Ÿæ•°æˆ–è€…å°æ•°ã€‚è¿˜å¯ä»¥ç”¨â€œeâ€æˆ–è€…â€œEâ€è¡¨ç¤ºä¸ºæŒ‡æ•°å½¢å¼ã€‚</li>
<li>å¸ƒå°”å€¼ï¼šè¡¨ç¤ºä¸ºtrueæˆ–è€…falseã€‚</li>
</ul>
<a id="more"></a>
<p>JSONä¸XMLæœ€å¤§çš„ä¸åŒåœ¨äºXMLæ˜¯ä¸€ä¸ªå®Œæ•´çš„æ ‡è®°è¯­è¨€ï¼Œè€ŒJSONä¸æ˜¯ã€‚è¿™ä½¿å¾—XMLåœ¨ç¨‹åºåˆ¤è¯»ä¸Šéœ€è¦æ¯”è¾ƒå¤šçš„åŠŸå¤«ã€‚XMLåœ¨æ•°æ®å­˜å‚¨ï¼Œæ‰©å±•åŠé«˜çº§æ£€ç´¢æ–¹é¢å…·å¤‡å¯¹JSONçš„ä¼˜åŠ¿ã€‚</p>
<p>è€ŒJSONåˆ™ç”±äºæ¯”XMLæ›´åŠ å°å·§ï¼Œä»¥åŠæµè§ˆå™¨çš„å†…å»ºå¿«é€Ÿè§£ææ”¯æŒï¼Œä½¿å¾—å…¶æ›´é€‚ç”¨äºç½‘ç»œæ•°æ®ä¼ è¾“é¢†åŸŸã€‚ä½†æ˜¯å½“JSONæ•°æ®å¾ˆé•¿çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šé™·å…¥ç¹çå¤æ‚çš„æ•°æ®èŠ‚ç‚¹æŸ¥æ‰¾ä¸­ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡<a href="http://www.jsoneditoronline.org" target="_blank" rel="external">JSONåœ¨çº¿ç¼–è¾‘</a>å¿«é€Ÿå®šä½èŠ‚ç‚¹ï¼Œå°†æ•°æ®ç»“æ„åŒ–ã€‚</p>
<h4 id="PHPåˆ›å»ºJSON"><a href="#PHPåˆ›å»ºJSON" class="headerlink" title="PHPåˆ›å»ºJSON"></a>PHPåˆ›å»ºJSON</h4><p>PHPçš„æ•°ç»„å’Œå­—å…¸å¯ä»¥é€šè¿‡ <code>json_encode</code> è½¬ç ä¸ºJSONæ•°æ®ï¼ŒåŒJSONçš„æ•°æ®ç»“æ„ä¸€æ ·ï¼ŒPHPçš„æ•°ç»„å’Œå­—å…¸ä¹Ÿæ”¯æŒäº’ç›¸åµŒå¥—ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$dic = array(&apos;h&apos;=&gt;&apos;Hello&apos;, &apos;w&apos;=&gt;&apos;World&apos;);</div><div class="line">$arr = [1, 2, 5, 8, &apos;Hello&apos;, &apos;Geek&apos;, $dic];</div><div class="line">$json = json_encode($arr);</div><div class="line">echo $json.&apos;&lt;br&gt;&apos;;</div></pre></td></tr></table></figure>
<h4 id="PHPè§£æJSON"><a href="#PHPè§£æJSON" class="headerlink" title="PHPè§£æJSON"></a>PHPè§£æJSON</h4><p>PHPçš„å‡½æ•° <code>json_decode</code> å¯ä»¥å¿«é€Ÿçš„å°†JOSNæ ¼å¼çš„æ•°æ®è½¬æ¢ä¸ºæ•°ç»„æˆ–å¯¹è±¡ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$jsonStr = &apos;&#123;&quot;h&quot;:&quot;Hello&quot;, &quot;w&quot;:&quot;World&quot;, &quot;arr&quot;:[1, 2, 3]&#125;&apos;;</div><div class="line">$object = json_decode($jsonStr);</div><div class="line">$array = json_decode($jsonStr, true);</div><div class="line">var_dump($object);</div><div class="line">var_dump($array);</div></pre></td></tr></table></figure>
<p>è€Œè·å–JOSNä¸­å•ç‹¬çš„å…ƒç´ å’Œå¯¹è±¡ï¼Œå’Œç±»çš„å–å€¼ä¸æ•°ç»„å–å€¼æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$jsonStr = &apos;&#123;&quot;h&quot;:&quot;Hello&quot;, &quot;w&quot;:&quot;World&quot;, &quot;arr&quot;:[1, 2, 3]&#125;&apos;;</div><div class="line">$object = json_decode($jsonStr);</div><div class="line">$array = json_decode($jsonStr, true);</div><div class="line"></div><div class="line">echo $object-&gt;h.&apos;&lt;br&gt;&apos;;</div><div class="line">echo $array[&apos;h&apos;].&apos;&lt;br&gt;&apos;;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;JSON&lt;/strong&gt;ï¼ˆ&lt;strong&gt;J&lt;/strong&gt;ava&lt;strong&gt;S&lt;/strong&gt;cript &lt;strong&gt;O&lt;/strong&gt;bject &lt;strong&gt;N&lt;/strong&gt;otationï¼‰æ˜¯ä¸€ç§æ„æƒ³è®¾è®¡ã€è½»é‡çº§çš„æ•°æ®äº¤æ¢è¯­è¨€ï¼Œä»¥æ–‡å­—ä¸ºåŸºç¡€ï¼Œä¸”æ˜“äºè®©äººé˜…è¯»ã€‚å°½ç®¡JSONæ˜¯Javascriptçš„ä¸€ä¸ªå­é›†ï¼Œä½†JSONæ˜¯ç‹¬ç«‹äºè¯­è¨€çš„æ–‡æœ¬æ ¼å¼ï¼Œå¹¶ä¸”é‡‡ç”¨äº†ç±»ä¼¼äºCè¯­è¨€å®¶æ—çš„ä¸€äº›ä¹ æƒ¯ã€‚&lt;/p&gt;
&lt;p&gt;JSONç”¨äºæè¿°æ•°æ®ç»“æ„ï¼Œæœ‰ä»¥ä¸‹å½¢å¼å­˜åœ¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹è±¡ï¼ˆobjectï¼‰ï¼šä¸€ä¸ªå¯¹è±¡ä»¥ &lt;code&gt;{&lt;/code&gt; å¼€å§‹ï¼Œå¹¶ä»¥ &lt;code&gt;}&lt;/code&gt; ç»“æŸã€‚ä¸€ä¸ªå¯¹è±¡åŒ…å«ä¸€ç³»åˆ—éæ’åºçš„åç§°ï¼å€¼å¯¹ï¼Œæ¯ä¸ªåç§°ï¼å€¼å¯¹ä¹‹é—´ä½¿ç”¨ &lt;code&gt;,&lt;/code&gt; åˆ†åŒºã€‚&lt;/li&gt;
&lt;li&gt;åç§°ï¼å€¼ï¼ˆcollectionï¼‰ï¼šåç§°å’Œå€¼ä¹‹é—´ä½¿ç”¨ &lt;code&gt;:&lt;/code&gt; éš”å¼€ï¼Œä¸€èˆ¬çš„å½¢å¼æ˜¯ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;name:value&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸€ä¸ªåç§°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼› ä¸€ä¸ªå€¼å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¸€ä¸ªæ•°å€¼ï¼Œä¸€ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªå¸ƒå°”å€¼ï¼Œä¸€ä¸ªæœ‰åºåˆ—è¡¨ï¼Œæˆ–è€…ä¸€ä¸ªnullå€¼ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å€¼çš„æœ‰åºåˆ—è¡¨ï¼ˆArrayï¼‰ï¼šä¸€ä¸ªæˆ–è€…å¤šä¸ªå€¼ç”¨â€œ,â€åˆ†åŒºåï¼Œä½¿ç”¨â€œ[â€ï¼Œâ€œ]â€æ‹¬èµ·æ¥å°±å½¢æˆäº†è¿™æ ·çš„åˆ—è¡¨ï¼Œå½¢å¦‚ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[collection, collection]&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;å­—ç¬¦ä¸²ï¼šä»¥â€â€æ‹¬èµ·æ¥çš„ä¸€ä¸²å­—ç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;æ•°å€¼ï¼šä¸€ç³»åˆ—0-9çš„æ•°å­—ç»„åˆï¼Œå¯ä»¥ä¸ºè´Ÿæ•°æˆ–è€…å°æ•°ã€‚è¿˜å¯ä»¥ç”¨â€œeâ€æˆ–è€…â€œEâ€è¡¨ç¤ºä¸ºæŒ‡æ•°å½¢å¼ã€‚&lt;/li&gt;
&lt;li&gt;å¸ƒå°”å€¼ï¼šè¡¨ç¤ºä¸ºtrueæˆ–è€…falseã€‚&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="PHP" scheme="http://yoursite.com/categories/PHP/"/>
    
    
      <category term="PHP" scheme="http://yoursite.com/tags/PHP/"/>
    
  </entry>
  
</feed>
